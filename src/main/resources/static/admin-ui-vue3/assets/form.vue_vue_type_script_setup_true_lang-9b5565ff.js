import{_ as e}from"./XModal.vue_vue_type_script_setup_true_lang-c47b87cf.js";import{_ as a}from"./XButton-39866472.js";import{_ as t}from"./Descriptions-8db90f03.js";import{g as s,c as l,u as o}from"./index-0886bcf2.js";import{u as i}from"./useI18n-56d4bc42.js";import{r}from"./formRules-a3380b28.js";import{D as m}from"./dict-3e42505d.js";import{u}from"./useVxeCrudSchemas-8bec068b.js";import{A as c,d as n,r as d,C as f,o as p,a as v,w as y,f as _,h,l as g,M as S}from"./runtime-core.esm-bundler-ccc21fcd.js";import{u as j}from"./useMessage-5e709b20.js";const{t:T}=i(),k=c({name:[r],code:[r],sort:[r]}),M=c({primaryKey:"id",primaryType:"id",primaryTitle:"岗位编号",action:!0,columns:[{title:"岗位名称",field:"name",isSearch:!0},{title:"岗位编码",field:"code",isSearch:!0},{title:"岗位顺序",field:"sort",form:{component:"InputNumber"}},{title:T("common.status"),field:"status",dictType:m.COMMON_STATUS,dictClass:"number",isSearch:!0},{title:"备注",field:"remark",isTable:!1},{title:T("common.createTime"),field:"createTime",formatter:"formatDate",isForm:!1,table:{width:180}}]}),{allSchemas:w}=u(M),C=n({__name:"form",emits:["success"],setup(r,{expose:m,emit:u}){const{t:c}=i(),n=j(),T=d(!1),M=d(""),C=d(!1),b=d(""),V=d(!1),x=d(),D=d();m({openModal:async(e,a)=>{var t;if(T.value=!0,C.value=!0,M.value=c("action."+e),b.value=e,a){const l=await s(a);"update"===e?null==(t=_(x))||t.setValues(l):"detail"===e&&(D.value=l)}C.value=!1}});return(s,i)=>{const r=f("Form",!0),m=t,d=a,j=e;return p(),v(j,{title:_(M),loading:_(C),modelValue:_(T),"onUpdate:modelValue":i[2]||(i[2]=e=>S(T)?T.value=e:null)},{footer:y((()=>[["create","update"].includes(_(b))?(p(),v(d,{key:0,type:"primary",title:_(c)("action.save"),loading:_(V),onClick:i[0]||(i[0]=e=>(async()=>{var e,a;const t=null==(e=_(x))?void 0:e.getElFormRef();if(!t)return;if(await t.validate()){V.value=!0;try{const e=null==(a=_(x))?void 0:a.formModel;"create"===b.value?(await l(e),n.success(c("common.createSuccess"))):(await o(e),n.success(c("common.updateSuccess"))),T.value=!1,u("success")}finally{V.value=!1}}})())},null,8,["title","loading"])):h("",!0),g(d,{loading:_(V),title:_(c)("dialog.close"),onClick:i[1]||(i[1]=e=>T.value=!1)},null,8,["loading","title"])])),default:y((()=>[["create","update"].includes(_(b))?(p(),v(r,{key:0,ref_key:"formRef",ref:x,schema:_(w).formSchema,rules:_(k)},null,8,["schema","rules"])):h("",!0),"detail"===_(b)?(p(),v(m,{key:1,schema:_(w).detailSchema,data:_(D)},null,8,["schema","data"])):h("",!0)])),_:1},8,["title","loading","modelValue"])}}});export{C as _,w as a};
