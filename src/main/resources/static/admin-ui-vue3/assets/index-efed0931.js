import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-63555901.js";import{_ as t}from"./XModal.vue_vue_type_script_setup_true_lang-c47b87cf.js";import{_ as o}from"./XTable.vue_vue_type_style_index_0_lang-9c560634.js";import"./base-085523fd.js";/* empty css               */import{_ as s}from"./DictTag.vue_vue_type_script_lang-a5ff2643.js";import{_ as l}from"./XTextButton-ab77381a.js";import{g as a,a as r}from"./index-6d220aa9.js";import{u as i}from"./useVxeCrudSchemas-8bec068b.js";import{A as u,d as p,r as m,C as n,Q as d,o as f,a as _,w as j,l as c,f as y,k as v,t as g,h as x,b,M as h,v as C}from"./runtime-core.esm-bundler-ccc21fcd.js";import{b as k}from"./formCreate-a3356cdc.js";import{D as w}from"./dict-3e42505d.js";import{u as T,b as V}from"./vue-router-0864a153.js";import{u as S}from"./useXTable-bf420a68.js";import{E as D}from"./index-795de047.js";import"./el-card-d8ab0074.js";import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./Icon.vue_vue_type_script_setup_true_lang-4448c023.js";import"./propTypes-5cfdbdab.js";import"./index-7486e100.js";import"./aria-8fadfbe9.js";import"./focus-trap-f53979c5.js";import"./runtime-dom.esm-bundler-daa7e741.js";import"./index-4665dced.js";import"./index-7a379d2e.js";/* empty css                     */import"./index-be3181b1.js";import"./el-notification-c7d5f4ea.js";import"./el-button-6b012e5e.js";import"./index-c2caee16.js";import"./is-a7957d81.js";import"./useI18n-56d4bc42.js";import"./useCache-d48cf6c5.js";import"./app-41ac77cd.js";import"./index-cf52a0ab.js";import"./el-message-7ddf9388.js";import"./download-20922b56.js";import"./useMessage-5e709b20.js";import"./color-a8b4eb58.js";import"./XTextButton.vue_vue_type_style_index_0_scoped_0fcea4df_lang-41ab76b9.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./index-a7ef0ded.js";import"./auth-2fa258a0.js";import"./cloneDeep-8298b498.js";import"./_flatRest-ac7abae6.js";import"./index-6f87c872.js";const I=u({primaryKey:"id",primaryType:null,action:!0,columns:[{title:"定义编号",field:"id",table:{width:360}},{title:"定义名称",field:"name",table:{slots:{default:"name_default"}}},{title:"定义分类",field:"category",table:{slots:{default:"category_default"}}},{title:"表单信息",field:"formId",table:{slots:{default:"formId_default"}}},{title:"流程版本",field:"version",table:{slots:{default:"version_default"}}},{title:"激活状态",field:"suspensionState",table:{slots:{default:"suspensionState_default"}}},{title:"部署时间",field:"deploymentTime",isForm:!1,formatter:"formatDate"}]}),{allSchemas:B}=i(I),M=p({__name:"index",setup(i){const p=m(null),I=m(!1),M=m({prefix:"flowable"}),R=T(),{query:X}=V(),q=u({key:X.key}),[A]=S({allSchemas:B,getListApi:a,params:q}),P=m(!1),E=m({rule:[],option:{}}),L=async e=>{10==e.formType?(k(E,e.formConf,e.formFields),P.value=!0):await R.push({path:e.formCustomCreatePath})};return(a,i)=>{const u=l,m=s,k=D,T=o,V=n("form-create"),S=t,B=n("my-process-viewer"),X=e,q=d("hasPermi");return f(),_(X,null,{default:j((()=>[c(T,{onRegister:y(A)},{name_default:j((({row:e})=>[c(u,{title:e.name,onClick:t=>(e=>{r(e).then((e=>{p.value=e,I.value=!0}))})(e.id)},null,8,["title","onClick"])])),category_default:j((({row:e})=>[c(m,{type:y(w).BPM_MODEL_CATEGORY,value:Number(null==e?void 0:e.category)},null,8,["type","value"])])),formId_default:j((({row:e})=>[10===e.formType?(f(),_(u,{key:0,title:e.formName,onClick:t=>L(e)},null,8,["title","onClick"])):(f(),_(u,{key:1,title:e.formCustomCreatePath,onClick:t=>L(e)},null,8,["title","onClick"]))])),version_default:j((({row:e})=>[c(k,null,{default:j((()=>[v("v"+g(e.version),1)])),_:2},1024)])),suspensionState_default:j((({row:e})=>[1===e.suspensionState?(f(),_(k,{key:0,type:"success"},{default:j((()=>[v("激活")])),_:1})):x("",!0),2===e.suspensionState?(f(),_(k,{key:1,type:"warning"},{default:j((()=>[v("挂起")])),_:1})):x("",!0)])),actionbtns_default:j((({row:e})=>[b(c(u,{preIcon:"ep:user",title:"分配规则",onClick:t=>(e=>{R.push({name:"BpmTaskAssignRuleList",query:{processDefinitionId:e.id}})})(e)},null,8,["onClick"]),[[q,["bpm:task-assign-rule:query"]]])])),_:1},8,["onRegister"]),c(S,{modelValue:y(P),"onUpdate:modelValue":i[0]||(i[0]=e=>h(P)?P.value=e:null),width:"800",title:"表单详情","show-footer":!1},{default:j((()=>[y(P)?(f(),_(V,{key:0,rule:y(E).rule,option:y(E).option},null,8,["rule","option"])):x("",!0)])),_:1},8,["modelValue"]),c(S,{title:"流程图",modelValue:y(I),"onUpdate:modelValue":i[2]||(i[2]=e=>h(I)?I.value=e:null),width:"80%",height:"90%"},{default:j((()=>[c(B,C({key:"designer",modelValue:y(p),"onUpdate:modelValue":i[1]||(i[1]=e=>h(p)?p.value=e:null),value:y(p)},y(M),{prefix:y(M).prefix}),null,16,["modelValue","value","prefix"])])),_:1},8,["modelValue"])])),_:1})}}});export{M as default};
