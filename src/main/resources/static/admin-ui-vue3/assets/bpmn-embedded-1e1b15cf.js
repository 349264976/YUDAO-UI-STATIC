import{_ as OA,__tla as LA}from"./Dialog.vue_vue_type_style_index_0_lang-2d188c85.js";import{ag as A0,aU as k0,bX as jA,bx as P0,by as M0,aW as VA,r as W,db as R0,af as ue,bB as Ra,ah as N0,b as cn,d as pe,o as nt,c as Nt,al as sl,V as ao,a as N,aj as I0,dc as D0,bg as yr,g as It,P as FA,aN as $A,j as dt,t as Uh,i as M,w as j,cn as zA,aT as GA,B as Na,a3 as cl,dd as UA,an as HA,ao as qA,as as so,aq as B0,de as WA,df as KA,A as Ia,aQ as jn,O as XA,F as ln,q as Ct,a1 as kt,x as un,bR as YA,bS as co,b6 as JA,dg as ZA,H as lo,f as QA,c5 as jt,T as wn,D as Sn,I as oi,a9 as Fe,a7 as O0,M as uo,C as po,k as ho,cd as Da,am as tk,bC as ek,ay as nk,aG as L0,_ as ll,J as ul,K as pl,m as Hh,au as ik,__tla as rk}from"./index-0f589822.js";import{_ as ok,__tla as ak}from"./XTextButton-f2bb1cf5.js";import{_ as mo,__tla as sk}from"./XButton-ceeece05.js";import{E as qh,__tla as ck}from"./el-link-932c772d.js";import{u as j0,__tla as lk}from"./useMessage-45ab706e.js";import{E as V0,__tla as uk}from"./el-drawer-6328bc2e.js";import{a as F0,D as $0,__tla as pk}from"./dict-f9a1a53b.js";import{f as fo,__tla as hk}from"./formatTime-58783104.js";let Ba,Oa,A,z0,Ne,Wh,Mt,Kh,ai,La,wt,ja,dk=Promise.all([(()=>{try{return LA}catch{}})(),(()=>{try{return rk}catch{}})(),(()=>{try{return ak}catch{}})(),(()=>{try{return sk}catch{}})(),(()=>{try{return ck}catch{}})(),(()=>{try{return lk}catch{}})(),(()=>{try{return uk}catch{}})(),(()=>{try{return pk}catch{}})(),(()=>{try{return hk}catch{}})()]).then(async()=>{const Xh=t=>typeof VA(t),G0=A0({accordion:Boolean,modelValue:{type:k0([Array,String,Number]),default:()=>jA([])}}),U0={[P0]:Xh,[M0]:Xh},Yh=Symbol("collapseContextKey"),H0=pe({name:"ElCollapse"}),q0=pe({...H0,props:G0,emits:U0,setup(t,{expose:e,emit:n}){const i=t,{activeNames:r,setActiveNames:o}=((c,l)=>{const u=W(R0(c.modelValue)),p=d=>{u.value=d;const v=c.accordion?u.value[0]:u.value;l(P0,v),l(M0,v)};return ue(()=>c.modelValue,()=>u.value=R0(c.modelValue),{deep:!0}),Ra(Yh,{activeNames:u,handleItemClick:d=>{if(c.accordion)p([u.value[0]===d?"":d]);else{const v=[...u.value],f=v.indexOf(d);f>-1?v.splice(f,1):v.push(d),p(v)}}}),{activeNames:u,setActiveNames:p}})(i,n),{rootKls:a}=(()=>{const c=N0("collapse");return{rootKls:cn(()=>c.b())}})();return e({activeNames:r,setActiveNames:o}),(c,l)=>(nt(),Nt("div",{class:ao(N(a)),role:"tablist","aria-multiselectable":"true"},[sl(c.$slots,"default")],2))}});var W0=I0(q0,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const K0=A0({title:{type:String,default:""},name:{type:k0([String,Number]),default:()=>D0()},disabled:Boolean}),X0=["aria-expanded","aria-controls","aria-describedby"],Y0=["id","tabindex"],J0=["id","aria-hidden","aria-labelledby"],Z0=pe({name:"ElCollapseItem"}),Q0=pe({...Z0,props:K0,setup(t,{expose:e}){const n=t,{focusing:i,id:r,isActive:o,handleFocus:a,handleHeaderClick:c,handleEnterClick:l}=(g=>{const w=yr(Yh),x=W(!1),S=W(!1),C=W(D0()),I=cn(()=>w==null?void 0:w.activeNames.value.includes(g.name));return{focusing:x,id:C,isActive:I,handleFocus:()=>{setTimeout(()=>{S.value?S.value=!1:x.value=!0},50)},handleHeaderClick:()=>{g.disabled||(w==null||w.handleItemClick(g.name),x.value=!1,S.value=!0)},handleEnterClick:()=>{w==null||w.handleItemClick(g.name)}}})(n),{arrowKls:u,headKls:p,rootKls:d,itemWrapperKls:v,itemContentKls:f,scopedContentId:y,scopedHeadId:b}=((g,{focusing:w,isActive:x,id:S})=>{const C=N0("collapse"),I=cn(()=>[C.b("item"),C.is("active",N(x)),C.is("disabled",g.disabled)]),s=cn(()=>[C.be("item","header"),C.is("active",N(x)),{focusing:N(w)&&!g.disabled}]);return{arrowKls:cn(()=>[C.be("item","arrow"),C.is("active",N(x))]),headKls:s,rootKls:I,itemWrapperKls:cn(()=>C.be("item","wrap")),itemContentKls:cn(()=>C.be("item","content")),scopedContentId:cn(()=>C.b(`content-${N(S)}`)),scopedHeadId:cn(()=>C.b(`head-${N(S)}`))}})(n,{focusing:i,isActive:o,id:r});return e({isActive:o}),(g,w)=>(nt(),Nt("div",{class:ao(N(d))},[It("div",{role:"tab","aria-expanded":N(o),"aria-controls":N(y),"aria-describedby":N(y)},[It("div",{id:N(b),class:ao(N(p)),role:"button",tabindex:g.disabled?-1:0,onClick:w[0]||(w[0]=(...x)=>N(c)&&N(c)(...x)),onKeypress:w[1]||(w[1]=FA($A((...x)=>N(l)&&N(l)(...x),["stop","prevent"]),["space","enter"])),onFocus:w[2]||(w[2]=(...x)=>N(a)&&N(a)(...x)),onBlur:w[3]||(w[3]=x=>i.value=!1)},[sl(g.$slots,"title",{},()=>[dt(Uh(g.title),1)]),M(N(GA),{class:ao(N(u))},{default:j(()=>[M(N(zA))]),_:1},8,["class"])],42,Y0)],8,X0),M(N(UA),null,{default:j(()=>[Na(It("div",{id:N(y),class:ao(N(v)),role:"tabpanel","aria-hidden":!N(o),"aria-labelledby":N(b)},[It("div",{class:ao(N(f))},[sl(g.$slots,"default")],2)],10,J0),[[cl,N(o)]])]),_:3})],2))}});var Jh=I0(Q0,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const tx=HA(W0,{CollapseItem:Jh}),ex=qA(Jh);var hl={exports:{}};typeof Object.create=="function"?hl.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:hl.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}};const it=so(hl.exports);var Zh,dl,nx=(Zh=function(t){var e=t.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),o=2;r===1/0;o*=2)r=Math.log(Math.pow(2,n/o))/Math.log(i)*o;var a=r-Math.floor(r),c="";for(o=0;o<Math.floor(r);o++)c=Math.floor(Math.random()*i).toString(i)+c;if(a){var l=Math.pow(i,a);c=Math.floor(Math.random()*l).toString(i)+c}var u=parseInt(c,i);return u!==1/0&&u>=Math.pow(2,n)?e(n,i):c};e.rack=function(n,i,r){var o=function(c){var l=0;do{if(l++>10){if(!r)throw new Error("too many ID collisions, use more bits");n+=r}var u=e(n,i)}while(Object.hasOwnProperty.call(a,u));return a[u]=c,u},a=o.hats={};return o.get=function(c){return o.hats[c]},o.set=function(c,l){return o.hats[c]=l,o},o.bits=n||128,o.base=i||16,o}},Zh(dl={exports:{}},dl.exports),dl.exports);function Cn(t){if(!(this instanceof Cn))return new Cn(t);t=t||[128,36,1],this._seed=t.length?nx.rack(t[0],t[1],t[2]):t}function vo(t){return Array.prototype.concat.apply([],t)}Cn.prototype.next=function(t){return this._seed(t||!0)},Cn.prototype.nextPrefixed=function(t,e){var n;do n=t+this.next(!0);while(this.assigned(n));return this.claim(n,e),n},Cn.prototype.claim=function(t,e){this._seed.set(t,e||!0)},Cn.prototype.assigned=function(t){return this._seed.get(t)||!1},Cn.prototype.unclaim=function(t){delete this._seed.hats[t]},Cn.prototype.clear=function(){var t,e=this._seed.hats;for(t in e)this.unclaim(t)};var yo=Object.prototype.toString,ix=Object.prototype.hasOwnProperty;function Vn(t){return t===void 0}function qe(t){return t!==void 0}function go(t){return t==null}function gt(t){return yo.call(t)==="[object Array]"}function te(t){return yo.call(t)==="[object Object]"}function pt(t){return yo.call(t)==="[object Number]"}function ve(t){var e=yo.call(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"||e==="[object Proxy]"}function Ie(t){return yo.call(t)==="[object String]"}function Qh(t){if(!gt(t))throw new Error("must supply array")}function Tn(t,e){return ix.call(t,e)}function Pt(t,e){var n;return e=yl(e),L(t,function(i,r){if(e(i,r))return n=i,!1}),n}function ml(t,e){e=yl(e);var n=gt(t)?-1:void 0;return L(t,function(i,r){if(e(i,r))return n=r,!1}),n}function mt(t,e){var n=[];return L(t,function(i,r){e(i,r)&&n.push(i)}),n}function L(t,e){var n;if(!Vn(t)){var i=gt(t)?ox:rx;for(var r in t)if(Tn(t,r)&&e(n=t[r],i(r))===!1)return n}}function td(t,e){return Vn(t)?[]:(Qh(t),e=yl(e),t.filter(function(n,i){return!e(n,i)}))}function De(t,e,n){return L(t,function(i,r){n=e(n,i,r)}),n}function ji(t,e){return!!De(t,function(n,i,r){return n&&e(i,r)},!0)}function si(t,e){return!!Pt(t,e)}function le(t,e){var n=[];return L(t,function(i,r){n.push(e(i,r))}),n}function bo(t){return t&&Object.keys(t)||[]}function gr(t){return bo(t).length}function Va(t){return le(t,function(e){return e})}function Vi(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=vl(e),L(t,function(i){var r=e(i)||"_",o=n[r];o||(o=n[r]=[]),o.push(i)}),n}function fl(t){t=vl(t);for(var e={},n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return L(i,function(o){return Vi(o,t,e)}),le(e,function(o,a){return o[0]})}var ed=fl;function We(t,e){e=vl(e);var n=[];return L(t,function(i,r){for(var o=e(i,r),a={d:o,v:i},c=0;c<n.length;c++)if(o<n[c].d)return void n.splice(c,0,a);n.push(a)}),le(n,function(i){return i.v})}function Ke(t){return function(e){return ji(t,function(n,i){return e[i]===n})}}function vl(t){return ve(t)?t:function(e){return e[t]}}function yl(t){return ve(t)?t:function(e){return e===t}}function rx(t){return t}function ox(t){return Number(t)}function gl(t,e){var n,i,r,o;function a(p){var d=Date.now(),v=p?0:o+e-d;if(v>0)return c(v);t.apply(r,i),l()}function c(p){n=setTimeout(a,p)}function l(){n&&clearTimeout(n),n=o=i=r=void 0}function u(){o=Date.now();for(var p=arguments.length,d=new Array(p),v=0;v<p;v++)d[v]=arguments[v];i=d,r=this,n||c(e)}return u.flush=function(){n&&a(!0),l()},u.cancel=l,u}function Se(t,e){return t.bind(e)}function bl(t){return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bl(t)}function xl(){return xl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xl.apply(this,arguments)}function $(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return xl.apply(void 0,[t].concat(n))}function Xe(t,e){var n={},i=Object(t);return L(e,function(r){r in i&&(n[r]=t[r])}),n}function Fn(t,e){var n={};return L(Object(t),function(i,r){e.indexOf(r)===-1&&(n[r]=i)}),n}const ax=Object.freeze(Object.defineProperty({__proto__:null,assign:$,bind:Se,debounce:gl,ensureArray:Qh,every:ji,filter:mt,find:Pt,findIndex:ml,flatten:vo,forEach:L,get:function(t,e,n){var i=t;return L(e,function(r){if(go(i))return i=void 0,!1;i=i[r]}),Vn(i)?n:i},groupBy:Vi,has:Tn,isArray:gt,isDefined:qe,isFunction:ve,isNil:go,isNumber:pt,isObject:te,isString:Ie,isUndefined:Vn,keys:bo,map:le,matchPattern:Ke,merge:function t(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.length&&L(i,function(o){o&&te(o)&&L(o,function(a,c){if(c!=="__proto__"){var l=e[c];te(a)?(te(l)||(l={}),e[c]=t(l,a)):e[c]=a}})}),e},omit:Fn,pick:Xe,reduce:De,set:function(t,e,n){var i=t;return L(e,function(r,o){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+bl(r)+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");var a=e[o+1],c=i[r];qe(a)&&go(c)&&(c=i[r]=isNaN(+a)?{}:[]),Vn(a)?Vn(n)?delete i[r]:i[r]=n:i=c}),t},size:gr,some:si,sortBy:We,throttle:function(t,e){var n=!1;return function(){n||(t.apply(void 0,arguments),n=!0,setTimeout(function(){n=!1},e))}},unionBy:ed,uniqueBy:fl,values:Va,without:td},Symbol.toStringTag,{value:"Module"}));function $e(t,e,n){return arguments.length==2?t.getAttribute(e):n===null?t.removeAttribute(e):(t.setAttribute(e,n),t)}var sx=[].indexOf,El=function(t,e){if(sx)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1},cx=/\s+/,lx=Object.prototype.toString;function oe(t){return new ci(t)}function ci(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}function Fa(t){for(var e;t.childNodes.length;)e=t.childNodes[0],t.removeChild(e);return t}ci.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~El(e,t)||e.push(t),this.el.className=e.join(" "),this},ci.prototype.remove=function(t){if(lx.call(t)=="[object RegExp]")return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=El(e,t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},ci.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},ci.prototype.toggle=function(t,e){return this.list?(e!==void 0?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(e!==void 0?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},ci.prototype.array=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(cx);return t[0]===""&&t.shift(),t},ci.prototype.has=ci.prototype.contains=function(t){return this.list?this.list.contains(t):!!~El(this.array(),t)};var br=typeof Element<"u"?Element.prototype:{},nd=br.matches||br.matchesSelector||br.webkitMatchesSelector||br.mozMatchesSelector||br.msMatchesSelector||br.oMatchesSelector,$a=function(t,e){if(!t||t.nodeType!==1)return!1;if(nd)return nd.call(t,e);for(var n=t.parentNode.querySelectorAll(e),i=0;i<n.length;i++)if(n[i]==t)return!0;return!1};function Fi(t,e,n){for(var i=n?t:t.parentNode;i&&i.nodeType!==document.DOCUMENT_NODE&&i.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if($a(i,e))return i;i=i.parentNode}return $a(i,e)?i:null}var id=window.addEventListener?"addEventListener":"attachEvent",ux=window.removeEventListener?"removeEventListener":"detachEvent",rd=id!=="addEventListener"?"on":"",st={bind:function(t,e,n,i){return t[id](rd+e,n,i||!1),n},unbind:function(t,e,n,i){return t[ux](rd+e,n,i||!1),n}},od=["focus","blur"],_l,ze={bind:function(t,e,n,i,r){return od.indexOf(n)!==-1&&(r=!0),st.bind(t,n,function(o){var a=o.target||o.srcElement;o.delegateTarget=Fi(a,e,!0),o.delegateTarget&&i.call(t,o)},r)},unbind:function(t,e,n,i){return od.indexOf(e)!==-1&&(i=!0),st.unbind(t,e,n,i)}},Vt=function(t,e){if(typeof t!="string")throw new TypeError("String expected");e||(e=document);var n=/<([\w:]+)/.exec(t);if(!n)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body")return(r=e.createElement("html")).innerHTML=t,r.removeChild(r.lastChild);var r,o=ae[i]||ae._default,a=o[0],c=o[1],l=o[2];for((r=e.createElement("div")).innerHTML=c+t+l;a--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(var u=e.createDocumentFragment();r.firstChild;)u.appendChild(r.removeChild(r.firstChild));return u},ad=!1;typeof document<"u"&&((_l=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',ad=!_l.getElementsByTagName("link").length,_l=void 0);var ae={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:ad?[1,"X<div>","</div>"]:[0,"",""]};function Wt(t,e){return(e=e||document).querySelector(t)}function wl(t,e){return(e=e||document).querySelectorAll(t)}function An(t){t.parentNode&&t.parentNode.removeChild(t)}function sd(t,e){return e.appendChild(function(n,i){if(n.ownerDocument!==i.ownerDocument)try{return i.ownerDocument.importNode(n,!0)}catch{}return n}(t,e))}function lt(t,e){return sd(e,t),t}ae.td=ae.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],ae.option=ae.optgroup=[1,'<select multiple="multiple">',"</select>"],ae.thead=ae.tbody=ae.colgroup=ae.caption=ae.tfoot=[1,"<table>","</table>"],ae.polyline=ae.ellipse=ae.polygon=ae.circle=ae.text=ae.line=ae.path=ae.rect=ae.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Sl=2,cd={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":Sl,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":Sl,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function ld(t,e,n){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=cd[i];r?(r===Sl&&typeof n=="number"&&(n=String(n)+"px"),t.style[i]=n):t.setAttributeNS(null,e,n)}function K(t,e,n){if(typeof e=="string"){if(n===void 0)return function(i,r){return cd[r]?i.style[r]:i.getAttributeNS(null,r)}(t,e);ld(t,e,n)}else(function(i,r){var o,a,c=Object.keys(r);for(o=0;a=c[o];o++)ld(i,a,r[a])})(t,e);return t}function Cl(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}var px=/\s+/,hx=Object.prototype.toString;function Tl(t){return t!==void 0}function bt(t){return new li(t)}function li(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}function ee(t){var e=t.parentNode;return e&&e.removeChild(t),t}function Al(t){for(var e;e=t.firstChild;)ee(e);return t}function ud(t){return t.cloneNode(!0)}li.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~Cl(e,t)||e.push(t),Tl(this.el.className.baseVal)?this.el.className.baseVal=e.join(" "):this.el.className=e.join(" "),this},li.prototype.remove=function(t){if(hx.call(t)==="[object RegExp]")return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=Cl(e,t);return~n&&e.splice(n,1),this.el.className.baseVal=e.join(" "),this},li.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},li.prototype.toggle=function(t,e){return this.list?(Tl(e)?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(Tl(e)?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},li.prototype.array=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(px);return t[0]===""&&t.shift(),t},li.prototype.has=li.prototype.contains=function(t){return this.list?this.list.contains(t):!!~Cl(this.array(),t)};var kl={svg:"http://www.w3.org/2000/svg"},pd='<svg xmlns="'+kl.svg+'"';function hd(t){var e=!1;t.substring(0,4)==="<svg"?t.indexOf(kl.svg)===-1&&(t=pd+t.substring(4)):(t=pd+">"+t+"</svg>",e=!0);var n=function(o){var a;return(a=new DOMParser).async=!1,a.parseFromString(o,"text/xml")}(t);if(!e)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function rt(t,e){var n;return t.charAt(0)==="<"?(n=hd(t).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(kl.svg,t),e&&K(n,e),n}var Pl=null;function Ml(){return Pl===null&&(Pl=rt("svg")),Pl}function dd(t,e){var n,i,r=Object.keys(e);for(n=0;i=r[n];n++)t[i]=e[i];return t}function xo(t){return t?Ml().createSVGTransformFromMatrix(t):Ml().createSVGTransform()}var md=/([&<>]{1})/g,dx=/([\n\r"]{1})/g,mx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function Rl(t,e){return t.replace(e,function(n,i){return mx[i]||i})}function fd(t,e){var n,i,r,o,a;switch(t.nodeType){case 3:e.push(Rl(t.textContent,md));break;case 1:if(e.push("<",t.tagName),t.hasAttributes())for(n=0,i=(r=t.attributes).length;n<i;++n)o=r.item(n),e.push(" ",o.name,'="',Rl(o.value,dx),'"');if(t.hasChildNodes()){for(e.push(">"),n=0,i=(a=t.childNodes).length;n<i;++n)fd(a.item(n),e);e.push("</",t.tagName,">")}else e.push("/>");break;case 8:e.push("<!--",Rl(t.nodeValue,md),"-->");break;case 4:e.push("<![CDATA[",t.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+t.nodeType)}return e}function fx(t,e){var n=hd(e);if(Al(t),e){(function(a){return a.nodeName==="#document-fragment"})(n)||(n=n.documentElement);for(var i,r=(i=n.childNodes,Array.prototype.slice.call(i)),o=0;o<r.length;o++)sd(r[o],t)}}function vd(t,e){if(e!==void 0){try{fx(t,e)}catch(n){throw new Error("error parsing SVG: "+n.message)}return t}return function(n){for(var i=n.firstChild,r=[];i;)fd(i,r),i=i.nextSibling;return r.join("")}(t)}function vx(t,e){return e instanceof SVGMatrix?t.createSVGTransformFromMatrix(e):e}function Eo(t,e){var n=t.transform.baseVal;return e&&(Array.isArray(e)||(e=[e]),function(i,r){var o,a;for(i.clear(),o=0;a=r[o];o++)i.appendItem(vx(i,a))}(n,e)),n.consolidate()}var yx=/^class /;function Nl(t){return Object.prototype.toString.call(t)==="[object Array]"}function Il(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function za(){var t=Array.prototype.slice.call(arguments);t.length===1&&Nl(t[0])&&(t=t[0]);var e=t.pop();return e.$inject=t,e}var gx=/constructor\s*[^(]*\(\s*([^)]*)\)/m,bx=/^(?:async )?(?:function\s*)?[^(]*\(\s*([^)]*)\)/m,xx=/\/\*([^*]*)\*\//m;function Ex(t){if(typeof t!="function")throw new Error('Cannot annotate "'+t+'". Expected a function!');var e=t.toString().match(function(n){return yx.test(n.toString())}(t)?gx:bx);return e&&e[1]&&e[1].split(",").map(function(n){return(e=n.match(xx))?e[1].trim():n.trim()})||[]}function _x(){var t=[];this.factory=function(e,n){return t.push([e,"factory",n]),this},this.value=function(e,n){return t.push([e,"value",n]),this},this.type=function(e,n){return t.push([e,"type",n]),this},this.forEach=function(e){t.forEach(e)}}function Dl(t,e){e=e||{get:function(f,y){if(n.push(f),y===!1)return null;throw a('No provider for "'+f+'"!')}};var n=[],i=this._providers=Object.create(e._providers||null),r=this._instances=Object.create(null),o=r.injector=this,a=function(f){var y=n.join(" -> ");return n.length=0,new Error(y?f+" (Resolving: "+y+")":f)},c=function(f,y){if(!i[f]&&f.indexOf(".")!==-1){for(var b=f.split("."),g=c(b.shift());b.length;)g=g[b.shift()];return g}if(Il(r,f))return r[f];if(Il(i,f)){if(n.indexOf(f)!==-1)throw n.push(f),a("Cannot resolve circular dependency!");return n.push(f),r[f]=i[f][0](i[f][1]),n.pop(),r[f]}return e.get(f,y)},l=function(f,y){if(y===void 0&&(y={}),typeof f!="function"){if(!Nl(f))throw new Error('Cannot invoke "'+f+'". Expected a function!');f=za(f.slice())}return{fn:f,dependencies:(f.$inject||Ex(f)).map(function(b){return Il(y,b)?y[b]:c(b)})}},u=function(f){var y=l(f),b=y.fn,g=y.dependencies;return new(Function.prototype.bind.apply(b,[null].concat(g)))},p=function(f,y,b){var g=l(f,b),w=g.fn,x=g.dependencies;return w.apply(y,x)},d=function(f){return za(function(y){return f.get(y)})},v={factory:p,type:u,value:function(f){return f}};t.forEach(function(f){function y(x,S){return x!=="value"&&Nl(S)&&(S=za(S.slice())),S}if(f instanceof _x)f.forEach(function(x){var S=x[0],C=x[1],I=x[2];i[S]=[v[C],y(C,I),C]});else if(typeof f=="object")if(f.__exports__){var b=Object.keys(f).reduce(function(x,S){return S.substring(0,2)!=="__"&&(x[S]=f[S]),x},Object.create(null)),g=new Dl((f.__modules__||[]).concat([b]),o),w=za(function(x){return g.get(x)});f.__exports__.forEach(function(x){i[x]=[w,x,"private",g]})}else Object.keys(f).forEach(function(x){if(f[x][2]!=="private"){var S=f[x][0],C=f[x][1];i[x]=[v[S],y(S,C),S]}else i[x]=f[x]})}),this.get=c,this.invoke=p,this.instantiate=u,this.createChild=function(f,y){if(y&&y.length){var b,g,w,x,S=Object.create(null),C=Object.create(null),I=[],s=[],h=[];for(var m in i)b=i[m],y.indexOf(m)!==-1&&(b[2]==="private"?(g=I.indexOf(b[3]))===-1?(w=b[3].createChild([],y),x=d(w),I.push(b[3]),s.push(w),h.push(x),S[m]=[x,m,"private",w]):S[m]=[h[g],m,"private",s[g]]:S[m]=[b[2],b[1]],C[m]=!0),b[2]!=="factory"&&b[2]!=="type"||!b[1].$scope||y.forEach(function(E){b[1].$scope.indexOf(E)!==-1&&(S[m]=[b[2],b[1]],C[E]=!0)});y.forEach(function(E){if(!C[E])throw new Error('No provider for "'+E+'". Cannot use provider from the parent!')}),f.unshift(S)}return new Dl(f,o)}}var wx=1e3;function $n(t,e){var n=this;e=e||wx,t.on(["render.shape","render.connection"],e,function(i,r){var o=i.type,a=r.element,c=r.gfx,l=r.attrs;if(n.canRender(a))return o==="render.shape"?n.drawShape(c,a,l):n.drawConnection(c,a,l)}),t.on(["render.getShapePath","render.getConnectionPath"],e,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}function xr(t){return t.join(",").replace(/,?([A-z]),?/g,"$1")}function yd(t){for(var e,n="",i=0;e=t[i];i++)n+=e.x+","+e.y+" ";return n}function Bl(t,e){var n=rt("polyline");return K(n,{points:yd(t)}),e&&K(n,e),n}function gd(t){return mt(t,function(e){return!Pt(t,function(n){return n!==e&&bd(e,n)})})}function bd(t,e){if(e){if(t===e)return e;if(t.parent)return bd(t.parent,e)}}function xd(t,e,n){var i=!n||t.indexOf(e)===-1;return i&&t.push(e),i}function $i(t,e,n){n=n||0,gt(t)||(t=[t]),L(t,function(i,r){var o=e(i,r,n);gt(o)&&o.length&&$i(o,e,n+1)})}function Ga(t,e){return function(n,i,r){var o=[],a=[];return $i(n,function(c,l,u){xd(o,c,i);var p=c.children;if((r===-1||u<r)&&p&&xd(a,p,i))return p}),o}(t,!e,-1)}function ye(t,e){var n,i,r,o;return e=!!e,gt(t)||(t=[t]),L(t,function(a){var c=a;a.waypoints&&!e&&(c=ye(a.waypoints,!0));var l=c.x,u=c.y,p=c.height||0,d=c.width||0;(l<n||n===void 0)&&(n=l),(u<i||i===void 0)&&(i=u),(l+d>r||r===void 0)&&(r=l+d),(u+p>o||o===void 0)&&(o=u+p)}),{x:n,y:i,height:o-i,width:r-n}}function Ed(t){return"waypoints"in t?"connection":"x"in t?"shape":"root"}function _d(t){return!(!t||!t.isFrame)}function _o(t,e){return $({},t||{},e||{})}$n.prototype.canRender=function(){},$n.prototype.drawShape=function(){},$n.prototype.drawConnection=function(){},$n.prototype.getShapePath=function(){},$n.prototype.getConnectionPath=function(){};function ui(t,e){$n.call(this,t,1),this.CONNECTION_STYLE=e.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=e.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=e.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}it(ui,$n),ui.prototype.canRender=function(){return!0},ui.prototype.drawShape=function(t,e,n){var i=rt("rect");return K(i,{x:0,y:0,width:e.width||0,height:e.height||0}),_d(e)?K(i,$({},this.FRAME_STYLE,n||{})):K(i,$({},this.SHAPE_STYLE,n||{})),lt(t,i),i},ui.prototype.drawConnection=function(t,e,n){var i=Bl(e.waypoints,$({},this.CONNECTION_STYLE,n||{}));return lt(t,i),i},ui.prototype.getShapePath=function(t){var e=t.x,n=t.y,i=t.width;return xr([["M",e,n],["l",i,0],["l",0,t.height],["l",-i,0],["z"]])},ui.prototype.getConnectionPath=function(t){var e,n,i=t.waypoints,r=[];for(e=0;n=i[e];e++)n=n.original||n,r.push([e===0?"M":"L",n.x,n.y]);return xr(r)},ui.$inject=["eventBus","styles"];const Sx={__init__:["defaultRenderer"],defaultRenderer:["type",ui],styles:["type",function(){var t={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},e=this;this.cls=function(n,i,r){return $(this.style(i,r),{class:n})},this.style=function(n,i){gt(n)||i||(i=n,n=[]);var r=De(n,function(o,a){return $(o,t[a]||{})},{});return i?$(r,i):r},this.computeStyle=function(n,i,r){return gt(i)||(r=i,i=[]),e.style(i||[],$({},r,n||{}))}}]};function Yt(t,e){if(!t||!e)return-1;var n=t.indexOf(e);return n!==-1&&t.splice(n,1),n}function Jt(t,e,n){if(t&&e){typeof n!="number"&&(n=-1);var i=t.indexOf(e);if(i!==-1){if(i===n||n===-1)return;t.splice(i,1)}n!==-1?t.splice(n,0,e):t.push(e)}}function Ol(t,e){return t&&e?t.indexOf(e):-1}function wo(t,e){return t&&e?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):-1}function Ll(t,e,n,i){if(i===void 0&&(i=5),!t||!e||!n)return!1;var r=(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x),o=wo(t,e);return Math.abs(r/o)<=i}var wd=2;function zn(t,e){var n;return function(i,r){var o;o=gt(i)?i:[i,r];var a=o.slice().shift();return ji(o,function(c){return Math.abs(a.y-c.y)<=wd})}(n=gt(t)?t:[t,e])?"h":!!function(i,r){var o;o=gt(i)?i:[i,r];var a=o.slice().shift();return ji(o,function(c){return Math.abs(a.x-c.x)<=wd})}(n)&&"v"}function Sd(t,e,n){return n=n||0,t.x>e.x-n&&t.y>e.y-n&&t.x<e.x+e.width+n&&t.y<e.y+e.height+n}function jl(t,e){return{x:Math.round(t.x+(e.x-t.x)/2),y:Math.round(t.y+(e.y-t.y)/2)}}var Cx=/,?([a-z]),?/gi,Cd=parseFloat,Zt=Math,pi=Zt.PI,kn=Zt.min,Pn=Zt.max,Td=Zt.pow,hi=Zt.abs,Tx=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,Ax=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/gi,Ua=Array.isArray||function(t){return t instanceof Array};function Vl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function So(t){if(typeof t=="function"||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)Vl(t,n)&&(e[n]=So(t[n]));return e}function Er(t){var e=Er.ps=Er.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var n in e)Vl(e,n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])}),e[t]}function Fl(t,e,n,i){return arguments.length===1&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,height:i,x2:t+n,y2:e+i}}function Ad(){return this.join(",").replace(Cx,"$1")}function Ha(t){var e=So(t);return e.toString=Ad,e}function kd(t,e,n,i,r,o,a,c,l){var u=1-l,p=Td(u,3),d=Td(u,2),v=l*l*l,f=p*e+3*d*l*i+3*u*l*l*o+v*c;return{x:qa(p*t+3*d*l*n+3*u*l*l*r+v*a),y:qa(f)}}function Pd(t){var e=Rx.apply(null,t);return Fl(e.x0,e.y0,e.x1-e.x0,e.y1-e.y0)}function di(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height}function Md(t,e,n,i,r){return t*(t*(-3*e+9*n-9*i+3*r)+6*e-12*n+6*i)-3*e+3*n}function Rd(t,e,n,i,r,o,a,c,l){l==null&&(l=1);for(var u=(l=l>1?1:l<0?0:l)/2,p=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],v=0,f=0;f<12;f++){var y=u*p[f]+u,b=Md(y,t,n,r,a),g=Md(y,e,i,o,c),w=b*b+g*g;v+=d[f]*Zt.sqrt(w)}return u*v}function kx(t,e,n,i,r,o,a,c){if(!(Pn(t,n)<kn(r,a)||kn(t,n)>Pn(r,a)||Pn(e,i)<kn(o,c)||kn(e,i)>Pn(o,c))){var l=(t*i-e*n)*(o-c)-(e-i)*(r*c-o*a),u=(t-n)*(o-c)-(e-i)*(r-a);if(u){var p=qa(((t*i-e*n)*(r-a)-(t-n)*(r*c-o*a))/u),d=qa(l/u),v=+p.toFixed(2),f=+d.toFixed(2);if(!(v<+kn(t,n).toFixed(2)||v>+Pn(t,n).toFixed(2)||v<+kn(r,a).toFixed(2)||v>+Pn(r,a).toFixed(2)||f<+kn(e,i).toFixed(2)||f>+Pn(e,i).toFixed(2)||f<+kn(o,c).toFixed(2)||f>+Pn(o,c).toFixed(2)))return{x:p,y:d}}}}function qa(t){return Math.round(1e11*t)/1e11}function Px(t,e,n){if(!function(m,E){return m=Fl(m),di(E=Fl(E),m.x,m.y)||di(E,m.x2,m.y)||di(E,m.x,m.y2)||di(E,m.x2,m.y2)||di(m,E.x,E.y)||di(m,E.x2,E.y)||di(m,E.x,E.y2)||di(m,E.x2,E.y2)||(m.x<E.x2&&m.x>E.x||E.x<m.x2&&E.x>m.x)&&(m.y<E.y2&&m.y>E.y||E.y<m.y2&&E.y>m.y)}(Pd(t),Pd(e)))return n?0:[];for(var i=Rd.apply(0,t),r=Rd.apply(0,e),o=Nd(t)?1:~~(i/5)||1,a=Nd(e)?1:~~(r/5)||1,c=[],l=[],u={},p=n?0:[],d=0;d<o+1;d++){var v=kd.apply(0,t.concat(d/o));c.push({x:v.x,y:v.y,t:d/o})}for(d=0;d<a+1;d++)v=kd.apply(0,e.concat(d/a)),l.push({x:v.x,y:v.y,t:d/a});for(d=0;d<o;d++)for(var f=0;f<a;f++){var y,b=c[d],g=c[d+1],w=l[f],x=l[f+1],S=hi(g.x-b.x)<.01?"y":"x",C=hi(x.x-w.x)<.01?"y":"x",I=kx(b.x,b.y,g.x,g.y,w.x,w.y,x.x,x.y);if(I){if(u[y=I.x.toFixed(9)+"#"+I.y.toFixed(9)])continue;u[y]=!0;var s=b.t+hi((I[S]-b[S])/(g[S]-b[S]))*(g.t-b.t),h=w.t+hi((I[C]-w[C])/(x[C]-w[C]))*(x.t-w.t);s>=0&&s<=1&&h>=0&&h<=1&&(n?p++:p.push({x:I.x,y:I.y,t1:s,t2:h}))}}return p}function Mx(t){var e=Er(t);if(e.abs)return Ha(e.abs);if(Ua(t)&&Ua(t&&t[0])||(t=function(w){if(!w)return null;var x=Er(w);if(x.arr)return So(x.arr);var S={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},C=[];return Ua(w)&&Ua(w[0])&&(C=So(w)),C.length||String(w).replace(Tx,function(I,s,h){var m=[],E=s.toLowerCase();for(h.replace(Ax,function(T,R){R&&m.push(+R)}),E=="m"&&m.length>2&&(C.push([s].concat(m.splice(0,2))),E="l",s=s=="m"?"l":"L");m.length>=S[E]&&(C.push([s].concat(m.splice(0,S[E]))),S[E]););}),C.toString=Er.toString,x.arr=So(C),C}(t)),!t||!t.length)return[["M",0,0]];var n,i=[],r=0,o=0,a=0,c=0,l=0;t[0][0]=="M"&&(a=r=+t[0][1],c=o=+t[0][2],l++,i[0]=["M",r,o]);for(var u,p,d=l,v=t.length;d<v;d++){if(i.push(u=[]),(n=(p=t[d])[0])!=n.toUpperCase())switch(u[0]=n.toUpperCase(),u[0]){case"A":u[1]=p[1],u[2]=p[2],u[3]=p[3],u[4]=p[4],u[5]=p[5],u[6]=+p[6]+r,u[7]=+p[7]+o;break;case"V":u[1]=+p[1]+o;break;case"H":u[1]=+p[1]+r;break;case"M":a=+p[1]+r,c=+p[2]+o;default:for(var f=1,y=p.length;f<y;f++)u[f]=+p[f]+(f%2?r:o)}else for(var b=0,g=p.length;b<g;b++)u[b]=p[b];switch(n=n.toUpperCase(),u[0]){case"Z":r=+a,o=+c;break;case"H":r=u[1];break;case"V":o=u[1];break;case"M":a=u[u.length-2],c=u[u.length-1];default:r=u[u.length-2],o=u[u.length-1]}}return i.toString=Ad,e.abs=Ha(i),i}function Nd(t){return t[0]===t[2]&&t[1]===t[3]&&t[4]===t[6]&&t[5]===t[7]}function Wa(t,e,n,i){return[t,e,n,i,n,i]}function Id(t,e,n,i,r,o){var a=.3333333333333333,c=2/3;return[a*t+c*n,a*e+c*i,a*r+c*n,a*o+c*i,r,o]}function Dd(t,e,n,i,r,o,a,c,l,u){var p,d,v=120*pi/180,f=pi/180*(+r||0),y=[],b=(d=function(Bt,qt,_t){return{x:Bt*Zt.cos(_t)-qt*Zt.sin(_t),y:Bt*Zt.sin(_t)+qt*Zt.cos(_t)}},function Bt(){var qt=Array.prototype.slice.call(arguments,0),_t=qt.join("\u2400"),$t=Bt.cache=Bt.cache||{},Xt=Bt.count=Bt.count||[];return Vl($t,_t)?(function(Rt,me){for(var St=0,zt=Rt.length;St<zt;St++)if(Rt[St]===me)return Rt.push(Rt.splice(St,1)[0])}(Xt,_t),$t[_t]):(Xt.length>=1e3&&delete $t[Xt.shift()],Xt.push(_t),$t[_t]=d.apply(0,qt),$t[_t])});if(u)m=u[0],E=u[1],s=u[2],h=u[3];else{t=(p=b(t,e,-f)).x,e=p.y;var g=(t-(c=(p=b(c,l,-f)).x))/2,w=(e-(l=p.y))/2,x=g*g/(n*n)+w*w/(i*i);x>1&&(n*=x=Zt.sqrt(x),i*=x);var S=n*n,C=i*i,I=(o==a?-1:1)*Zt.sqrt(hi((S*C-S*w*w-C*g*g)/(S*w*w+C*g*g))),s=I*n*w/i+(t+c)/2,h=I*-i*g/n+(e+l)/2,m=Zt.asin(((e-h)/i).toFixed(9)),E=Zt.asin(((l-h)/i).toFixed(9));(m=t<s?pi-m:m)<0&&(m=2*pi+m),(E=c<s?pi-E:E)<0&&(E=2*pi+E),a&&m>E&&(m-=2*pi),!a&&E>m&&(E-=2*pi)}var T=E-m;if(hi(T)>v){var R=E,D=c,z=l;E=m+v*(a&&E>m?1:-1),y=Dd(c=s+n*Zt.cos(E),l=h+i*Zt.sin(E),n,i,r,0,a,D,z,[E,R,s,h])}T=E-m;var P=Zt.cos(m),_=Zt.sin(m),B=Zt.cos(E),V=Zt.sin(E),G=Zt.tan(T/4),J=4/3*n*G,tt=4/3*i*G,ct=[t,e],at=[t+J*_,e-tt*P],H=[c+J*V,l-tt*B],q=[c,l];if(at[0]=2*ct[0]-at[0],at[1]=2*ct[1]-at[1],u)return[at,H,q].concat(y);for(var xt=[],Kt=0,ce=(y=[at,H,q].concat(y).join().split(",")).length;Kt<ce;Kt++)xt[Kt]=Kt%2?b(y[Kt-1],y[Kt],f).y:b(y[Kt],y[Kt+1],f).x;return xt}function Rx(t,e,n,i,r,o,a,c){for(var l,u,p,d,v,f,y,b,g=[],w=[[],[]],x=0;x<2;++x)if(x==0?(u=6*t-12*n+6*r,l=-3*t+9*n-9*r+3*a,p=3*n-3*t):(u=6*e-12*i+6*o,l=-3*e+9*i-9*o+3*c,p=3*i-3*e),hi(l)<1e-12){if(hi(u)<1e-12)continue;0<(d=-p/u)&&d<1&&g.push(d)}else y=u*u-4*p*l,b=Zt.sqrt(y),y<0||(0<(v=(-u+b)/(2*l))&&v<1&&g.push(v),0<(f=(-u-b)/(2*l))&&f<1&&g.push(f));for(var S,C=g.length,I=C;C--;)S=1-(d=g[C]),w[0][C]=S*S*S*t+3*S*S*d*n+3*S*d*d*r+d*d*d*a,w[1][C]=S*S*S*e+3*S*S*d*i+3*S*d*d*o+d*d*d*c;return w[0][I]=t,w[1][I]=e,w[0][I+1]=a,w[1][I+1]=c,w[0].length=w[1].length=I+2,{x0:kn.apply(0,w[0]),y0:kn.apply(0,w[1]),x1:Pn.apply(0,w[0]),y1:Pn.apply(0,w[1])}}function Bd(t){var e=Er(t);if(e.curve)return Ha(e.curve);for(var n=Mx(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(f,y,b){var g,w;if(!f)return["C",y.x,y.y,y.x,y.y,y.x,y.y];switch(!(f[0]in{T:1,Q:1})&&(y.qx=y.qy=null),f[0]){case"M":y.X=f[1],y.Y=f[2];break;case"A":f=["C"].concat(Dd.apply(0,[y.x,y.y].concat(f.slice(1))));break;case"S":b=="C"||b=="S"?(g=2*y.x-y.bx,w=2*y.y-y.by):(g=y.x,w=y.y),f=["C",g,w].concat(f.slice(1));break;case"T":b=="Q"||b=="T"?(y.qx=2*y.x-y.qx,y.qy=2*y.y-y.qy):(y.qx=y.x,y.qy=y.y),f=["C"].concat(Id(y.x,y.y,y.qx,y.qy,f[1],f[2]));break;case"Q":y.qx=f[1],y.qy=f[2],f=["C"].concat(Id(y.x,y.y,f[1],f[2],f[3],f[4]));break;case"L":f=["C"].concat(Wa(y.x,y.y,f[1],f[2]));break;case"H":f=["C"].concat(Wa(y.x,y.y,f[1],y.y));break;case"V":f=["C"].concat(Wa(y.x,y.y,y.x,f[1]));break;case"Z":f=["C"].concat(Wa(y.x,y.y,y.X,y.Y))}return f},o=function(f,y){if(f[y].length>7){f[y].shift();for(var b=f[y];b.length;)a[y]="A",f.splice(y++,0,["C"].concat(b.splice(0,6)));f.splice(y,1),p=n.length}},a=[],c="",l="",u=0,p=n.length;u<p;u++){n[u]&&(c=n[u][0]),c!="C"&&(a[u]=c,u&&(l=a[u-1])),n[u]=r(n[u],i,l),a[u]!="A"&&c=="C"&&(a[u]="C"),o(n,u);var d=n[u],v=d.length;i.x=d[v-2],i.y=d[v-1],i.bx=Cd(d[v-4])||i.x,i.by=Cd(d[v-3])||i.y}return e.curve=Ha(n),n}const Od=so(function(t,e,n){t=Bd(t),e=Bd(e);for(var i,r,o,a,c,l,u,p,d,v,f=n?0:[],y=0,b=t.length;y<b;y++){var g=t[y];if(g[0]=="M")i=c=g[1],r=l=g[2];else{g[0]=="C"?(d=[i,r].concat(g.slice(1)),i=d[6],r=d[7]):(d=[i,r,i,r,c,l,c,l],i=c,r=l);for(var w=0,x=e.length;w<x;w++){var S=e[w];if(S[0]=="M")o=u=S[1],a=p=S[2];else{S[0]=="C"?(v=[o,a].concat(S.slice(1)),o=v[6],a=v[7]):(v=[o,a,o,a,u,p,u,p],o=u,a=p);var C=Px(d,v,n);if(n)f+=C;else{for(var I=0,s=C.length;I<s;I++)C[I].segment1=y,C[I].segment2=w,C[I].bez1=d,C[I].bez2=v;f=f.concat(C)}}}}}return f});function Ld(t){return{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}}function zi(t){return{x:Math.round(t.x),y:Math.round(t.y)}}function ot(t){return{top:t.y,right:t.x+(t.width||0),bottom:t.y+(t.height||0),left:t.x}}function $l(t){return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}function ft(t){return zi({x:t.x+(t.width||0)/2,y:t.y+(t.height||0)/2})}function ge(t,e,n){te(n=n||0)||(n={x:n,y:n});var i=ot(t),r=ot(e),o=i.bottom+n.y<=r.top,a=i.left-n.x>=r.right,c=i.top-n.y>=r.bottom,l=o?"top":c?"bottom":null,u=i.right+n.x<=r.left?"left":a?"right":null;return u&&l?l+"-"+u:u||l||"intersect"}function zl(t,e,n){var i=Od(t,e);return i.length===1||i.length===2&&wo(i[0],i[1])<1?zi(i[0]):i.length>1?(i=We(i,function(r){var o=Math.floor(100*r.t2)||1;return o=((o=100-o)<10?"0":"")+o,r.segment2+"#"+o}),zi(i[n?0:i.length-1])):null}function Ka(t,e){return Math.round(t*e)/e}function jd(t){return pt(t)?t+"px":t}function Vd(t,e,n){var i=rt("g");bt(i).add(e);var r=n!==void 0?n:t.childNodes.length-1;return t.insertBefore(i,t.childNodes[r]||null),i}var Xa="base",Gl="djs-element-hidden",Nx={shape:["x","y","width","height"],connection:["waypoints"]};function vt(t,e,n,i){this._eventBus=e,this._elementRegistry=i,this._graphicsFactory=n,this._init(t||{})}function Fd(t,e){var n="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttribute("transform",n)}vt.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],vt.prototype._init=function(t){var e=this._eventBus,n=this._container=function(o){var a=(o=$({},{width:"100%",height:"100%"},o)).container||document.body,c=document.createElement("div");return c.setAttribute("class","djs-container"),$(c.style,{position:"relative",overflow:"hidden",width:jd(o.width),height:jd(o.height)}),a.appendChild(c),c}(t),i=this._svg=rt("svg");K(i,{width:"100%",height:"100%"}),lt(n,i);var r=this._viewport=Vd(i,"viewport");this._layers={},this._planes={},t.deferUpdate!==!1&&(this._viewboxChanged=gl(Se(this._viewboxChanged,this),300)),e.on("diagram.init",function(){e.fire("canvas.init",{svg:i,viewport:r})},this),e.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","plane.set"],function(){delete this._cachedViewbox},this),e.on("diagram.destroy",500,this._destroy,this),e.on("diagram.clear",500,this._clear,this)},vt.prototype._destroy=function(t){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._activePlane,delete this._viewport},vt.prototype._clear=function(){var t=this;this._elementRegistry.getAll().forEach(function(e){var n=Ed(e);n==="root"?t.setRootElementForPlane(null,t.findPlane(e),!0):t._removeElement(e,n)}),this._activePlane=null,this._planes={},delete this._cachedViewbox},vt.prototype.getDefaultLayer=function(){return this.getLayer(Xa,0)},vt.prototype.getLayer=function(t,e){if(!t)throw new Error("must specify a name");var n=this._layers[t];if(n||(n=this._layers[t]=this._createLayer(t,e)),e!==void 0&&n.index!==e)throw new Error("layer <"+t+"> already created at index <"+e+">");return n.group},vt.prototype._createLayer=function(t,e){e===void 0&&(e=1);var n=De(this._layers,function(i,r){return e>=r.index&&i++,i},0);return{group:Vd(this._viewport,"layer-"+t,n),index:e}},vt.prototype.getPlane=function(t){if(!t)throw new Error("must specify a name");return this._planes[t]},vt.prototype.createPlane=function(t,e){if(!t)throw new Error("must specify a name");if(this._planes[t])throw new Error("plane "+t+" already exists");e||(e={id:"__implicitroot"+t,children:[],isImplicit:!0});var n=this.getLayer(t,0);bt(n).add(Gl);var i=this._planes[t]={layer:n,name:t,rootElement:null};return this.setRootElementForPlane(e,i),i},vt.prototype.setActivePlane=function(t){if(!t)throw new Error("must specify a plane");return typeof t=="string"&&(t=this.getPlane(t)),this._activePlane&&bt(this._activePlane.layer).add(Gl),this._activePlane=t,bt(t.layer).remove(Gl),t.rootElement&&this._elementRegistry.updateGraphics(t.rootElement,this._svg,!0),this._eventBus.fire("plane.set",{plane:t}),t},vt.prototype.getActiveLayer=function(){return this.getActivePlane().layer},vt.prototype.getActivePlane=function(){var t=this._activePlane;return t||(t=this.createPlane(Xa),this.setActivePlane(Xa)),t},vt.prototype.findPlane=function(t){typeof t=="string"&&(t=this._elementRegistry.get(t));var e=function(n){for(;n.parent;)n=n.parent;return n}(t);return Pt(this._planes,function(n){return n.rootElement===e})},vt.prototype.getContainer=function(){return this._container},vt.prototype._updateMarker=function(t,e,n){var i;t.id||(t=this._elementRegistry.get(t)),(i=this._elementRegistry._elements[t.id])&&(L([i.gfx,i.secondaryGfx],function(r){r&&(n?bt(r).add(e):bt(r).remove(e))}),this._eventBus.fire("element.marker.update",{element:t,gfx:i.gfx,marker:e,add:!!n}))},vt.prototype.addMarker=function(t,e){this._updateMarker(t,e,!0)},vt.prototype.removeMarker=function(t,e){this._updateMarker(t,e,!1)},vt.prototype.hasMarker=function(t,e){return t.id||(t=this._elementRegistry.get(t)),bt(this.getGraphics(t)).has(e)},vt.prototype.toggleMarker=function(t,e){this.hasMarker(t,e)?this.removeMarker(t,e):this.addMarker(t,e)},vt.prototype.getRootElement=function(){return this.getActivePlane().rootElement},vt.prototype.setRootElement=function(t,e){var n=this._activePlane;if(n)return this.setRootElementForPlane(t,n,e);var i=this.createPlane(Xa,t);return this.setActivePlane(i),i.rootElement},vt.prototype.setRootElementForPlane=function(t,e,n){typeof e=="string"&&(e=this.getPlane(e)),t&&this._ensureValid("root",t);var i=e.rootElement,r=this._elementRegistry,o=this._eventBus;if(i){if(!n)throw new Error("rootElement already set, need to specify override");o.fire("root.remove",{element:i}),o.fire("root.removed",{element:i}),r.remove(i)}if(t){var a=e.layer;o.fire("root.add",{element:t}),r.add(t,a),o.fire("root.added",{element:t,gfx:a}),e===this._activePlane&&this._elementRegistry.updateGraphics(t,this._svg,!0)}return e.rootElement=t,t},vt.prototype._ensureValid=function(t,e){if(!e.id)throw new Error("element must have an id");if(this._elementRegistry.get(e.id))throw new Error("element with id "+e.id+" already exists");var n=Nx[t],i=ji(n,function(r){return e[r]!==void 0});if(!i)throw new Error("must supply { "+n.join(", ")+" } with "+t)},vt.prototype._setParent=function(t,e,n){Jt(e.children,t,n),t.parent=e},vt.prototype._addElement=function(t,e,n,i){n=n||this.getRootElement();var r=this._eventBus,o=this._graphicsFactory;this._ensureValid(t,e),r.fire(t+".add",{element:e,parent:n}),this._setParent(e,n,i);var a=o.create(t,e,i);return this._elementRegistry.add(e,a),o.update(t,e,a),r.fire(t+".added",{element:e,gfx:a}),e},vt.prototype.addShape=function(t,e,n){return this._addElement("shape",t,e,n)},vt.prototype.addConnection=function(t,e,n){return this._addElement("connection",t,e,n)},vt.prototype._removeElement=function(t,e){var n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(t=n.get(t.id||t))return r.fire(e+".remove",{element:t}),i.remove(t),Yt(t.parent&&t.parent.children,t),t.parent=null,r.fire(e+".removed",{element:t}),n.remove(t),t},vt.prototype.removeShape=function(t){return this._removeElement(t,"shape")},vt.prototype.removeConnection=function(t){return this._removeElement(t,"connection")},vt.prototype.getGraphics=function(t,e){return this._elementRegistry.getGraphics(t,e)},vt.prototype._changeViewbox=function(t){this._eventBus.fire("canvas.viewbox.changing"),t.apply(this),this._cachedViewbox=null,this._viewboxChanged()},vt.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},vt.prototype.viewbox=function(t){if(t===void 0&&this._cachedViewbox)return this._cachedViewbox;var e,n,i,r,o,a,c=this._viewport,l=this.getSize();return t?(this._changeViewbox(function(){r=Math.min(l.width/t.width,l.height/t.height);var u=this._svg.createSVGMatrix().scale(r).translate(-t.x,-t.y);Eo(c,u)}),t):(e=this._activePlane&&this._activePlane.layer.getBBox()||{},n=(i=Eo(c))?i.matrix:function(u,p,d,v,f,y){var b=Ml().createSVGMatrix();switch(arguments.length){case 0:return b;case 1:return dd(b,u);case 6:return dd(b,{a:u,b:p,c:d,d:v,e:f,f:y})}}(),r=Ka(n.a,1e3),o=Ka(-n.e||0,1e3),a=Ka(-n.f||0,1e3),t=this._cachedViewbox={x:o?o/r:0,y:a?a/r:0,width:l.width/r,height:l.height/r,scale:r,inner:{width:e.width||0,height:e.height||0,x:e.x||0,y:e.y||0},outer:l})},vt.prototype.scroll=function(t){var e=this._viewport,n=e.getCTM();return t&&this._changeViewbox(function(){t=$({dx:0,dy:0},t||{}),n=this._svg.createSVGMatrix().translate(t.dx,t.dy).multiply(n),Fd(e,n)}),{x:n.e,y:n.f}},vt.prototype.scrollToElement=function(t,e){var n=100;typeof t=="string"&&(t=this._elementRegistry.get(t));var i=this.findPlane(t);i!==this._activePlane&&this.setActivePlane(i),e||(e={}),typeof e=="number"&&(n=e),e={top:e.top||n,right:e.right||n,bottom:e.bottom||n,left:e.left||n};var r,o,a=ye(t),c=ot(a),l=this.viewbox(),u=this.zoom();l.y+=e.top/u,l.x+=e.left/u,l.width-=(e.right+e.left)/u,l.height-=(e.bottom+e.top)/u;var p=ot(l);if(a.width<l.width&&a.height<l.height){var d=Math.max(0,c.right-p.right),v=Math.min(0,c.left-p.left),f=Math.max(0,c.bottom-p.bottom),y=Math.min(0,c.top-p.top);r=d||v,o=f||y}else r=a.x-l.x,o=a.y-l.y;this.scroll({dx:-r*u,dy:-o*u})},vt.prototype.zoom=function(t,e){return t?t==="fit-viewport"?this._fitViewport(e):(this._changeViewbox(function(){typeof e!="object"&&(n=this.viewbox().outer,e={x:n.width/2,y:n.height/2}),i=this._setZoom(t,e)}),Ka(i.a,1e3)):this.viewbox(t).scale;var n,i},vt.prototype._fitViewport=function(t){var e,n,i=this.viewbox(),r=i.outer,o=i.inner;return o.x>=0&&o.y>=0&&o.x+o.width<=r.width&&o.y+o.height<=r.height&&!t?n={x:0,y:0,width:Math.max(o.width+o.x,r.width),height:Math.max(o.height+o.y,r.height)}:(e=Math.min(1,r.width/o.width,r.height/o.height),n={x:o.x+(t?o.width/2-r.width/e/2:0),y:o.y+(t?o.height/2-r.height/e/2:0),width:r.width/e,height:r.height/e}),this.viewbox(n),this.viewbox(!1).scale},vt.prototype._setZoom=function(t,e){var n,i,r,o,a=this._svg,c=this._viewport,l=a.createSVGMatrix(),u=a.createSVGPoint(),p=(i=c.getCTM()).a;return e?(n=$(u,e).matrixTransform(i.inverse()),r=l.translate(n.x,n.y).scale(1/p*t).translate(-n.x,-n.y),o=i.multiply(r)):o=l.scale(t),Fd(this._viewport,o),o},vt.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},vt.prototype.getAbsoluteBBox=function(t){var e,n=this.viewbox();return t.waypoints?e=this.getGraphics(t).getBBox():e=t,{x:e.x*n.scale-n.x*n.scale,y:e.y*n.scale-n.y*n.scale,width:e.width*n.scale,height:e.height*n.scale}},vt.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var _r="data-element-id";function Ge(t){this._elements={},this._eventBus=t}Ge.$inject=["eventBus"],Ge.prototype.add=function(t,e,n){var i=t.id;this._validateId(i),K(e,_r,i),n&&K(n,_r,i),this._elements[i]={element:t,gfx:e,secondaryGfx:n}},Ge.prototype.remove=function(t){var e=this._elements,n=t.id||t,i=n&&e[n];i&&(K(i.gfx,_r,""),i.secondaryGfx&&K(i.secondaryGfx,_r,""),delete e[n])},Ge.prototype.updateId=function(t,e){this._validateId(e),typeof t=="string"&&(t=this.get(t)),this._eventBus.fire("element.updateId",{element:t,newId:e});var n=this.getGraphics(t),i=this.getGraphics(t,!0);this.remove(t),t.id=e,this.add(t,n,i)},Ge.prototype.updateGraphics=function(t,e,n){var i=t.id||t,r=this._elements[i];return n?r.secondaryGfx=e:r.gfx=e,K(e,_r,i),e},Ge.prototype.get=function(t){var e;e=typeof t=="string"?t:t&&K(t,_r);var n=this._elements[e];return n&&n.element},Ge.prototype.filter=function(t){var e=[];return this.forEach(function(n,i){t(n,i)&&e.push(n)}),e},Ge.prototype.find=function(t){for(var e=this._elements,n=Object.keys(e),i=0;i<n.length;i++){var r=e[n[i]],o=r.element;if(t(o,r.gfx))return o}},Ge.prototype.getAll=function(){return this.filter(function(t){return t})},Ge.prototype.forEach=function(t){var e=this._elements;Object.keys(e).forEach(function(n){var i=e[n],r=i.element,o=i.gfx;return t(r,o)})},Ge.prototype.getGraphics=function(t,e){var n=t.id||t,i=this._elements[n];return i&&(e?i.secondaryGfx:i.gfx)},Ge.prototype._validateId=function(t){if(!t)throw new Error("element must have an id");if(this._elements[t])throw new Error("element with id "+t+" already added")};var Ul={exports:{}},Ya={};Ya.extend=function(t,e,n,i){var r=n.inverse;return Object.defineProperty(t,"remove",{value:function(o){var a=this.indexOf(o);return a!==-1&&(this.splice(a,1),e.unset(o,r,i)),o}}),Object.defineProperty(t,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(t,"add",{value:function(o,a){var c=this.indexOf(o);if(a===void 0){if(c!==-1)return;a=this.length}c!==-1&&this.splice(c,1),this.splice(a,0,o),c===-1&&e.set(o,r,i)}}),Object.defineProperty(t,"__refs_collection",{value:!0}),t},Ya.isExtended=function(t){return t.__refs_collection===!0};var $d=Ya;function zd(t,e,n){var i=$d.extend(n[e.name]||[],t,e,n);Object.defineProperty(n,e.name,{enumerable:e.enumerable,value:i}),i.length&&i.forEach(function(r){t.set(r,e.inverse,n)})}function mi(t,e){if(!(this instanceof mi))return new mi(t,e);t.inverse=e,e.inverse=t,this.props={},this.props[t.name]=t,this.props[e.name]=e}mi.prototype.bind=function(t,e){if(typeof e=="string"){if(!this.props[e])throw new Error("no property <"+e+"> in ref");e=this.props[e]}e.collection?zd(this,e,t):function(n,i,r){var o=i.inverse,a=r[i.name];Object.defineProperty(r,i.name,{configurable:i.configurable,enumerable:i.enumerable,get:function(){return a},set:function(c){if(c!==a){var l=a;a=null,l&&n.unset(l,o,r),a=c,n.set(a,o,r)}}})}(this,e,t)},mi.prototype.ensureRefsCollection=function(t,e){var n=t[e.name];return $d.isExtended(n)||zd(this,e,t),n},mi.prototype.ensureBound=function(t,e){(function(n,i){return Object.prototype.hasOwnProperty.call(n,i.name||i)})(t,e)||this.bind(t,e)},mi.prototype.unset=function(t,e,n){t&&(this.ensureBound(t,e),e.collection?this.ensureRefsCollection(t,e).remove(n):t[e.name]=void 0)},mi.prototype.set=function(t,e,n){t&&(this.ensureBound(t,e),e.collection?this.ensureRefsCollection(t,e).add(n):t[e.name]=n)};var Ix=mi;Ul.exports=Ix,Ul.exports.Collection=Ya;const wr=so(Ul.exports);var Gd=new wr({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Ud=new wr({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Hd=new wr({name:"attachers",collection:!0},{name:"host"}),qd=new wr({name:"outgoing",collection:!0},{name:"source"}),Wd=new wr({name:"incoming",collection:!0},{name:"target"});function Co(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(t){var e=this.label,n=this.labels;!t&&e?n.remove(e):n.add(t,0)}}),Gd.bind(this,"parent"),Ud.bind(this,"labels"),qd.bind(this,"outgoing"),Wd.bind(this,"incoming")}function Sr(){Co.call(this),Gd.bind(this,"children"),Hd.bind(this,"host"),Hd.bind(this,"attachers")}function Kd(){Sr.call(this)}function Ja(){Sr.call(this),Ud.bind(this,"labelTarget")}function Xd(){Co.call(this),qd.bind(this,"source"),Wd.bind(this,"target")}it(Sr,Co),it(Kd,Sr),it(Ja,Sr),it(Xd,Co);var Dx={connection:Xd,shape:Sr,label:Ja,root:Kd};function Gn(){this._uid=12}Gn.prototype.createRoot=function(t){return this.create("root",t)},Gn.prototype.createLabel=function(t){return this.create("label",t)},Gn.prototype.createShape=function(t){return this.create("shape",t)},Gn.prototype.createConnection=function(t){return this.create("connection",t)},Gn.prototype.create=function(t,e){return(e=$({},e||{})).id||(e.id=t+"_"+this._uid++),function(n,i){var r=Dx[n];if(!r)throw new Error("unknown type: <"+n+">");return $(new r,i)}(t,e)};var Za="__fn",Bx=Array.prototype.slice;function Be(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function To(){}function Qa(t){return t.childNodes[0]}function Hl(t,e,n,i,r){var o=xo();o.setTranslate(e,n);var a=xo();a.setRotate(i||0,0,0);var c=xo();c.setScale(r||1,r||1),Eo(t,[o,a,c])}function Oe(t,e,n){var i=xo();i.setTranslate(e,n),Eo(t,i)}function Yd(t,e){var n=xo();n.setRotate(e,0,0),Eo(t,n)}function Ue(t,e){this._eventBus=t,this._elementRegistry=e}function Jd(t,e,n){var i=n||e.firstChild;t!==i&&e.insertBefore(t,i)}Be.prototype.on=function(t,e,n,i){if(t=gt(t)?t:[t],ve(e)&&(i=n,n=e,e=1e3),!pt(e))throw new Error("priority must be a number");var r=n;i&&((r=Se(n,i))[Za]=n[Za]||n);var o=this;t.forEach(function(a){o._addListener(a,{priority:e,callback:r,next:null})})},Be.prototype.once=function(t,e,n,i){var r=this;if(ve(e)&&(i=n,n=e,e=1e3),!pt(e))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var a=n.apply(i,arguments);return r.off(t,o),a}o[Za]=n,this.on(t,e,o)},Be.prototype.off=function(t,e){t=gt(t)?t:[t];var n=this;t.forEach(function(i){n._removeListener(i,e)})},Be.prototype.createEvent=function(t){var e=new To;return e.init(t),e},Be.prototype.fire=function(t,e){var n,i,r,o;if(o=Bx.call(arguments),typeof t=="object"&&(t=(e=t).type),!t)throw new Error("no event type specified");if(i=this._listeners[t]){n=e instanceof To?e:this.createEvent(e),o[0]=n;var a=n.type;t!==a&&(n.type=t);try{r=this._invokeListeners(n,o,i)}finally{t!==a&&(n.type=a)}return r===void 0&&n.defaultPrevented&&(r=!1),r}},Be.prototype.handleError=function(t){return this.fire("error",{error:t})===!1},Be.prototype._destroy=function(){this._listeners={}},Be.prototype._invokeListeners=function(t,e,n){for(var i;n&&!t.cancelBubble;)i=this._invokeListener(t,e,n),n=n.next;return i},Be.prototype._invokeListener=function(t,e,n){var i;if(n.callback.__isTomb)return i;try{i=function(r,o){return r.apply(null,o)}(n.callback,e),i!==void 0&&(t.returnValue=i,t.stopPropagation()),i===!1&&t.preventDefault()}catch(r){if(!this.handleError(r))throw r}return i},Be.prototype._addListener=function(t,e){var n,i=this._getListeners(t);if(i){for(;i;){if(i.priority<e.priority)return e.next=i,void(n?n.next=e:this._setListeners(t,e));n=i,i=i.next}n.next=e}else this._setListeners(t,e)},Be.prototype._getListeners=function(t){return this._listeners[t]},Be.prototype._setListeners=function(t,e){this._listeners[t]=e},Be.prototype._removeListener=function(t,e){var n,i,r,o=this._getListeners(t);if(e)for(;o;)n=o.next,(r=o.callback)!==e&&r[Za]!==e||(i?i.next=n:this._setListeners(t,n)),i=o,o=n;else this._setListeners(t,null)},To.prototype.stopPropagation=function(){this.cancelBubble=!0},To.prototype.preventDefault=function(){this.defaultPrevented=!0},To.prototype.init=function(t){$(this,t||{})},Ue.$inject=["eventBus","elementRegistry"],Ue.prototype._getChildrenContainer=function(t){var e,n=this._elementRegistry.getGraphics(t);return t.parent?(e=function(i){return i.parentNode.childNodes[1]}(n),e||(bt(e=rt("g")).add("djs-children"),lt(n.parentNode,e))):e=n,e},Ue.prototype._clear=function(t){var e=Qa(t);return Fa(e),e},Ue.prototype._createContainer=function(t,e,n,i){var r=rt("g");bt(r).add("djs-group"),n!==void 0?Jd(r,e,e.childNodes[n]):lt(e,r);var o=rt("g");bt(o).add("djs-element"),bt(o).add("djs-"+t),i&&bt(o).add("djs-frame"),lt(r,o);var a=rt("g");return bt(a).add("djs-visual"),lt(o,a),o},Ue.prototype.create=function(t,e,n){var i=this._getChildrenContainer(e.parent);return this._createContainer(t,i,n,_d(e))},Ue.prototype.updateContainments=function(t){var e,n=this,i=this._elementRegistry;e=De(t,function(r,o){return o.parent&&(r[o.parent.id]=o.parent),r},{}),L(e,function(r){var o=r.children;if(o){var a=n._getChildrenContainer(r);L(o.slice().reverse(),function(c){Jd(i.getGraphics(c).parentNode,a)})}})},Ue.prototype.drawShape=function(t,e){return this._eventBus.fire("render.shape",{gfx:t,element:e})},Ue.prototype.getShapePath=function(t){return this._eventBus.fire("render.getShapePath",t)},Ue.prototype.drawConnection=function(t,e){return this._eventBus.fire("render.connection",{gfx:t,element:e})},Ue.prototype.getConnectionPath=function(t){return this._eventBus.fire("render.getConnectionPath",t)},Ue.prototype.update=function(t,e,n){if(e.parent){var i=this._clear(n);if(t==="shape")this.drawShape(i,e),Oe(n,e.x,e.y);else{if(t!=="connection")throw new Error("unknown type: "+t);this.drawConnection(i,e)}e.hidden?K(n,"display","none"):K(n,"display","block")}},Ue.prototype.remove=function(t){ee(this._elementRegistry.getGraphics(t).parentNode)};const Ox={__depends__:[Sx],__init__:["canvas"],canvas:["type",vt],elementRegistry:["type",Ge],elementFactory:["type",Gn],eventBus:["type",Be],graphicsFactory:["type",Ue]};function Lx(t){var e=[],n=[];function i(o){return e.indexOf(o)>=0}t.forEach(function o(a){i(a)||((a.__depends__||[]).forEach(o),i(a)||(function(c){e.push(c)}(a),(a.__init__||[]).forEach(function(c){n.push(c)})))});var r=new Dl(e);return n.forEach(function(o){try{r[typeof o=="string"?"get":"invoke"](o)}catch(a){throw a}}),r}function Cr(t,e){this.injector=e=e||function(n){return Lx([{config:["value",n=n||{}]},Ox].concat(n.modules||[]))}(t),this.get=e.get,this.invoke=e.invoke,this.get("eventBus").fire("diagram.init")}function ql(){}function Zd(t,e){this.model=t,this.properties=e}Cr.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Cr.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},ql.prototype.get=function(t){return this.$model.properties.get(this,t)},ql.prototype.set=function(t,e){this.$model.properties.set(this,t,e)},Zd.prototype.createType=function(t){var e=this.model,n=this.properties,i=Object.create(ql.prototype);L(t.properties,function(a){a.isMany||a.default===void 0||(i[a.name]=a.default)}),n.defineModel(i,e),n.defineDescriptor(i,t);var r=t.ns.name;function o(a){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),L(a,Se(function(c,l){this.set(l,c)},this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,e),n.defineDescriptor(o,t),o};var jx={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Qd={String:function(t){return t},Boolean:function(t){return t==="true"},Integer:function(t){return parseInt(t,10)},Real:function(t){return parseFloat(t)}};function Wl(t,e){var n=Qd[t];return n?n(e):e}function Kl(t){return!!jx[t]}function tm(t){return!!Qd[t]}function Pe(t,e){var n,i,r=t.split(/:/);if(r.length===1)n=t,i=e;else{if(r.length!==2)throw new Error("expected <prefix:localName> or <localName>, got "+t);n=r[1],i=r[0]}return{name:t=(i?i+":":"")+n,prefix:i,localName:n}}function Ye(t){this.ns=t,this.name=t.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function fi(t,e){this.packageMap={},this.typeMap={},this.packages=[],this.properties=e,L(t,Se(this.registerPackage,this))}function em(t,e,n){var i=e[n];if(i in t)throw new Error("package with "+n+" <"+i+"> already defined")}function Tr(t){this.model=t}function nm(t,e,n){Object.defineProperty(t,e.name,{enumerable:!e.isReference,writable:!0,value:n,configurable:!0})}function Je(t){this.properties=new Tr(this),this.factory=new Zd(this,this.properties),this.registry=new fi(t,this.properties),this.typeCache={}}Ye.prototype.build=function(){return Xe(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},Ye.prototype.addProperty=function(t,e,n){typeof e=="boolean"&&(n=e,e=void 0),this.addNamedProperty(t,n!==!1);var i=this.properties;e!==void 0?i.splice(e,0,t):i.push(t)},Ye.prototype.replaceProperty=function(t,e,n){var i=t.ns,r=this.properties,o=this.propertiesByName,a=t.name!==e.name;if(t.isId){if(!e.isId)throw new Error("property <"+e.ns.name+"> must be id property to refine <"+t.ns.name+">");this.setIdProperty(e,!1)}if(t.isBody){if(!e.isBody)throw new Error("property <"+e.ns.name+"> must be body property to refine <"+t.ns.name+">");this.setBodyProperty(e,!1)}var c=r.indexOf(t);if(c===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(c,1),this.addProperty(e,n?void 0:c,a),o[i.name]=o[i.localName]=e},Ye.prototype.redefineProperty=function(t,e,n){var i=t.ns.prefix,r=e.split("#"),o=Pe(r[0],i),a=Pe(r[1],o.prefix).name,c=this.propertiesByName[a];if(!c)throw new Error("refined property <"+a+"> not found");this.replaceProperty(c,t,n),delete t.redefines},Ye.prototype.addNamedProperty=function(t,e){var n=t.ns,i=this.propertiesByName;e&&(this.assertNotDefined(t,n.name),this.assertNotDefined(t,n.localName)),i[n.name]=i[n.localName]=t},Ye.prototype.removeNamedProperty=function(t){var e=t.ns,n=this.propertiesByName;delete n[e.name],delete n[e.localName]},Ye.prototype.setBodyProperty=function(t,e){if(e&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+t.ns.name+">)");this.bodyProperty=t},Ye.prototype.setIdProperty=function(t,e){if(e&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+t.ns.name+">)");this.idProperty=t},Ye.prototype.assertNotDefined=function(t,e){var n=t.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+t.definedBy.ns.name+"#"+t.ns.name+"> not allowed without redefines")},Ye.prototype.hasProperty=function(t){return this.propertiesByName[t]},Ye.prototype.addTrait=function(t,e){var n=this.allTypesByName,i=this.allTypes,r=t.name;r in n||(L(t.properties,Se(function(o){o=$({},o,{name:o.ns.localName,inherited:e}),Object.defineProperty(o,"definedBy",{value:t});var a=o.replaces,c=o.redefines;a||c?this.redefineProperty(o,a||c,a):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),i.push(t),n[r]=t)},fi.prototype.getPackage=function(t){return this.packageMap[t]},fi.prototype.getPackages=function(){return this.packages},fi.prototype.registerPackage=function(t){t=$({},t);var e=this.packageMap;em(e,t,"prefix"),em(e,t,"uri"),L(t.types,Se(function(n){this.registerType(n,t)},this)),e[t.uri]=e[t.prefix]=t,this.packages.push(t)},fi.prototype.registerType=function(t,e){var n=Pe((t=$({},t,{superClass:(t.superClass||[]).slice(),extends:(t.extends||[]).slice(),properties:(t.properties||[]).slice(),meta:$(t.meta||{})})).name,e.prefix),i=n.name,r={};L(t.properties,Se(function(o){var a=Pe(o.name,n.prefix),c=a.name;Kl(o.type)||(o.type=Pe(o.type,a.prefix).name),$(o,{ns:a,name:c}),r[c]=o},this)),$(t,{ns:n,name:i,propertiesByName:r}),L(t.extends,Se(function(o){var a=this.typeMap[o];a.traits=a.traits||[],a.traits.push(i)},this)),this.definePackage(t,e),this.typeMap[i]=t},fi.prototype.mapTypes=function(t,e,n){var i=Kl(t.name)?{name:t.name}:this.typeMap[t.name],r=this;function o(c){return a(c,!0)}function a(c,l){var u=Pe(c,Kl(c)?"":t.prefix);r.mapTypes(u,e,l)}if(!i)throw new Error("unknown type <"+t.name+">");L(i.superClass,n?o:a),e(i,!n),L(i.traits,o)},fi.prototype.getEffectiveDescriptor=function(t){var e=Pe(t),n=new Ye(e);this.mapTypes(e,function(r,o){n.addTrait(r,o)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},fi.prototype.definePackage=function(t,e){this.properties.define(t,"$pkg",{value:e})},Tr.prototype.set=function(t,e,n){if(!Ie(e)||!e.length)throw new TypeError("property name must be a non-empty string");var i=this.model.getPropertyDescriptor(t,e),r=i&&i.name;n===void 0?i?delete t[r]:delete t.$attrs[e]:i?r in t?t[r]=n:nm(t,i,n):t.$attrs[e]=n},Tr.prototype.get=function(t,e){var n=this.model.getPropertyDescriptor(t,e);if(!n)return t.$attrs[e];var i=n.name;return!t[i]&&n.isMany&&nm(t,n,[]),t[i]},Tr.prototype.define=function(t,e,n){if(!n.writable){var i=n.value;delete(n=$({},n,{get:function(){return i}})).value}Object.defineProperty(t,e,n)},Tr.prototype.defineDescriptor=function(t,e){this.define(t,"$descriptor",{value:e})},Tr.prototype.defineModel=function(t,e){this.define(t,"$model",{value:e})},Je.prototype.create=function(t,e){var n=this.getType(t);if(!n)throw new Error("unknown type <"+t+">");return new n(e)},Je.prototype.getType=function(t){var e=this.typeCache,n=Ie(t)?t:t.ns.name,i=e[n];return i||(t=this.registry.getEffectiveDescriptor(n),i=e[n]=this.factory.createType(t)),i},Je.prototype.createAny=function(t,e,n){var i=Pe(t),r={$type:t,$instanceOf:function(a){return a===this.$type}},o={name:t,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:e}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),L(n,function(a,c){te(a)&&a.value!==void 0?r[a.name]=a.value:r[c]=a}),r},Je.prototype.getPackage=function(t){return this.registry.getPackage(t)},Je.prototype.getPackages=function(){return this.registry.getPackages()},Je.prototype.getElementDescriptor=function(t){return t.$descriptor},Je.prototype.hasType=function(t,e){return e===void 0&&(e=t,t=this),e in t.$model.getElementDescriptor(t).allTypesByName},Je.prototype.getPropertyDescriptor=function(t,e){return this.getElementDescriptor(t).propertiesByName[e]},Je.prototype.getTypeDescriptor=function(t){return this.registry.typeMap[t]};var Vx=String.fromCharCode,Fx=Object.prototype.hasOwnProperty,$x=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,Ao={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function zx(t,e,n,i){return i?Fx.call(Ao,i)?Ao[i]:"&"+i+";":Vx(e||parseInt(n,16))}function Gi(t){return t.length>3&&t.indexOf("&")!==-1?t.replace($x,zx):t}Object.keys(Ao).forEach(function(t){Ao[t.toUpperCase()]=Ao[t]});var im="xsi:type",rm="non-whitespace outside of root node";function Ar(t){return new Error(t)}function om(t){return"missing namespace for prefix <"+t+">"}function ts(t){return{get:t,enumerable:!0}}function Gx(t){var e,n={};for(e in t)n[e]=t[e];return n}function Xl(t){return t+"$uri"}function am(){return{line:0,column:0}}function Ux(t){throw t}function sm(t){if(!this)return new sm(t);var e,n,i,r,o,a,c,l,u,p=t&&t.proxy,d=Ux,v=am,f=!1,y=!1,b=null,g=!1;function w(S){S instanceof Error||(S=Ar(S)),b=S,d(S,v)}function x(S){o&&(S instanceof Error||(S=Ar(S)),o(S,v))}this.on=function(S,C){if(typeof C!="function")throw Ar("required args <name, cb>");switch(S){case"openTag":n=C;break;case"text":e=C;break;case"closeTag":i=C;break;case"error":d=C;break;case"warn":o=C;break;case"cdata":r=C;break;case"attention":l=C;break;case"question":c=C;break;case"comment":a=C;break;default:throw Ar("unsupported event: "+S)}return this},this.ns=function(S){if(S===void 0&&(S={}),typeof S!="object")throw Ar("required args <nsMap={}>");var C,I={};for(C in S)I[C]=S[C];return I["http://www.w3.org/2001/XMLSchema-instance"]="xsi",y=!0,u=I,this},this.parse=function(S){if(typeof S!="string")throw Ar("required args <xml=string>");return b=null,function(C){var I,s,h,m,E,T,R,D,z,P,_,B=y?[]:null,V=y?function(Bt){var qt,_t,$t={};for(qt in Bt)$t[_t=Bt[qt]]=_t,$t[Xl(_t)]=qt;return $t}(u):null,G=[],J=0,tt=!1,ct=!1,at=0,H=0,q="",xt=0;function Kt(){if(_!==null)return _;var Bt,qt,_t,$t,Xt,Rt,me,St,zt,ht,Ot,Di=y&&V.xmlns,hr=y&&f?[]:null,Qt=xt,_e=q,xn=_e.length,Bi={},Zc={};t:for(;Qt<xn;Qt++)if(zt=!1,!((ht=_e.charCodeAt(Qt))===32||ht<14&&ht>8)){for((ht<65||ht>122||ht>90&&ht<97)&&ht!==95&&ht!==58&&(x("illegal first char attribute name"),zt=!0),Ot=Qt+1;Ot<xn;Ot++)if(!((ht=_e.charCodeAt(Ot))>96&&ht<123||ht>64&&ht<91||ht>47&&ht<59||ht===46||ht===45||ht===95)){if(ht===32||ht<14&&ht>8){x("missing attribute value"),Qt=Ot;continue t}if(ht===61)break;x("illegal attribute name char"),zt=!0}if((St=_e.substring(Qt,Ot))==="xmlns:xmlns"&&(x("illegal declaration of xmlns"),zt=!0),(ht=_e.charCodeAt(Ot+1))===34)(Ot=_e.indexOf('"',Qt=Ot+2))===-1&&(Ot=_e.indexOf("'",Qt))!==-1&&(x("attribute value quote missmatch"),zt=!0);else if(ht===39)(Ot=_e.indexOf("'",Qt=Ot+2))===-1&&(Ot=_e.indexOf('"',Qt))!==-1&&(x("attribute value quote missmatch"),zt=!0);else for(x("missing attribute value quotes"),zt=!0,Ot+=1;Ot<xn&&!((ht=_e.charCodeAt(Ot+1))===32||ht<14&&ht>8);Ot++);for(Ot===-1&&(x("missing closing quotes"),Ot=xn,zt=!0),zt||(Rt=_e.substring(Qt,Ot)),Qt=Ot;Ot+1<xn&&!((ht=_e.charCodeAt(Ot+1))===32||ht<14&&ht>8);Ot++)Qt===Ot&&(x("illegal character after attribute end"),zt=!0);if(Qt=Ot+1,!zt)if(St in Zc)x("attribute <"+St+"> already defined");else if(Zc[St]=!0,y)if(f){if((Xt=St==="xmlns"?"xmlns":St.charCodeAt(0)===120&&St.substr(0,6)==="xmlns:"?St.substr(6):null)!==null){if(Bt=Gi(Rt),qt=Xl(Xt),!(me=u[Bt])){if(Xt==="xmlns"||qt in V&&V[qt]!==Bt)do me="ns"+J++;while(V[me]!==void 0);else me=Xt;u[Bt]=me}V[Xt]!==me&&($t||(V=Gx(V),$t=!0),V[Xt]=me,Xt==="xmlns"&&(V[Xl(me)]=Bt,Di=me),V[qt]=Bt),Bi[St]=Rt;continue}hr.push(St,Rt)}else(ht=St.indexOf(":"))!==-1?(_t=V[St.substring(0,ht)])?((St=Di===_t?St.substr(ht+1):_t+St.substr(ht))===im&&((ht=Rt.indexOf(":"))!==-1?(_t=Rt.substring(0,ht),Rt=(_t=V[_t]||_t)+Rt.substring(ht)):Rt=Di+":"+Rt),Bi[St]=Rt):x(om(St.substring(0,ht))):Bi[St]=Rt;else Bi[St]=Rt}if(f)for(Qt=0,xn=hr.length;Qt<xn;Qt++){if(St=hr[Qt++],Rt=hr[Qt],(ht=St.indexOf(":"))!==-1){if(!(_t=V[St.substring(0,ht)])){x(om(St.substring(0,ht)));continue}(St=Di===_t?St.substr(ht+1):_t+St.substr(ht))===im&&((ht=Rt.indexOf(":"))!==-1?(_t=Rt.substring(0,ht),Rt=(_t=V[_t]||_t)+Rt.substring(ht)):Rt=Di+":"+Rt)}Bi[St]=Rt}return _=Bi}function ce(){for(var Bt,qt,_t=/(\r\n|\r|\n)/g,$t=0,Xt=0,Rt=0,me=H;at>=Rt&&(Bt=_t.exec(C))&&!((me=Bt[0].length+Bt.index)>at);)$t+=1,Rt=me;return at==-1?(Xt=me,qt=C.substring(H)):H===0?qt=C.substring(H,at):(Xt=at-Rt,qt=H==-1?C.substring(at):C.substring(at,H+1)),{data:qt,line:$t,column:Xt}}for(v=ce,p&&(P=Object.create({},{name:ts(function(){return D}),originalName:ts(function(){return z}),attrs:ts(Kt),ns:ts(function(){return V})}));H!==-1;){if((at=C.charCodeAt(H)===60?H:C.indexOf("<",H))===-1)return G.length?w("unexpected end of file"):H===0?w("missing start tag"):void(H<C.length&&C.substring(H).trim()&&x(rm));if(H!==at){if(G.length){if(e&&(e(C.substring(H,at),Gi,v),g))return}else if(C.substring(H,at).trim()&&(x(rm),g))return}if((E=C.charCodeAt(at+1))===33){if((m=C.charCodeAt(at+2))===91&&C.substr(at+3,6)==="CDATA["){if((H=C.indexOf("]]>",at))===-1)return w("unclosed cdata");if(r&&(r(C.substring(at+9,H),v),g))return;H+=3;continue}if(m===45&&C.charCodeAt(at+3)===45){if((H=C.indexOf("-->",at))===-1)return w("unclosed comment");if(a&&(a(C.substring(at+4,H),Gi,v),g))return;H+=3;continue}}if(E!==63){for(s=at+1;;s++){if(T=C.charCodeAt(s),isNaN(T))return H=-1,w("unclosed tag");if(T===34)s=(m=C.indexOf('"',s+1))!==-1?m:s;else if(T===39)s=(m=C.indexOf("'",s+1))!==-1?m:s;else if(T===62){H=s;break}}if(E!==33){if(_={},E===47){if(tt=!1,ct=!0,!G.length)return w("missing open tag");if(s=D=G.pop(),m=at+2+s.length,C.substring(at+2,m)!==s)return w("closing tag mismatch");for(;m<H;m++)if(!((E=C.charCodeAt(m))===32||E>8&&E<14))return w("close tag")}else{if(C.charCodeAt(H-1)===47?(s=D=C.substring(at+1,H-1),tt=!0,ct=!0):(s=D=C.substring(at+1,H),tt=!0,ct=!1),!(E>96&&E<123||E>64&&E<91||E===95||E===58))return w("illegal first char nodeName");for(m=1,h=s.length;m<h;m++)if(!((E=s.charCodeAt(m))>96&&E<123||E>64&&E<91||E>47&&E<59||E===45||E===95||E==46)){if(E===32||E<14&&E>8){D=s.substring(0,m),_=null;break}return w("invalid nodeName")}ct||G.push(D)}if(y){if(I=V,tt&&(ct||B.push(I),_===null&&(f=s.indexOf("xmlns",m)!==-1)&&(xt=m,q=s,Kt(),f=!1)),z=D,(E=D.indexOf(":"))!==-1){if(!(R=V[D.substring(0,E)]))return w("missing namespace on <"+z+">");D=D.substr(E+1)}else R=V.xmlns;R&&(D=R+":"+D)}if(tt&&(xt=m,q=s,n&&(p?n(P,Gi,ct,v):n(D,Kt,Gi,ct,v),g)))return;if(ct){if(i&&(i(p?P:D,Gi,tt,v),g))return;y&&(V=tt?I:B.pop())}H+=1}else{if(l&&(l(C.substring(at,H+1),Gi,v),g))return;H+=1}}else{if((H=C.indexOf("?>",at))===-1)return w("unclosed question");if(c&&(c(C.substring(at,H+2),v),g))return;H+=2}}}(S),v=am,g=!1,b},this.stop=function(){g=!0}}function cm(t){return t.xml&&t.xml.tagAlias==="lowerCase"}var Hx={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},es="xsi:type";function lm(t){return t.xml&&t.xml.serialize}function um(t){return lm(t)===es}function pm(t,e){return cm(e)?t.prefix+":"+((n=t.localName).charAt(0).toUpperCase()+n.slice(1)):t.name;var n}function vi(t){return new Error(t)}function Un(t){return t.$descriptor}function qx(t){$(this,t),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw vi("expected element");var n,i=this.elementsById,r=Un(e).idProperty;if(r&&(n=e.get(r.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(n))throw new Error("illegal ID <"+n+">");if(i[n])throw vi("duplicate ID <"+n+">");i[n]=e}},this.addWarning=function(e){this.warnings.push(e)}}function ko(){}function Yl(){}function kr(){}function Po(t,e){this.property=t,this.context=e}function Jl(t,e){this.element=e,this.propertyDesc=t}function ns(){}function Ce(t,e,n){this.model=t,this.type=t.getType(e),this.context=n}function Zl(t,e,n){Ce.call(this,t,e,n)}function Pr(t,e,n){this.model=t,this.context=n}function Ql(t){t instanceof Je&&(t={model:t}),$(this,{lax:!1},t)}ko.prototype.handleEnd=function(){},ko.prototype.handleText=function(){},ko.prototype.handleNode=function(){},Yl.prototype=Object.create(ko.prototype),Yl.prototype.handleNode=function(){return this},kr.prototype=Object.create(ko.prototype),kr.prototype.handleText=function(t){this.body=(this.body||"")+t},Po.prototype=Object.create(kr.prototype),Po.prototype.handleNode=function(t){if(this.element)throw vi("expected no sub nodes");return this.element=this.createReference(t),this},Po.prototype.handleEnd=function(){this.element.id=this.body},Po.prototype.createReference=function(t){return{property:this.property.ns.name,id:""}},Jl.prototype=Object.create(kr.prototype),Jl.prototype.handleEnd=function(){var t=this.body||"",e=this.element,n=this.propertyDesc;t=Wl(n.type,t),n.isMany?e.get(n.name).push(t):e.set(n.name,t)},ns.prototype=Object.create(kr.prototype),ns.prototype.handleNode=function(t){var e=this,n=this.element;return n?e=this.handleChild(t):(n=this.element=this.createElement(t),this.context.addElement(n)),e},Ce.prototype=Object.create(ns.prototype),Ce.prototype.addReference=function(t){this.context.addReference(t)},Ce.prototype.handleText=function(t){if(!Un(this.element).bodyProperty)throw vi("unexpected body text <"+t+">");kr.prototype.handleText.call(this,t)},Ce.prototype.handleEnd=function(){var t=this.body,e=this.element,n=Un(e).bodyProperty;n&&t!==void 0&&(t=Wl(n.type,t),e.set(n.name,t))},Ce.prototype.createElement=function(t){var e,n=t.attributes,i=this.type,r=Un(i),o=this.context,a=new i({}),c=this.model;return L(n,function(l,u){var p=r.propertiesByName[u];p&&p.isReference?p.isMany?L(l.split(" "),function(d){o.addReference({element:a,property:p.ns.name,id:d})}):o.addReference({element:a,property:p.ns.name,id:l}):(p?l=Wl(p.type,l):u!=="xmlns"&&(e=Pe(u,r.ns.prefix),c.getPackage(e.prefix)&&o.addWarning({message:"unknown attribute <"+u+">",element:a,property:u,value:l})),a.set(u,l))}),a},Ce.prototype.getPropertyForNode=function(t){var e,n,i=Pe(t.name),r=this.type,o=this.model,a=Un(r),c=i.name,l=a.propertiesByName[c];if(l&&!l.isAttr)return um(l)&&(e=t.attributes[es])?(e=function(p,d){var v=Pe(p);return function(f,y){var b=f.name,g=f.localName,w=y.xml&&y.xml.typePrefix;return w&&g.indexOf(w)===0?f.prefix+":"+g.slice(w.length):b}(v,d.getPackage(v.prefix))}(e,o),$({},l,{effectiveType:Un(n=o.getType(e)).name})):l;var u=o.getPackage(i.prefix);if(u){if(e=pm(i,u),n=o.getType(e),l=Pt(a.properties,function(p){return!p.isVirtual&&!p.isReference&&!p.isAttribute&&n.hasType(p.type)}))return $({},l,{effectiveType:Un(n).name})}else if(l=Pt(a.properties,function(p){return!p.isReference&&!p.isAttribute&&p.type==="Element"}))return l;throw vi("unrecognized element <"+i.name+">")},Ce.prototype.toString=function(){return"ElementDescriptor["+Un(this.type).name+"]"},Ce.prototype.valueHandler=function(t,e){return new Jl(t,e)},Ce.prototype.referenceHandler=function(t){return new Po(t,this.context)},Ce.prototype.handler=function(t){return t==="Element"?new Pr(this.model,t,this.context):new Ce(this.model,t,this.context)},Ce.prototype.handleChild=function(t){var e,n,i,r;if(e=this.getPropertyForNode(t),i=this.element,tm(n=e.effectiveType||e.type))return this.valueHandler(e,i);var o=(r=e.isReference?this.referenceHandler(e).handleNode(t):this.handler(n).handleNode(t)).element;return o!==void 0&&(e.isMany?i.get(e.name).push(o):i.set(e.name,o),e.isReference?($(o,{element:i}),this.context.addReference(o)):o.$parent=i),r},Zl.prototype=Object.create(Ce.prototype),Zl.prototype.createElement=function(t){var e=t.name,n=Pe(e),i=this.model,r=this.type,o=i.getPackage(n.prefix),a=o&&pm(n,o)||e;if(!r.hasType(a))throw vi("unexpected element <"+t.originalName+">");return Ce.prototype.createElement.call(this,t)},Pr.prototype=Object.create(ns.prototype),Pr.prototype.createElement=function(t){var e=t.name,n=Pe(e).prefix,i=t.ns[n+"$uri"],r=t.attributes;return this.model.createAny(e,i,r)},Pr.prototype.handleChild=function(t){var e=new Pr(this.model,"Element",this.context).handleNode(t),n=this.element,i=e.element;return i!==void 0&&((n.$children=n.$children||[]).push(i),i.$parent=n),e},Pr.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},Ql.prototype.fromXML=function(t,e,n){var i=e.rootHandler;e instanceof Ce?(i=e,e={}):typeof e=="string"?(i=this.handler(e),e={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,o=this.lax,a=new qx($({},e,{rootHandler:i})),c=new sm({proxy:!0}),l=function(){var g=[];return Object.defineProperty(g,"peek",{value:function(){return this[this.length-1]}}),g}();function u(g,w,x){var S=w(),C=S.line,I=S.column,s=S.data;s.charAt(0)==="<"&&s.indexOf(" ")!==-1&&(s=s.slice(0,s.indexOf(" "))+">");var h="unparsable content "+(s?s+" ":"")+`detected
	line: `+C+`
	column: `+I+`
	nested error: `+g.message;if(x)return a.addWarning({message:h,error:g}),!0;throw vi(h)}function p(g,w){return u(g,w,!0)}i.context=a,l.push(i);var d=/^<\?xml /i,v=/ encoding="([^"]+)"/i,f=/^utf-8$/i;function y(g,w){try{l.peek().handleText(g)}catch(x){p(x,w)}}var b=r.getPackages().reduce(function(g,w){return g[w.uri]=w.prefix,g},{"http://www.w3.org/XML/1998/namespace":"xml"});return c.ns(b).on("openTag",function(g,w,x,S){var C=g.attrs||{},I=Object.keys(C).reduce(function(s,h){var m=w(C[h]);return s[h]=m,s},{});(function(s,h){var m=l.peek();try{l.push(m.handleNode(s))}catch(E){u(E,h,o)&&l.push(new Yl)}})({name:g.name,originalName:g.originalName,attributes:I,ns:g.ns},S)}).on("question",function(g){if(d.test(g)){var w=v.exec(g),x=w&&w[1];x&&!f.test(x)&&a.addWarning({message:"unsupported document encoding <"+x+">, falling back to UTF-8"})}}).on("closeTag",function(){l.pop().handleEnd()}).on("cdata",y).on("text",function(g,w,x){(function(S,C){S.trim()&&y(S,C)})(w(g),x)}).on("error",u).on("warn",p),new Promise(function(g,w){var x;try{c.parse(t),function(){var h,m,E=a.elementsById,T=a.references;for(h=0;m=T[h];h++){var R=m.element,D=E[m.id],z=Un(R).propertiesByName[m.property];if(D||a.addWarning({message:"unresolved reference <"+m.id+">",element:m.element,property:m.property,value:m.id}),z.isMany){var P=R.get(z.name),_=P.indexOf(m);_===-1&&(_=P.length),D?P[_]=D:P.splice(_,1)}else R.set(z.name,D)}}()}catch(h){x=h}var S=i.element;x||S||(x=vi("failed to parse document as <"+i.type.$descriptor.name+">"));var C=a.warnings,I=a.references,s=a.elementsById;return x?(x.warnings=C,w(x)):g({rootElement:S,elementsById:s,references:I,warnings:C})})},Ql.prototype.handler=function(t){return new Zl(this.model,t)};var Wx=/<|>|'|"|&|\n\r|\n/g,hm=/<|>|&/g;function Kx(t){var e={},n={},i={},r=[],o=[];this.byUri=function(a){return n[a]||t&&t.byUri(a)},this.add=function(a,c){n[a.uri]=a,c?r.push(a):o.push(a),this.mapPrefix(a.prefix,a.uri)},this.uriByPrefix=function(a){return e[a||"xmlns"]},this.mapPrefix=function(a,c){e[a||"xmlns"]=c},this.getNSKey=function(a){return a.prefix!==void 0?a.uri+"|"+a.prefix:a.uri},this.logUsed=function(a){var c=a.uri,l=this.getNSKey(a);i[l]=this.byUri(c),t&&t.logUsed(a)},this.getUsed=function(a){var c=this;return[].concat(r,o).filter(function(l){var u=c.getNSKey(l);return i[u]})}}function Xx(t,e){return cm(e)?(n=t).charAt(0).toLowerCase()+n.slice(1):t;var n}function dm(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function mm(t){return Ie(t)?t:(t.prefix?t.prefix+":":"")+t.localName}var Yx={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Jx={"<":"lt",">":"gt","&":"amp"};function fm(t,e,n){return(t=Ie(t)?t:""+t).replace(e,function(i){return"&"+n[i]+";"})}function tu(t){this.tagName=t}function Ui(){}function eu(t){this.tagName=t}function Gt(t,e){this.body=[],this.attrs=[],this.parent=t,this.propertyDescriptor=e}function is(t,e){Gt.call(this,t,e)}function Zx(){this.value="",this.write=function(t){this.value+=t}}function Qx(t,e){var n=[""];this.append=function(i){return t.write(i),this},this.appendNewLine=function(){return e&&t.write(`
`),this},this.appendIndent=function(){return e&&t.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function tE(t){return t=$({format:!1,preamble:!0},t||{}),{toXML:function(e,n){var i=n||new Zx,r=new Qx(i,t.format);if(t.preamble&&r.append(`<?xml version="1.0" encoding="UTF-8"?>
`),new Gt().build(e).serializeTo(r),!n)return i.value}}}function rs(t,e){Je.call(this,t,e)}tu.prototype.build=function(t){return this.element=t,this},tu.prototype.serializeTo=function(t){t.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},Ui.prototype.serializeValue=Ui.prototype.serializeTo=function(t){t.append(this.escape?fm(this.value,hm,Jx):this.value)},Ui.prototype.build=function(t,e){return this.value=e,t.type==="String"&&e.search(hm)!==-1&&(this.escape=!0),this},dm(eu,Ui),eu.prototype.serializeTo=function(t){t.appendIndent().append("<"+this.tagName+">"),this.serializeValue(t),t.append("</"+this.tagName+">").appendNewLine()},Gt.prototype.build=function(t){this.element=t;var e,n,i=t.$descriptor,r=this.propertyDescriptor,o=i.isGeneric;return e=o?this.parseGeneric(t):this.parseNsAttributes(t),this.ns=r?this.nsPropertyTagName(r):this.nsTagName(i),this.tagName=this.addTagName(this.ns),o||(n=function(a){return mt(a.$descriptor.properties,function(c){var l=c.name;if(c.isVirtual||!Tn(a,l))return!1;var u=a[l];return u!==c.default&&u!==null&&(!c.isMany||u.length)})}(t),this.parseAttributes(mt(n,function(a){return a.isAttr})),this.parseContainments(function(a){return mt(a,function(c){return!c.isAttr})}(n))),this.parseGenericAttributes(t,e),this},Gt.prototype.nsTagName=function(t){return function(e,n){return n.isGeneric?$({localName:n.ns.localName},e):$({localName:Xx(n.ns.localName,n.$pkg)},e)}(this.logNamespaceUsed(t.ns),t)},Gt.prototype.nsPropertyTagName=function(t){return function(e,n){return $({localName:n.ns.localName},e)}(this.logNamespaceUsed(t.ns),t)},Gt.prototype.isLocalNs=function(t){return t.uri===this.ns.uri},Gt.prototype.nsAttributeName=function(t){var e;if(e=Ie(t)?Pe(t):t.ns,t.inherited)return{localName:e.localName};var n=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:e.localName}:$({localName:e.localName},n)},Gt.prototype.parseGeneric=function(t){var e=this,n=this.body,i=[];return L(t,function(r,o){o==="$body"?n.push(new Ui().build({type:"String"},r)):o==="$children"?L(r,function(a){n.push(new Gt(e).build(a))}):o.indexOf("$")!==0&&e.parseNsAttribute(t,o,r)&&i.push({name:o,value:r})}),i},Gt.prototype.parseNsAttribute=function(t,e,n){var i,r=t.$model,o=Pe(e);if(o.prefix==="xmlns"&&(i={prefix:o.localName,uri:n}),o.prefix||o.localName!=="xmlns"||(i={uri:n}),!i)return{name:e,value:n};if(r&&r.getPackage(n))this.logNamespace(i,!0,!0);else{var a=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(a)}},Gt.prototype.parseNsAttributes=function(t,e){var n=this,i=t.$attrs,r=[];return L(i,function(o,a){var c=n.parseNsAttribute(t,a,o);c&&r.push(c)}),r},Gt.prototype.parseGenericAttributes=function(t,e){var n=this;L(e,function(i){if(i.name!==es)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch{}})},Gt.prototype.parseContainments=function(t){var e=this,n=this.body,i=this.element;L(t,function(r){var o=i.get(r.name),a=r.isReference;if(r.isMany||(o=[o]),r.isBody)n.push(new Ui().build(r,o[0]));else if(tm(r.type))L(o,function(u){n.push(new eu(e.addTagName(e.nsPropertyTagName(r))).build(r,u))});else if(a)L(o,function(u){n.push(new tu(e.addTagName(e.nsPropertyTagName(r))).build(u))});else{var c=um(r),l=function(u){return lm(u)==="property"}(r);L(o,function(u){var p;p=c?new is(e,r):l?new Gt(e,r):new Gt(e),n.push(p.build(u))})}})},Gt.prototype.getNamespaces=function(t){var e,n=this.namespaces,i=this.parent;return n||(e=i&&i.getNamespaces(),t||!e?this.namespaces=n=new Kx(e):n=e),n},Gt.prototype.logNamespace=function(t,e,n){var i=this.getNamespaces(n),r=t.uri,o=t.prefix;return i.byUri(r)&&!n||i.add(t,e),i.mapPrefix(o,r),t},Gt.prototype.logNamespaceUsed=function(t,e){var n,i,r,o=this.element.$model,a=this.getNamespaces(e),c=t.prefix,l=t.uri;if(!c&&!l)return{localName:t.localName};if(r=Hx[c]||o&&(o.getPackage(c)||{}).uri,!(l=l||r||a.uriByPrefix(c)))throw new Error("no namespace uri given for prefix <"+c+">");if(!(t=a.byUri(l))){for(n=c,i=1;a.uriByPrefix(n);)n=c+"_"+i++;t=this.logNamespace({prefix:n,uri:l},r===l)}return c&&a.mapPrefix(c,l),t},Gt.prototype.parseAttributes=function(t){var e=this,n=this.element;L(t,function(i){var r=n.get(i.name);if(i.isReference)if(i.isMany){var o=[];L(r,function(a){o.push(a.id)}),r=o.join(" ")}else r=r.id;e.addAttribute(e.nsAttributeName(i),r)})},Gt.prototype.addTagName=function(t){var e=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(e),mm(t)},Gt.prototype.addAttribute=function(t,e){var n=this.attrs;Ie(e)&&(e=fm(e,Wx,Yx));var i=ml(n,function(o){return o.name.localName===t.localName&&o.name.uri===t.uri&&o.name.prefix===t.prefix}),r={name:t,value:e};i!==-1?n.splice(i,1,r):n.push(r)},Gt.prototype.serializeAttributes=function(t){var e=this.attrs,n=this.namespaces;n&&(e=function(i){return i.getUsed().filter(function(r){return r.prefix!=="xml"}).map(function(r){return{name:"xmlns"+(r.prefix?":"+r.prefix:""),value:r.uri}})}(n).concat(e)),L(e,function(i){t.append(" ").append(mm(i.name)).append('="').append(i.value).append('"')})},Gt.prototype.serializeTo=function(t){var e=this.body[0],n=e&&e.constructor!==Ui;t.appendIndent().append("<"+this.tagName),this.serializeAttributes(t),t.append(e?">":" />"),e&&(n&&t.appendNewLine().indent(),L(this.body,function(i){i.serializeTo(t)}),n&&t.unindent().appendIndent(),t.append("</"+this.tagName+">")),t.appendNewLine()},dm(is,Gt),is.prototype.parseNsAttributes=function(t){var e=Gt.prototype.parseNsAttributes.call(this,t),n=t.$descriptor;if(n.name===this.propertyDescriptor.type)return e;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=t.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(es),(i.prefix?i.prefix+":":"")+o+n.ns.localName),e},is.prototype.isLocalNs=function(t){return t.uri===(this.typeNs||this.ns).uri},rs.prototype=Object.create(Je.prototype),rs.prototype.fromXML=function(t,e,n){Ie(e)||(n=e,e="bpmn:Definitions");var i=new Ql($({model:this,lax:!0},n)),r=i.handler(e);return i.fromXML(t,r)},rs.prototype.toXML=function(t,e){var n=new tE(e);return new Promise(function(i,r){try{return i({xml:n.toXML(t)})}catch(o){return r(o)}})};var eE={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",prefix:"bpmn",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isAttr:!0,isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",prefix:"bpmndi",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",prefix:"dc",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",prefix:"di",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]},color:{name:"BPMN in Color",uri:"http://www.omg.org/spec/BPMN/non-normative/color/1.0",prefix:"color",types:[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};function nE(t,e){return new rs($({},eE,t),e)}function Te(t){return t?"<"+t.$type+(t.id?' id="'+t.id:"")+'" />':"<null>"}var iE=new wr({name:"bpmnElement",enumerable:!0},{name:"di",configurable:!0});function Le(t,e){return t.$instanceOf(e)}function rE(t,e){var n={},i=[];function r(R,D){return function(z){R(z,D)}}function o(R){n[R.id]=R}function a(R,D){try{var z=R.di&&function(P,_){if(P.gfx)throw new Error(e("already rendered {element}",{element:Te(P)}));return t.element(P,_)}(R,D);return o(R),z}catch(P){c(P.message,{element:R,error:P})}}function c(R,D){t.error(R,D)}function l(R){var D=R.bpmnElement;D?D.di?c(e("multiple DI elements defined for {element}",{element:Te(D)}),{element:D}):(iE.bind(D,"di"),D.di=R):c(e("no bpmnElement referenced in {element}",{element:Te(R)}),{element:R})}function u(R){var D;l(D=R.plane),L(D.planeElement,p)}function p(R){l(R)}function d(){for(;i.length;)i.shift()()}function v(R,D){E(R,D),S(R.ioSpecification,D),x(R.artifacts,D),o(R)}function f(R,D){a(R,D)}function y(R,D){a(R,D)}function b(R,D){a(R,D)}function g(R,D){a(R,D)}function w(R,D){a(R,D)}function x(R,D){L(R,function(z){Le(z,"bpmn:Association")?i.push(function(){w(z,D)}):w(z,D)})}function S(R,D){R&&(L(R.dataInputs,r(b,D)),L(R.dataOutputs,r(g,D)))}function C(R,D){E(R,D),x(R.artifacts,D)}function I(R,D){var z=a(R,D);Le(R,"bpmn:SubProcess")&&C(R,z||D),Le(R,"bpmn:Activity")&&S(R.ioSpecification,D),i.push(function(){L(R.dataInputAssociations,r(y,D)),L(R.dataOutputAssociations,r(y,D))})}function s(R,D){a(R,D)}function h(R,D){i.push(function(){var z=a(R,D);R.childLaneSet&&m(R.childLaneSet,z||D),function(P){L(P.flowNodeRef,function(_){var B=_.get("lanes");B&&B.push(P)})}(R)})}function m(R,D){L(R.lanes,r(h,D))}function E(R,D){(function(z,P){L(z,function(_){Le(_,"bpmn:SequenceFlow")?i.push(function(){(function(B,V){a(B,V)})(_,P)}):Le(_,"bpmn:BoundaryEvent")?i.unshift(function(){I(_,P)}):Le(_,"bpmn:FlowNode")?I(_,P):Le(_,"bpmn:DataObject")||(Le(_,"bpmn:DataStoreReference")||Le(_,"bpmn:DataObjectReference")?s(_,P):c(e("unrecognized flowElement {element} in context {context}",{element:Te(_),context:P?Te(P.businessObject):"null"}),{element:_,context:P}))})})(R.flowElements,D),R.laneSets&&function(z,P){L(z,r(m,P))}(R.laneSets,D)}function T(R,D){var z=a(R,D),P=R.processRef;P&&v(P,z||D)}return{handleDeferred:d,handleDefinitions:function(R,D){var z=R.diagrams;if(D&&z.indexOf(D)===-1)throw new Error(e("diagram not part of bpmn:Definitions"));if(!D&&z&&z.length&&(D=z[0]),!D)throw new Error(e("no diagram to display"));u(D);var P=D.plane;if(!P)throw new Error(e("no plane for {element}",{element:Te(D)}));var _=P.bpmnElement;if(!_){if(_=function(G){return Pt(G.rootElements,function(J){return Le(J,"bpmn:Process")||Le(J,"bpmn:Collaboration")})}(R),!_)throw new Error(e("no process or collaboration to display"));c(e("correcting missing bpmnElement on {plane} to {rootElement}",{plane:Te(P),rootElement:Te(_)})),P.bpmnElement=_,l(P)}var B,V=function(G,J){return t.root(G,J)}(_,P);if(Le(_,"bpmn:Process"))v(_,V);else{if(!Le(_,"bpmn:Collaboration"))throw new Error(e("unsupported bpmnElement for {plane}: {rootElement}",{plane:Te(P),rootElement:Te(_)}));L((B=_).participants,r(T)),x(B.artifacts),i.push(function(){var G;L(B.messageFlows,r(f,G))}),function(G,J){mt(G,function(tt){return!n[tt.id]&&Le(tt,"bpmn:Process")&&tt.laneSets}).forEach(r(v,J))}(R.rootElements,V)}d()},handleSubProcess:C,registerDi:l}}function oE(t,e,n){var i,r,o,a=[];return new Promise(function(c,l){try{return i=t.get("bpmnImporter"),r=t.get("eventBus"),o=t.get("translate"),r.fire("import.render.start",{definitions:e}),function(u,p){new rE({root:function(d){return i.add(d)},element:function(d,v){return i.add(d,v)},error:function(d,v){a.push({message:d,context:v})}},o).handleDefinitions(u,p)}(e,n),r.fire("import.render.complete",{error:void 0,warnings:a}),c({warnings:a})}catch(u){return u.warnings=a,l(u)}})}function Mr(t){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var e=arguments.length;if(!(e>=1&&ve(arguments[e-1])))return t.apply(this,arguments);var n=arguments[e-1],i=Array.prototype.slice.call(arguments,0,-1);t.apply(this,i).then(function(r){var o=Object.keys(r)[0];return n(null,r[o])},function(r){return n(r,r.warnings)})}}var vm='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21" style="vertical-align:middle"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>';function os(t){return t.join(";")}var Mo,ym=os(["color: #404040"]),aE='<div class="bjs-powered-by-lightbox" style="'+os(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+os(["width: 100%","height: 100%","background: rgba(40,40,40,0.2)"])+'"></div><div class="notice" style="'+os(["position: absolute","left: 50%","top: 40%","transform: translate(-50%)","width: 260px","padding: 10px","background: white","box-shadow: 0 1px 4px rgba(0,0,0,0.3)","font-family: Helvetica, Arial, sans-serif","font-size: 14px","display: flex","line-height: 1.3"])+'"><a href="https://bpmn.io" target="_blank" rel="noopener" style="margin: 15px 20px 15px 10px; align-self: center;'+ym+'">'+vm+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';function Ut(t){var e,n;t=$({},sE,t),this._moddle=this._createModdle(t),this._container=this._createContainer(t),e=this._container,n=Vt('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100; '+ym+'">'+vm+"</a>"),e.appendChild(n),st.bind(n,"click",function(i){Mo||(Mo=Vt(aE),ze.bind(Mo,".backdrop","click",function(r){document.body.removeChild(Mo)})),document.body.appendChild(Mo),i.preventDefault()}),this._init(this._container,this._moddle,t)}function as(t,e){return t.warnings=e,t}it(Ut,Cr),Ut.prototype.importXML=Mr(function(t,e){var n=this;return new Promise(function(i,r){t=n._emit("import.parse.start",{xml:t})||t,n._moddle.fromXML(t,"bpmn:Definitions").then(function(o){var a=o.rootElement,c=o.references,l=o.warnings,u=o.elementsById;a=n._emit("import.parse.complete",function(p){var d=n.get("eventBus").createEvent(p);return Object.defineProperty(d,"context",{enumerable:!0,get:function(){return{warnings:p.warnings,references:p.references,elementsById:p.elementsById}}}),d}({error:null,definitions:a,elementsById:u,references:c,warnings:l}))||a,n.importDefinitions(a,e).then(function(p){var d=[].concat(l,p.warnings||[]);return n._emit("import.done",{error:null,warnings:d}),i({warnings:d})}).catch(function(p){var d=[].concat(l,p.warnings||[]);return n._emit("import.done",{error:p,warnings:d}),r(as(p,d))})}).catch(function(o){return n._emit("import.parse.complete",{error:o}),o=function(a){var c=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(a.message);return c&&(a.message="unparsable content <"+c[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+c[2]),a}(o),n._emit("import.done",{error:o,warnings:o.warnings}),r(o)})})}),Ut.prototype.importDefinitions=Mr(function(t,e){var n=this;return new Promise(function(i,r){n._setDefinitions(t),n.open(e).then(function(o){var a=o.warnings;return i({warnings:a})}).catch(function(o){return r(o)})})}),Ut.prototype.open=Mr(function(t){var e=this._definitions,n=t,i=this;return new Promise(function(r,o){if(!e){var a=new Error("no XML imported");return o(as(a,[]))}if(typeof t=="string"&&(n=function(l,u){return u&&Pt(l.diagrams,function(p){return p.id===u})||null}(e,t),!n)){var c=new Error("BPMNDiagram <"+t+"> not found");return o(as(c,[]))}try{i.clear()}catch(l){return o(as(l,[]))}oE(i,e,n).then(function(l){var u=l.warnings;return r({warnings:u})}).catch(function(l){return o(l)})})}),Ut.prototype.saveXML=Mr(function(t){t=t||{};var e=this,n=this._definitions;return new Promise(function(i){if(!n)return i({error:new Error("no definitions loaded")});n=e._emit("saveXML.start",{definitions:n})||n,e._moddle.toXML(n,t).then(function(r){var o=r.xml;return o=e._emit("saveXML.serialized",{xml:o})||o,i({xml:o})})}).catch(function(i){return{error:i}}).then(function(i){e._emit("saveXML.done",i);var r=i.error;return r?Promise.reject(r):i})}),Ut.prototype.saveSVG=Mr(function(t){var e=this;return new Promise(function(n,i){var r,o;e._emit("saveSVG.start");try{var a=e.get("canvas"),c=a.getDefaultLayer(),l=Wt("defs",a._svg),u=vd(c),p=l?"<defs>"+vd(l)+"</defs>":"",d=c.getBBox();r=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+d.width+'" height="'+d.height+'" viewBox="'+d.x+" "+d.y+" "+d.width+" "+d.height+'" version="1.1">'+p+u+"</svg>"}catch(v){o=v}return e._emit("saveSVG.done",{error:o,svg:r}),o?i(o):n({svg:r})})}),Ut.prototype._setDefinitions=function(t){this._definitions=t},Ut.prototype.getModules=function(){return this._modules},Ut.prototype.clear=function(){this.getDefinitions()&&(this.get("elementRegistry").forEach(function(t){var e=t.businessObject;e&&e.di&&delete e.di}),Cr.prototype.clear.call(this))},Ut.prototype.destroy=function(){Cr.prototype.destroy.call(this),An(this._container)},Ut.prototype.on=function(t,e,n,i){return this.get("eventBus").on(t,e,n,i)},Ut.prototype.off=function(t,e){this.get("eventBus").off(t,e)},Ut.prototype.attachTo=function(t){if(!t)throw new Error("parentNode required");this.detach(),t.get&&t.constructor.prototype.jquery&&(t=t.get(0)),typeof t=="string"&&(t=Wt(t)),t.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},Ut.prototype.getDefinitions=function(){return this._definitions},Ut.prototype.detach=function(){var t=this._container,e=t.parentNode;e&&(this._emit("detach",{}),e.removeChild(t))},Ut.prototype._init=function(t,e,n){var i=n.modules||this.getModules(),r=n.additionalModules||[],o=[].concat([{bpmnjs:["value",this],moddle:["value",e]}],i,r),a=$(Fn(n,["additionalModules"]),{canvas:$({},n.canvas,{container:t}),modules:o});Cr.call(this,a),n&&n.container&&this.attachTo(n.container)},Ut.prototype._emit=function(t,e){return this.get("eventBus").fire(t,e)},Ut.prototype._createContainer=function(t){var e=Vt('<div class="bjs-container"></div>');return $(e.style,{width:gm(t.width),height:gm(t.height),position:t.position}),e},Ut.prototype._createModdle=function(t){return new nE($({},this._moddleExtensions,t.moddleExtensions))},Ut.prototype._modules=[];var sE={width:"100%",height:"100%",position:"relative"};function gm(t){return t+(pt(t)?"px":"")}function Ro(t){Ut.call(this,t),this.on("import.parse.complete",function(e){e.error||this._collectIds(e.definitions,e.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}A=function(t,e){var n=et(t);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(e)},wt=function(t,e){return si(e,function(n){return A(t,n)})};function et(t){return t&&t.businessObject||t}Mt=function(t){return!A(t,"bpmn:CallActivity")&&(A(t,"bpmn:SubProcess")?et(t).di&&!!et(t).di.isExpanded:!A(t,"bpmn:Participant")||!!et(t).processRef)},Ne=function(t){return t&&!!et(t).triggeredByEvent};function ss(t,e){var n=et(t),i=!1;return n.eventDefinitions&&L(n.eventDefinitions,function(r){A(r,e)&&(i=!0)}),i}function bm(t){return A(t,"bpmn:FlowElement")||A(t,"bpmn:Participant")||A(t,"bpmn:Lane")||A(t,"bpmn:SequenceFlow")||A(t,"bpmn:MessageFlow")||A(t,"bpmn:DataInput")||A(t,"bpmn:DataOutput")?"name":A(t,"bpmn:TextAnnotation")?"text":A(t,"bpmn:Group")?"categoryValueRef":void 0}function pn(t){var e=t.businessObject,n=bm(e);if(n)return n==="categoryValueRef"?function(i){var r=i.categoryValueRef;return r&&r.value||""}(e):e[n]||""}function Mn(t,e,n){return si(t.eventDefinitions,function(i){return i.$type===e&&function(r,o){return ji(o,function(a,c){return r[c]==a})}(t,n)})}function Rr(t){return t.businessObject.di}function Ae(t){return t.businessObject}function Et(t,e){var n=Rr(t);return n.get("color:background-color")||n.get("bioc:fill")||e||"white"}function Z(t,e){var n=Rr(t);return n.get("color:border-color")||n.get("bioc:stroke")||e||"black"}function No(t,e,n){var i=Rr(t).get("label");return i&&i.get("color:color")||e||Z(t,n)}it(Ro,Ut),Ro.prototype._createModdle=function(t){var e=Ut.prototype._createModdle.call(this,t);return e.ids=new Cn([32,36,1]),e},Ro.prototype._collectIds=function(t,e){var n,i=t.$model.ids;for(n in i.clear(),e)i.claim(n,e[n])};var cE=new Cn,Nr=.95;function Hi(t,e,n,i,r,o,a){$n.call(this,e,a);var c=t&&t.defaultFillColor,l=t&&t.defaultStrokeColor,u=t&&t.defaultLabelColor,p=cE.next(),d={},v=n.computeStyle;function f(P,_){var B=$({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},_.attrs),V=_.ref||{x:0,y:0},G=_.scale||1;B.strokeDasharray==="none"&&(B.strokeDasharray=[1e4,1]);var J=rt("marker");K(_.element,B),lt(J,_.element),K(J,{id:P,viewBox:"0 0 20 20",refX:V.x,refY:V.y,markerWidth:20*G,markerHeight:20*G,orient:"auto"});var tt=Wt("defs",r._svg);tt||(tt=rt("defs"),lt(r._svg,tt)),lt(tt,J),d[P]=J}function y(P){return P.replace(/[^0-9a-zA-z]+/g,"_")}function b(P,_,B){var V=P+"-"+y(_)+"-"+y(B)+"-"+p;return d[V]||function(G,J,tt,ct){if(J==="sequenceflow-end"){var at=rt("path");K(at,{d:"M 1 5 L 11 10 L 1 15 Z"}),f(G,{element:at,ref:{x:11,y:10},scale:.5,attrs:{fill:ct,stroke:ct}})}if(J==="messageflow-start"){var H=rt("circle");K(H,{cx:6,cy:6,r:3.5}),f(G,{element:H,attrs:{fill:tt,stroke:ct},ref:{x:6,y:6}})}if(J==="messageflow-end"){var q=rt("path");K(q,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),f(G,{element:q,attrs:{fill:tt,stroke:ct,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if(J==="association-start"){var xt=rt("path");K(xt,{d:"M 11 5 L 1 10 L 11 15"}),f(G,{element:xt,attrs:{fill:"none",stroke:ct,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if(J==="association-end"){var Kt=rt("path");K(Kt,{d:"M 1 5 L 11 10 L 1 15"}),f(G,{element:Kt,attrs:{fill:"none",stroke:ct,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if(J==="conditional-flow-marker"){var ce=rt("path");K(ce,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),f(G,{element:ce,attrs:{fill:tt,stroke:ct},ref:{x:-1,y:10},scale:.5})}if(J==="conditional-default-flow-marker"){var Bt=rt("path");K(Bt,{d:"M 6 4 L 10 16"}),f(G,{element:Bt,attrs:{stroke:ct},ref:{x:0,y:10},scale:.5})}}(V,P,_,B),"url(#"+V+")"}function g(P,_,B,V,G){te(V)&&(G=V,V=0),V=V||0,(G=v(G,{stroke:"black",strokeWidth:2,fill:"white"})).fill==="none"&&delete G.fillOpacity;var J=_/2,tt=B/2,ct=rt("circle");return K(ct,{cx:J,cy:tt,r:Math.round((_+B)/4-V)}),K(ct,G),lt(P,ct),ct}function w(P,_,B,V,G,J){te(G)&&(J=G,G=0),G=G||0,J=v(J,{stroke:"black",strokeWidth:2,fill:"white"});var tt=rt("rect");return K(tt,{x:G,y:G,width:_-2*G,height:B-2*G,rx:V,ry:V}),K(tt,J),lt(P,tt),tt}function x(P,_,B){var V=Bl(_,B=v(B,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"}));return lt(P,V),V}function S(P,_,B){B=v(B,["no-fill"],{strokeWidth:2,stroke:"black"});var V=rt("path");return K(V,{d:_}),K(V,B),lt(P,V),V}function C(P,_,B,V){return S(_,B,$({"data-marker":P},V))}function I(P){return function(_,B){return D[P](_,B)}}function s(P){return D[P]}function h(P,_){var B=Ae(P),V=function(G){return G.$type==="bpmn:IntermediateThrowEvent"||G.$type==="bpmn:EndEvent"}(B);return B.eventDefinitions&&B.eventDefinitions.length>1?B.parallelMultiple?s("bpmn:ParallelMultipleEventDefinition")(_,P,V):s("bpmn:MultipleEventDefinition")(_,P,V):Mn(B,"bpmn:MessageEventDefinition")?s("bpmn:MessageEventDefinition")(_,P,V):Mn(B,"bpmn:TimerEventDefinition")?s("bpmn:TimerEventDefinition")(_,P,V):Mn(B,"bpmn:ConditionalEventDefinition")?s("bpmn:ConditionalEventDefinition")(_,P):Mn(B,"bpmn:SignalEventDefinition")?s("bpmn:SignalEventDefinition")(_,P,V):Mn(B,"bpmn:EscalationEventDefinition")?s("bpmn:EscalationEventDefinition")(_,P,V):Mn(B,"bpmn:LinkEventDefinition")?s("bpmn:LinkEventDefinition")(_,P,V):Mn(B,"bpmn:ErrorEventDefinition")?s("bpmn:ErrorEventDefinition")(_,P,V):Mn(B,"bpmn:CancelEventDefinition")?s("bpmn:CancelEventDefinition")(_,P,V):Mn(B,"bpmn:CompensateEventDefinition")?s("bpmn:CompensateEventDefinition")(_,P,V):Mn(B,"bpmn:TerminateEventDefinition")?s("bpmn:TerminateEventDefinition")(_,P,V):null}function m(P,_,B){B=$({size:{width:100}},B);var V=o.createText(_||"",B);return bt(V).add("djs-label"),lt(P,V),V}function E(P,_,B){return m(P,Ae(_).name,{box:_,align:B,padding:5,style:{fill:No(_,u,l)}})}function T(P,_,B){Hl(m(P,_,{box:{height:30,width:B.height},align:"center-middle",style:{fill:No(B,u,l)}}),0,-(-1*B.height),270)}function R(P){for(var _=P.waypoints,B="m  "+_[0].x+","+_[0].y,V=1;V<_.length;V++)B+="L"+_[V].x+","+_[V].y+" ";return B}var D=this.handlers={"bpmn:Event":function(P,_,B){return"fillOpacity"in B||(B.fillOpacity=Nr),g(P,_.width,_.height,B)},"bpmn:StartEvent":function(P,_){var B={fill:Et(_,c),stroke:Z(_,l)};Ae(_).isInterrupting||(B={strokeDasharray:"6",strokeLinecap:"round",fill:Et(_,c),stroke:Z(_,l)});var V=s("bpmn:Event")(P,_,B);return h(_,P),V},"bpmn:MessageEventDefinition":function(P,_,B){return S(P,i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:_.width,containerHeight:_.height,position:{mx:.235,my:.315}}),{strokeWidth:1,fill:B?Z(_,l):Et(_,c),stroke:B?Et(_,c):Z(_,l)})},"bpmn:TimerEventDefinition":function(P,_){var B=g(P,_.width,_.height,.2*_.height,{strokeWidth:2,fill:Et(_,c),stroke:Z(_,l)});S(P,i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:_.width,containerHeight:_.height,position:{mx:.5,my:.5}}),{strokeWidth:2,strokeLinecap:"square",stroke:Z(_,l)});for(var V=0;V<12;V++){var G=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:_.width,containerHeight:_.height,position:{mx:.5,my:.5}}),J=_.width/2;S(P,G,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*V+","+_.height/2+","+J+")",stroke:Z(_,l)})}return B},"bpmn:EscalationEventDefinition":function(P,_,B){return S(P,i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:B?Z(_,l):"none",stroke:Z(_,l)})},"bpmn:ConditionalEventDefinition":function(P,_){return S(P,i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:.5,my:.222}}),{strokeWidth:1,stroke:Z(_,l)})},"bpmn:LinkEventDefinition":function(P,_,B){return S(P,i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:.57,my:.263}}),{strokeWidth:1,fill:B?Z(_,l):"none",stroke:Z(_,l)})},"bpmn:ErrorEventDefinition":function(P,_,B){return S(P,i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:_.width,containerHeight:_.height,position:{mx:.2,my:.722}}),{strokeWidth:1,fill:B?Z(_,l):"none",stroke:Z(_,l)})},"bpmn:CancelEventDefinition":function(P,_,B){var V=S(P,i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:.638,my:-.055}}),{strokeWidth:1,fill:B?Z(_,l):"none",stroke:Z(_,l)});return Yd(V,45),V},"bpmn:CompensateEventDefinition":function(P,_,B){return S(P,i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:.22,my:.5}}),{strokeWidth:1,fill:B?Z(_,l):"none",stroke:Z(_,l)})},"bpmn:SignalEventDefinition":function(P,_,B){return S(P,i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:_.width,containerHeight:_.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:B?Z(_,l):"none",stroke:Z(_,l)})},"bpmn:MultipleEventDefinition":function(P,_,B){return S(P,i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:_.width,containerHeight:_.height,position:{mx:.222,my:.36}}),{strokeWidth:1,fill:B?Z(_,l):"none"})},"bpmn:ParallelMultipleEventDefinition":function(P,_){return S(P,i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:_.width,containerHeight:_.height,position:{mx:.458,my:.194}}),{strokeWidth:1,fill:Z(_,l),stroke:Z(_,l)})},"bpmn:EndEvent":function(P,_){var B=s("bpmn:Event")(P,_,{strokeWidth:4,fill:Et(_,c),stroke:Z(_,l)});return h(_,P),B},"bpmn:TerminateEventDefinition":function(P,_){return g(P,_.width,_.height,8,{strokeWidth:4,fill:Z(_,l),stroke:Z(_,l)})},"bpmn:IntermediateEvent":function(P,_){var B=s("bpmn:Event")(P,_,{strokeWidth:1,fill:Et(_,c),stroke:Z(_,l)});return g(P,_.width,_.height,3,{strokeWidth:1,fill:Et(_,"none"),stroke:Z(_,l)}),h(_,P),B},"bpmn:IntermediateCatchEvent":I("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":I("bpmn:IntermediateEvent"),"bpmn:Activity":function(P,_,B){return"fillOpacity"in(B=B||{})||(B.fillOpacity=Nr),w(P,_.width,_.height,10,B)},"bpmn:Task":function(P,_){var B={fill:Et(_,c),stroke:Z(_,l)},V=s("bpmn:Activity")(P,_,B);return E(P,_,"center-middle"),z(P,_),V},"bpmn:ServiceTask":function(P,_){var B=s("bpmn:Task")(P,_);return S(P,i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{strokeWidth:1,fill:Et(_,c),stroke:Z(_,l)}),S(P,i.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),{strokeWidth:0,fill:Et(_,c)}),S(P,i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{strokeWidth:1,fill:Et(_,c),stroke:Z(_,l)}),B},"bpmn:UserTask":function(P,_){var B=s("bpmn:Task")(P,_);return S(P,i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Et(_,c),stroke:Z(_,l)}),S(P,i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Et(_,c),stroke:Z(_,l)}),S(P,i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Z(_,l),stroke:Z(_,l)}),B},"bpmn:ManualTask":function(P,_){var B=s("bpmn:Task")(P,_);return S(P,i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:.5,fill:Et(_,c),stroke:Z(_,l)}),B},"bpmn:SendTask":function(P,_){var B=s("bpmn:Task")(P,_);return S(P,i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{strokeWidth:1,fill:Z(_,l),stroke:Et(_,c)}),B},"bpmn:ReceiveTask":function(P,_){var B,V=Ae(_),G=s("bpmn:Task")(P,_);return V.instantiate?(g(P,28,28,4.4,{strokeWidth:1}),B=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):B=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),S(P,B,{strokeWidth:1,fill:Et(_,c),stroke:Z(_,l)}),G},"bpmn:ScriptTask":function(P,_){var B=s("bpmn:Task")(P,_);return S(P,i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{strokeWidth:1,stroke:Z(_,l)}),B},"bpmn:BusinessRuleTask":function(P,_){var B=s("bpmn:Task")(P,_);return K(S(P,i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}})),{strokeWidth:1,fill:Et(_,"#aaaaaa"),stroke:Z(_,l)}),K(S(P,i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}})),{strokeWidth:1,stroke:Z(_,l)}),B},"bpmn:SubProcess":function(P,_,B){B=$({fill:Et(_,c),stroke:Z(_,l)},B);var V=s("bpmn:Activity")(P,_,B),G=Mt(_);return Ne(_)&&K(V,{strokeDasharray:"1,2"}),E(P,_,G?"center-top":"center-middle"),G?z(P,_):z(P,_,["SubProcessMarker"]),V},"bpmn:AdHocSubProcess":function(P,_){return s("bpmn:SubProcess")(P,_)},"bpmn:Transaction":function(P,_){var B=s("bpmn:SubProcess")(P,_),V=n.style(["no-fill","no-events"],{stroke:Z(_,l)});return w(P,_.width,_.height,8,3,V),B},"bpmn:CallActivity":function(P,_){return s("bpmn:SubProcess")(P,_,{strokeWidth:5})},"bpmn:Participant":function(P,_){var B={fillOpacity:Nr,fill:Et(_,c),stroke:Z(_,l)},V=s("bpmn:Lane")(P,_,B);return Mt(_)?(x(P,[{x:30,y:0},{x:30,y:_.height}],{stroke:Z(_,l)}),T(P,Ae(_).name,_)):m(P,Ae(_).name,{box:_,align:"center-middle",style:{fill:No(_,u,l)}}),Ae(_).participantMultiplicity&&s("ParticipantMultiplicityMarker")(P,_),V},"bpmn:Lane":function(P,_,B){var V=w(P,_.width,_.height,0,$({fill:Et(_,c),fillOpacity:.35,stroke:Z(_,l)},B)),G=Ae(_);return G.$type==="bpmn:Lane"&&T(P,G.name,_),V},"bpmn:InclusiveGateway":function(P,_){var B=s("bpmn:Gateway")(P,_);return g(P,_.width,_.height,.24*_.height,{strokeWidth:2.5,fill:Et(_,c),stroke:Z(_,l)}),B},"bpmn:ExclusiveGateway":function(P,_){var B=s("bpmn:Gateway")(P,_),V=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:_.width,containerHeight:_.height,position:{mx:.32,my:.3}});return Rr(_).isMarkerVisible&&S(P,V,{strokeWidth:1,fill:Z(_,l),stroke:Z(_,l)}),B},"bpmn:ComplexGateway":function(P,_){var B=s("bpmn:Gateway")(P,_);return S(P,i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:_.width,containerHeight:_.height,position:{mx:.46,my:.26}}),{strokeWidth:1,fill:Z(_,l),stroke:Z(_,l)}),B},"bpmn:ParallelGateway":function(P,_){var B=s("bpmn:Gateway")(P,_);return S(P,i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:_.width,containerHeight:_.height,position:{mx:.46,my:.2}}),{strokeWidth:1,fill:Z(_,l),stroke:Z(_,l)}),B},"bpmn:EventBasedGateway":function(P,_){var B=Ae(_),V=s("bpmn:Gateway")(P,_);g(P,_.width,_.height,.2*_.height,{strokeWidth:1,fill:"none",stroke:Z(_,l)});var G=B.eventGatewayType,J=!!B.instantiate;if(G==="Parallel"){var tt=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:_.width,containerHeight:_.height,position:{mx:.474,my:.296}});K(S(P,tt),{strokeWidth:1,fill:"none"})}else G==="Exclusive"&&(J||K(g(P,_.width,_.height,.26*_.height),{strokeWidth:1,fill:"none",stroke:Z(_,l)}),function(){var ct=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:_.width,containerHeight:_.height,position:{mx:.36,my:.44}}),at={strokeWidth:2,fill:Et(_,"none"),stroke:Z(_,l)};S(P,ct,at)}());return V},"bpmn:Gateway":function(P,_){var B={fill:Et(_,c),fillOpacity:Nr,stroke:Z(_,l)};return function(V,G,J,tt){var ct=G/2,at=J/2,H=[{x:ct,y:0},{x:G,y:at},{x:ct,y:J},{x:0,y:at}].map(function(xt){return xt.x+","+xt.y}).join(" ");tt=v(tt,{stroke:"black",strokeWidth:2,fill:"white"});var q=rt("polygon");return K(q,{points:H}),K(q,tt),lt(V,q),q}(P,_.width,_.height,B)},"bpmn:SequenceFlow":function(P,_){var B,V=R(_),G=Et(_,c),J=Z(_,l),tt=S(P,V,{strokeLinejoin:"round",markerEnd:b("sequenceflow-end",G,J),stroke:Z(_,l)}),ct=Ae(_);return _.source&&(B=_.source.businessObject,ct.conditionExpression&&B.$instanceOf("bpmn:Activity")&&K(tt,{markerStart:b("conditional-flow-marker",G,J)}),B.default&&(B.$instanceOf("bpmn:Gateway")||B.$instanceOf("bpmn:Activity"))&&B.default===ct&&K(tt,{markerStart:b("conditional-default-flow-marker",G,J)})),tt},"bpmn:Association":function(P,_,B){var V=Ae(_),G=Et(_,c),J=Z(_,l);return B=$({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",stroke:Z(_,l)},B||{}),V.associationDirection!=="One"&&V.associationDirection!=="Both"||(B.markerEnd=b("association-end",G,J)),V.associationDirection==="Both"&&(B.markerStart=b("association-start",G,J)),x(P,_.waypoints,B)},"bpmn:DataInputAssociation":function(P,_){var B=Et(_,c),V=Z(_,l);return s("bpmn:Association")(P,_,{markerEnd:b("association-end",B,V)})},"bpmn:DataOutputAssociation":function(P,_){var B=Et(_,c),V=Z(_,l);return s("bpmn:Association")(P,_,{markerEnd:b("association-end",B,V)})},"bpmn:MessageFlow":function(P,_){var B=Ae(_),V=Rr(_),G=Et(_,c),J=Z(_,l),tt=S(P,R(_),{markerEnd:b("messageflow-end",G,J),markerStart:b("messageflow-start",G,J),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px",stroke:Z(_,l)});if(B.messageRef){var ct=tt.getPointAtLength(tt.getTotalLength()/2),at=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:ct.x,y:ct.y}}),H={strokeWidth:1};V.messageVisibleKind==="initiating"?(H.fill="white",H.stroke="black"):(H.fill="#888",H.stroke="white");var q=S(P,at,H),xt=m(P,B.messageRef.name,{align:"center-top",fitBox:!0,style:{fill:Z(_,u)}}),Kt=q.getBBox(),ce=xt.getBBox();Hl(xt,ct.x-ce.width/2,ct.y+Kt.height/2+10,0)}return tt},"bpmn:DataObject":function(P,_){var B=S(P,i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:.474,my:.296}}),{fill:Et(_,c),fillOpacity:Nr,stroke:Z(_,l)});return function(V){var G=V.dataObjectRef;return V.isCollection||G&&G.isCollection}(Ae(_))&&function(V,G){var J=(G.height-18)/G.height,tt=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:G.width,containerHeight:G.height,position:{mx:.33,my:J}});S(V,tt,{strokeWidth:2})}(P,_),B},"bpmn:DataObjectReference":I("bpmn:DataObject"),"bpmn:DataInput":function(P,_){var B=i.getRawPath("DATA_ARROW"),V=s("bpmn:DataObject")(P,_);return S(P,B,{strokeWidth:1}),V},"bpmn:DataOutput":function(P,_){var B=i.getRawPath("DATA_ARROW"),V=s("bpmn:DataObject")(P,_);return S(P,B,{strokeWidth:1,fill:"black"}),V},"bpmn:DataStoreReference":function(P,_){return S(P,i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:0,my:.133}}),{strokeWidth:2,fill:Et(_,c),fillOpacity:Nr,stroke:Z(_,l)})},"bpmn:BoundaryEvent":function(P,_){var B=Ae(_).cancelActivity,V={strokeWidth:1,fill:Et(_,c),stroke:Z(_,l)};B||(V.strokeDasharray="6",V.strokeLinecap="round");var G=$({},V,{fillOpacity:1}),J=$({},V,{fill:"none"}),tt=s("bpmn:Event")(P,_,G);return g(P,_.width,_.height,3,J),h(_,P),tt},"bpmn:Group":function(P,_){return w(P,_.width,_.height,10,{stroke:Z(_,l),strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"})},label:function(P,_){return function(B,V){var G={width:90,height:30,x:V.width/2+V.x,y:V.height/2+V.y};return m(B,pn(V),{box:G,fitBox:!0,style:$({},o.getExternalStyle(),{fill:No(V,u,l)})})}(P,_)},"bpmn:TextAnnotation":function(P,_){var B=w(P,_.width,_.height,0,0,{fill:"none",stroke:"none"});return S(P,i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:0,my:0}}),{stroke:Z(_,l)}),m(P,Ae(_).text||"",{box:_,align:"left-top",padding:5,style:{fill:No(_,u,l)}}),B},ParticipantMultiplicityMarker:function(P,_){C("participant-multiplicity",P,i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:_.width/2/_.width,my:(_.height-15)/_.height}}),{strokeWidth:2,fill:Et(_,c),stroke:Z(_,l)})},SubProcessMarker:function(P,_){Oe(w(P,14,14,0,{strokeWidth:1,fill:Et(_,c),stroke:Z(_,l)}),_.width/2-7.5,_.height-20),C("sub-process",P,i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:_.width,containerHeight:_.height,position:{mx:(_.width/2-7.5)/_.width,my:(_.height-20)/_.height}}),{fill:Et(_,c),stroke:Z(_,l)})},ParallelMarker:function(P,_,B){C("parallel",P,i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:(_.width/2+B.parallel)/_.width,my:(_.height-20)/_.height}}),{fill:Et(_,c),stroke:Z(_,l)})},SequentialMarker:function(P,_,B){C("sequential",P,i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:(_.width/2+B.seq)/_.width,my:(_.height-19)/_.height}}),{fill:Et(_,c),stroke:Z(_,l)})},CompensationMarker:function(P,_,B){C("compensation",P,i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:(_.width/2+B.compensation)/_.width,my:(_.height-13)/_.height}}),{strokeWidth:1,fill:Et(_,c),stroke:Z(_,l)})},LoopMarker:function(P,_,B){C("loop",P,i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:(_.width/2+B.loop)/_.width,my:(_.height-7)/_.height}}),{strokeWidth:1,fill:Et(_,c),stroke:Z(_,l),strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(P,_,B){C("adhoc",P,i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:(_.width/2+B.adhoc)/_.width,my:(_.height-15)/_.height}}),{strokeWidth:1,fill:Z(_,l),stroke:Z(_,l)})}};function z(P,_,B){var V,G=Ae(_),J=B&&B.indexOf("SubProcessMarker")!==-1;V=J?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},L(B,function(at){s(at)(P,_,V)}),G.isForCompensation&&s("CompensationMarker")(P,_,V),G.$type==="bpmn:AdHocSubProcess"&&s("AdhocMarker")(P,_,V);var tt=G.loopCharacteristics,ct=tt&&tt.isSequential;tt&&(ct===void 0&&s("LoopMarker")(P,_,V),ct===!1&&s("ParallelMarker")(P,_,V),ct===!0&&s("SequentialMarker")(P,_,V))}this._drawPath=S}it(Hi,$n),Hi.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],Hi.prototype.canRender=function(t){return A(t,"bpmn:BaseElement")},Hi.prototype.drawShape=function(t,e){var n=e.type;return(0,this.handlers[n])(t,e)},Hi.prototype.drawConnection=function(t,e){var n=e.type;return(0,this.handlers[n])(t,e)},Hi.prototype.getShapePath=function(t){return A(t,"bpmn:Event")?(n=(e=t).x+e.width/2,i=e.y+e.height/2,r=e.width/2,xr([["M",n,i],["m",0,-r],["a",r,r,0,1,1,0,2*r],["a",r,r,0,1,1,0,-2*r],["z"]])):A(t,"bpmn:Activity")?function(o,a){var c=o.x,l=o.y,u=o.width,p=o.height;return xr([["M",c+a,l],["l",u-2*a,0],["a",a,a,0,0,1,a,a],["l",0,p-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-u,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-p],["a",a,a,0,0,1,a,-a],["z"]])}(t,10):A(t,"bpmn:Gateway")?function(o){var a=o.width/2,c=o.height/2;return xr([["M",o.x+a,o.y],["l",a,c],["l",-a,c],["l",-a,-c],["z"]])}(t):function(o){var a=o.x,c=o.y,l=o.width;return xr([["M",a,c],["l",l,0],["l",0,o.height],["l",-l,0],["z"]])}(t);var e,n,i,r};var lE=0,uE={width:150,height:50};function pE(t,e){var n;e.textContent=t;try{var i,r=t==="";return e.textContent=r?"dummy":t,i={width:(n=e.getBBox()).width+2*n.x,height:n.height},r&&(i.width=0),i}catch{return{width:0,height:0}}}function hE(t,e,n){for(var i,r=t.shift(),o=r;;){if((i=pE(o,n)).width=o?i.width:0,o===" "||o===""||i.width<Math.round(e)||o.length<2)return dE(t,o,r,i);o=mE(o,i.width,e)}}function dE(t,e,n,i){if(e.length<n.length){var r=n.slice(e.length).trim();t.unshift(r)}return{width:i.width,height:i.height,text:e}}var xm="\xAD";function mE(t,e,n){var i=Math.max(t.length*(n/e),1),r=function(o,a){var c,l=o.split(/(\s|-|\u00AD)/g),u=[],p=0;if(l.length>1)for(;c=l.shift();){if(!(c.length+p<a)){c!=="-"&&c!==xm||u.pop();break}u.push(c),p+=c.length}var d=u[u.length-1];return d&&d===xm&&(u[u.length-1]="-"),u.join("")}(t,i);return r||(r=t.slice(0,Math.max(Math.round(i-1),1))),r}function cs(t){this._config=$({},{size:uE,padding:lE,style:{},align:"center-top"},t||{})}cs.prototype.createText=function(t,e){return this.layoutText(t,e).element},cs.prototype.getDimensions=function(t,e){return this.layoutText(t,e).dimensions},cs.prototype.layoutText=function(t,e){var n=$({},this._config.size,e.box),i=$({},this._config.style,e.style),r=function(g){var w=g.split("-");return{horizontal:w[0]||"center",vertical:w[1]||"top"}}(e.align||this._config.align),o=function(g){return te(g)?$({top:0,left:0,right:0,bottom:0},g):{top:g,left:g,right:g,bottom:g}}(e.padding!==void 0?e.padding:this._config.padding),a=e.fitBox||!1,c=function(g){if("fontSize"in g&&"lineHeight"in g)return g.lineHeight*parseInt(g.fontSize,10)}(i),l=t.split(/\u00AD?\r?\n/),u=[],p=n.width-o.left-o.right,d=rt("text");for(K(d,{x:0,y:0}),K(d,i),lt(function(){var g=document.getElementById("helper-svg");return g||(K(g=rt("svg"),{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(g)),g}(),d);l.length;)u.push(hE(l,p,d));r.vertical==="middle"&&(o.top=o.bottom=0);var v=De(u,function(g,w,x){return g+(c||w.height)},0)+o.top+o.bottom,f=De(u,function(g,w,x){return w.width>g?w.width:g},0),y=o.top;r.vertical==="middle"&&(y+=(n.height-v)/2),y-=(c||u[0].height)/4;var b=rt("text");return K(b,i),L(u,function(g){var w;switch(y+=c||g.height,r.horizontal){case"left":w=o.left;break;case"right":w=(a?f:p)-o.right-g.width;break;default:w=Math.max(((a?f:p)-g.width)/2+o.left,0)}var x=rt("tspan");K(x,{x:w,y}),x.textContent=g.text,lt(b,x)}),ee(d),{dimensions:{width:f,height:v},element:b}};function Em(t){var e=$({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},t&&t.defaultStyle||{}),n=parseInt(e.fontSize,10)-1,i=$({},e,{fontSize:n},t&&t.externalStyle||{}),r=new cs({style:e});this.getExternalLabelBounds=function(o,a){var c=r.getDimensions(a,{box:{width:90,height:30,x:o.width/2+o.x,y:o.height/2+o.y},style:i});return{x:Math.round(o.x+o.width/2-c.width/2),y:Math.round(o.y),width:Math.ceil(c.width),height:Math.ceil(c.height)}},this.getTextAnnotationBounds=function(o,a){var c=r.getDimensions(a,{box:o,style:e,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(30,Math.round(c.height))}},this.createText=function(o,a){return r.createText(o,a||{})},this.getDefaultStyle=function(){return e},this.getExternalStyle=function(){return i}}Em.$inject=["config.textRenderer"];var fE=/\{([^{}]+)\}/g,vE=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;const yE={__init__:["bpmnRenderer"],bpmnRenderer:["type",Hi],textRenderer:["type",Em],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,e){var n,i,r=this.pathMap[t];e.abspos?(n=e.abspos.x,i=e.abspos.y):(n=e.containerWidth*e.position.mx,i=e.containerHeight*e.position.my);var o={};if(e.position){for(var a=e.containerHeight/r.height*e.yScaleFactor,c=e.containerWidth/r.width*e.xScaleFactor,l=0;l<r.heightElements.length;l++)o["y"+l]=r.heightElements[l]*a;for(var u=0;u<r.widthElements.length;u++)o["x"+u]=r.widthElements[u]*c}var p,d,v=(p=r.d,d={mx:n,my:i,e:o},String(p).replace(fE,function(f,y){return function(b,g,w){var x=w;return g.replace(vE,function(S,C,I,s,h){C=C||s,x&&(C in x&&(x=x[C]),typeof x=="function"&&h&&(x=x()))}),x=(x==null||x==w?b:x)+""}(f,y,d)}));return v}}]},ls={translate:["value",function(t,e){return e=e||{},t.replace(/{([^}]+)}/g,function(n,i){return e[i]||"{"+i+"}"})}]};var Io={width:90,height:20},_m=15;function Ir(t){return A(t,"bpmn:Event")||A(t,"bpmn:Gateway")||A(t,"bpmn:DataStoreReference")||A(t,"bpmn:DataObjectReference")||A(t,"bpmn:DataInput")||A(t,"bpmn:DataOutput")||A(t,"bpmn:SequenceFlow")||A(t,"bpmn:MessageFlow")||A(t,"bpmn:Group")}function us(t){return be(t.label)}function gE(t){var e=t.length/2-1,n=t[Math.floor(e)],i=t[Math.ceil(e+.01)],r=function(l){var u=l.length/2-1,p=l[Math.floor(u)],d=l[Math.ceil(u+.01)];return{x:p.x+(d.x-p.x)/2,y:p.y+(d.y-p.y)/2}}(t),o=Math.atan((i.y-n.y)/(i.x-n.x)),a=r.x,c=r.y;return Math.abs(o)<Math.PI/2?c-=_m:a+=_m,{x:a,y:c}}function ps(t){return t.waypoints?gE(t.waypoints):A(t,"bpmn:Group")?{x:t.x+t.width/2,y:t.y+Io.height/2}:{x:t.x+t.width/2,y:t.y+t.height+Io.height/2}}function be(t){return t&&!!t.labelTarget}function hs(t,e){return $({id:t.id,type:t.$type,businessObject:t},e)}function bE(t,e,n){var i=t.di.waypoint;return!i||i.length<2?[ft(e),ft(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function wm(t,e,n,i){return new Error(t("element {element} referenced by {referenced}#{property} not yet drawn",{element:Te(n),referenced:Te(e),property:i}))}function Hn(t,e,n,i,r,o){this._eventBus=t,this._canvas=e,this._elementFactory=n,this._elementRegistry=i,this._translate=r,this._textRenderer=o}Hn.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"],Hn.prototype.add=function(t,e){var n,i,r,o,a,c,l,u=t.di,p=this._translate;if(A(u,"bpmndi:BPMNPlane"))n=this._elementFactory.createRoot(hs(t)),this._canvas.setRootElement(n);else if(A(u,"bpmndi:BPMNShape")){var d=!Mt(t),v=function(g){return A(g,"bpmn:Group")}(t);i=e&&(e.hidden||e.collapsed);var f=t.di.bounds;n=this._elementFactory.createShape(hs(t,{collapsed:d,hidden:i,x:Math.round(f.x),y:Math.round(f.y),width:Math.round(f.width),height:Math.round(f.height),isFrame:v})),A(t,"bpmn:BoundaryEvent")&&this._attachBoundary(t,n),A(t,"bpmn:Lane")&&(r=0),A(t,"bpmn:DataStoreReference")&&(o=e,a=ft(f),c=a.x,l=a.y,c>=o.x&&c<=o.x+o.width&&l>=o.y&&l<=o.y+o.height||(e=this._canvas.getRootElement())),this._canvas.addShape(n,e,r)}else{if(!A(u,"bpmndi:BPMNEdge"))throw new Error(p("unknown di {di} for element {semantic}",{di:Te(u),semantic:Te(t)}));var y=this._getSource(t),b=this._getTarget(t);i=e&&(e.hidden||e.collapsed),n=this._elementFactory.createConnection(hs(t,{hidden:i,source:y,target:b,waypoints:bE(t,y,b)})),A(t,"bpmn:DataAssociation")&&(e=null),A(t,"bpmn:SequenceFlow")&&(r=0),this._canvas.addConnection(n,e,r)}return Ir(t)&&pn(n)&&this.addLabel(t,n),this._eventBus.fire("bpmnElement.added",{element:n}),n},Hn.prototype._attachBoundary=function(t,e){var n=this._translate,i=t.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:Te(t)}));var r=this._elementRegistry.get(i.id),o=r&&r.attachers;if(!r)throw wm(n,t,i,"attachedToRef");e.host=r,o||(r.attachers=o=[]),o.indexOf(e)===-1&&o.push(e)},Hn.prototype.addLabel=function(t,e){var n,i,r;return n=function(o,a){var c,l,u,p=o.di.label;return p&&p.bounds?(u=p.bounds,l={width:Math.max(Io.width,u.width),height:u.height},c={x:u.x+u.width/2,y:u.y+u.height/2}):(c=ps(a),l=Io),$({x:c.x-l.width/2,y:c.y-l.height/2},l)}(t,e),(i=pn(e))&&(n=this._textRenderer.getExternalLabelBounds(n,i)),r=this._elementFactory.createLabel(hs(t,{id:t.id+"_label",labelTarget:e,type:"label",hidden:e.hidden||!pn(e),x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)})),this._canvas.addShape(r,e.parent)},Hn.prototype._getEnd=function(t,e){var n,i,r=t.$type,o=this._translate;if(i=t[e+"Ref"],e==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(e==="source"&&r==="bpmn:DataOutputAssociation"||e==="target"&&r==="bpmn:DataInputAssociation")&&(i=t.$parent),n=i&&this._getElement(i))return n;throw i?wm(o,t,i,e+"Ref"):new Error(o("{semantic}#{side} Ref not specified",{semantic:Te(t),side:e}))},Hn.prototype._getSource=function(t){return this._getEnd(t,"source")},Hn.prototype._getTarget=function(t){return this._getEnd(t,"target")},Hn.prototype._getElement=function(t){return this._elementRegistry.get(t.id)};const xE={__depends__:[yE,{__depends__:[ls],bpmnImporter:["type",Hn]}]};function Sm(t){t&&typeof t.stopPropagation=="function"&&t.stopPropagation()}function Dr(t){return t.originalEvent||t.srcEvent}function nu(t,e){Sm(t),Sm(Dr(t))}function yi(t){return t.pointers&&t.pointers.length&&(t=t.pointers[0]),t.touches&&t.touches.length&&(t=t.touches[0]),t?{x:t.clientX,y:t.clientY}:null}function Cm(t,e){return(Dr(t)||t).button===e}function gi(t){return Cm(t,0)}function Br(t){var e=Dr(t)||t;return!!gi(t)&&(/mac/i.test(navigator.platform)?e.metaKey:e.ctrlKey)}function Tm(t){var e=Dr(t)||t;return gi(t)&&e.shiftKey}function EE(t){return!0}function ds(t){return gi(t)||function(e){return Cm(e,1)}(t)}function Am(t,e,n){var i=this;function r(x,S,C){var I,s;(function(h,m){var E=l[h]||gi;return!E(m)})(x,S)||(C?s=e.getGraphics(C):(I=S.delegateTarget||S.target)&&(s=I,C=e.get(s)),s&&C&&t.fire(x,{element:C,gfx:s,originalEvent:S})===!1&&(S.stopPropagation(),S.preventDefault()))}var o={};function a(x){return o[x]}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},l={"element.contextmenu":EE,"element.mousedown":ds,"element.mouseup":ds,"element.click":ds,"element.dblclick":ds},u="svg, .djs-element";function p(x,S,C,I){var s=o[C]=function(h){r(C,h)};I&&(l[C]=I),s.$delegate=ze.bind(x,u,S,s)}function d(x,S,C){var I=a(C);I&&ze.unbind(x,S,I.$delegate)}t.on("canvas.destroy",function(x){(function(S){L(c,function(C,I){d(S,I,C)})})(x.svg)}),t.on("canvas.init",function(x){(function(S){L(c,function(C,I){p(S,I,C)})})(x.svg)}),t.on(["shape.added","connection.added"],function(x){var S=x.element,C=x.gfx;t.fire("interactionEvents.createHit",{element:S,gfx:C})}),t.on(["shape.changed","connection.changed"],500,function(x){var S=x.element,C=x.gfx;t.fire("interactionEvents.updateHit",{element:S,gfx:C})}),t.on("interactionEvents.createHit",500,function(x){var S=x.element,C=x.gfx;i.createDefaultHit(S,C)}),t.on("interactionEvents.updateHit",function(x){var S=x.element,C=x.gfx;i.updateDefaultHit(S,C)});var v=b("djs-hit djs-hit-stroke"),f=b("djs-hit djs-hit-click-stroke"),y={all:b("djs-hit djs-hit-all"),"click-stroke":f,stroke:v};function b(x,S){return S=$({stroke:"white",strokeWidth:15},S||{}),n.cls(x,["no-fill","no-border"],S)}function g(x,S){var C=y[S];if(!C)throw new Error("invalid hit type <"+S+">");return K(x,C),x}function w(x,S){lt(x,S)}this.removeHits=function(x){L(wl(".djs-hit",x),ee)},this.createDefaultHit=function(x,S){var C,I=x.waypoints,s=x.isFrame;return I?this.createWaypointsHit(S,I):(C=s?"stroke":"all",this.createBoxHit(S,C,{width:x.width,height:x.height}))},this.createWaypointsHit=function(x,S){var C=Bl(S);return g(C,"stroke"),w(x,C),C},this.createBoxHit=function(x,S,C){C=$({x:0,y:0},C);var I=rt("rect");return g(I,S),K(I,C),w(x,I),I},this.updateDefaultHit=function(x,S){var C=Wt(".djs-hit",S);if(C)return x.waypoints?function(I,s){K(I,{points:yd(s)})}(C,x.waypoints):K(C,{width:x.width,height:x.height}),C},this.fire=r,this.triggerMouseEvent=function(x,S,C){var I=c[x];if(!I)throw new Error("unmapped DOM event name <"+x+">");return r(I,S,C)},this.mouseHandler=a,this.registerEvent=p,this.unregisterEvent=d}Am.$inject=["eventBus","elementRegistry","styles"];const Do={__init__:["interactionEvents"],interactionEvents:["type",Am]};function ms(t,e,n){this.offset=6;var i=e.cls("djs-outline",["no-fill"]),r=this;function o(a,c){var l=rt("rect");return K(l,$({x:10,y:10,width:100,height:100},i)),lt(a,l),l}t.on(["shape.added","shape.changed"],500,function(a){var c=a.element,l=a.gfx,u=Wt(".djs-outline",l);u||(u=o(l)),r.updateShapeOutline(u,c)}),t.on(["connection.added","connection.changed"],function(a){var c=a.element,l=a.gfx,u=Wt(".djs-outline",l);u||(u=o(l)),r.updateConnectionOutline(u,c)})}ms.prototype.updateShapeOutline=function(t,e){K(t,{x:-this.offset,y:-this.offset,width:e.width+2*this.offset,height:e.height+2*this.offset})},ms.prototype.updateConnectionOutline=function(t,e){var n=ye(e);K(t,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},ms.$inject=["eventBus","styles","elementRegistry"];const km={__init__:["outline"],outline:["type",ms]};function Or(t,e){this._eventBus=t,this._canvas=e,this._selectedElements=[];var n=this;t.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),t.on(["diagram.clear","plane.set"],function(i){n.select(null)})}Or.$inject=["eventBus","canvas"],Or.prototype.deselect=function(t){var e=this._selectedElements,n=e.indexOf(t);if(n!==-1){var i=e.slice();e.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:e})}},Or.prototype.get=function(){return this._selectedElements},Or.prototype.isSelected=function(t){return this._selectedElements.indexOf(t)!==-1},Or.prototype.select=function(t,e){var n=this._selectedElements,i=n.slice();gt(t)||(t=t?[t]:[]);var r=this._canvas;t=t.filter(function(o){return r.findPlane(o)===r.getActivePlane()}),e?L(t,function(o){n.indexOf(o)===-1&&n.push(o)}):this._selectedElements=n=t.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var Pm="hover",Mm="selected";function Rm(t,e,n,i){function r(a,c){e.addMarker(a,c)}function o(a,c){e.removeMarker(a,c)}this._multiSelectionBox=null,t.on("element.hover",function(a){r(a.element,Pm)}),t.on("element.out",function(a){o(a.element,Pm)}),t.on("selection.changed",function(a){var c=a.oldSelection,l=a.newSelection;L(c,function(u){l.indexOf(u)===-1&&o(u,Mm)}),L(l,function(u){c.indexOf(u)===-1&&r(u,Mm)})})}function Nm(t,e,n,i){t.on("create.end",500,function(r){var o=r.context,a=o.canExecute,c=o.elements,l=(o.hints||{}).autoSelect;if(a){if(l===!1)return;gt(l)?e.select(l):e.select(c.filter(_E))}}),t.on("connect.end",500,function(r){var o=r.context,a=o.canExecute,c=o.hover;a&&c&&e.select(c)}),t.on("shape.move.end",500,function(r){var o=r.previousSelection||[],a=i.get(r.context.shape.id);Pt(o,function(c){return a.id===c.id})||e.select(a)}),t.on("element.click",function(r){if(gi(r)){var o=r.element;o===n.getRootElement()&&(o=null);var a=e.isSelected(o),c=e.get().length>1,l=Br(r)||Tm(r);if(a&&c)return l?e.deselect(o):e.select(o);a?e.deselect(o):e.select(o,l)}})}function _E(t){return!t.hidden}Rm.$inject=["eventBus","canvas","selection","styles"],Nm.$inject=["eventBus","selection","canvas","elementRegistry"];const Rn={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Do,km],selection:["type",Or],selectionVisuals:["type",Rm],selectionBehavior:["type",Nm]};function iu(t){this._counter=0,this._prefix=(t?t+"-":"")+Math.floor(1e9*Math.random())+"-"}iu.prototype.next=function(){return this._prefix+ ++this._counter};var wE=new iu("ov");function he(t,e,n,i){var r,o;this._eventBus=e,this._canvas=n,this._elementRegistry=i,this._ids=wE,this._overlayDefaults=$({show:null,scale:!0},t&&t.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(r=n.getContainer(),o=Vt('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />'),r.insertBefore(o,r.firstChild),o),this._init()}function Im(t,e,n){$(t.style,{left:e+"px",top:n+"px"})}function Bo(t,e){t.style.display=e===!1?"none":""}function Dm(t,e){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){t.style[n+"transform"]=e})}he.$inject=["config.overlays","eventBus","canvas","elementRegistry"],he.prototype.get=function(t){if(Ie(t)&&(t={id:t}),Ie(t.element)&&(t.element=this._elementRegistry.get(t.element)),t.element){var e=this._getOverlayContainer(t.element,!0);return e?t.type?mt(e.overlays,Ke({type:t.type})):e.overlays.slice():[]}return t.type?mt(this._overlays,Ke({type:t.type})):t.id?this._overlays[t.id]:null},he.prototype.add=function(t,e,n){if(te(e)&&(n=e,e=null),t.id||(t=this._elementRegistry.get(t)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!t)throw new Error("invalid element specified");var i=this._ids.next();return n=$({},this._overlayDefaults,n,{id:i,type:e,element:t,html:n.html}),this._addOverlay(n),i},he.prototype.remove=function(t){var e=this.get(t)||[];gt(e)||(e=[e]);var n=this;L(e,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(An(i.html),An(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var o=r.overlays.indexOf(i);o!==-1&&r.overlays.splice(o,1)}})},he.prototype.show=function(){Bo(this._overlayRoot)},he.prototype.hide=function(){Bo(this._overlayRoot,!1)},he.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Fa(this._overlayRoot)},he.prototype._updateOverlayContainer=function(t){var e=t.element,n=t.html,i=e.x,r=e.y;if(e.waypoints){var o=ye(e);i=o.x,r=o.y}Im(n,i,r),$e(t.html,"data-container-id",e.id)},he.prototype._updateOverlay=function(t){var e,n,i=t.position,r=t.htmlContainer,o=t.element,a=i.left,c=i.top;i.right!==void 0&&(e=o.waypoints?ye(o).width:o.width,a=-1*i.right+e),i.bottom!==void 0&&(n=o.waypoints?ye(o).height:o.height,c=-1*i.bottom+n),Im(r,a||0,c||0)},he.prototype._createOverlayContainer=function(t){var e=Vt('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(e);var n={html:e,element:t,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},he.prototype._updateRoot=function(t){var e=t.scale||1,n="matrix("+[e,0,0,e,-1*t.x*e,-1*t.y*e].join(",")+")";Dm(this._overlayRoot,n)},he.prototype._getOverlayContainer=function(t,e){var n=Pt(this._overlayContainers,function(i){return i.element===t});return n||e?n:this._createOverlayContainer(t)},he.prototype._addOverlay=function(t){var e,n,i=t.id,r=t.element,o=t.html;o.get&&o.constructor.prototype.jquery&&(o=o.get(0)),Ie(o)&&(o=Vt(o)),n=this._getOverlayContainer(r),(e=Vt('<div class="djs-overlay" data-overlay-id="'+i+'" style="position: absolute">')).appendChild(o),t.type&&oe(e).add("djs-overlay-"+t.type);var a=this._canvas.findPlane(r),c=this._canvas.getActivePlane();t.plane=a,a!==c&&Bo(e,!1),t.htmlContainer=e,n.overlays.push(t),n.html.appendChild(e),this._overlays[i]=t,this._updateOverlay(t),this._updateOverlayVisibilty(t,this._canvas.viewbox())},he.prototype._updateOverlayVisibilty=function(t,e){var n=t.show,i=t.plane,r=n&&n.minZoom,o=n&&n.maxZoom,a=t.htmlContainer,c=!0;(i!==this._canvas.getActivePlane()||n&&(qe(r)&&r>e.scale||qe(o)&&o<e.scale))&&(c=!1),Bo(a,c),this._updateOverlayScale(t,e)},he.prototype._updateOverlayScale=function(t,e){var n,i,r,o=t.scale,a=t.htmlContainer,c="";o!==!0&&(o===!1?(n=1,i=1):(n=o.min,i=o.max),qe(n)&&e.scale<n&&(r=(1/e.scale||1)*n),qe(i)&&e.scale>i&&(r=(1/e.scale||1)*i)),qe(r)&&(c="scale("+r+","+r+")"),Dm(a,c)},he.prototype._updateOverlaysVisibilty=function(t){var e=this;L(this._overlays,function(n){e._updateOverlayVisibilty(n,t)})},he.prototype._init=function(){var t=this._eventBus,e=this;t.on("canvas.viewbox.changing",function(n){e.hide()}),t.on("canvas.viewbox.changed",function(n){var i;i=n.viewbox,e._updateRoot(i),e._updateOverlaysVisibilty(i),e.show()}),t.on(["shape.remove","connection.remove"],function(n){var i=n.element;L(e.get({element:i}),function(a){e.remove(a.id)});var r=e._getOverlayContainer(i);if(r){An(r.html);var o=e._overlayContainers.indexOf(r);o!==-1&&e._overlayContainers.splice(o,1)}}),t.on("element.changed",500,function(n){var i=n.element,r=e._getOverlayContainer(i,!0);r&&(L(r.overlays,function(o){e._updateOverlay(o)}),e._updateOverlayContainer(r))}),t.on("element.marker.update",function(n){var i=e._getOverlayContainer(n.element,!0);i&&oe(i.html)[n.add?"add":"remove"](n.marker)}),t.on("plane.set",function(n){L(e._overlays,function(i){Bo(i.htmlContainer,i.plane===n.plane)})}),t.on("diagram.clear",this.clear,this)};const ru={__init__:["overlays"],overlays:["type",he]};function qn(t){Ut.call(this,t)}it(qn,Ut),qn.prototype._modules=[xE,ls,Rn,ru],qn.prototype._moddleExtensions={};var SE=["c","C",67],CE=["v","V",86],TE=["y","Y",89],Bm=["z","Z",90];function He(t){return!t.altKey&&(t.ctrlKey||t.metaKey)}function hn(t,e){return(t=gt(t)?t:[t]).indexOf(e.key)!==-1||t.indexOf(e.keyCode)!==-1}function ou(t){return t.shiftKey}var fs="keyboard.keydown",Om="input-handle-modified-keys";function de(t,e){var n=this;this._config=t||{},this._eventBus=e,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),e.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),e.on("diagram.init",function(){n._fire("init")}),e.on("attach",function(){t&&t.bindTo&&n.bind(t.bindTo)}),e.on("detach",function(){n.unbind()})}de.$inject=["config.keyboard","eventBus"],de.prototype._keydownHandler=function(t){this._keyHandler(t,fs)},de.prototype._keyupHandler=function(t){this._keyHandler(t,"keyboard.keyup")},de.prototype._keyHandler=function(t,e){if(!this._isEventIgnored(t)){var n={keyEvent:t};this._eventBus.fire(e||fs,n)&&t.preventDefault()}},de.prototype._isEventIgnored=function(t){return(e=t.target)&&($a(e,"input, textarea")||e.contentEditable==="true")&&this._isModifiedKeyIgnored(t);var e},de.prototype._isModifiedKeyIgnored=function(t){return!He(t)||!this._getAllowedModifiers(t.target).includes(t.key)},de.prototype._getAllowedModifiers=function(t){var e=Fi(t,"["+Om+"]",!0);return!e||this._node&&!this._node.contains(e)?[]:e.getAttribute(Om).split(",")},de.prototype.bind=function(t){this.unbind(),this._node=t,st.bind(t,"keydown",this._keydownHandler,!0),st.bind(t,"keyup",this._keyupHandler,!0),this._fire("bind")},de.prototype.getBinding=function(){return this._node},de.prototype.unbind=function(){var t=this._node;t&&(this._fire("unbind"),st.unbind(t,"keydown",this._keydownHandler,!0),st.unbind(t,"keyup",this._keyupHandler,!0)),this._node=null},de.prototype._fire=function(t){this._eventBus.fire("keyboard."+t,{node:this._node})},de.prototype.addListener=function(t,e,n){ve(t)&&(n=e,e=t,t=1e3),this._eventBus.on(n||fs,t,e)},de.prototype.removeListener=function(t,e){this._eventBus.off(e||fs,t)},de.prototype.hasModifier=function(t){return t.ctrlKey||t.metaKey||t.shiftKey||t.altKey},de.prototype.isCmd=He,de.prototype.isShift=ou,de.prototype.isKey=hn;var AE=500;function Lr(t,e){var n=this;t.on("editorActions.init",AE,function(i){var r=i.editorActions;n.registerBindings(e,r)})}Lr.$inject=["eventBus","keyboard"],Lr.prototype.registerBindings=function(t,e){function n(i,r){e.isRegistered(i)&&t.addListener(r)}n("undo",function(i){if(function(r){return He(r)&&!ou(r)&&hn(Bm,r)}(i.keyEvent))return e.trigger("undo"),!0}),n("redo",function(i){if(function(r){return He(r)&&(hn(TE,r)||hn(Bm,r)&&ou(r))}(i.keyEvent))return e.trigger("redo"),!0}),n("copy",function(i){if(function(r){return He(r)&&hn(SE,r)}(i.keyEvent))return e.trigger("copy"),!0}),n("paste",function(i){if(function(r){return He(r)&&hn(CE,r)}(i.keyEvent))return e.trigger("paste"),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(hn(["+","Add","="],r)&&He(r))return e.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(hn(["-","Subtract"],r)&&He(r))return e.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var r=i.keyEvent;if(hn("0",r)&&He(r))return e.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){if(hn(["Backspace","Delete","Del"],i.keyEvent))return e.trigger("removeSelection"),!0})};const au={__init__:["keyboard","keyboardBindings"],keyboard:["type",de],keyboardBindings:["type",Lr]};var kE={moveSpeed:50,moveSpeedAccelerated:200};function Lm(t,e,n){var i=this;this._config=$({},kE,t||{}),e.addListener(function(r){var o=r.keyEvent,a=i._config;if(e.isCmd(o)&&e.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],o)){var c,l=e.isShift(o)?a.moveSpeedAccelerated:a.moveSpeed;switch(o.key){case"ArrowLeft":case"Left":c="left";break;case"ArrowUp":case"Up":c="up";break;case"ArrowRight":case"Right":c="right";break;case"ArrowDown":case"Down":c="down"}return i.moveCanvas({speed:l,direction:c}),!0}}),this.moveCanvas=function(r){var o=0,a=0,c=r.speed/Math.min(Math.sqrt(n.viewbox().scale),1);switch(r.direction){case"left":o=c;break;case"up":a=c;break;case"right":o=-c;break;case"down":a=-c}n.scroll({dx:o,dy:a})}}Lm.$inject=["config.keyboardMove","keyboard","canvas"];const jm={__depends__:[au],__init__:["keyboardMove"],keyboardMove:["type",Lm]};var PE=/^djs-cursor-.*$/;function vs(t){var e=oe(document.body);e.removeMatching(PE),t&&e.add("djs-cursor-"+t)}function Vm(){vs(null)}var ME=5e3;function Fm(t,e){function n(){return!1}return e=e||"element.click",t.once(e,ME,n),function(){t.off(e,n)}}function Oo(t){return{x:t.x+t.width/2,y:t.y+t.height/2}}function Nn(t,e){return{x:t.x-e.x,y:t.y-e.y}}function $m(t,e){var n;function i(o){var a,c=n.start,l=n.button,u=yi(o),p=Nn(u,c);!n.dragging&&(a=p,Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))>15)&&(n.dragging=!0,l===0&&Fm(t),vs("grab")),n.dragging&&(p=Nn(u,n.last||n.start),e.scroll({dx:p.x,dy:p.y}),n.last=u),o.preventDefault()}function r(o){st.unbind(document,"mousemove",i),st.unbind(document,"mouseup",r),n=null,Vm()}t.on("element.mousedown",500,function(o){return function(a){if(!Fi(a.target,".djs-draggable")){var c=a.button;if(!(c>=2||a.ctrlKey||a.shiftKey||a.altKey))return n={button:c,start:yi(a)},st.bind(document,"mousemove",i),st.bind(document,"mouseup",r),!0}}(o.originalEvent)}),this.isActive=function(){return!!n}}$m.$inject=["eventBus","canvas"];const zm={__init__:["moveCanvas"],moveCanvas:["type",$m]};function su(t){return Math.log(t)/Math.log(10)}function Gm(t,e){var n=su(t.min),i=su(t.max);return(Math.abs(n)+Math.abs(i))/e}var RE=Math.sign||function(t){return t>=0?1:-1},cu={min:.2,max:4};function In(t,e,n){t=t||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=Se(this._handleWheel,this),this._totalDelta=0,this._scale=t.scale||.75;var i=this;e.on("canvas.init",function(r){i._init(t.enabled!==!1)})}In.$inject=["config.zoomScroll","eventBus","canvas"],In.prototype.scroll=function(t){this._canvas.scroll(t)},In.prototype.reset=function(){this._canvas.zoom("fit-viewport")},In.prototype.zoom=function(t,e){var n=Gm(cu,20);this._totalDelta+=t,Math.abs(this._totalDelta)>.1&&(this._zoom(t,e,n),this._totalDelta=0)},In.prototype._handleWheel=function(t){if(!Fi(t.target,".djs-scrollable",!0)){var e=this._container;t.preventDefault();var n,i=t.ctrlKey,r=t.shiftKey,o=-1*this._scale;if(o*=i?t.deltaMode===0?.02:.32:t.deltaMode===0?1:16,i){var a=e.getBoundingClientRect(),c={x:t.clientX-a.left,y:t.clientY-a.top};n=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*RE(t.deltaY)*o,this.zoom(n,c)}else n=r?{dx:o*t.deltaY,dy:0}:{dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(n)}},In.prototype.stepZoom=function(t,e){var n=Gm(cu,10);this._zoom(t,e,n)},In.prototype._zoom=function(t,e,n){var i=this._canvas,r=t>0?1:-1,o=su(i.zoom()),a=Math.round(o/n)*n;a+=n*r;var c,l,u=Math.pow(10,a);i.zoom((c=cu,l=u,Math.max(c.min,Math.min(c.max,l))),e)},In.prototype.toggle=function(t){var e=this._container,n=this._handleWheel,i=this._enabled;return t===void 0&&(t=!i),i!==t&&st[t?"bind":"unbind"](e,"wheel",n,!1),this._enabled=t,t},In.prototype._init=function(t){this.toggle(t)};const Um={__init__:["zoomScroll"],zoomScroll:["type",In]};function Lo(t){qn.call(this,t)}it(Lo,qn),Lo.prototype._navigationModules=[jm,zm,Um],Lo.prototype._modules=[].concat(qn.prototype._modules,Lo.prototype._navigationModules);var Hm={exports:{}};(function(t){(function(e,n,i,r){var o,a=["","webkit","Moz","MS","ms","o"],c=n.createElement("div"),l="function",u=Math.round,p=Math.abs,d=Date.now;function v(k,O,F){return setTimeout(S(k,F),O)}function f(k,O,F){return!!Array.isArray(k)&&(y(k,F[O],F),!0)}function y(k,O,F){var U;if(k)if(k.forEach)k.forEach(O,F);else if(k.length!==r)for(U=0;U<k.length;)O.call(F,k[U],U,k),U++;else for(U in k)k.hasOwnProperty(U)&&O.call(F,k[U],U,k)}function b(k,O,F){var U="DEPRECATED METHOD: "+O+`
`+F+` AT 
`;return function(){var X=new Error("get-stack-trace"),yt=X&&X.stack?X.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Lt=e.console&&(e.console.warn||e.console.log);return Lt&&Lt.call(e.console,U,yt),k.apply(this,arguments)}}o=typeof Object.assign!="function"?function(k){if(k===r||k===null)throw new TypeError("Cannot convert undefined or null to object");for(var O=Object(k),F=1;F<arguments.length;F++){var U=arguments[F];if(U!==r&&U!==null)for(var X in U)U.hasOwnProperty(X)&&(O[X]=U[X])}return O}:Object.assign;var g=b(function(k,O,F){for(var U=Object.keys(O),X=0;X<U.length;)(!F||F&&k[U[X]]===r)&&(k[U[X]]=O[U[X]]),X++;return k},"extend","Use `assign`."),w=b(function(k,O){return g(k,O,!0)},"merge","Use `assign`.");function x(k,O,F){var U,X=O.prototype;(U=k.prototype=Object.create(X)).constructor=k,U._super=X,F&&o(U,F)}function S(k,O){return function(){return k.apply(O,arguments)}}function C(k,O){return typeof k==l?k.apply(O&&O[0]||r,O):k}function I(k,O){return k===r?O:k}function s(k,O,F){y(T(O),function(U){k.addEventListener(U,F,!1)})}function h(k,O,F){y(T(O),function(U){k.removeEventListener(U,F,!1)})}function m(k,O){for(;k;){if(k==O)return!0;k=k.parentNode}return!1}function E(k,O){return k.indexOf(O)>-1}function T(k){return k.trim().split(/\s+/g)}function R(k,O,F){if(k.indexOf&&!F)return k.indexOf(O);for(var U=0;U<k.length;){if(F&&k[U][F]==O||!F&&k[U]===O)return U;U++}return-1}function D(k){return Array.prototype.slice.call(k,0)}function z(k,O,F){for(var U=[],X=[],yt=0;yt<k.length;){var Lt=O?k[yt][O]:k[yt];R(X,Lt)<0&&U.push(k[yt]),X[yt]=Lt,yt++}return F&&(U=O?U.sort(function(we,At){return we[O]>At[O]}):U.sort()),U}function P(k,O){for(var F,U,X=O[0].toUpperCase()+O.slice(1),yt=0;yt<a.length;){if((U=(F=a[yt])?F+X:O)in k)return U;yt++}return r}var _=1;function B(k){var O=k.ownerDocument||k;return O.defaultView||O.parentWindow||e}var V="ontouchstart"in e,G=P(e,"PointerEvent")!==r,J=V&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),tt="touch",ct="mouse",at=25,H=1,q=4,xt=8,Kt=1,ce=2,Bt=4,qt=8,_t=16,$t=ce|Bt,Xt=qt|_t,Rt=$t|Xt,me=["x","y"],St=["clientX","clientY"];function zt(k,O){var F=this;this.manager=k,this.callback=O,this.element=k.element,this.target=k.options.inputTarget,this.domHandler=function(U){C(k.options.enable,[k])&&F.handler(U)},this.init()}function ht(k,O,F){var U=F.pointers.length,X=F.changedPointers.length,yt=O&H&&U-X==0,Lt=O&(q|xt)&&U-X==0;F.isFirst=!!yt,F.isFinal=!!Lt,yt&&(k.session={}),F.eventType=O,function(we,At){var ke=we.session,al=At.pointers,x0=al.length;ke.firstInput||(ke.firstInput=Ot(At)),x0>1&&!ke.firstMultiple?ke.firstMultiple=Ot(At):x0===1&&(ke.firstMultiple=!1);var E0=ke.firstInput,io=ke.firstMultiple,_0=io?io.center:E0.center,w0=At.center=Di(al);At.timeStamp=d(),At.deltaTime=At.timeStamp-E0.timeStamp,At.angle=xn(_0,w0),At.distance=_e(_0,w0),function(_n,fe){var Oi=fe.center,mr=_n.offsetDelta||{},fr=_n.prevDelta||{},vr=_n.prevInput||{};fe.eventType!==H&&vr.eventType!==q||(fr=_n.prevDelta={x:vr.deltaX||0,y:vr.deltaY||0},mr=_n.offsetDelta={x:Oi.x,y:Oi.y}),fe.deltaX=fr.x+(Oi.x-mr.x),fe.deltaY=fr.y+(Oi.y-mr.y)}(ke,At),At.offsetDirection=Qt(At.deltaX,At.deltaY);var ro=hr(At.deltaTime,At.deltaX,At.deltaY);At.overallVelocityX=ro.x,At.overallVelocityY=ro.y,At.overallVelocity=p(ro.x)>p(ro.y)?ro.x:ro.y,At.scale=io?($h=io.pointers,zh=al,_e(zh[0],zh[1],St)/_e($h[0],$h[1],St)):1,At.rotation=io?function(_n,fe){return xn(fe[1],fe[0],St)+xn(_n[1],_n[0],St)}(io.pointers,al):0,At.maxPointers=ke.prevInput?At.pointers.length>ke.prevInput.maxPointers?At.pointers.length:ke.prevInput.maxPointers:At.pointers.length,function(_n,fe){var Oi,mr,fr,vr,Li=_n.lastInterval||fe,S0=fe.timeStamp-Li.timeStamp;if(fe.eventType!=xt&&(S0>at||Li.velocity===r)){var C0=fe.deltaX-Li.deltaX,T0=fe.deltaY-Li.deltaY,oo=hr(S0,C0,T0);mr=oo.x,fr=oo.y,Oi=p(oo.x)>p(oo.y)?oo.x:oo.y,vr=Qt(C0,T0),_n.lastInterval=fe}else Oi=Li.velocity,mr=Li.velocityX,fr=Li.velocityY,vr=Li.direction;fe.velocity=Oi,fe.velocityX=mr,fe.velocityY=fr,fe.direction=vr}(ke,At);var $h,zh,Gh=we.element;m(At.srcEvent.target,Gh)&&(Gh=At.srcEvent.target),At.target=Gh}(k,F),k.emit("hammer.input",F),k.recognize(F),k.session.prevInput=F}function Ot(k){for(var O=[],F=0;F<k.pointers.length;)O[F]={clientX:u(k.pointers[F].clientX),clientY:u(k.pointers[F].clientY)},F++;return{timeStamp:d(),pointers:O,center:Di(O),deltaX:k.deltaX,deltaY:k.deltaY}}function Di(k){var O=k.length;if(O===1)return{x:u(k[0].clientX),y:u(k[0].clientY)};for(var F=0,U=0,X=0;X<O;)F+=k[X].clientX,U+=k[X].clientY,X++;return{x:u(F/O),y:u(U/O)}}function hr(k,O,F){return{x:O/k||0,y:F/k||0}}function Qt(k,O){return k===O?Kt:p(k)>=p(O)?k<0?ce:Bt:O<0?qt:_t}function _e(k,O,F){F||(F=me);var U=O[F[0]]-k[F[0]],X=O[F[1]]-k[F[1]];return Math.sqrt(U*U+X*X)}function xn(k,O,F){F||(F=me);var U=O[F[0]]-k[F[0]],X=O[F[1]]-k[F[1]];return 180*Math.atan2(X,U)/Math.PI}zt.prototype={handler:function(){},init:function(){this.evEl&&s(this.element,this.evEl,this.domHandler),this.evTarget&&s(this.target,this.evTarget,this.domHandler),this.evWin&&s(B(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(B(this.element),this.evWin,this.domHandler)}};var Bi={mousedown:H,mousemove:2,mouseup:q},Zc="mousedown",CA="mousemove mouseup";function Qc(){this.evEl=Zc,this.evWin=CA,this.pressed=!1,zt.apply(this,arguments)}x(Qc,zt,{handler:function(k){var O=Bi[k.type];O&H&&k.button===0&&(this.pressed=!0),2&O&&k.which!==1&&(O=q),this.pressed&&(O&q&&(this.pressed=!1),this.callback(this.manager,O,{pointers:[k],changedPointers:[k],pointerType:ct,srcEvent:k}))}});var TA={pointerdown:H,pointermove:2,pointerup:q,pointercancel:xt,pointerout:xt},AA={2:tt,3:"pen",4:ct,5:"kinect"},l0="pointerdown",u0="pointermove pointerup pointercancel";function Nh(){this.evEl=l0,this.evWin=u0,zt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(l0="MSPointerDown",u0="MSPointerMove MSPointerUp MSPointerCancel"),x(Nh,zt,{handler:function(k){var O=this.store,F=!1,U=k.type.toLowerCase().replace("ms",""),X=TA[U],yt=AA[k.pointerType]||k.pointerType,Lt=yt==tt,we=R(O,k.pointerId,"pointerId");X&H&&(k.button===0||Lt)?we<0&&(O.push(k),we=O.length-1):X&(q|xt)&&(F=!0),we<0||(O[we]=k,this.callback(this.manager,X,{pointers:O,changedPointers:[k],pointerType:yt,srcEvent:k}),F&&O.splice(we,1))}});var kA={touchstart:H,touchmove:2,touchend:q,touchcancel:xt};function p0(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,zt.apply(this,arguments)}function PA(k,O){var F=D(k.touches),U=D(k.changedTouches);return O&(q|xt)&&(F=z(F.concat(U),"identifier",!0)),[F,U]}x(p0,zt,{handler:function(k){var O=kA[k.type];if(O===H&&(this.started=!0),this.started){var F=PA.call(this,k,O);O&(q|xt)&&F[0].length-F[1].length==0&&(this.started=!1),this.callback(this.manager,O,{pointers:F[0],changedPointers:F[1],pointerType:tt,srcEvent:k})}}});var MA={touchstart:H,touchmove:2,touchend:q,touchcancel:xt},RA="touchstart touchmove touchend touchcancel";function tl(){this.evTarget=RA,this.targetIds={},zt.apply(this,arguments)}function NA(k,O){var F=D(k.touches),U=this.targetIds;if(O&(2|H)&&F.length===1)return U[F[0].identifier]=!0,[F,F];var X,yt,Lt=D(k.changedTouches),we=[],At=this.target;if(yt=F.filter(function(ke){return m(ke.target,At)}),O===H)for(X=0;X<yt.length;)U[yt[X].identifier]=!0,X++;for(X=0;X<Lt.length;)U[Lt[X].identifier]&&we.push(Lt[X]),O&(q|xt)&&delete U[Lt[X].identifier],X++;return we.length?[z(yt.concat(we),"identifier",!0),we]:void 0}x(tl,zt,{handler:function(k){var O=MA[k.type],F=NA.call(this,k,O);F&&this.callback(this.manager,O,{pointers:F[0],changedPointers:F[1],pointerType:tt,srcEvent:k})}});var IA=2500;function Ih(){zt.apply(this,arguments);var k=S(this.handler,this);this.touch=new tl(this.manager,k),this.mouse=new Qc(this.manager,k),this.primaryTouch=null,this.lastTouches=[]}function DA(k,O){k&H?(this.primaryTouch=O.changedPointers[0].identifier,h0.call(this,O)):k&(q|xt)&&h0.call(this,O)}function h0(k){var O=k.changedPointers[0];if(O.identifier===this.primaryTouch){var F={x:O.clientX,y:O.clientY};this.lastTouches.push(F);var U=this.lastTouches;setTimeout(function(){var X=U.indexOf(F);X>-1&&U.splice(X,1)},IA)}}function BA(k){for(var O=k.srcEvent.clientX,F=k.srcEvent.clientY,U=0;U<this.lastTouches.length;U++){var X=this.lastTouches[U],yt=Math.abs(O-X.x),Lt=Math.abs(F-X.y);if(yt<=25&&Lt<=25)return!0}return!1}x(Ih,zt,{handler:function(k,O,F){var U=F.pointerType==tt,X=F.pointerType==ct;if(!(X&&F.sourceCapabilities&&F.sourceCapabilities.firesTouchEvents)){if(U)DA.call(this,O,F);else if(X&&BA.call(this,F))return;this.callback(k,O,F)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var d0=P(c.style,"touchAction"),m0=d0!==r,f0="compute",v0="auto",Dh="manipulation",dr="none",Pa="pan-x",Ma="pan-y",el=function(){if(!m0)return!1;var k={},O=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(F){k[F]=!O||e.CSS.supports("touch-action",F)}),k}();function Bh(k,O){this.manager=k,this.set(O)}Bh.prototype={set:function(k){k==f0&&(k=this.compute()),m0&&this.manager.element.style&&el[k]&&(this.manager.element.style[d0]=k),this.actions=k.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var k=[];return y(this.manager.recognizers,function(O){C(O.options.enable,[O])&&(k=k.concat(O.getTouchAction()))}),function(O){if(E(O,dr))return dr;var F=E(O,Pa),U=E(O,Ma);return F&&U?dr:F||U?F?Pa:Ma:E(O,Dh)?Dh:v0}(k.join(" "))},preventDefaults:function(k){var O=k.srcEvent,F=k.offsetDirection;if(this.manager.session.prevented)O.preventDefault();else{var U=this.actions,X=E(U,dr)&&!el[dr],yt=E(U,Ma)&&!el[Ma],Lt=E(U,Pa)&&!el[Pa];if(X){var we=k.pointers.length===1,At=k.distance<2,ke=k.deltaTime<250;if(we&&At&&ke)return}if(!Lt||!yt)return X||yt&&F&$t||Lt&&F&Xt?this.preventSrc(O):void 0}},preventSrc:function(k){this.manager.session.prevented=!0,k.preventDefault()}};var nl=1,ni=32;function ii(k){this.options=o({},this.defaults,k||{}),this.id=_++,this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=nl,this.simultaneous={},this.requireFail=[]}function y0(k){return 16&k?"cancel":8&k?"end":4&k?"move":2&k?"start":""}function g0(k){return k==_t?"down":k==qt?"up":k==ce?"left":k==Bt?"right":""}function il(k,O){var F=O.manager;return F?F.get(k):k}function En(){ii.apply(this,arguments)}function rl(){En.apply(this,arguments),this.pX=null,this.pY=null}function Oh(){En.apply(this,arguments)}function Lh(){ii.apply(this,arguments),this._timer=null,this._input=null}function jh(){En.apply(this,arguments)}function Vh(){En.apply(this,arguments)}function ol(){ii.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ri(k,O){return(O=O||{}).recognizers=I(O.recognizers,ri.defaults.preset),new Fh(k,O)}ii.prototype={defaults:{},set:function(k){return o(this.options,k),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(k){if(f(k,"recognizeWith",this))return this;var O=this.simultaneous;return O[(k=il(k,this)).id]||(O[k.id]=k,k.recognizeWith(this)),this},dropRecognizeWith:function(k){return f(k,"dropRecognizeWith",this)||(k=il(k,this),delete this.simultaneous[k.id]),this},requireFailure:function(k){if(f(k,"requireFailure",this))return this;var O=this.requireFail;return R(O,k=il(k,this))===-1&&(O.push(k),k.requireFailure(this)),this},dropRequireFailure:function(k){if(f(k,"dropRequireFailure",this))return this;k=il(k,this);var O=R(this.requireFail,k);return O>-1&&this.requireFail.splice(O,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(k){return!!this.simultaneous[k.id]},emit:function(k){var O=this,F=this.state;function U(X){O.manager.emit(X,k)}F<8&&U(O.options.event+y0(F)),U(O.options.event),k.additionalEvent&&U(k.additionalEvent),F>=8&&U(O.options.event+y0(F))},tryEmit:function(k){if(this.canEmit())return this.emit(k);this.state=ni},canEmit:function(){for(var k=0;k<this.requireFail.length;){if(!(this.requireFail[k].state&(ni|nl)))return!1;k++}return!0},recognize:function(k){var O=o({},k);if(!C(this.options.enable,[this,O]))return this.reset(),void(this.state=ni);56&this.state&&(this.state=nl),this.state=this.process(O),30&this.state&&this.tryEmit(O)},process:function(k){},getTouchAction:function(){},reset:function(){}},x(En,ii,{defaults:{pointers:1},attrTest:function(k){var O=this.options.pointers;return O===0||k.pointers.length===O},process:function(k){var O=this.state,F=k.eventType,U=6&O,X=this.attrTest(k);return U&&(F&xt||!X)?16|O:U||X?F&q?8|O:2&O?4|O:2:ni}}),x(rl,En,{defaults:{event:"pan",threshold:10,pointers:1,direction:Rt},getTouchAction:function(){var k=this.options.direction,O=[];return k&$t&&O.push(Ma),k&Xt&&O.push(Pa),O},directionTest:function(k){var O=this.options,F=!0,U=k.distance,X=k.direction,yt=k.deltaX,Lt=k.deltaY;return X&O.direction||(O.direction&$t?(X=yt===0?Kt:yt<0?ce:Bt,F=yt!=this.pX,U=Math.abs(k.deltaX)):(X=Lt===0?Kt:Lt<0?qt:_t,F=Lt!=this.pY,U=Math.abs(k.deltaY))),k.direction=X,F&&U>O.threshold&&X&O.direction},attrTest:function(k){return En.prototype.attrTest.call(this,k)&&(2&this.state||!(2&this.state)&&this.directionTest(k))},emit:function(k){this.pX=k.deltaX,this.pY=k.deltaY;var O=g0(k.direction);O&&(k.additionalEvent=this.options.event+O),this._super.emit.call(this,k)}}),x(Oh,En,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[dr]},attrTest:function(k){return this._super.attrTest.call(this,k)&&(Math.abs(k.scale-1)>this.options.threshold||2&this.state)},emit:function(k){if(k.scale!==1){var O=k.scale<1?"in":"out";k.additionalEvent=this.options.event+O}this._super.emit.call(this,k)}}),x(Lh,ii,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[v0]},process:function(k){var O=this.options,F=k.pointers.length===O.pointers,U=k.distance<O.threshold,X=k.deltaTime>O.time;if(this._input=k,!U||!F||k.eventType&(q|xt)&&!X)this.reset();else if(k.eventType&H)this.reset(),this._timer=v(function(){this.state=8,this.tryEmit()},O.time,this);else if(k.eventType&q)return 8;return ni},reset:function(){clearTimeout(this._timer)},emit:function(k){this.state===8&&(k&&k.eventType&q?this.manager.emit(this.options.event+"up",k):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),x(jh,En,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[dr]},attrTest:function(k){return this._super.attrTest.call(this,k)&&(Math.abs(k.rotation)>this.options.threshold||2&this.state)}}),x(Vh,En,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:$t|Xt,pointers:1},getTouchAction:function(){return rl.prototype.getTouchAction.call(this)},attrTest:function(k){var O,F=this.options.direction;return F&($t|Xt)?O=k.overallVelocity:F&$t?O=k.overallVelocityX:F&Xt&&(O=k.overallVelocityY),this._super.attrTest.call(this,k)&&F&k.offsetDirection&&k.distance>this.options.threshold&&k.maxPointers==this.options.pointers&&p(O)>this.options.velocity&&k.eventType&q},emit:function(k){var O=g0(k.offsetDirection);O&&this.manager.emit(this.options.event+O,k),this.manager.emit(this.options.event,k)}}),x(ol,ii,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Dh]},process:function(k){var O=this.options,F=k.pointers.length===O.pointers,U=k.distance<O.threshold,X=k.deltaTime<O.time;if(this.reset(),k.eventType&H&&this.count===0)return this.failTimeout();if(U&&X&&F){if(k.eventType!=q)return this.failTimeout();var yt=!this.pTime||k.timeStamp-this.pTime<O.interval,Lt=!this.pCenter||_e(this.pCenter,k.center)<O.posThreshold;if(this.pTime=k.timeStamp,this.pCenter=k.center,Lt&&yt?this.count+=1:this.count=1,this._input=k,this.count%O.taps===0)return this.hasRequireFailures()?(this._timer=v(function(){this.state=8,this.tryEmit()},O.interval,this),2):8}return ni},failTimeout:function(){return this._timer=v(function(){this.state=ni},this.options.interval,this),ni},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ri.VERSION="2.0.7",ri.defaults={domEvents:!1,touchAction:f0,enable:!0,inputTarget:null,inputClass:null,preset:[[jh,{enable:!1}],[Oh,{enable:!1},["rotate"]],[Vh,{direction:$t}],[rl,{direction:$t},["swipe"]],[ol],[ol,{event:"doubletap",taps:2},["tap"]],[Lh]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Fh(k,O){var F;this.options=o({},ri.defaults,O||{}),this.options.inputTarget=this.options.inputTarget||k,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=k,this.input=new((F=this).options.inputClass||(G?Nh:J?tl:V?Ih:Qc))(F,ht),this.touchAction=new Bh(this,this.options.touchAction),b0(this,!0),y(this.options.recognizers,function(U){var X=this.add(new U[0](U[1]));U[2]&&X.recognizeWith(U[2]),U[3]&&X.requireFailure(U[3])},this)}function b0(k,O){var F,U=k.element;U.style&&(y(k.options.cssProps,function(X,yt){F=P(U.style,yt),O?(k.oldCssProps[F]=U.style[F],U.style[F]=X):U.style[F]=k.oldCssProps[F]||""}),O||(k.oldCssProps={}))}Fh.prototype={set:function(k){return o(this.options,k),k.touchAction&&this.touchAction.update(),k.inputTarget&&(this.input.destroy(),this.input.target=k.inputTarget,this.input.init()),this},stop:function(k){this.session.stopped=k?2:1},recognize:function(k){var O=this.session;if(!O.stopped){var F;this.touchAction.preventDefaults(k);var U=this.recognizers,X=O.curRecognizer;(!X||X&&8&X.state)&&(X=O.curRecognizer=null);for(var yt=0;yt<U.length;)F=U[yt],O.stopped===2||X&&F!=X&&!F.canRecognizeWith(X)?F.reset():F.recognize(k),!X&&14&F.state&&(X=O.curRecognizer=F),yt++}},get:function(k){if(k instanceof ii)return k;for(var O=this.recognizers,F=0;F<O.length;F++)if(O[F].options.event==k)return O[F];return null},add:function(k){if(f(k,"add",this))return this;var O=this.get(k.options.event);return O&&this.remove(O),this.recognizers.push(k),k.manager=this,this.touchAction.update(),k},remove:function(k){if(f(k,"remove",this))return this;if(k=this.get(k)){var O=this.recognizers,F=R(O,k);F!==-1&&(O.splice(F,1),this.touchAction.update())}return this},on:function(k,O){if(k!==r&&O!==r){var F=this.handlers;return y(T(k),function(U){F[U]=F[U]||[],F[U].push(O)}),this}},off:function(k,O){if(k!==r){var F=this.handlers;return y(T(k),function(U){O?F[U]&&F[U].splice(R(F[U],O),1):delete F[U]}),this}},emit:function(k,O){this.options.domEvents&&function(X,yt){var Lt=n.createEvent("Event");Lt.initEvent(X,!0,!0),Lt.gesture=yt,yt.target.dispatchEvent(Lt)}(k,O);var F=this.handlers[k]&&this.handlers[k].slice();if(F&&F.length){O.type=k,O.preventDefault=function(){O.srcEvent.preventDefault()};for(var U=0;U<F.length;)F[U](O),U++}},destroy:function(){this.element&&b0(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(ri,{INPUT_START:H,INPUT_MOVE:2,INPUT_END:q,INPUT_CANCEL:xt,STATE_POSSIBLE:nl,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:ni,DIRECTION_NONE:Kt,DIRECTION_LEFT:ce,DIRECTION_RIGHT:Bt,DIRECTION_UP:qt,DIRECTION_DOWN:_t,DIRECTION_HORIZONTAL:$t,DIRECTION_VERTICAL:Xt,DIRECTION_ALL:Rt,Manager:Fh,Input:zt,TouchAction:Bh,TouchInput:tl,MouseInput:Qc,PointerEventInput:Nh,TouchMouseInput:Ih,SingleTouchInput:p0,Recognizer:ii,AttrRecognizer:En,Tap:ol,Pan:rl,Swipe:Vh,Pinch:Oh,Rotate:jh,Press:Lh,on:s,off:h,each:y,merge:w,extend:g,assign:o,inherit:x,bindFn:S,prefixed:P}),(e!==void 0?e:typeof self<"u"?self:{}).Hammer=ri,typeof r=="function"&&r.amd?r(function(){return ri}):t.exports?t.exports=ri:e.Hammer=ri})(window,document)})(Hm);const qi=so(Hm.exports);var qm=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function ys(t,e){return e.get(t,!1)}function lu(t){t.preventDefault(),typeof t.stopPropagation=="function"?t.stopPropagation():t.srcEvent&&typeof t.srcEvent.stopPropagation=="function"&&t.srcEvent.stopPropagation(),typeof t.stopImmediatePropagation=="function"&&t.stopImmediatePropagation()}function uu(t){function e(l){setTimeout(function(){L(qm,function(u){st.unbind(t,u,lu,!0)})},500)}st.bind(t,"touchstart",function(l){L(qm,function(u){st.bind(t,u,lu,!0)})},!0),st.bind(t,"touchend",e,!0),st.bind(t,"touchcancel",e,!0);var n=new qi.Manager(t,{inputClass:qi.TouchInput,recognizers:[],domEvents:!0}),i=new qi.Tap,r=new qi.Pan({threshold:10}),o=new qi.Press,a=new qi.Pinch,c=new qi.Tap({event:"doubletap",taps:2});return a.requireFailure(r),a.requireFailure(o),n.add([r,o,a,c,i]),n.reset=function(l){var u=this.recognizers,p=this.session;p.stopped||(n.stop(l),setTimeout(function(){var d,v;for(d=0;v=u[d];d++)v.reset(),v.state=8;p.curRecognizer=null},0))},n.on("hammer.input",function(l){l.srcEvent.defaultPrevented&&n.reset(!0)}),n}function Wm(t,e,n,i,r){var o,a=ys("dragging",t),c=ys("move",t),l=ys("contextPad",t),u=ys("palette",t);function p(f,y){return function(b){var g=d(b.target),w=g&&i.get(g);return y&&(b.srcEvent.button=y),r.fire(f,b,w)}}function d(f){return Fi(f,"svg, .djs-element",!0)}function v(f){function y(b){var g=d(b.target),w=g&&i.get(g);if(c&&e.getRootElement()!==w)return c.start(b,w,!0);(function(x){var S=0,C=0;function I(h){var m=h.deltaX-S,E=h.deltaY-C;e.scroll({dx:m,dy:E}),S=h.deltaX,C=h.deltaY}function s(h){o.off("panmove",I),o.off("panend",s),o.off("pancancel",s)}o.on("panmove",I),o.on("panend",s),o.on("pancancel",s)})()}(o=uu(f)).on("tap",p("element.click")),o.on("doubletap",p("element.dblclick",1)),o.on("panstart",y),o.on("press",y),o.on("pinchstart",function(b){var g=e.zoom(),w=b.center;function x(C){var I=1-(1-C.scale)/1.5,s=Math.max(.2,Math.min(4,I*g));e.zoom(s,w),lu(C)}function S(C){o.off("pinchmove",x),o.off("pinchend",S),o.off("pinchcancel",S),o.reset(!0)}o.on("pinchmove",x),o.on("pinchend",S),o.on("pinchcancel",S)})}a&&n.on("drag.move",function(f){var y=f.originalEvent;if(y&&!(y instanceof MouseEvent)){var b=yi(y),g=d(document.elementFromPoint(b.x,b.y)),w=g&&i.get(g);w!==f.hover&&(f.hover&&a.out(f),w&&(a.hover({element:w,gfx:g}),f.hover=w,f.hoverGfx=g))}}),l&&n.on("contextPad.create",function(f){var y=uu(f.pad.html);y.on("panstart",function(b){l.trigger("dragstart",b,!0)}),y.on("press",function(b){l.trigger("dragstart",b,!0)}),y.on("tap",function(b){l.trigger("click",b)})}),u&&n.on("palette.create",function(f){var y=uu(f.container);y.on("panstart",function(b){u.trigger("dragstart",b,!0)}),y.on("press",function(b){u.trigger("dragstart",b,!0)}),y.on("tap",function(b){u.trigger("click",b)})}),n.on("canvas.init",function(f){v(f.svg)})}function pu(t,e){var n=this;e.on("canvas.init",function(i){n.addBBoxMarker(i.svg)})}Wm.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"],pu.$inject=["canvas","eventBus"],pu.prototype.addBBoxMarker=function(t){var e={fill:"none",class:"outer-bound-marker"},n=rt("rect");K(n,{x:-1e4,y:1e4,width:10,height:10}),K(n,e),lt(t,n);var i=rt("rect");K(i,{x:1e4,y:1e4,width:10,height:10}),K(i,e),lt(t,i)};const NE={__depends__:[{__depends__:[Do],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",Wm],touchFix:["type",pu]}]};function hu(t){return t&&t[t.length-1]}function Km(t){return t.y}function Xm(t){return t.x}var IE={left:Xm,center:Xm,right:function(t){return t.x+t.width},top:Km,middle:Km,bottom:function(t){return t.y+t.height}};function jr(t){this._modeling=t}jr.$inject=["modeling"],jr.prototype._getOrientationDetails=function(t){var e="x",n="width";return["top","bottom","middle"].indexOf(t)!==-1&&(e="y",n="height"),{axis:e,dimension:n}},jr.prototype._isType=function(t,e){return e.indexOf(t)!==-1},jr.prototype._alignmentPosition=function(t,e){var n,i,r,o=this._getOrientationDetails(t),a=o.axis,c=o.dimension,l={},u={},p=!1;if(this._isType(t,["left","top"]))l[t]=e[0][a];else if(this._isType(t,["right","bottom"]))r=hu(e),l[t]=r[a]+r[c];else if(this._isType(t,["center","middle"])){if(L(e,function(d){var v=d[a]+Math.round(d[c]/2);u[v]?u[v].elements.push(d):u[v]={elements:[d],center:v}}),n=We(u,function(d){return d.elements.length>1&&(p=!0),d.elements.length}),p)return l[t]=hu(n).center,l;i=e[0],r=hu(e=We(e,function(d){return d[a]+d[c]})),l[t]=function(d,v){return Math.round((d[a]+v[a]+v[c])/2)}(i,r)}return l},jr.prototype.trigger=function(t,e){var n=this._modeling,i=mt(t,function(a){return!(a.waypoints||a.host||a.labelTarget)});if(!(i.length<2)){var r=We(i,IE[e]),o=this._alignmentPosition(e,r);n.alignElements(r,o)}};const DE={__init__:["alignElements"],alignElements:["type",jr]};var BE=10,Ym=50,OE=250;function du(t,e,n,i){for(var r;r=LE(t,n,e);)n=i(e,n,r);return n}function mu(t){return function(e,n,i){var r={x:n.x,y:n.y};return["x","y"].forEach(function(o){var a=t[o];if(a){var c=o==="x"?"width":"height",l=a.margin,u=a.minDistance;r[o]=l<0?Math.min(i[o]+l-e[c]/2,n[o]-u+l):Math.max(i[o]+i[c]+l+e[c]/2,n[o]+u+l)}}),r}}function LE(t,e,n){var i={x:e.x-n.width/2,y:e.y-n.height/2,width:n.width,height:n.height},r=function(o){var a=fu(o);return o.host&&(a=a.concat(fu(o.host))),o.attachers&&(a=a.concat(o.attachers.reduce(function(c,l){return c.concat(fu(l))},[]))),a}(t);return Pt(r,function(o){return o!==n&&ge(o,i,BE)==="intersect"})}function fu(t){return(e=t,e.outgoing.map(function(n){return n.target})).concat(function(n){return n.incoming.map(function(i){return i.source})}(t));var e}function jE(){return!0}function Jm(t,e,n){t.on("autoPlace",100,function(i){var r=i.shape;return function(o,a,c){c||(c={});var l=c.defaultDistance||Ym,u=ft(o),p=ot(o);return{x:p.right+l+a.width/2,y:u.y}}(i.source,r)}),t.on("autoPlace.end",function(i){n.scrollToElement(i.shape)}),this.append=function(i,r,o){t.fire("autoPlace.start",{source:i,shape:r});var a=t.fire("autoPlace",{source:i,shape:r}),c=e.appendShape(i,r,a,i.parent,o);return t.fire("autoPlace.end",{source:i,shape:c}),c}}function Zm(t,e){t.on("autoPlace.end",500,function(n){e.select(n.shape)})}Jm.$inject=["eventBus","modeling","canvas"],Zm.$inject=["eventBus","selection"];const VE={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",Jm],autoPlaceSelectionBehavior:["type",Zm]};function gs(t,e){for(typeof e=="string"&&(e=[e]);t=t.parent;)if(wt(t,e))return t;return null}function Qm(t,e){return A(e,"bpmn:TextAnnotation")?function(n,i){var r=ot(n),o={x:r.right+i.width/2,y:r.top-50-i.height/2};return du(n,i,o,mu({y:{margin:-30,minDistance:20}}))}(t,e):wt(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])?function(n,i){var r=ot(n),o={x:r.right-10+i.width/2,y:r.bottom+40+i.width/2};return du(n,i,o,mu({x:{margin:30,minDistance:30}}))}(t,e):A(e,"bpmn:FlowNode")?function(n,i){var r=ot(n),o=ft(n),a=function(d,v){v||(v={});var f=v.defaultDistance||Ym,y=v.direction||"e",b=v.filter,g=v.getWeight||function(h){return h.source===d?1:-1},w=v.maxDistance||OE,x=v.reference||"start";function S(h,m){return y==="n"?x==="start"?ot(h).top-ot(m).bottom:x==="center"?ot(h).top-ft(m).y:ot(h).top-ot(m).top:y==="w"?x==="start"?ot(h).left-ot(m).right:x==="center"?ot(h).left-ft(m).x:ot(h).left-ot(m).left:y==="s"?x==="start"?ot(m).top-ot(h).bottom:x==="center"?ft(m).y-ot(h).bottom:ot(m).bottom-ot(h).bottom:x==="start"?ot(m).left-ot(h).right:x==="center"?ft(m).x-ot(h).right:ot(m).right-ot(h).right}b||(b=jE);var C=d.incoming.filter(b).map(function(h){var m=g(h),E=m<0?S(h.source,d):S(d,h.source);return{id:h.source.id,distance:E,weight:m}}),I=d.outgoing.filter(b).map(function(h){var m=g(h),E=m>0?S(d,h.target):S(h.target,d);return{id:h.target.id,distance:E,weight:m}}),s=De(C.concat(I).reduce(function(h,m){return h[m.id+"__weight_"+m.weight]=m,h},{}),function(h,m){var E=m.distance,T=m.weight;return E<0||E>w||(h[String(E)]||(h[String(E)]=0),h[String(E)]+=1*T,(!h.distance||h[h.distance]<h[String(E)])&&(h.distance=E)),h},{});return s.distance||f}(n,{filter:function(d){return A(d,"bpmn:SequenceFlow")}}),c=30,l=80,u="left";A(n,"bpmn:BoundaryEvent")&&(u=ge(n,n.host,-25)).indexOf("top")!==-1&&(c*=-1);var p={x:r.right+a+i.width/2,y:o.y+FE(u,l)};return du(n,i,p,mu({y:{margin:c,minDistance:l}}))}(t,e):void 0}function FE(t,e){return t.indexOf("top")!=-1?-1*e:t.indexOf("bottom")!=-1?e:0}function tf(t){t.on("autoPlace",function(e){var n=e.shape;return Qm(e.source,n)})}tf.$inject=["eventBus"];const $E={__depends__:[VE],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",tf]};function Q(t){this._eventBus=t}Q.$inject=["eventBus"],Q.prototype.on=function(t,e,n,i,r,o){if((ve(e)||pt(e))&&(o=r,r=i,i=n,n=e,e=null),ve(n)&&(o=r,r=i,i=n,n=1e3),te(r)&&(o=r,r=!1),!ve(i))throw new Error("handlerFn must be a function");gt(t)||(t=[t]);var a=this._eventBus;L(t,function(c){var l=["commandStack",c,e].filter(function(u){return u}).join(".");a.on(l,n,r?function(u,p){return function(d){return u.call(p||null,d.context,d.command,d)}}(i,o):i,o)})};function Wn(t,e,n,i){Q.call(this,t),this._elementRegistry=e,this._modeling=n,this._rules=i;var r=this;this.postExecuted(["shape.create"],function(o){var a=o.context,c=a.hints||{},l=a.shape,u=a.parent||a.newParent;c.autoResize!==!1&&r._expand([l],u)}),this.postExecuted(["elements.move"],function(o){var a=o.context,c=vo(Va(a.closure.topLevel)),l=a.hints,u=!l||l.autoResize;u!==!1&&L(Vi(c,function(p){return p.parent.id}),function(p,d){gt(u)&&(p=p.filter(function(v){return Pt(u,Ke({id:v.id}))})),r._expand(p,d)})}),this.postExecuted(["shape.toggleCollapse"],function(o){var a=o.context,c=a.hints,l=a.shape;c&&c.autoResize===!1||l.collapsed||r._expand(l.children||[],l)}),this.postExecuted(["shape.resize"],function(o){var a=o.context,c=a.hints,l=a.shape,u=l.parent;c&&c.autoResize===!1||u&&r._expand([l],u)})}function bs(t){t.invoke(Wn,this)}function bi(t){Q.call(this,t),this.init()}function jo(t){bi.call(this,t);var e=this;this.addRule("element.autoResize",function(n){return e.canResize(n.elements,n.target)})}function xs(t,e){jo.call(this,t),this._modeling=e}L(["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"],function(t){Q.prototype[t]=function(e,n,i,r,o){(ve(e)||pt(e))&&(o=r,r=i,i=n,n=e,e=null),this.on(e,t,n,i,r,o)}}),Wn.$inject=["eventBus","elementRegistry","modeling","rules"],it(Wn,Q),Wn.prototype._getOptimalBounds=function(t,e){var n=this.getOffset(e),i=this.getPadding(e),r=ot(ye(t)),o=ot(e),a={};return r.top-o.top<i.top&&(a.top=r.top-n.top),r.left-o.left<i.left&&(a.left=r.left-n.left),o.right-r.right<i.right&&(a.right=r.right+n.right),o.bottom-r.bottom<i.bottom&&(a.bottom=r.bottom+n.bottom),$l($({},o,a))},Wn.prototype._expand=function(t,e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),this._rules.allowed("element.autoResize",{elements:t,target:e})){var n=this._getOptimalBounds(t,e);if(function(o,a){return o.x!==a.x||o.y!==a.y||o.width!==a.width||o.height!==a.height}(n,e)){var i=function(o,a){var c="";return o=ot(o),a=ot(a),o.top>a.top&&(c=c.concat("n")),o.right<a.right&&(c=c.concat("w")),o.bottom<a.bottom&&(c=c.concat("s")),o.left>a.left&&(c=c.concat("e")),c}(Xe(e,["x","y","width","height"]),n);this.resize(e,n,{autoResize:i});var r=e.parent;r&&this._expand([e],r)}}},Wn.prototype.getOffset=function(t){return{top:60,bottom:60,left:100,right:100}},Wn.prototype.getPadding=function(t){return{top:2,bottom:2,left:15,right:15}},Wn.prototype.resize=function(t,e,n){this._modeling.resizeShape(t,e,null,n)},bs.$inject=["injector"],it(bs,Wn),bs.prototype.resize=function(t,e,n){A(t,"bpmn:Participant")?this._modeling.resizeLane(t,e,null,n):this._modeling.resizeShape(t,e,null,n)},bi.$inject=["eventBus"],it(bi,Q),bi.prototype.addRule=function(t,e,n){var i=this;typeof t=="string"&&(t=[t]),t.forEach(function(r){i.canExecute(r,e,function(o,a,c){return n(o)},!0)})},bi.prototype.init=function(){},jo.$inject=["eventBus"],it(jo,bi),jo.prototype.canResize=function(t,e){return!1},it(xs,jo),xs.$inject=["eventBus","modeling"],xs.prototype.canResize=function(t,e){if(!A(e,"bpmn:Participant")&&!A(e,"bpmn:Lane")&&!A(e,"bpmn:SubProcess"))return!1;var n=!0;return L(t,function(i){(A(i,"bpmn:Lane")||i.labelTarget)&&(n=!1)}),n};const zE={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",bs],bpmnAutoResizeProvider:["type",xs]};function ef(t,e,n){var i,r,o=this,a=n.get("dragging",!1);a&&e.on("drag.start",function(c){e.once("drag.move",1500,function(l){(function(u){if(!u.hover){var p=u.originalEvent,d=o._findTargetGfx(p),v=d&&t.get(d);d&&v&&(u.stopPropagation(),a.hover({element:v,gfx:d}),a.move(p))}})(l)})}),e.on("element.hover",function(c){i=c.gfx,r=c.element}),e.on("element.hover",1500,function(c){r&&e.fire("element.out",{element:r,gfx:i})}),e.on("element.out",function(){i=null,r=null}),this._findTargetGfx=function(c){var l;if(c instanceof MouseEvent)return l=yi(c),function(u){return Fi(u,"svg, .djs-element",!0)}(document.elementFromPoint(l.x,l.y))}}ef.$inject=["elementRegistry","eventBus","injector"];const GE={__init__:["hoverFix"],hoverFix:["type",ef]};var Vr=Math.round,nf="djs-drag-active";function Wi(t){t.preventDefault()}function rf(t,e,n,i){var r,o={threshold:5,trapClick:!0};function a(w){var x=e.viewbox(),S=e._container.getBoundingClientRect();return{x:x.x+(w.x-S.left)/x.scale,y:x.y+(w.y-S.top)/x.scale}}function c(w,x){x=x||r;var S=t.createEvent($({},x.payload,x.data,{isTouch:x.isTouch}));return t.fire("drag."+w,S)!==!1&&t.fire(x.prefix+"."+w,S)}function l(w,x){var S,C=r.payload,I=r.displacement,s=r.globalStart,h=yi(w),m=Nn(h,s),E=r.localStart,T=a(h),R=Nn(T,E);if(!r.active&&(x||(S=m,Math.sqrt(Math.pow(S.x,2)+Math.pow(S.y,2))>r.threshold))){if($(C,{x:Vr(E.x+I.x),y:Vr(E.y+I.y),dx:0,dy:0},{originalEvent:w}),c("start")===!1)return b();r.active=!0,r.keepSelection||(C.previousSelection=n.get(),n.select(null)),r.cursor&&vs(r.cursor),e.addMarker(e.getRootElement(),nf)}nu(w),r.active&&($(C,{x:Vr(T.x+I.x),y:Vr(T.y+I.y),dx:Vr(R.x),dy:Vr(R.y)},{originalEvent:w}),c("move"))}function u(w){var x=!0;r.active&&(w&&(r.payload.originalEvent=w,nu(w)),x=c("end")),x===!1&&c("rejected"),c("ended",g(x!==!0))}function p(w){w.which===27&&(Wi(w),b())}function d(w){var x;r.active&&(x=Fm(t),setTimeout(x,400),Wi(w)),u(w)}function v(w){l(w)}function f(w){var x=r.payload;x.hoverGfx=w.gfx,x.hover=w.element,c("hover")}function y(w){c("out");var x=r.payload;x.hoverGfx=null,x.hover=null}function b(w){var x;if(r){var S=r.active;S&&c("cancel"),x=g(w),S&&c("canceled",x)}}function g(w){var x,S;c("cleanup"),Vm(),S=r.trapClick?d:u,st.unbind(document,"mousemove",l),st.unbind(document,"dragstart",Wi),st.unbind(document,"selectstart",Wi),st.unbind(document,"mousedown",S,!0),st.unbind(document,"mouseup",S,!0),st.unbind(document,"keyup",p),st.unbind(document,"touchstart",v,!0),st.unbind(document,"touchcancel",b,!0),st.unbind(document,"touchmove",l,!0),st.unbind(document,"touchend",u,!0),t.off("element.hover",f),t.off("element.out",y),e.removeMarker(e.getRootElement(),nf);var C=r.payload.previousSelection;return w!==!1&&C&&!n.get().length&&function(I){var s=I.filter(function(h){return i.get(h.id)});s.length&&n.select(s)}(C),x=r,r=null,x}t.on("diagram.destroy",b),this.init=function(w,x,S,C){r&&b(!1),typeof x=="string"&&(C=S,S=x,x=null);var I,s,h,m,E,T=(C=$({},o,C||{})).data||{};m=C.trapClick?d:u,w?(I=Dr(w)||w,s=yi(w),nu(w),I.type==="dragstart"&&Wi(I)):(I=null,s={x:0,y:0}),h=a(s),x||(x=h),E=function(R){return typeof TouchEvent<"u"&&R instanceof TouchEvent}(I),r=$({prefix:S,data:T,payload:{},globalStart:s,displacement:Nn(x,h),localStart:h,isTouch:E},C),C.manual||(E?(st.bind(document,"touchstart",v,!0),st.bind(document,"touchcancel",b,!0),st.bind(document,"touchmove",l,!0),st.bind(document,"touchend",u,!0)):(st.bind(document,"mousemove",l),st.bind(document,"dragstart",Wi),st.bind(document,"selectstart",Wi),st.bind(document,"mousedown",m,!0),st.bind(document,"mouseup",m,!0)),st.bind(document,"keyup",p),t.on("element.hover",f),t.on("element.out",y)),c("init"),C.autoActivate&&l(w,!0)},this.move=l,this.hover=f,this.out=y,this.end=u,this.cancel=b,this.context=function(){return r},this.setOptions=function(w){$(o,w)}}rf.$inject=["eventBus","canvas","selection","elementRegistry"];const Kn={__depends__:[GE,Rn],dragging:["type",rf]};function Fr(t,e,n){this._canvas=n,this._opts=$({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},t);var i=this;e.on("drag.move",function(r){var o=i._toBorderPoint(r);i.startScroll(o)}),e.on(["drag.cleanup"],function(){i.stopScroll()})}function UE(t,e,n){return e<t&&t<n}Fr.$inject=["config.autoScroll","eventBus","canvas"],Fr.prototype.startScroll=function(t){var e=this._canvas,n=this._opts,i=this,r=e.getContainer().getBoundingClientRect(),o=[t.x,t.y,r.width-t.x,r.height-t.y];this.stopScroll();for(var a=0,c=0,l=0;l<4;l++)UE(o[l],n.scrollThresholdOut[l],n.scrollThresholdIn[l])&&(l===0?a=n.scrollStep:l==1?c=n.scrollStep:l==2?a=-n.scrollStep:l==3&&(c=-n.scrollStep));a===0&&c===0||(e.scroll({dx:a,dy:c}),this._scrolling=setTimeout(function(){i.startScroll(t)},n.scrollRepeatTimeout))},Fr.prototype.stopScroll=function(){clearTimeout(this._scrolling)},Fr.prototype.setOptions=function(t){this._opts=$({},this._opts,t)},Fr.prototype._toBorderPoint=function(t){var e=this._canvas._container.getBoundingClientRect(),n=yi(t.originalEvent);return{x:n.x-e.left,y:n.y-e.top}};const HE={__depends__:[Kn],__init__:["autoScroll"],autoScroll:["type",Fr]};function vu(t){this._commandStack=t.get("commandStack",!1)}vu.$inject=["injector"],vu.prototype.allowed=function(t,e){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(t,e)),n===void 0||n};const Dn={__init__:["rules"],rules:["type",vu]};var Es=Math.round,qE=Math.max,of=10;function yu(t,e){return function(n,i){var r,o;for(r=0;o=n[r];r++)if(wo(o,i)<=of)return{point:n[r],bendpoint:!0,index:r};return null}(t,e)||function(n,i){var r,o,a=Od(function(u,p){return[["M",u.x,u.y],["m",0,-p],["a",p,p,0,1,1,0,2*p],["a",p,p,0,1,1,0,-2*p],["z"]]}(i,of),(r=[],n.forEach(function(u,p){r.push([p===0?"M":"L",u.x,u.y])}),r)),c=a[0],l=a[a.length-1];return c?c!==l?c.segment2!==l.segment2?{point:n[o=qE(c.segment2,l.segment2)-1],bendpoint:!0,index:o}:{point:{x:Es(c.x+l.x)/2,y:Es(c.y+l.y)/2},index:c.segment2}:{point:{x:Es(c.x),y:Es(c.y)},index:c.segment2}:null}(t,e)}var af="djs-bendpoint",sf="djs-segment-dragger";function gu(t,e,n){var i=function(r,o){var a,c=yi(o),l=r._container.getBoundingClientRect();a={x:l.left,y:l.top};var u=r.viewbox();return{x:u.x+(c.x-a.x)/u.scale,y:u.y+(c.y-a.y)/u.scale}}(t,n);return yu(e,i)}function bu(t,e){var n=rt("g");bt(n).add(af),lt(t,n);var i=rt("circle");K(i,{cx:0,cy:0,r:4}),bt(i).add("djs-visual"),lt(n,i);var r=rt("circle");return K(r,{cx:0,cy:0,r:10}),bt(r).add("djs-hit"),lt(n,r),e&&bt(n).add(e),n}function WE(t,e,n,i){var r=rt("g");lt(t,r);var o=function(l,u,p){var d=u.x-l.x,v=u.y-l.y;return lf(p==="h"?d:v)}(e,n,i),a=rt("rect");K(a,{x:-7,y:-1.5,width:14,height:3}),bt(a).add("djs-visual"),lt(r,a);var c=rt("rect");return K(c,{x:-o/2,y:-7,width:o,height:14}),bt(c).add("djs-hit"),lt(r,c),Yd(r,i==="v"?90:0),r}function cf(t,e,n){var i=rt("g"),r=jl(e,n),o=zn(e,n);return lt(t,i),WE(i,e,n,o),bt(i).add(sf),bt(i).add(o==="h"?"horizontal":"vertical"),Oe(i,r.x,r.y),i}function lf(t){return Math.abs(Math.round(2*t/3))}var uf={exports:{}};uf.exports=function(t){if(t.CSS&&t.CSS.escape)return t.CSS.escape;var e=function(n){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var i,r=String(n),o=r.length,a=-1,c="",l=r.charCodeAt(0);++a<o;)(i=r.charCodeAt(a))!=0?c+=i>=1&&i<=31||i==127||a==0&&i>=48&&i<=57||a==1&&i>=48&&i<=57&&l==45?"\\"+i.toString(16)+" ":a==0&&o==1&&i==45||!(i>=128||i==45||i==95||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122)?"\\"+r.charAt(a):r.charAt(a):c+="\uFFFD";return c};return t.CSS||(t.CSS={}),t.CSS.escape=e,e}(B0);const xu=so(uf.exports);var KE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function pf(t){return(t=""+t)&&t.replace(/[&<>"']/g,function(e){return KE[e]})}function hf(t,e,n,i,r){function o(y,b){var g,w=b.waypoints,x=gu(e,w,y);if(x)return g=function(S,C){var I,s,h=S.waypoints;return C.index<=0||C.bendpoint?null:(s=zn((I={start:h[C.index-1],end:h[C.index]}).start,I.end))?lf(s==="h"?I.end.x-I.start.x:I.end.y-I.start.y)/2:null}(b,x),function(S,C,I){var s,h,m,E,T,R,D=S.index,z=S.point;return!(D<=0||S.bendpoint)&&(m=jl(s=C[D-1],h=C[D]),E=zn(s,h),T=Math.abs(z.x-m.x),R=Math.abs(z.y-m.y),E&&T<=I&&R<=I)}(x,w,g)?r.start(y,b,x.index):i.start(y,b,x.index,!x.bendpoint),!0}function a(y,b,g){st.bind(y,b,function(w){n.triggerMouseEvent(b,w,g),w.stopPropagation()})}function c(y,b){var g=e.getLayer("overlays"),w=Wt('.djs-bendpoints[data-element-id="'+xu(y.id)+'"]',g);return!w&&b&&(K(w=rt("g"),{"data-element-id":y.id}),bt(w).add("djs-bendpoints"),lt(g,w),a(w,"mousedown",y),a(w,"click",y),a(w,"dblclick",y)),w}function l(y,b){return Wt('.djs-segment-dragger[data-segment-idx="'+y+'"]',b)}function u(y,b){b.waypoints.forEach(function(g,w){var x=bu(y);lt(y,x),Oe(x,g.x,g.y)}),bu(y,"floating")}function p(y,b){for(var g,w,x,S=b.waypoints,C=1;C<S.length;C++)zn(g=S[C-1],w=S[C])&&(K(x=cf(y,g,w),{"data-segment-idx":C}),a(x,"mousemove",b))}function d(y){var b=c(y);return b||(u(b=c(y,!0),y),p(b,y)),b}function v(y){var b=c(y);b&&(function(g){L(wl("."+sf,g),function(w){ee(w)})}(b),function(g){L(wl("."+af,g),function(w){ee(w)})}(b),p(b,y),u(b,y))}function f(y,b,g){var w,x,S=l(b.index,y),C=g[b.index-1],I=g[b.index],s=b.point,h=jl(C,I),m=zn(C,I);S&&(w=function(E){return Wt(".djs-visual",E)}(S),x={x:s.x-h.x,y:s.y-h.y},m==="v"&&(x={x:x.y,y:x.x}),Oe(w,x.x,x.y))}t.on("connection.changed",function(y){v(y.element)}),t.on("connection.remove",function(y){var b=c(y.element);b&&ee(b)}),t.on("element.marker.update",function(y){var b,g=y.element;g.waypoints&&(b=d(g),y.add?bt(b).add(y.marker):bt(b).remove(y.marker))}),t.on("element.mousemove",function(y){var b,g,w=y.element,x=w.waypoints;if(x){if(b=c(w,!0),!(g=gu(e,x,y.originalEvent)))return;(function(S,C){var I=Wt(".floating",S),s=C.point;I&&Oe(I,s.x,s.y)})(b,g),g.bendpoint||f(b,g,x)}}),t.on("element.mousedown",function(y){if(gi(y)){var b=y.originalEvent,g=y.element;if(g.waypoints)return o(b,g)}}),t.on("selection.changed",function(y){var b=y.newSelection[0];b&&b.waypoints&&d(b)}),t.on("element.hover",function(y){var b=y.element;b.waypoints&&(d(b),n.registerEvent(y.gfx,"mousemove","element.mousemove"))}),t.on("element.out",function(y){n.unregisterEvent(y.gfx,"mousemove","element.mousemove")}),t.on("element.updateId",function(y){var b=y.element,g=y.newId;if(b.waypoints){var w=c(b);w&&K(w,{"data-element-id":g})}}),this.addHandles=d,this.updateHandles=v,this.getBendpointsContainer=c,this.getSegmentDragger=l}hf.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];var df=Math.round,Ki="reconnectStart",Xi="reconnectEnd",Vo="updateWaypoints";function Eu(t,e,n,i,r,o){this._injector=t,this.start=function(a,c,l,u){var p,d=n.getGraphics(c),v=c.source,f=c.target,y=c.waypoints,b=(p=u||l!==0?u||l!==y.length-1?Vo:Xi:Ki)===Vo?"connection.updateWaypoints":"connection.reconnect",g=r.allowed(b,{connection:c,source:v,target:f});g===!1&&(g=r.allowed(b,{connection:c,source:f,target:v})),g!==!1&&i.init(a,"bendpoint.move",{data:{connection:c,connectionGfx:d,context:{allowed:g,bendpointIndex:l,connection:c,source:v,target:f,insert:u,type:p}}})},e.on("bendpoint.move.hover",function(a){var c,l=a.context,u=l.connection,p=u.source,d=u.target,v=a.hover,f=l.type;if(l.hover=v,v){var y=f===Vo?"connection.updateWaypoints":"connection.reconnect";if(c=l.allowed=r.allowed(y,{connection:u,source:f===Ki?v:p,target:f===Xi?v:d}))return l.source=f===Ki?v:p,void(l.target=f===Xi?v:d);c===!1&&(c=l.allowed=r.allowed(y,{connection:u,source:f===Xi?v:d,target:f===Ki?v:p})),c&&(l.source=f===Xi?v:d,l.target=f===Ki?v:p)}}),e.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(a){var c=a.context,l=c.type;c.hover=null,c.source=null,c.target=null,l!==Vo&&(c.allowed=!1)}),e.on("bendpoint.move.end",function(a){var c=a.context,l=c.allowed,u=c.bendpointIndex,p=c.connection,d=c.insert,v=p.waypoints.slice(),f=c.source,y=c.target,b=c.type,g=c.hints||{},w={x:df(a.x),y:df(a.y)};if(!l)return!1;b===Vo?(d?v.splice(u,0,w):v[u]=w,g.bendpointMove={insert:d,bendpointIndex:u},v=this.cropWaypoints(p,v),o.updateWaypoints(p,function(x){x=x.slice();for(var S,C,I,s=0;x[s];)S=x[s],C=x[s-1],wo(S,I=x[s+1])===0||Ll(C,I,S)?x.splice(s,1):s++;return x}(v),g)):(b===Ki?(g.docking="source",_s(c)&&(g.docking="target",g.newWaypoints=v.reverse())):b===Xi&&(g.docking="target",_s(c)&&(g.docking="source",g.newWaypoints=v.reverse())),o.reconnect(p,f,y,w,g))},this)}function _s(t){var e=t.hover,n=t.source,i=t.target,r=t.type;return r===Ki?e&&i&&e===i&&n!==i:r===Xi?e&&n&&e===n&&n!==i:void 0}Eu.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],Eu.prototype.cropWaypoints=function(t,e){var n=this._injector.get("connectionDocking",!1);if(!n)return e;var i=t.waypoints;return t.waypoints=e,t.waypoints=n.getCroppedWaypoints(t),e=t.waypoints,t.waypoints=i,e};var mf="updateWaypoints",Fo="connect-ok",ws="connect-not-ok",ff="connect-hover",vf="djs-updating",yf="djs-element-hidden";function gf(t,e,n,i){this._injector=e;var r=e.get("connectionPreview",!1);n.on("bendpoint.move.start",function(o){var a=o.context,c=a.bendpointIndex,l=a.connection,u=a.insert,p=l.waypoints,d=p.slice();a.waypoints=p,u&&d.splice(c,0,{x:o.x,y:o.y}),l.waypoints=d,bt(a.draggerGfx=bu(i.getLayer("overlays"))).add("djs-dragging"),i.addMarker(l,yf),i.addMarker(l,vf)}),n.on("bendpoint.move.hover",function(o){var a=o.context,c=a.allowed,l=a.hover,u=a.type;if(l){if(i.addMarker(l,ff),u===mf)return;c?(i.removeMarker(l,ws),i.addMarker(l,Fo)):c===!1&&(i.removeMarker(l,Fo),i.addMarker(l,ws))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],1100,function(o){var a=o.context,c=a.hover,l=a.target;c&&(i.removeMarker(c,ff),i.removeMarker(c,l?Fo:ws))}),n.on("bendpoint.move.move",function(o){var a=o.context,c=a.allowed,l=a.bendpointIndex,u=a.draggerGfx,p=a.hover,d=a.type,v=a.connection,f=v.source,y=v.target,b=v.waypoints.slice(),g={x:o.x,y:o.y},w=a.hints||{},x={};r&&(w.connectionStart&&(x.connectionStart=w.connectionStart),w.connectionEnd&&(x.connectionEnd=w.connectionEnd),d==="reconnectStart"?_s(a)?(x.connectionEnd=x.connectionEnd||g,x.source=y,x.target=p||f,b=b.reverse()):(x.connectionStart=x.connectionStart||g,x.source=p||f,x.target=y):d==="reconnectEnd"?_s(a)?(x.connectionStart=x.connectionStart||g,x.source=p||y,x.target=f,b=b.reverse()):(x.connectionEnd=x.connectionEnd||g,x.source=f,x.target=p||y):(x.noCropping=!0,x.noLayout=!0,b[l]=g),d===mf&&(b=t.cropWaypoints(v,b)),x.waypoints=b,r.drawPreview(a,c,x)),Oe(u,o.x,o.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],1100,function(o){var a=o.context,c=a.connection,l=a.draggerGfx,u=a.hover,p=a.target,d=a.waypoints;c.waypoints=d,ee(l),i.removeMarker(c,vf),i.removeMarker(c,yf),u&&(i.removeMarker(u,Fo),i.removeMarker(u,p?Fo:ws)),r&&r.cleanUp(a)})}gf.$inject=["bendpointMove","injector","eventBus","canvas"];var bf="connect-hover",xf="djs-updating";function Ef(t,e,n){return _u(t,e,t[e]+n)}function _u(t,e,n){return{x:e==="x"?n:t.x,y:e==="y"?n:t.y}}function _f(t){return t==="x"?"y":"x"}function wf(t,e,n){var i,r;return t.original?t.original:(i=ft(e),_u(t,r=_f(n),i[r]))}function Sf(t,e,n,i,r,o){var a=t.get("connectionDocking",!1);function c(p,d){if(!a)return d;var v,f=p.waypoints;return p.waypoints=d,v=a.getCroppedWaypoints(p),p.waypoints=f,v}function l(p){r.update("connection",p.connection,p.connectionGfx)}function u(p,d,v){var f=p.newWaypoints,y=function(b,g,w,x){var S=Math.max(g[x],w[x]),C=Math.min(g[x],w[x]);return _u(g,x,Math.min(Math.max(C+20,b[x]),S-20))}(v,f[p.segmentStartIndex+d],f[p.segmentEndIndex+d],_f(p.axis));Oe(p.draggerGfx,y.x,y.y)}this.start=function(p,d,v){var f,y,b,g,w=n.getGraphics(d),x=v-1,S=v,C=d.waypoints,I=C[x],s=C[S],h=gu(n,C,p);(y=zn(I,s))&&(b=y==="v"?"x":"y",x===0&&(I=wf(I,d.source,b)),S===C.length-1&&(s=wf(s,d.target,b)),f={connection:d,segmentStartIndex:x,segmentEndIndex:S,segmentStart:I,segmentEnd:s,axis:b,dragPosition:g=h?h.point:{x:(I.x+s.x)/2,y:(I.y+s.y)/2}},i.init(p,g,"connectionSegment.move",{cursor:b==="x"?"resize-ew":"resize-ns",data:{connection:d,connectionGfx:w,context:f}}))},e.on("connectionSegment.move.start",function(p){var d=p.context,v=p.connection,f=n.getLayer("overlays");d.originalWaypoints=v.waypoints.slice(),d.draggerGfx=cf(f,d.segmentStart,d.segmentEnd),bt(d.draggerGfx).add("djs-dragging"),n.addMarker(v,xf)}),e.on("connectionSegment.move.move",function(p){var d,v,f=p.context,y=f.connection,b=f.segmentStartIndex,g=f.segmentEndIndex,w=f.segmentStart,x=f.segmentEnd,S=f.axis,C=f.originalWaypoints.slice(),I=Ef(w,S,p["d"+S]),s=Ef(x,S,p["d"+S]),h=C.length,m=0;C[b]=I,C[g]=s,b<2&&(d=ge(y.source,I),b===1?d==="intersect"&&(C.shift(),C[0]=I,m--):d!=="intersect"&&(C.unshift(w),m++)),g>h-3&&(v=ge(y.target,s),g===h-2?v==="intersect"&&(C.pop(),C[C.length-1]=s):v!=="intersect"&&C.push(x)),f.newWaypoints=y.waypoints=c(y,C),u(f,m,p),f.newSegmentStartIndex=b+m,l(p)}),e.on("connectionSegment.move.hover",function(p){p.context.hover=p.hover,n.addMarker(p.hover,bf)}),e.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(p){var d=p.context.hover;d&&n.removeMarker(d,bf)}),e.on("connectionSegment.move.cleanup",function(p){var d=p.context,v=d.connection;d.draggerGfx&&ee(d.draggerGfx),n.removeMarker(v,xf)}),e.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(p){var d=p.context;d.connection.waypoints=d.originalWaypoints,l(p)}),e.on("connectionSegment.move.end",function(p){var d=p.context,v=d.connection,f=d.newWaypoints,y=d.newSegmentStartIndex,b=function(S,C){var I=0;return{waypoints:S.filter(function(s,h){return!Ll(S[h-1],S[h+1],s)||(I=h<=C?I-1:I,!1)}),segmentOffset:I}}(f=f.map(function(S){return{original:S.original,x:Math.round(S.x),y:Math.round(S.y)}}),y),g=c(v,b.waypoints),w=b.segmentOffset,x={segmentMove:{segmentStartIndex:d.segmentStartIndex,newSegmentStartIndex:y+w}};o.updateWaypoints(v,g,x)})}Sf.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var XE=Math.abs,Cf=Math.round;function Tf(t){return{x:t.x,y:t.y}}function Af(t){return{x:t.x+t.width,y:t.y+t.height}}function Ze(t,e){return!t||isNaN(t.x)||isNaN(t.y)?e:{x:Cf(t.x+t.width/2),y:Cf(t.y+t.height/2)}}function $r(t,e){var n=t.snapped;return!!n&&(typeof e=="string"?n[e]:n.x&&n.y)}function se(t,e,n){if(typeof e!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var i,r=t[e],o=t.snapped=t.snapped||{};return n===!1?o[e]=!1:(o[e]=!0,i=n-r,t[e]+=i,t["d"+e]+=i),r}function kf(t){return t.children||[]}var YE=Math.abs,Pf=Math.round;function Mf(t){function e(i,r){if(gt(i)){for(var o=i.length;o--;)if(YE(i[o]-r)<=10)return i[o]}else{var a=r%(i=+i);if(a<10)return r-a;if(a>i-10)return r-a+i}return r}function n(i){if(i.width)return{x:Pf(i.width/2+i.x),y:Pf(i.height/2+i.y)}}t.on("connectionSegment.move.move",1500,function(i){var r,o,a=function(d){var v=d.snapPoints,f=d.connection,y=f.waypoints,b=d.segmentStart,g=d.segmentStartIndex,w=d.segmentEnd,x=d.segmentEndIndex,S=d.axis;if(v)return v;var C=[y[g-1],b,w,y[x+1]];return g<2&&C.unshift(n(f.source)),x>y.length-3&&C.unshift(n(f.target)),d.snapPoints=v={horizontal:[],vertical:[]},L(C,function(I){I&&(I=I.original||I,S==="y"&&v.horizontal.push(I.y),S==="x"&&v.vertical.push(I.x))}),v}(i.context),c=i.x,l=i.y;if(a){var u=c-(r=e(a.vertical,c)),p=l-(o=e(a.horizontal,l));$(i,{dx:i.dx-u,dy:i.dy-p,x:r,y:o}),(u||a.vertical.indexOf(c)!==-1)&&se(i,"x",r),(p||a.horizontal.indexOf(l)!==-1)&&se(i,"y",o)}}),t.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(i){var r,o,a=i.context,c=function(y){var b=y.snapPoints,g=y.connection.waypoints,w=y.bendpointIndex;if(b)return b;var x=[g[w-1],g[w+1]];return y.snapPoints=b={horizontal:[],vertical:[]},L(x,function(S){S&&(S=S.original||S,b.horizontal.push(S.y),b.vertical.push(S.x))}),b}(a),l=a.hover,u=l&&n(l),p=i.x,d=i.y;if(c){var v=p-(r=e(u?c.vertical.concat([u.x]):c.vertical,p)),f=d-(o=e(u?c.horizontal.concat([u.y]):c.horizontal,d));$(i,{dx:i.dx-v,dy:i.dy-f,x:i.x-v,y:i.y-f}),(v||c.vertical.indexOf(p)!==-1)&&se(i,"x",r),(f||c.horizontal.indexOf(d)!==-1)&&se(i,"y",o)}})}Mf.$inject=["eventBus"];const JE={__depends__:[Kn,Dn],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",hf],bendpointMove:["type",Eu],bendpointMovePreview:["type",gf],connectionSegmentMove:["type",Sf],bendpointSnapping:["type",Mf]};function Rf(t,e,n,i){function r(o,a){return i.allowed("connection.create",{source:o,target:a})}t.on("connect.hover",function(o){var a,c=o.context,l=c.start,u=o.hover;if(c.hover=u,!go(a=c.canExecute=r(l,u))){if(a!==!1)return c.source=l,void(c.target=u);go(a=c.canExecute=r(u,l))||a!==!1&&(c.source=u,c.target=l)}}),t.on(["connect.out","connect.cleanup"],function(o){var a=o.context;a.hover=null,a.source=null,a.target=null,a.canExecute=!1}),t.on("connect.end",function(o){var a=o.context,c=a.canExecute,l=a.connectionStart,u={x:o.x,y:o.y},p=a.source,d=a.target;if(!c)return!1;var v=null,f={connectionStart:wu(a)?u:l,connectionEnd:wu(a)?l:u};te(c)&&(v=c),n.connect(p,d,v,f)}),this.start=function(o,a,c,l){te(c)||(l=c,c=ft(a)),e.init(o,"connect",{autoActivate:l,data:{shape:a,context:{start:a,connectionStart:c}}})}}function wu(t){var e=t.hover,n=t.source,i=t.target;return e&&n&&e===n&&n!==i}Rf.$inject=["eventBus","dragging","modeling","rules"];var Nf="connect-ok",If="connect-not-ok";function Df(t,e,n){var i=t.get("connectionPreview",!1);i&&e.on("connect.move",function(r){var o=r.context,a=o.canExecute,c=o.hover,l=o.source,u=o.start,p=o.startPosition,d=o.target,v=o.connectionStart||p,f=o.connectionEnd||{x:r.x,y:r.y},y=v,b=f;wu(o)&&(y=f,b=v),i.drawPreview(o,a,{source:l||u,target:d||c,connectionStart:y,connectionEnd:b})}),e.on("connect.hover",900,function(r){var o=r.context,a=r.hover,c=o.canExecute;c!==null&&n.addMarker(a,c?Nf:If)}),e.on(["connect.out","connect.cleanup"],1100,function(r){var o=r.hover;o&&(n.removeMarker(o,Nf),n.removeMarker(o,If))}),i&&e.on("connect.cleanup",function(r){i.cleanUp(r.context)})}Df.$inject=["injector","eventBus","canvas"];const Su={__depends__:[Rn,Dn,Kn],__init__:["connectPreview"],connect:["type",Rf],connectPreview:["type",Df]};function Xn(t,e,n,i){this._canvas=e,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=t.get("connectionDocking",!1),this._layouter=t.get("layouter",!1)}Xn.$inject=["injector","canvas","graphicsFactory","elementFactory"],Xn.prototype.drawPreview=function(t,e,n){n=n||{};var i,r=t.connectionPreviewGfx,o=t.getConnection,a=n.source,c=n.target,l=n.waypoints,u=n.connectionStart,p=n.connectionEnd,d=n.noLayout,v=n.noCropping,f=n.noNoop,y=this;r||(r=t.connectionPreviewGfx=this.createConnectionPreviewGfx()),Al(r),o||(o=t.getConnection=function(b){var g={};return function(w){var x=JSON.stringify(w),S=g[x];return S||(S=g[x]=b.apply(null,arguments)),S}}(function(b,g,w){return y.getConnection(b,g,w)})),e&&(i=o(e,a,c)),i?(i.waypoints=l||[],this._layouter&&!d&&(i.waypoints=this._layouter.layoutConnection(i,{source:a,target:c,connectionStart:u,connectionEnd:p,waypoints:n.waypoints||i.waypoints})),i.waypoints&&i.waypoints.length||(i.waypoints=[a?ft(a):u,c?ft(c):p]),this._connectionDocking&&(a||c)&&!v&&(i.waypoints=this._connectionDocking.getCroppedWaypoints(i,a,c)),this._graphicsFactory.drawConnection(r,i)):!f&&this.drawNoopPreview(r,n)},Xn.prototype.drawNoopPreview=function(t,e){var n=e.source,i=e.target,r=e.connectionStart||ft(n),o=e.connectionEnd||ft(i),a=this.cropWaypoints(r,o,n,i);lt(t,this.createNoopConnection(a[0],a[1]))},Xn.prototype.cropWaypoints=function(t,e,n,i){var r=this._graphicsFactory,o=n&&r.getShapePath(n),a=i&&r.getShapePath(i),c=r.getConnectionPath({waypoints:[t,e]});return[t=n&&zl(o,c,!0)||t,e=i&&zl(a,c,!1)||e]},Xn.prototype.cleanUp=function(t){t&&t.connectionPreviewGfx&&ee(t.connectionPreviewGfx)},Xn.prototype.getConnection=function(t){var e=function(n){return te(n)?n:{}}(t);return this._elementFactory.createConnection(e)},Xn.prototype.createConnectionPreviewGfx=function(){var t=rt("g");return K(t,{pointerEvents:"none"}),bt(t).add("djs-connection-preview"),lt(this._canvas.getActiveLayer(),t),t},Xn.prototype.createNoopConnection=function(t,e){var n=rt("polyline");return K(n,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),K(n,{points:[t.x,t.y,e.x,e.y]}),n};const ZE={__init__:["connectionPreview"],connectionPreview:["type",Xn]};var Bf=Math.min,Of=Math.max;function Cu(t){t.preventDefault()}function $o(t){t.stopPropagation()}function dn(t){this.container=t.container,this.parent=Vt('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Wt("[contenteditable]",this.parent),this.keyHandler=t.keyHandler||function(){},this.resizeHandler=t.resizeHandler||function(){},this.autoResize=Se(this.autoResize,this),this.handlePaste=Se(this.handlePaste,this)}function Qe(t,e){this._eventBus=t,this._providers=[],this._textbox=new dn({container:e.getContainer(),keyHandler:Se(this._handleKey,this),resizeHandler:Se(this._handleResize,this)})}dn.prototype.create=function(t,e,n,i){var r=this.parent,o=this.content,a=this.container;i=this.options=i||{};var c=Xe(e=this.style=e||{},["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);$(r.style,{width:t.width+"px",height:t.height+"px",maxWidth:t.maxWidth+"px",maxHeight:t.maxHeight+"px",minWidth:t.minWidth+"px",minHeight:t.minHeight+"px",left:t.x+"px",top:t.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},c);var l=Xe(e,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return $(o.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},l),i.centerVertically&&$(o.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},l),o.innerText=n,st.bind(o,"keydown",this.keyHandler),st.bind(o,"mousedown",$o),st.bind(o,"paste",this.handlePaste),i.autoResize&&st.bind(o,"input",this.autoResize),i.resizable&&this.resizable(e),a.appendChild(r),this.setSelection(o.lastChild,o.lastChild&&o.lastChild.length),r},dn.prototype.handlePaste=function(t){var e,n=this.options,i=this.style;if(t.preventDefault(),e=t.clipboardData?t.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),this.insertText(e),n.autoResize){var r=this.autoResize(i);r&&this.resizeHandler(r)}},dn.prototype.insertText=function(t){t=t.replace(/\r\n|\r|\n/g,`
`),document.execCommand("insertText",!1,t)||this._insertTextIE(t)},dn.prototype._insertTextIE=function(t){var e,n,i,r=this.getSelection(),o=r.startContainer,a=r.endContainer,c=r.startOffset,l=r.endOffset,u=r.commonAncestorContainer,p=(e=u.childNodes,[].slice.call(e));if(function(b){return b.nodeType===Node.TEXT_NODE}(u)){var d=o.textContent;o.textContent=d.substring(0,c)+t+d.substring(l),n=o,i=c+t.length}else if(o===this.content&&a===this.content){var v=document.createTextNode(t);this.content.insertBefore(v,p[c]),n=v,i=v.textContent.length}else{var f=p.indexOf(o),y=p.indexOf(a);p.forEach(function(b,g){g===f?b.textContent=o.textContent.substring(0,c)+t+a.textContent.substring(l):g>f&&g<=y&&An(b)}),n=o,i=c+t.length}n&&i!==void 0&&setTimeout(function(){self.setSelection(n,i)})},dn.prototype.autoResize=function(){var t=this.parent,e=this.content,n=parseInt(this.style.fontSize)||12;if(e.scrollHeight>t.offsetHeight||e.scrollHeight<t.offsetHeight-n){var i=t.getBoundingClientRect(),r=e.scrollHeight;t.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}},dn.prototype.resizable=function(){var t=this,e=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!n){var c,l,u,p;n=this.resizeHandle=Vt('<div class="djs-direct-editing-resize-handle"></div>');var d=function(f){Cu(f),$o(f);var y=Bf(Of(u+f.clientX-c,i),o),b=Bf(Of(p+f.clientY-l,r),a);e.style.width=y+"px",e.style.height=b+"px",t.resizeHandler({width:u,height:p,dx:f.clientX-c,dy:f.clientY-l})},v=function(f){Cu(f),$o(f),st.unbind(document,"mousemove",d,!1),st.unbind(document,"mouseup",v,!1)};st.bind(n,"mousedown",function(f){Cu(f),$o(f),c=f.clientX,l=f.clientY;var y=e.getBoundingClientRect();u=y.width,p=y.height,st.bind(document,"mousemove",d),st.bind(document,"mouseup",v)})}$(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),e.appendChild(n)},dn.prototype.destroy=function(){var t=this.parent,e=this.content,n=this.resizeHandle;e.innerText="",t.removeAttribute("style"),e.removeAttribute("style"),st.unbind(e,"keydown",this.keyHandler),st.unbind(e,"mousedown",$o),st.unbind(e,"input",this.autoResize),st.unbind(e,"paste",this.handlePaste),n&&(n.removeAttribute("style"),An(n)),An(t)},dn.prototype.getValue=function(){return this.content.innerText.trim()},dn.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},dn.prototype.setSelection=function(t,e){var n=document.createRange();t===null?n.selectNodeContents(this.content):(n.setStart(t,e),n.setEnd(t,e));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)},Qe.$inject=["eventBus","canvas"],Qe.prototype.registerProvider=function(t){this._providers.push(t)},Qe.prototype.isActive=function(t){return!(!this._active||t&&this._active.element!==t)},Qe.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},Qe.prototype._fire=function(t,e){this._eventBus.fire("directEditing."+t,e||{active:this._active})},Qe.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},Qe.prototype.complete=function(){var t=this._active;if(t){var e,n=t.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue();r===t.context.text&&i.height===n.height&&i.width===n.width||(e=this._textbox.container.getBoundingClientRect(),t.provider.update(t.element,r,t.context.text,{x:i.left-e.left,y:i.top-e.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}},Qe.prototype.getValue=function(){return this._textbox.getValue()},Qe.prototype._handleKey=function(t){t.stopPropagation();var e=t.keyCode||t.charCode;return e===27?(t.preventDefault(),this.cancel()):e!==13||t.shiftKey?void 0:(t.preventDefault(),this.complete())},Qe.prototype._handleResize=function(t){this._fire("resize",t)},Qe.prototype.activate=function(t){var e;this.isActive()&&this.cancel();var n=Pt(this._providers,function(i){return(e=i.activate(t))?i:null});return e&&(this.$textbox=this._textbox.create(e.bounds,e.style,e.text,e.options),this._active={element:t,context:e,provider:n},e.options&&e.options.resizable&&(this.resizable=!0),this._fire("activate")),!!e};const Lf={__depends__:[Do],__init__:["directEditing"],directEditing:["type",Qe]};var jf=".entry";function tn(t,e,n){this._eventBus=e,this._overlays=n;var i=qe(t&&t.scale)?t.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:i},this._current=null,this._init()}tn.$inject=["config.contextPad","eventBus","overlays"],tn.prototype._init=function(){var t=this._eventBus,e=this;t.on("selection.changed",function(n){var i=n.newSelection;i.length===1?e.open(i[0]):e.close()}),t.on("elements.delete",function(n){L(n.elements,function(i){e.isOpen(i)&&e.close()})}),t.on("element.changed",function(n){var i=n.element,r=e._current;r&&r.element===i&&e.open(i,!0)})},tn.prototype.registerProvider=function(t,e){e||(e=t,t=1e3),this._eventBus.on("contextPad.getProviders",t,function(n){n.providers.push(e)})},tn.prototype.getEntries=function(t){var e=this._getProviders(),n={};return L(e,function(i){var r=i.getContextPadEntries(t);ve(r)?n=r(n):L(r,function(o,a){n[a]=o})}),n},tn.prototype.trigger=function(t,e,n){var i,r,o=this._current.element,a=this._current.entries,c=e.delegateTarget||e.target;if(!c)return e.preventDefault();if(i=a[$e(c,"data-action")].action,r=e.originalEvent||e,ve(i)){if(t==="click")return i(r,o,n)}else if(i[t])return i[t](r,o,n);e.preventDefault()},tn.prototype.open=function(t,e){!e&&this.isOpen(t)||(this.close(),this._updateAndOpen(t))},tn.prototype._getProviders=function(){var t=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},tn.prototype._updateAndOpen=function(t){var e=this.getEntries(t),n=this.getPad(t),i=n.html;L(e,function(r,o){var a,c=r.group||"default",l=Vt(r.html||'<div class="entry" draggable="true"></div>');$e(l,"data-action",o),(a=Wt("[data-group="+c+"]",i))||(a=Vt('<div class="group" data-group="'+c+'"></div>'),i.appendChild(a)),a.appendChild(l),r.className&&function(u,p){var d=oe(u);(gt(p)?p:p.split(/\s+/g)).forEach(function(v){d.add(v)})}(l,r.className),r.title&&$e(l,"title",r.title),r.imageUrl&&l.appendChild(Vt('<img src="'+r.imageUrl+'">'))}),oe(i).add("open"),this._current={element:t,pad:n,entries:e},this._eventBus.fire("contextPad.open",{current:this._current})},tn.prototype.getPad=function(t){if(this.isOpen())return this._current.pad;var e=this,n=this._overlays,i=Vt('<div class="djs-context-pad"></div>'),r=$({html:i},this._overlaysConfig);ze.bind(i,jf,"click",function(a){e.trigger("click",a)}),ze.bind(i,jf,"dragstart",function(a){e.trigger("dragstart",a)}),st.bind(i,"mousedown",function(a){a.stopPropagation()}),this._overlayId=n.add(t,"context-pad",r);var o=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:t,pad:o}),o},tn.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},tn.prototype.isOpen=function(t){return!(!this._current||t&&this._current.element!==t)};const QE={__depends__:[Do,ru],contextPad:["type",tn]};var t_=["marker-start","marker-mid","marker-end"],e_=["circle","ellipse","line","path","polygon","polyline","rect"];function Yi(t,e,n,i){this._elementRegistry=t,this._canvas=n,this._styles=i,this._clonedMarkers={};var r=this;e.on("drag.cleanup",function(){L(r._clonedMarkers,function(o){ee(o)}),r._clonedMarkers={}})}Yi.$inject=["elementRegistry","eventBus","canvas","styles"],Yi.prototype.getGfx=function(t){return this._elementRegistry.getGraphics(t)},Yi.prototype.addDragger=function(t,e,n){var i=ud(n=n||this.getGfx(t)),r=n.getBoundingClientRect();return this._cloneMarkers(Qa(i)),K(i,this._styles.cls("djs-dragger",[],{x:r.top,y:r.left})),lt(e,i),i},Yi.prototype.addFrame=function(t,e){var n=rt("rect",{class:"djs-resize-overlay",width:t.width,height:t.height,x:t.x,y:t.y});return lt(e,n),n},Yi.prototype._cloneMarkers=function(t){var e=this;if(t.childNodes)for(var n=0;n<t.childNodes.length;n++)e._cloneMarkers(t.childNodes[n]);(function(i){return e_.indexOf(i.nodeName)!==-1})(t)&&t_.forEach(function(i){if(K(t,i)){var r=function(o,a,c){var l=(u=K(o,a),u.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]),u;return Wt("marker#"+l,c||document)}(t,i,e._canvas.getContainer());e._cloneMarker(t,r,i)}})},Yi.prototype._cloneMarker=function(t,e,n){var i=e.id,r=this._clonedMarkers[i];if(!r){var o=i+"-clone";(r=ud(e)).id=o,bt(r).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[i]=r;var a=Wt("defs",this._canvas._svg);a||(a=rt("defs"),lt(this._canvas._svg,a)),lt(a,r)}K(t,n,"url(#"+this._clonedMarkers[i].id+")")};const zo={__init__:["previewSupport"],previewSupport:["type",Yi]};var n_="drop-ok",Vf="drop-not-ok",Ff="attach-ok",$f="new-parent",zf="create";function Gf(t,e,n,i,r){function o(c,l){[Ff,n_,Vf,$f].forEach(function(u){u===l?t.addMarker(c,u):t.removeMarker(c,u)})}function a(){var c=e.context();c&&c.prefix===zf&&e.cancel()}n.on(["create.move","create.hover"],function(c){var l=c.context,u=l.elements,p=c.hover,d=l.source,v=l.hints||{};if(!p)return l.canExecute=!1,void(l.target=null);Uf(c);var f={x:c.x,y:c.y},y=l.canExecute=p&&function(b,g,w,x,S){if(!g)return!1;var C=Pt(b=mt(b,function(E){var T=E.labelTarget;return!(E.parent||function(R){return!!R.labelTarget}(E)&&b.indexOf(T)!==-1)}),function(E){return!Go(E)}),I=!1,s=!1,h=!1;Hf(b)&&(I=r.allowed("shape.attach",{position:w,shape:C,target:g})),I||(h=Hf(b)?r.allowed("shape.create",{position:w,shape:C,source:x,target:g}):r.allowed("elements.create",{elements:b,position:w,target:g}));var m=S.connectionTarget;return h||I?(C&&x&&(s=r.allowed("connection.create",{source:m===x?C:x,target:m===x?x:C,hints:{targetParent:g,targetAttach:I}})),{attach:I,connect:s}):(h===null||I===null)&&null}(u,p,f,d,v);p&&y!==null&&(l.target=p,y&&y.attach?o(p,Ff):o(p,y?$f:Vf))}),n.on(["create.end","create.out","create.cleanup"],function(c){var l=c.hover;l&&o(l,null)}),n.on("create.end",function(c){var l=c.context,u=l.source,p=l.shape,d=l.elements,v=l.target,f=l.canExecute,y=f&&f.attach,b=f&&f.connect,g=l.hints||{};if(f===!1||!v)return!1;Uf(c);var w={x:c.x,y:c.y};p=b?i.appendShape(u,p,w,v,{attach:y,connection:b===!0?{}:b,connectionTarget:g.connectionTarget}):Pt(d=i.createElements(d,w,v,$({},g,{attach:y})),function(x){return!Go(x)}),$(l,{elements:d,shape:p}),$(c,{elements:d,shape:p})}),n.on("create.init",function(){n.on("elements.changed",a),n.once(["create.cancel","create.end"],2e3,function(){n.off("elements.changed",a)})}),this.start=function(c,l,u){gt(l)||(l=[l]);var p=Pt(l,function(v){return!Go(v)});if(p){u=$({elements:l,hints:{},shape:p},u||{}),L(l,function(v){pt(v.x)||(v.x=0),pt(v.y)||(v.y=0)});var d=ye(l);L(l,function(v){Go(v)&&(v.waypoints=le(v.waypoints,function(f){return{x:f.x-d.x-d.width/2,y:f.y-d.y-d.height/2}})),$(v,{x:v.x-d.x-d.width/2,y:v.y-d.y-d.height/2})}),e.init(c,zf,{cursor:"grabbing",autoActivate:!0,data:{shape:p,elements:l,context:u}})}}}function Uf(t){var e=t.context.createConstraints;e&&(e.left&&(t.x=Math.max(t.x,e.left)),e.right&&(t.x=Math.min(t.x,e.right)),e.top&&(t.y=Math.max(t.y,e.top)),e.bottom&&(t.y=Math.min(t.y,e.bottom)))}function Go(t){return!!t.waypoints}function Hf(t){return t&&t.length===1&&!Go(t[0])}Gf.$inject=["canvas","dragging","eventBus","modeling","rules"];function qf(t,e,n,i,r){e.on("create.move",750,function(o){var a=o.hover,c=o.context,l=c.elements,u=c.dragGroup;u||(u=c.dragGroup=function(p){var d=rt("g");K(d,r.cls("djs-drag-group",["no-events"]));var v=rt("g");return p.forEach(function(f){var y;f.hidden||(f.waypoints?(y=n._createContainer("connection",v),n.drawConnection(Qa(y),f)):(y=n._createContainer("shape",v),n.drawShape(Qa(y),f),Oe(y,f.x,f.y)),i.addDragger(f,d,y))}),d}(l)),a?(u.parentNode||lt(t.getActiveLayer(),u),Oe(u,o.x,o.y)):ee(u)}),e.on("create.cleanup",function(o){var a=o.context.dragGroup;a&&ee(a)})}qf.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const Ss={__depends__:[Kn,zo,Dn,Rn],__init__:["create","createPreview"],create:["type",Gf],createPreview:["type",qf]};var Wf="data-id",Kf=["contextPad.close","canvas.viewbox.changing","commandStack.changed"];function ne(t,e,n){var i=qe(t&&t.scale)?t.scale:{min:1,max:1.5};this._config={scale:i},this._eventBus=e,this._canvas=n,this._providers={},this._current={}}ne.$inject=["config.popupMenu","eventBus","canvas"],ne.prototype.registerProvider=function(t,e,n){n||(n=e,e=1e3),this._eventBus.on("popupMenu.getProviders."+t,e,function(i){i.providers.push(n)})},ne.prototype.isEmpty=function(t,e){if(!t)throw new Error("element parameter is missing");if(!e)throw new Error("providerId parameter is missing");var n=this._getProviders(e);if(!n)return!0;var i=this._getEntries(t,n),r=this._getHeaderEntries(t,n),o=gr(i)>0,a=r&&gr(r)>0;return!o&&!a},ne.prototype.open=function(t,e,n){var i=this._getProviders(e);if(!t)throw new Error("Element is missing");if(!i||!i.length)throw new Error("No registered providers for: "+e);if(!n)throw new Error("the position argument is missing");this.isOpen()&&this.close(),this._emit("open");var r=this._current={className:e,element:t,position:n},o=this._getEntries(t,i),a=this._getHeaderEntries(t,i);r.entries=$({},o,a),r.container=this._createContainer(),gr(a)&&r.container.appendChild(this._createEntries(a,"djs-popup-header")),gr(o)&&r.container.appendChild(this._createEntries(o,"djs-popup-body"));var c=this._canvas.getContainer();this._attachContainer(r.container,c,n.cursor),this._bindAutoClose()},ne.prototype.close=function(){this.isOpen()&&(this._emit("close"),this._unbindAutoClose(),An(this._current.container),this._current.container=null)},ne.prototype.isOpen=function(){return!!this._current.container},ne.prototype.trigger=function(t){t.preventDefault();var e=$e(t.delegateTarget||t.target,Wf),n=this._getEntry(e);if(n.action)return n.action.call(null,t,n)},ne.prototype._getProviders=function(t){var e=this._eventBus.createEvent({type:"popupMenu.getProviders."+t,providers:[]});return this._eventBus.fire(e),e.providers},ne.prototype._getEntries=function(t,e){var n={};return L(e,function(i){if(i.getPopupMenuEntries){var r=i.getPopupMenuEntries(t);ve(r)?n=r(n):L(r,function(o,a){n[a]=o})}else L(i.getEntries(t),function(o){var a=o.id;if(!a)throw new Error("every entry must have the id property set");n[a]=Fn(o,["id"])})}),n},ne.prototype._getHeaderEntries=function(t,e){var n={};return L(e,function(i){if(i.getPopupMenuHeaderEntries){var r=i.getPopupMenuHeaderEntries(t);ve(r)?n=r(n):L(r,function(o,a){n[a]=o})}else{if(!i.getHeaderEntries)return;L(i.getHeaderEntries(t),function(o){var a=o.id;if(!a)throw new Error("every entry must have the id property set");n[a]=Fn(o,["id"])})}}),n},ne.prototype._getEntry=function(t){var e=this._current.entries[t];if(!e)throw new Error("entry not found");return e},ne.prototype._emit=function(t){this._eventBus.fire("popupMenu."+t)},ne.prototype._createContainer=function(){var t=Vt('<div class="djs-popup">'),e=this._current.position,n=this._current.className;return $(t.style,{position:"absolute",left:e.x+"px",top:e.y+"px",visibility:"hidden"}),oe(t).add(n),t},ne.prototype._attachContainer=function(t,e,n){var i=this;ze.bind(t,".entry","click",function(r){i.trigger(r)}),this._updateScale(t),e.appendChild(t),n&&this._assureIsInbounds(t,n)},ne.prototype._updateScale=function(t){var e,n,i=this._canvas.zoom(),r=this._config.scale,o=i;r!==!0&&(r===!1?(e=1,n=1):(e=r.min,n=r.max),qe(e)&&i<e&&(o=e),qe(n)&&i>n&&(o=n)),function(a,c){a.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(l){a.style[l+"transform"]=c})}(t,"scale("+o+")")},ne.prototype._assureIsInbounds=function(t,e){var n,i,r=this._canvas._container.getBoundingClientRect(),o=t.offsetLeft,a=t.offsetTop,c=t.scrollWidth,l=t.scrollHeight,u={},p=e.x-r.left,d=e.y-r.top;o+c>r.width&&(u.x=!0),a+l>r.height&&(u.y=!0),u.x&&u.y?(n=p-c+"px",i=d-l+"px"):u.x?(n=p-c+"px",i=d+"px"):u.y&&d<l?(n=p+"px",i="10px"):u.y&&(n=p+"px",i=d-l+"px"),$(t.style,{left:n,top:i},{visibility:"visible","z-index":1e3})},ne.prototype._createEntries=function(t,e){var n=Vt("<div>"),i=this;return oe(n).add(e),L(t,function(r,o){var a=i._createEntry(r,o);n.appendChild(a)}),n},ne.prototype._createEntry=function(t,e){var n=Vt("<div>"),i=oe(n);if(i.add("entry"),t.className&&t.className.split(" ").forEach(function(o){i.add(o)}),$e(n,Wf,e),t.label){var r=Vt("<span>");r.textContent=t.label,n.appendChild(r)}return t.imageUrl&&n.appendChild(Vt('<img src="'+t.imageUrl+'" />')),t.active===!0&&i.add("active"),t.disabled===!0&&i.add("disabled"),t.title&&(n.title=t.title),n},ne.prototype._bindAutoClose=function(){this._eventBus.once(Kf,this.close,this)},ne.prototype._unbindAutoClose=function(){this._eventBus.off(Kf,this.close,this)};const i_={__init__:["popupMenu"],popupMenu:["type",ne]};function Uo(){}Uo.prototype.get=function(){return this._data},Uo.prototype.set=function(t){this._data=t},Uo.prototype.clear=function(){var t=this._data;return delete this._data,t},Uo.prototype.isEmpty=function(){return!this._data};const r_={clipboard:["type",Uo]};function Tu(t){var e=this;function n(i){e._lastMoveEvent=i}this._lastMoveEvent=null,t.on("canvas.init",function(i){(e._svg=i.svg).addEventListener("mousemove",n)}),t.on("canvas.destroy",function(){e._lastMouseEvent=null,e._svg.removeEventListener("mousemove",n)})}Tu.$inject=["eventBus"],Tu.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||function(t,e){var n=document.createEvent("MouseEvent"),i=t,r=e,o=t,a=e;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,r,o,a,!1,!1,!1,!1,0,null),n}(0,0)};const Ho={__init__:["mouse"],mouse:["type",Tu]};function mn(t,e,n,i,r,o,a,c){this._canvas=t,this._create=e,this._clipboard=n,this._elementFactory=i,this._eventBus=r,this._modeling=o,this._mouse=a,this._rules=c,r.on("copyPaste.copyElement",function(l){var u=l.descriptor,p=l.element,d=l.elements;u.priority=1,u.id=p.id,Pt(d,function(v){return v===p.parent})&&(u.parent=p.parent.id),function(v){return!!v.host}(p)&&(u.priority=2,u.host=p.host.id),Cs(p)&&(u.priority=3,u.source=p.source.id,u.target=p.target.id,u.waypoints=function(v){return le(v.waypoints,function(f){return(f=Xf(f)).original&&(f.original=Xf(f.original)),f})}(p)),Ts(p)&&(u.priority=4,u.labelTarget=p.labelTarget.id),L(["x","y","width","height"],function(v){pt(p[v])&&(u[v]=p[v])}),u.hidden=p.hidden,u.collapsed=p.collapsed}),r.on("copyPaste.pasteElements",function(l){$(l.hints,{createElementsBehavior:!1})})}function Cs(t){return!!t.waypoints}function Ts(t){return!!t.labelTarget}function Xf(t){return $({},t)}function Yf(t,e){var n=e.indexOf(t);return n===-1?e:e.splice(n,1)}mn.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],mn.prototype.copy=function(t){var e,n;return gt(t)||(t=t?[t]:[]),n=(e=this._eventBus.fire("copyPaste.canCopyElements",{elements:t}))===!1?{}:this.createTree(gt(e)?e:t),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:t,tree:n}),n},mn.prototype.paste=function(t){var e=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=t&&t.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(e);if(t&&t.element&&t.point)return this._paste(i,t.element,t.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}},mn.prototype._paste=function(t,e,n,i){L(t,function(o){pt(o.x)||(o.x=0),pt(o.y)||(o.y=0)});var r=ye(t);return L(t,function(o){Cs(o)&&(o.waypoints=le(o.waypoints,function(a){return{x:a.x-r.x-r.width/2,y:a.y-r.y-r.height/2}})),$(o,{x:o.x-r.x-r.width/2,y:o.y-r.y-r.height/2})}),this._modeling.createElements(t,n,e,$({},i))},mn.prototype._createElements=function(t){var e=this,n=this._eventBus,i={},r=[];return L(t,function(o,a){L(o=We(o,"priority"),function(c){var l,u=$({},Fn(c,["priority"]));return i[c.parent]?u.parent=i[c.parent]:delete u.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:u}),Cs(u)?(u.source=i[c.source],u.target=i[c.target],l=i[c.id]=e.createConnection(u),void r.push(l)):Ts(u)?(u.labelTarget=i[u.labelTarget],l=i[c.id]=e.createLabel(u),void r.push(l)):(u.host&&(u.host=i[u.host]),l=i[c.id]=e.createShape(u),void r.push(l))})}),r},mn.prototype.createConnection=function(t){return this._elementFactory.createConnection(Fn(t,["id"]))},mn.prototype.createLabel=function(t){return this._elementFactory.createLabel(Fn(t,["id"]))},mn.prototype.createShape=function(t){return this._elementFactory.createShape(Fn(t,["id"]))},mn.prototype.hasRelations=function(t,e){var n,i;return!(Cs(t)&&(n=Pt(e,Ke({id:t.source.id})),i=Pt(e,Ke({id:t.target.id})),!n||!i))&&!(Ts(t)&&!Pt(e,Ke({id:t.labelTarget.id})))},mn.prototype.createTree=function(t){var e=this._rules,n=this,i={},r=[];function o(a,c){var l=Pt(r,function(u){return a===u.element});l?l.depth<c&&(r=function(u,p){var d=p.indexOf(u);return d!==-1&&p.splice(d,1),p}(l,r),r.push({element:l.element,depth:c})):r.push({element:a,depth:c})}return $i(gd(t),function(a,c,l){if(!Ts(a))return L(a.labels,function(u){o(u,l)}),L([a.attachers,a.incoming,a.outgoing],function(u){u&&u.length&&L(u,function(p){L(p.labels,function(d){o(d,l)}),o(p,l)})}),o(a,l),a.children}),t=le(r,function(a){return a.element}),r=le(r,function(a){return a.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:a.descriptor,element:a.element,elements:t}),a}),r=We(r,function(a){return a.descriptor.priority}),t=le(r,function(a){return a.element}),L(r,function(a){var c=a.depth;n.hasRelations(a.element,t)&&function(l,u){return e.allowed("element.copy",{element:l,elements:u})}(a.element,t)?(i[c]||(i[c]=[]),i[c].push(a.descriptor)):Yf(a.element,t)}),i};const o_={__depends__:[r_,Ss,Ho,Dn],__init__:["copyPaste"],copyPaste:["type",mn]};function As(t,e,n){gt(n)||(n=[n]),L(n,function(i){Vn(t[i])||(e[i]=t[i])})}function Jf(t,e,n){var i;e.on("copyPaste.copyElement",750,function(r){var o=r.descriptor,a=r.element,c=o.oldBusinessObject=et(a);if(o.type=a.type,As(c,o,"name"),o.di={},As(c.di,o.di,["fill","stroke","background-color","border-color","color"]),As(c.di,o,"isExpanded"),Zf(o))return o;c.default&&(o.default=c.default.id)}),e.on("moddleCopy.canCopyProperty",function(r){var o,a=r.parent,c=r.property;if(r.propertyName==="processRef"&&A(a,"bpmn:Participant")&&A(c,"bpmn:Process"))return o=t.create("bpmn:Process"),n.copyElement(c,o)}),e.on("copyPaste.pasteElements",function(){i={}}),e.on("copyPaste.pasteElement",function(r){var o,a,c,l=r.cache,u=r.descriptor,p=u.oldBusinessObject;Zf(u)?u.businessObject=et(l[u.labelTarget]):(o=t.create(p.$type),u.businessObject=n.copyElement(p,o),function(d,v){var f=et(d);d.default&&(i[d.default]={element:f,property:"default"}),d.host&&(et(d).attachedToRef=et(v[d.host])),i=Fn(i,De(i,function(y,b,g){var w=b.element,x=b.property;return g===d.id&&(w[x]=f,y.push(d.id)),y},[]))}(u,l),As(u,o,["isExpanded","name"]),a=u,gt(c="oldBusinessObject")||(c=[c]),L(c,function(d){a[d]&&delete a[d]}))})}function Zf(t){return!!t.labelTarget}Jf.$inject=["bpmnFactory","eventBus","moddleCopy"];var a_=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing"];function qo(t,e,n){this._bpmnFactory=e,this._eventBus=t,this._moddle=n,t.on("moddleCopy.canCopyProperties",function(i){var r=i.propertyNames;if(r&&r.length)return We(r,function(o){return o==="extensionElements"})}),t.on("moddleCopy.canCopyProperty",function(i){var r=i.parent,o=te(r)&&r.$descriptor,a=i.propertyName;return(!a||a_.indexOf(a)===-1)&&!(a&&o&&!Pt(o.properties,Ke({name:a})))&&void 0}),t.on("moddleCopy.canSetCopiedProperty",function(i){var r,o,a=i.property;if(o="bpmn:ExtensionElements",(r=a)&&typeof r.$instanceOf=="function"&&r.$instanceOf(o)&&(!a.values||!a.values.length))return!1})}function Au(t,e){return De(t.properties,function(n,i){return e&&i.default?n:n.concat(i.name)},[])}qo.$inject=["eventBus","bpmnFactory","moddle"],qo.prototype.copyElement=function(t,e,n){var i=this;n&&!gt(n)&&(n=[n]),n=n||Au(t.$descriptor);var r=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:t,targetElement:e});return r===!1||(gt(r)&&(n=r),L(n,function(o){var a;Tn(t,o)&&(a=t.get(o));var c=i.copyProperty(a,e,o);i._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:e,property:c,propertyName:o})!==!1&&qe(c)&&e.set(o,c)})),e},qo.prototype.copyProperty=function(t,e,n){var i=this,r=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:e,property:t,propertyName:n});if(r!==!1){if(r)return te(r)&&r.$type&&!r.$parent&&(r.$parent=e),r;var o=this._moddle.getPropertyDescriptor(e,n);if(!o.isReference)return o.isId?this._copyId(t,e):gt(t)?De(t,function(a,c){return(r=i.copyProperty(c,e,n))?(r.$parent=e,a.concat(r)):a},[]):te(t)&&t.$type?this._moddle.getElementDescriptor(t).isGeneric?void 0:((r=i._bpmnFactory.create(t.$type)).$parent=e,r=i.copyElement(t,r)):t}},qo.prototype._copyId=function(t,e){return this._moddle.ids.assigned(t)?void 0:(this._moddle.ids.claim(t,e),t)};const Qf={__depends__:[o_],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",Jf],moddleCopy:["type",qo]};var tv=Math.round;function ku(t){this._modeling=t}ku.$inject=["modeling"],ku.prototype.replaceElement=function(t,e,n){if(t.waypoints)return null;var i=this._modeling,r=e.width||t.width,o=e.height||t.height,a=e.x||t.x,c=e.y||t.y,l=tv(a+r/2),u=tv(c+o/2);return i.replaceShape(t,$({},e,{x:l,y:u,width:r,height:o}),n)};const s_={__init__:["replace"],replace:["type",ku]};var c_=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function ev(t,e,n,i,r,o,a){this.replaceElement=function(c,l,u){u=u||{};var p=l.type,d=c.businessObject;if(ks(d)&&p==="bpmn:SubProcess"&&function(S,C){var I=S&&Tn(S,"collapsed")?S.collapsed:!Mt(S);return I!==(C&&(Tn(C,"collapsed")||Tn(C,"isExpanded"))?Tn(C,"collapsed")?C.collapsed:!C.isExpanded:I)&&(S.collapsed=I,!0)}(c,l))return i.toggleCollapse(c),c;var v,f=t.create(p),y={type:p,businessObject:f},b=Au(d.$descriptor),g=Au(f.$descriptor,!0),w=(v=g,b.filter(function(S){return v.indexOf(S)!==-1}));$(f,Xe(l,c_));var x=mt(w,function(S){return S==="eventDefinitions"?nv(c,l.eventDefinitionType):S==="loopCharacteristics"?!Ne(f):!Tn(f,S)&&(S!=="processRef"||l.isExpanded!==!1)&&S!=="triggeredByEvent"});return f=n.copyElement(d,f,x),l.eventDefinitionType&&(nv(f,l.eventDefinitionType)||(y.eventDefinitionType=l.eventDefinitionType,y.eventDefinitionAttrs=l.eventDefinitionAttrs)),A(d,"bpmn:Activity")&&(ks(d)?y.isExpanded=Mt(d):l&&Tn(l,"isExpanded")&&(y.isExpanded=l.isExpanded),Mt(d)&&!A(d,"bpmn:Task")&&y.isExpanded&&(y.width=c.width,y.height=c.height)),ks(d)&&!ks(f)&&(u.moveChildren=!1),A(d,"bpmn:Participant")&&(l.isExpanded===!0?f.processRef=t.create("bpmn:Process"):u.moveChildren=!1,y.width=c.width,y.height=e._getDefaultSize(f).height),o.allowed("shape.resize",{shape:f})||(y.height=e._getDefaultSize(f).height,y.width=e._getDefaultSize(f).width),f.name=d.name,wt(d,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&wt(f,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(f.default=d.default),l.host&&!A(d,"bpmn:BoundaryEvent")&&A(f,"bpmn:BoundaryEvent")&&(y.host=l.host),y.type!=="bpmn:DataStoreReference"&&y.type!=="bpmn:DataObjectReference"||(y.x=c.x+(c.width-y.width)/2),y.di={},function(S,C,I){gt(I)||(I=[I]),L(I,function(s){Vn(S[s])||(C[s]=S[s])})}(d.di,y.di,["fill","stroke","background-color","border-color","color"]),y=r.replaceElement(c,y,u),u.select!==!1&&a.select(y),y}}function ks(t){return A(t,"bpmn:SubProcess")}function nv(t,e){var n=et(t);return e&&n.get("eventDefinitions").some(function(i){return A(i,e)})}ev.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules","selection"];const iv={__depends__:[Qf,s_,Rn],bpmnReplace:["type",ev]};function rv(t){return function(e){var n=e.target,i=et(t),r=i.eventDefinitions&&i.eventDefinitions[0],o=i.$type===n.type,a=(r&&r.$type)===n.eventDefinitionType,c=i.triggeredByEvent===n.triggeredByEvent,l=n.isExpanded===void 0||n.isExpanded===Mt(i);return!(o&&a&&c&&l)}}var l_=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],u_=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],p_=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],h_=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],d_=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],m_=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],f_=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],v_=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}}],ov=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],y_=[{label:"Data Store Reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],g_=[{label:"Data Object Reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],b_=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],x_=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],E_=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],__=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(t){var e="Empty Pool";return t.children&&t.children.length&&(e+=" (removes content)"),e},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];function en(t,e,n,i,r,o,a){this._bpmnFactory=t,this._popupMenu=e,this._modeling=n,this._moddle=i,this._bpmnReplace=r,this._rules=o,this._translate=a,this.register()}en.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate"],en.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},en.prototype.getEntries=function(t){var e,n=t.businessObject;if(!this._rules.allowed("shape.replace",{element:t}))return[];var i=rv(t);return A(n,"bpmn:DataObjectReference")?this._createEntries(t,y_):A(n,"bpmn:DataStoreReference")&&!A(t.parent,"bpmn:Collaboration")?this._createEntries(t,g_):A(n,"bpmn:StartEvent")&&!A(n.$parent,"bpmn:SubProcess")?(e=mt(l_,i),this._createEntries(t,e)):A(n,"bpmn:Participant")?(e=mt(__,function(r){return Mt(n)!==r.target.isExpanded}),this._createEntries(t,e)):A(n,"bpmn:StartEvent")&&Ne(n.$parent)?(e=mt(x_,function(r){var o=r.target.isInterrupting!==!1,a=et(t).isInterrupting===o;return i(r)||!i(r)&&!a}),this._createEntries(t,e)):A(n,"bpmn:StartEvent")&&!Ne(n.$parent)&&A(n.$parent,"bpmn:SubProcess")?(e=mt(u_,i),this._createEntries(t,e)):A(n,"bpmn:EndEvent")?(e=mt(h_,function(r){return!(r.target.eventDefinitionType=="bpmn:CancelEventDefinition"&&!A(n.$parent,"bpmn:Transaction"))&&i(r)}),this._createEntries(t,e)):A(n,"bpmn:BoundaryEvent")?(e=mt(b_,function(r){var o=r.target;if(o.eventDefinitionType=="bpmn:CancelEventDefinition"&&!A(n.attachedToRef,"bpmn:Transaction"))return!1;var a=o.cancelActivity!==!1,c=n.cancelActivity==a;return i(r)||!i(r)&&!c}),this._createEntries(t,e)):A(n,"bpmn:IntermediateCatchEvent")||A(n,"bpmn:IntermediateThrowEvent")?(e=mt(p_,i),this._createEntries(t,e)):A(n,"bpmn:Gateway")?(e=mt(d_,i),this._createEntries(t,e)):A(n,"bpmn:Transaction")?(e=mt(f_,i),this._createEntries(t,e)):Ne(n)&&Mt(n)?(e=mt(v_,i),this._createEntries(t,e)):A(n,"bpmn:SubProcess")&&Mt(n)?(e=mt(m_,i),this._createEntries(t,e)):A(n,"bpmn:AdHocSubProcess")&&!Mt(n)?(e=mt(ov,function(r){var o=r.target,a=o.type==="bpmn:SubProcess",c=o.isExpanded===!0;return rv(t)&&(!a||c)}),this._createEntries(t,e)):A(n,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(t,E_):A(n,"bpmn:FlowNode")?(e=mt(ov,i),A(n,"bpmn:SubProcess")&&!Mt(n)&&(e=mt(e,function(r){return r.label!=="Sub Process (collapsed)"})),this._createEntries(t,e)):[]},en.prototype.getHeaderEntries=function(t){var e=[];return A(t,"bpmn:Activity")&&!Ne(t)&&(e=e.concat(this._getLoopEntries(t))),A(t,"bpmn:DataObjectReference")&&(e=e.concat(this._getDataObjectIsCollection(t))),A(t,"bpmn:Participant")&&(e=e.concat(this._getParticipantMultiplicity(t))),!A(t,"bpmn:SubProcess")||A(t,"bpmn:Transaction")||Ne(t)||e.push(this._getAdHocEntry(t)),e},en.prototype._createEntries=function(t,e){var n=[],i=this;return L(e,function(r){var o=i._createMenuEntry(r,t);n.push(o)}),n},en.prototype._createSequenceFlowEntries=function(t,e){var n=et(t),i=[],r=this._modeling,o=this._moddle,a=this;return L(e,function(c){switch(c.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(A(n.sourceRef,"bpmn:ExclusiveGateway")||A(n.sourceRef,"bpmn:InclusiveGateway")||A(n.sourceRef,"bpmn:ComplexGateway")||A(n.sourceRef,"bpmn:Activity"))&&i.push(a._createMenuEntry(c,t,function(){r.updateProperties(t.source,{default:n})}));break;case"replace-with-conditional-flow":!n.conditionExpression&&A(n.sourceRef,"bpmn:Activity")&&i.push(a._createMenuEntry(c,t,function(){var l=o.create("bpmn:FormalExpression",{body:""});r.updateProperties(t,{conditionExpression:l})}));break;default:if(A(n.sourceRef,"bpmn:Activity")&&n.conditionExpression)return i.push(a._createMenuEntry(c,t,function(){r.updateProperties(t,{conditionExpression:void 0})}));if((A(n.sourceRef,"bpmn:ExclusiveGateway")||A(n.sourceRef,"bpmn:InclusiveGateway")||A(n.sourceRef,"bpmn:ComplexGateway")||A(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n)return i.push(a._createMenuEntry(c,t,function(){r.updateProperties(t.source,{default:void 0})}))}}),i},en.prototype._createMenuEntry=function(t,e,n){var i=this._translate,r=this._bpmnReplace.replaceElement,o=t.label;return o&&typeof o=="function"&&(o=o(e)),n=n||function(){return r(e,t.target)},{label:i(o),className:t.className,id:t.actionName,action:n}},en.prototype._getLoopEntries=function(t){var e=this,n=this._translate;function i(l,u){var p;u.active?p=void 0:(p=e._moddle.create(u.options.loopCharacteristics),u.options.isSequential&&(p.isSequential=u.options.isSequential)),e._modeling.updateProperties(t,{loopCharacteristics:p})}var r,o,a,c=et(t).loopCharacteristics;return c&&(r=c.isSequential,o=c.isSequential===void 0,a=c.isSequential!==void 0&&!c.isSequential),[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:n("Parallel Multi Instance"),active:a,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:n("Sequential Multi Instance"),active:r,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:n("Loop"),active:o,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}]},en.prototype._getDataObjectIsCollection=function(t){var e=this,n=this._translate,i=t.businessObject.dataObjectRef,r=i.isCollection;return[{id:"toggle-is-collection",className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:r,action:function(o,a){e._modeling.updateModdleProperties(t,i,{isCollection:!a.active})}}]},en.prototype._getParticipantMultiplicity=function(t){var e=this,n=this._bpmnFactory,i=this._translate,r=t.businessObject.participantMultiplicity,o=[{id:"toggle-participant-multiplicity",className:"bpmn-icon-parallel-mi-marker",title:i("Participant Multiplicity"),active:!!r,action:function(a,c){var l;c.active||(l=n.create("bpmn:ParticipantMultiplicity")),e._modeling.updateProperties(t,{participantMultiplicity:l})}}];return o},en.prototype._getAdHocEntry=function(t){var e=this._translate,n=A(et(t),"bpmn:AdHocSubProcess"),i=this._bpmnReplace.replaceElement;return{id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:e("Ad-hoc"),active:n,action:function(r,o){return i(t,n?{type:"bpmn:SubProcess"}:{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}};const w_={__depends__:[i_,iv],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",en]};var Ps=Math.max,Ms=Math.min,S_=20;function av(t,e){return{top:t.top-e.top,right:t.right-e.right,bottom:t.bottom-e.bottom,left:t.left-e.left}}function Rs(t,e,n){var i=e[t],r=n.min&&n.min[t],o=n.max&&n.max[t];return pt(r)&&(i=(/top|left/.test(t)?Ms:Ps)(i,r)),pt(o)&&(i=(/top|left/.test(t)?Ps:Ms)(i,o)),i}function Wo(t,e){return t!==void 0?t:S_}function C_(t){return!t.waypoints&&t.type!=="label"}function sv(t,e){var n;if((n=t.length===void 0?mt(t.children,C_):t).length)return function(i,r){var o,a,c,l;return typeof r=="object"?(o=Wo(r.left),a=Wo(r.right),c=Wo(r.top),l=Wo(r.bottom)):o=a=c=l=Wo(r),{x:i.x-o,y:i.y-c,width:i.width+o+a,height:i.height+c+l}}(ye(n),e)}var Ns=Math.abs,T_=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],zr=30;function Is(t,e){return e=e||[],t.children.filter(function(n){A(n,"bpmn:Lane")&&(Is(n,e),e.push(n))}),e}ai=function(t){return t.children.filter(function(e){return A(e,"bpmn:Lane")})};function fn(t){return gs(t,T_)||t}function A_(t,e){var n=fn(t),i=Is(n,A(n,"bpmn:Process")?[]:[n]),r=ot(t),o=ot(e),a=function(l,u){return av(ot(u),ot(l))}(t,e),c=[];return i.forEach(function(l){if(l!==t){var u,p,d=0,v=a.right,f=0,y=a.left,b=ot(l);a.top&&(Ns(b.bottom-r.top)<10&&(f=o.top-b.bottom),Ns(b.top-r.top)<5&&(d=o.top-b.top)),a.bottom&&(Ns(b.top-r.bottom)<10&&(d=o.bottom-b.top),Ns(b.bottom-r.bottom)<5&&(f=o.bottom-b.bottom)),(d||v||f||y)&&c.push({shape:l,newBounds:(u=l,p={top:d,right:v,bottom:f,left:y},{x:u.x+(p.left||0),y:u.y+(p.top||0),width:u.width-(p.left||0)+(p.right||0),height:u.height-(p.top||0)+(p.bottom||0)})})}}),c}function Pu(t,e,n,i,r,o,a,c,l,u,p,d){t=t||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=o,this._connect=a,this._create=c,this._popupMenu=l,this._canvas=u,this._rules=p,this._translate=d,t.autoPlace!==!1&&(this._autoPlace=e.get("autoPlace",!1)),n.on("create.end",250,function(v){var f=v.context.shape;if(Br(v)&&i.isOpen(f)){var y=i.getEntries(f);y.replace&&y.replace.action.click(v,f)}})}function cv(t,e,n){var i=t.$instanceOf(e),r=!1;return L(t.eventDefinitions||[],function(o){o.$type===n&&(r=!0)}),i&&r}Pu.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"],Pu.prototype.getContextPadEntries=function(t){var e=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,o=this._create,a=this._popupMenu,c=this._canvas,l=this._rules,u=this._autoPlace,p=this._translate,d={};if(t.type==="label")return d;var v=t.businessObject;function f(x,S){r.start(x,S)}function y(x,S,C,I){function s(m,E){var T=i.createShape($({type:x},I));o.start(m,T,{source:E})}typeof C!="string"&&(I=C,C=p("Append {type}",{type:x.replace(/^bpmn:/,"")}));var h=u?function(m,E){var T=i.createShape($({type:x},I));u.append(E,T)}:s;return{group:"model",className:S,title:C,action:{dragstart:s,click:h}}}function b(x){return function(S,C){n.splitLane(C,x),e.open(C,!0)}}if(wt(v,["bpmn:Lane","bpmn:Participant"])&&Mt(v)){var g=ai(t);$(d,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:p("Add Lane above"),action:{click:function(x,S){n.addLane(S,"top")}}}}),g.length<2&&(t.height>=120&&$(d,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:p("Divide into two Lanes"),action:{click:b(2)}}}),t.height>=180&&$(d,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:p("Divide into three Lanes"),action:{click:b(3)}}})),$(d,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:p("Add Lane below"),action:{click:function(x,S){n.addLane(S,"bottom")}}}})}A(v,"bpmn:FlowNode")&&(A(v,"bpmn:EventBasedGateway")?$(d,{"append.receive-task":y("bpmn:ReceiveTask","bpmn-icon-receive-task",p("Append ReceiveTask")),"append.message-intermediate-event":y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",p("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",p("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",p("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",p("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):cv(v,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?$(d,{"append.compensation-activity":y("bpmn:Task","bpmn-icon-task",p("Append compensation activity"),{isForCompensation:!0})}):A(v,"bpmn:EndEvent")||v.isForCompensation||cv(v,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||Ne(v)||$(d,{"append.end-event":y("bpmn:EndEvent","bpmn-icon-end-event-none",p("Append EndEvent")),"append.gateway":y("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",p("Append Gateway")),"append.append-task":y("bpmn:Task","bpmn-icon-task",p("Append Task")),"append.intermediate-event":y("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",p("Append Intermediate/Boundary Event"))})),a.isEmpty(t,"bpmn-replace")||$(d,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:p("Change type"),action:{click:function(x,S){var C=$(function(I){var s=c.getContainer(),h=e.getPad(I).html,m=s.getBoundingClientRect(),E=h.getBoundingClientRect(),T=E.top-m.top;return{x:E.left-m.left,y:T+E.height+5}}(S),{cursor:{x:x.x,y:x.y}});a.open(S,"bpmn-replace",C)}}}}),wt(v,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&$(d,{"append.text-annotation":y("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect using "+(v.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:f,dragstart:f}}}),A(v,"bpmn:TextAnnotation")&&$(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect using Association"),action:{click:f,dragstart:f}}}),wt(v,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&$(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect using DataInputAssociation"),action:{click:f,dragstart:f}}}),A(v,"bpmn:Group")&&$(d,{"append.text-annotation":y("bpmn:TextAnnotation","bpmn-icon-text-annotation")});var w=l.allowed("elements.delete",{elements:[t]});return gt(w)&&(w=w[0]===t),w&&$(d,{delete:{group:"edit",className:"bpmn-icon-trash",title:p("Remove"),action:{click:function(x){n.removeElements([t])}}}}),d};const k_={__depends__:[Lf,QE,Rn,Su,Ss,w_],__init__:["contextPadProvider"],contextPadProvider:["type",Pu]};var P_={horizontal:["x","width"],vertical:["y","height"]};function Yn(t){this._modeling=t,this._filters=[],this.registerFilter(function(e,n,i){var r,o=0,a=0;return L(e,function(c){c.waypoints||c.labelTarget||(o+=c[i],a+=1)}),r=Math.round(o/a),mt(e,function(c){return c[i]<r+50})})}Yn.$inject=["modeling"],Yn.prototype.registerFilter=function(t){if(typeof t!="function")throw new Error("the filter has to be a function");this._filters.push(t)},Yn.prototype.trigger=function(t,e){var n,i,r=this._modeling;if(!(t.length<3||(this._setOrientation(e),i=this._filterElements(t),(n=this._createGroups(i)).length<=2)))return r.distributeElements(n,this._axis,this._dimension),n},Yn.prototype._filterElements=function(t){var e=this._filters,n=this._axis,i=this._dimension,r=[].concat(t);return e.length?(L(e,function(o){r=o(r,n,i)}),r):t},Yn.prototype._createGroups=function(t){var e=[],n=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');return L(We(t,i),function(o,a){var c,l=n._findRange(o,i,r),u=e[e.length-1];u&&n._hasIntersection(u.range,l)?e[e.length-1].elements.push(o):(c={range:l,elements:[o]},e.push(c))}),e},Yn.prototype._setOrientation=function(t){var e=P_[t];this._axis=e[0],this._dimension=e[1]},Yn.prototype._hasIntersection=function(t,e){return Math.max(t.min,t.max)>=Math.min(e.min,e.max)&&Math.min(t.min,t.max)<=Math.max(e.min,e.max)},Yn.prototype._findRange=function(t){var e=t[this._axis];return{min:e+5,max:e+t[this._dimension]-5}};const M_={__init__:["distributeElements"],distributeElements:["type",Yn]};function lv(t){t.registerFilter(function(e){return mt(e,function(n){var i=wt(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:Participant","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||i)})})}lv.$inject=["distributeElements"];const R_={__depends__:[M_],__init__:["bpmnDistributeElements"],bpmnDistributeElements:["type",lv]};var uv="is not a registered action";function nn(t,e){this._actions={};var n=this;t.on("diagram.init",function(){n._registerDefaultActions(e),t.fire("editorActions.init",{editorActions:n})})}function Mu(t,e){return new Error(t+" "+e)}nn.$inject=["eventBus","injector"],nn.prototype._registerDefaultActions=function(t){var e=t.get("commandStack",!1),n=t.get("modeling",!1),i=t.get("selection",!1),r=t.get("zoomScroll",!1),o=t.get("copyPaste",!1),a=t.get("canvas",!1),c=t.get("rules",!1),l=t.get("keyboardMove",!1),u=t.get("keyboardMoveSelection",!1);e&&(this.register("undo",function(){e.undo()}),this.register("redo",function(){e.redo()})),o&&i&&this.register("copy",function(){var p=i.get();o.copy(p)}),o&&this.register("paste",function(){o.paste()}),r&&this.register("stepZoom",function(p){r.stepZoom(p.value)}),a&&this.register("zoom",function(p){a.zoom(p.value)}),n&&i&&c&&this.register("removeSelection",function(){var p=i.get();if(p.length){var d,v=c.allowed("elements.delete",{elements:p});v!==!1&&(d=gt(v)?v:p).length&&n.removeElements(d.slice())}}),l&&this.register("moveCanvas",function(p){l.moveCanvas(p)}),u&&this.register("moveSelection",function(p){u.moveSelection(p.direction,p.accelerated)})},nn.prototype.trigger=function(t,e){if(!this._actions[t])throw Mu(t,uv);return this._actions[t](e)},nn.prototype.register=function(t,e){var n=this;if(typeof t=="string")return this._registerAction(t,e);L(t,function(i,r){n._registerAction(r,i)})},nn.prototype._registerAction=function(t,e){if(this.isRegistered(t))throw Mu(t,"is already registered");this._actions[t]=e},nn.prototype.unregister=function(t){if(!this.isRegistered(t))throw Mu(t,uv);this._actions[t]=void 0},nn.prototype.getActions=function(){return Object.keys(this._actions)},nn.prototype.isRegistered=function(t){return!!this._actions[t]};const N_={__init__:["editorActions"],editorActions:["type",nn]};function Ds(t){t.invoke(nn,this)}it(Ds,nn),Ds.$inject=["injector"],Ds.prototype._registerDefaultActions=function(t){nn.prototype._registerDefaultActions.call(this,t);var e=t.get("canvas",!1),n=t.get("elementRegistry",!1),i=t.get("selection",!1),r=t.get("spaceTool",!1),o=t.get("lassoTool",!1),a=t.get("handTool",!1),c=t.get("globalConnect",!1),l=t.get("distributeElements",!1),u=t.get("alignElements",!1),p=t.get("directEditing",!1),d=t.get("searchPad",!1),v=t.get("modeling",!1);e&&n&&i&&this._registerAction("selectElements",function(){var f=e.getRootElement(),y=n.filter(function(b){return b!==f});return i.select(y),y}),r&&this._registerAction("spaceTool",function(){r.toggle()}),o&&this._registerAction("lassoTool",function(){o.toggle()}),a&&this._registerAction("handTool",function(){a.toggle()}),c&&this._registerAction("globalConnectTool",function(){c.toggle()}),i&&l&&this._registerAction("distributeElements",function(f){var y=i.get(),b=f.type;y.length&&l.trigger(y,b)}),i&&u&&this._registerAction("alignElements",function(f){var y=i.get(),b=[],g=f.type;y.length&&(b=mt(y,function(w){return!A(w,"bpmn:Lane")}),u.trigger(b,g))}),i&&v&&this._registerAction("setColor",function(f){var y=i.get();y.length&&v.setColor(y,f)}),i&&p&&this._registerAction("directEditing",function(){var f=i.get();f.length&&p.activate(f[0])}),d&&this._registerAction("find",function(){d.toggle()}),e&&v&&this._registerAction("moveToOrigin",function(){var f,y,b=e.getRootElement();f=ye(y=A(b,"bpmn:Collaboration")?n.filter(function(g){return A(g.parent,"bpmn:Collaboration")}):n.filter(function(g){return g!==b&&!A(g.parent,"bpmn:SubProcess")})),v.moveElements(y,{x:-f.x,y:-f.y},b)})};const I_={__depends__:[N_],editorActions:["type",Ds]};function pv(t){t.on(["create.init","shape.move.init"],function(e){var n=e.context;wt(e.shape,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}pv.$inject=["eventBus"];function Ru(t,e,n){return n||(n="round"),Math[n](t/e)*e}function xi(t,e,n){var i=!n||n.active!==!1;this._eventBus=e;var r=this;e.on("diagram.init",800,function(){r.setActive(i)}),e.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],1200,function(o){var a=o.originalEvent;if(!(!r.active||a&&He(a))){var c=o.context,l=c.gridSnappingContext;l||(l=c.gridSnappingContext={}),["x","y"].forEach(function(u){var p={},d=function(f,y,b){var g=f.context,w=f.shape,x=g.gridSnappingContext,S=x.snapLocation,C=x.snapOffset;return C&&pt(C[y])||(C||(C=x.snapOffset={}),pt(C[y])||(C[y]=0),!w)||(b.get(w.id)||(Bs(y)?C[y]+=w[y]+w.width/2:C[y]+=w[y]+w.height/2),!S)||(y==="x"?/left/.test(S)?C[y]-=w.width/2:/right/.test(S)&&(C[y]+=w.width/2):/top/.test(S)?C[y]-=w.height/2:/bottom/.test(S)&&(C[y]+=w.height/2)),C[y]}(o,u,t);d&&(p.offset=d);var v=function(f,y){var b=f.context,g=b.createConstraints,w=b.resizeConstraints||{},x=b.gridSnappingContext,S=x.snapConstraints;if(S&&S[y])return S[y];S||(S=x.snapConstraints={}),S[y]||(S[y]={});var C=b.direction;g&&(Bs(y)?(S.x.min=g.left,S.x.max=g.right):(S.y.min=g.top,S.y.max=g.bottom));var I=w.min,s=w.max;return I&&(Bs(y)?dv(C)?S.x.max=I.left:S.x.min=I.right:hv(C)?S.y.max=I.top:S.y.min=I.bottom),s&&(Bs(y)?dv(C)?S.x.min=s.left:S.x.max=s.right:hv(C)?S.y.min=s.top:S.y.max=s.bottom),S[y]}(o,u);v&&$(p,v),$r(o,u)||r.snapEvent(o,u,p)})}})}function Bs(t){return t==="x"}function hv(t){return t.indexOf("n")!==-1}function dv(t){return t.indexOf("w")!==-1}function Ji(t,e){Q.call(this,t),this._gridSnapping=e;var n=this;this.preExecute("shape.resize",function(i){var r=i.context,o=(r.hints||{}).autoResize;if(o){var a=r.shape,c=r.newBounds;Ie(o)?r.newBounds=n.snapComplex(c,o):r.newBounds=n.snapSimple(a,c)}})}xi.prototype.snapEvent=function(t,e,n){se(t,e,this.snapValue(t[e],n))},xi.prototype.getGridSpacing=function(){return 10},xi.prototype.snapValue=function(t,e){var n,i,r=0;return e&&e.offset&&(r=e.offset),t=Ru(t+=r,10),e&&e.min&&pt(n=e.min)&&(n=Ru(n+r,10,"ceil"),t=Math.max(t,n)),e&&e.max&&pt(i=e.max)&&(i=Ru(i+r,10,"floor"),t=Math.min(t,i)),t-=r},xi.prototype.isActive=function(){return this.active},xi.prototype.setActive=function(t){this.active=t,this._eventBus.fire("gridSnapping.toggle",{active:t})},xi.prototype.toggleActive=function(){this.setActive(!this.active)},xi.$inject=["elementRegistry","eventBus","config.gridSnapping"],Ji.$inject=["eventBus","gridSnapping","modeling"],it(Ji,Q),Ji.prototype.snapSimple=function(t,e){var n=this._gridSnapping;return e.width=n.snapValue(e.width,{min:e.width}),e.height=n.snapValue(e.height,{min:e.height}),e.x=t.x+t.width/2-e.width/2,e.y=t.y+t.height/2-e.height/2,e},Ji.prototype.snapComplex=function(t,e){return/w|e/.test(e)&&(t=this.snapHorizontally(t,e)),/n|s/.test(e)&&(t=this.snapVertically(t,e)),t},Ji.prototype.snapHorizontally=function(t,e){var n=this._gridSnapping,i=/w/.test(e),r=/e/.test(e),o={};return o.width=n.snapValue(t.width,{min:t.width}),r&&(i?(o.x=n.snapValue(t.x,{max:t.x}),o.width+=n.snapValue(t.x-o.x,{min:t.x-o.x})):t.x=t.x+t.width-o.width),$(t,o),t},Ji.prototype.snapVertically=function(t,e){var n=this._gridSnapping,i=/n/.test(e),r=/s/.test(e),o={};return o.height=n.snapValue(t.height,{min:t.height}),i&&(r?(o.y=n.snapValue(t.y,{max:t.y}),o.height+=n.snapValue(t.y-o.y,{min:t.y-o.y})):t.y=t.y+t.height-o.height),$(t,o),t};function mv(t,e){t.on(["spaceTool.move","spaceTool.end"],2e3,function(n){var i,r=n.context;r.initialized&&(r.axis==="x"?(i=e.snapValue(n.dx),n.x=n.x+i-n.dx,n.dx=i):(i=e.snapValue(n.dy),n.y=n.y+i-n.dy,n.dy=i))})}mv.$inject=["eventBus","gridSnapping"];const D_={__depends__:[{__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Ji],gridSnappingSpaceToolBehavior:["type",mv]}],__init__:["gridSnapping"],gridSnapping:["type",xi]};function fv(t,e){t.on("autoPlace",2e3,function(n){var i=n.source,r=ft(i),o=n.shape,a=Qm(i,o);return["x","y"].forEach(function(c){var l={};a[c]!==r[c]&&(a[c]>r[c]?l.min=a[c]:l.max=a[c],A(o,"bpmn:TextAnnotation")&&(function(u){return u==="x"}(c)?l.offset=-o.width/2:l.offset=-o.height/2),a[c]=e.snapValue(a[c],l))}),a})}fv.$inject=["eventBus","gridSnapping"];function vv(t,e,n){e.on(["create.start","shape.move.start"],1750,function(i){var r=i.context,o=r.shape,a=t.getRootElement();A(o,"bpmn:Participant")&&A(a,"bpmn:Process")&&a.children.length&&r.createConstraints&&(o.width=n.snapValue(o.width,{min:o.width}),o.height=n.snapValue(o.height,{min:o.height}))})}vv.$inject=["canvas","eventBus","gridSnapping"];function Os(t,e,n){Q.call(this,t),this._gridSnapping=e;var i=this;this.postExecuted(["connection.create","connection.layout"],3e3,function(r){var o=r.context,a=o.connection,c=o.hints||{},l=a.waypoints;c.connectionStart||c.connectionEnd||c.createElementsBehavior===!1||function(u){return u.length>3}(l)&&n.updateWaypoints(a,i.snapMiddleSegments(l))})}function B_(t,e,n){var i=zn(e,n),r={};return function(o){return o==="h"}(i)&&(r.y=t.snapValue(e.y)),function(o){return o==="v"}(i)&&(r.x=t.snapValue(e.x)),("x"in r||"y"in r)&&(e=$({},e,r),n=$({},n,r)),[e,n]}Os.$inject=["eventBus","gridSnapping","modeling"],it(Os,Q),Os.prototype.snapMiddleSegments=function(t){var e,n=this._gridSnapping;t=t.slice();for(var i=1;i<t.length-2;i++)e=B_(n,t[i],t[i+1]),t[i]=e[0],t[i+1]=e[1];return t};const O_={__depends__:[D_,{__init__:["gridSnappingAutoPlaceBehavior","gridSnappingCreateParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",fv],gridSnappingCreateParticipantBehavior:["type",vv],gridSnappingLayoutConnectionBehavior:["type",Os]}],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",pv]};function Ko(t,e){this._interactionEvents=e;var n=this;t.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(i){var r=i.element,o=i.gfx;return A(r,"bpmn:Lane")?n.createParticipantHit(r,o):A(r,"bpmn:Participant")?Mt(r)?n.createParticipantHit(r,o):n.createDefaultHit(r,o):A(r,"bpmn:SubProcess")?Mt(r)?n.createSubProcessHit(r,o):n.createDefaultHit(r,o):void 0})}Ko.$inject=["eventBus","interactionEvents"],Ko.prototype.createDefaultHit=function(t,e){return this._interactionEvents.removeHits(e),this._interactionEvents.createDefaultHit(t,e),!0},Ko.prototype.createParticipantHit=function(t,e){return this._interactionEvents.removeHits(e),this._interactionEvents.createBoxHit(e,"click-stroke",{width:t.width,height:t.height}),this._interactionEvents.createBoxHit(e,"all",{width:30,height:t.height}),!0},Ko.prototype.createSubProcessHit=function(t,e){return this._interactionEvents.removeHits(e),this._interactionEvents.createBoxHit(e,"click-stroke",{width:t.width,height:t.height}),this._interactionEvents.createBoxHit(e,"all",{width:t.width,height:30}),!0};const L_={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",Ko]};function Ls(t){t.invoke(Lr,this)}it(Ls,Lr),Ls.$inject=["injector"],Ls.prototype.registerBindings=function(t,e){function n(i,r){e.isRegistered(i)&&t.addListener(r)}Lr.prototype.registerBindings.call(this,t,e),n("selectElements",function(i){var r=i.keyEvent;if(t.isKey(["a","A"],r)&&t.isCmd(r))return e.trigger("selectElements"),!0}),n("find",function(i){var r=i.keyEvent;if(t.isKey(["f","F"],r)&&t.isCmd(r))return e.trigger("find"),!0}),n("spaceTool",function(i){var r=i.keyEvent;if(!t.hasModifier(r))return t.isKey(["s","S"],r)?(e.trigger("spaceTool"),!0):void 0}),n("lassoTool",function(i){var r=i.keyEvent;if(!t.hasModifier(r))return t.isKey(["l","L"],r)?(e.trigger("lassoTool"),!0):void 0}),n("handTool",function(i){var r=i.keyEvent;if(!t.hasModifier(r))return t.isKey(["h","H"],r)?(e.trigger("handTool"),!0):void 0}),n("globalConnectTool",function(i){var r=i.keyEvent;if(!t.hasModifier(r))return t.isKey(["c","C"],r)?(e.trigger("globalConnectTool"),!0):void 0}),n("directEditing",function(i){var r=i.keyEvent;if(!t.hasModifier(r))return t.isKey(["e","E"],r)?(e.trigger("directEditing"),!0):void 0})};const j_={__depends__:[au],__init__:["keyboardBindings"],keyboardBindings:["type",Ls]};var V_={moveSpeed:1,moveSpeedAccelerated:10},yv="left",gv="right",bv="down",F_={ArrowLeft:yv,Left:yv,ArrowUp:"up",Up:"up",ArrowRight:gv,Right:gv,ArrowDown:bv,Down:bv},$_={left:function(t){return{x:-t,y:0}},up:function(t){return{x:0,y:-t}},right:function(t){return{x:t,y:0}},down:function(t){return{x:0,y:t}}};function xv(t,e,n,i,r){var o=this;this._config=$({},V_,t||{}),e.addListener(1500,function(a){var c=a.keyEvent,l=F_[c.key];if(l&&!e.isCmd(c)){var u=e.isShift(c);return o.moveSelection(l,u),!0}}),this.moveSelection=function(a,c){var l=r.get();if(l.length){var u=this._config[c?"moveSpeedAccelerated":"moveSpeed"],p=$_[a](u);i.allowed("elements.move",{shapes:l})&&n.moveElements(l,p)}}}xv.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const z_={__depends__:[au,Rn],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",xv]};function Ev(t,e,n,i){t.on("element.changed",function(r){var o=r.element;(o.parent||o===e.getRootElement())&&(r.gfx=n.getGraphics(o)),r.gfx&&t.fire(Ed(o)+".changed",r)}),t.on("elements.changed",function(r){var o=r.elements;o.forEach(function(a){t.fire("element.changed",{element:a})}),i.updateContainments(o)}),t.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),t.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}Ev.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const _v={__init__:["changeSupport"],changeSupport:["type",Ev]};function Xo(t,e,n,i){this._dragging=i,this._rules=e;var r=this;function o(a,c){var l,u=a.shape,p=a.direction,d=a.resizeConstraints;a.delta=c,l=function(v,f,y){var b=y.x,g=y.y,w={x:v.x,y:v.y,width:v.width,height:v.height};return f.indexOf("n")!==-1?(w.y=v.y+g,w.height=v.height-g):f.indexOf("s")!==-1&&(w.height=v.height+g),f.indexOf("e")!==-1?w.width=v.width+b:f.indexOf("w")!==-1&&(w.x=v.x+b,w.width=v.width-b),w}(u,p,c),a.newBounds=function(v,f){if(!f)return v;var y=ot(v);return $l({top:Rs("top",y,f),right:Rs("right",y,f),bottom:Rs("bottom",y,f),left:Rs("left",y,f)})}(l,d),a.canExecute=r.canResize(a)}t.on("resize.start",function(a){var c,l,u;c=a.context,l=c.resizeConstraints,u=c.minBounds,l===void 0&&(u===void 0&&(u=r.computeMinResizeBox(c)),c.resizeConstraints={min:ot(u)})}),t.on("resize.move",function(a){var c={x:a.dx,y:a.dy};o(a.context,c)}),t.on("resize.end",function(a){(function(c){var l=c.shape,u=c.canExecute,p=c.newBounds;if(u){if(!function(d,v){return d.x!==v.x||d.y!==v.y||d.width!==v.width||d.height!==v.height}(l,p=Ld(p)))return;n.resizeShape(l,p)}})(a.context)})}function wv(t,e){var n=ft(t),i=ot(t),r={x:n.x,y:n.y};return e.indexOf("n")!==-1?r.y=i.top:e.indexOf("s")!==-1&&(r.y=i.bottom),e.indexOf("e")!==-1?r.x=i.right:e.indexOf("w")!==-1&&(r.x=i.left),r}function G_(t){var e="resize-";return t==="n"||t==="s"?e+"ns":t==="e"||t==="w"?e+"ew":t==="nw"||t==="se"?e+"nwse":e+"nesw"}Xo.prototype.canResize=function(t){var e=this._rules,n=Xe(t,["newBounds","shape","delta","direction"]);return e.allowed("shape.resize",n)},Xo.prototype.activate=function(t,e,n){var i,r,o=this._dragging;if(typeof n=="string"&&(n={direction:n}),!(r=(i=$({shape:e},n)).direction))throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");o.init(t,wv(e,r),"resize",{autoActivate:!0,cursor:G_(r),data:{shape:e,context:i}})},Xo.prototype.computeMinResizeBox=function(t){var e=t.shape;return function(n,i,r,o){var a=ot(i),c={top:/n/.test(n)?a.bottom-r.height:a.top,left:/w/.test(n)?a.right-r.width:a.left,bottom:/s/.test(n)?a.top+r.height:a.bottom,right:/e/.test(n)?a.left+r.width:a.right},l=o?ot(o):c;return $l({top:Ms(c.top,l.top),left:Ms(c.left,l.left),bottom:Ps(c.bottom,l.bottom),right:Ps(c.right,l.right)})}(t.direction,e,t.minDimensions||{width:10,height:10},sv(e,t.childrenBoxPadding))},Xo.$inject=["eventBus","rules","modeling","dragging"];var Sv="djs-resizing",Cv="resize-not-ok";function Tv(t,e,n){t.on("resize.move",500,function(i){var r,o,a,c;r=i.context,o=r.shape,a=r.newBounds,(c=r.frame)||(c=r.frame=n.addFrame(o,e.getActiveLayer()),e.addMarker(o,Sv)),a.width>5&&K(c,{x:a.x,width:a.width}),a.height>5&&K(c,{y:a.y,height:a.height}),r.canExecute?bt(c).remove(Cv):bt(c).add(Cv)}),t.on("resize.cleanup",function(i){var r,o;r=i.context,o=r.shape,r.frame&&ee(r.frame),e.removeMarker(o,Sv)})}Tv.$inject=["eventBus","canvas","previewSupport"];var Av=-6,Yo="djs-resizer",U_=["n","w","s","e","nw","ne","se","sw"];function Ei(t,e,n,i){this._resize=i,this._canvas=e;var r=this;t.on("selection.changed",function(o){var a=o.newSelection;r.removeResizers(),a.length===1&&L(a,Se(r.addResizer,r))}),t.on("shape.changed",function(o){var a=o.element;n.isSelected(a)&&(r.removeResizers(),r.addResizer(a))})}Ei.prototype.makeDraggable=function(t,e,n){var i=this._resize;function r(o){gi(o)&&i.activate(o,t,n)}st.bind(e,"mousedown",r),st.bind(e,"touchstart",r)},Ei.prototype._createResizer=function(t,e,n,i){var r=this._getResizersParent(),o=function(u){var p={x:0,y:0};return u.indexOf("e")!==-1?p.x=6:u.indexOf("w")!==-1&&(p.x=Av),u.indexOf("s")!==-1?p.y=6:u.indexOf("n")!==-1&&(p.y=Av),p}(i),a=rt("g");bt(a).add(Yo),bt(a).add(Yo+"-"+t.id),bt(a).add(Yo+"-"+i),lt(r,a);var c=rt("rect");K(c,{x:-2+o.x,y:-2+o.y,width:4,height:4}),bt(c).add(Yo+"-visual"),lt(a,c);var l=rt("rect");return K(l,{x:-10+o.x,y:-10+o.y,width:20,height:20}),bt(l).add(Yo+"-hit"),lt(a,l),Hl(a,e,n),a},Ei.prototype.createResizer=function(t,e){var n=wv(t,e),i=this._createResizer(t,n.x,n.y,e);this.makeDraggable(t,i,e)},Ei.prototype.addResizer=function(t){var e=this;this._resize.canResize({shape:t})&&L(U_,function(n){e.createResizer(t,n)})},Ei.prototype.removeResizers=function(){Al(this._getResizersParent())},Ei.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},Ei.$inject=["eventBus","canvas","selection","resize"];const kv={__depends__:[Dn,Kn,zo],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Xo],resizePreview:["type",Tv],resizeHandles:["type",Ei]};function Nu(t,e){var n=e.create("bpmn:CategoryValue"),i=e.create("bpmn:Category",{categoryValue:[n]});return Jt(t.get("rootElements"),i),et(i).$parent=t,et(n).$parent=i,n}function Jo(t,e,n,i,r,o,a){function c(l,u){(u||wt(l,["bpmn:Task","bpmn:TextAnnotation"])||Iu(l))&&i.activate(l)}this._bpmnFactory=e,this._canvas=n,this._modeling=r,this._textRenderer=a,i.registerProvider(this),t.on("element.dblclick",function(l){c(l.element,!0)}),t.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open"],function(l){i.isActive()&&i.complete()}),t.on(["commandStack.changed"],function(l){i.isActive()&&i.cancel()}),t.on("directEditing.activate",function(l){o.removeResizers()}),t.on("create.end",500,function(l){var u=l.context,p=u.shape,d=l.context.canExecute;l.isTouch||d&&(u.hints&&u.hints.createElementsBehavior===!1||c(p))}),t.on("autoPlace.end",500,function(l){c(l.shape)})}function Iu(t){return A(t,"bpmn:SubProcess")&&!Mt(t)}Jo.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"],Jo.prototype.activate=function(t){var e=pn(t);if(e!==void 0){var n={text:e};$(n,this.getEditingBBox(t));var i={};return(wt(t,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||Iu(t))&&$(i,{centerVertically:!0}),Ir(t)&&$(i,{autoResize:!0}),A(t,"bpmn:TextAnnotation")&&$(i,{resizable:!0,autoResize:!0}),$(n,{options:i}),n}},Jo.prototype.getEditingBBox=function(t){var e=this._canvas,n=t.label||t,i=e.getAbsoluteBBox(n),r=i.x+i.width/2,o=i.y+i.height/2,a={x:i.x,y:i.y},c=e.zoom(),l=this._textRenderer.getDefaultStyle(),u=this._textRenderer.getExternalStyle(),p=u.fontSize*c,d=u.lineHeight,v=l.fontSize*c,f=l.lineHeight,y={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};(A(t,"bpmn:Lane")||function(I){return A(I,"bpmn:Participant")&&Mt(I)}(t))&&($(a,{width:i.height,height:30*c,x:i.x-i.height/2+15*c,y:o-30*c/2}),$(y,{fontSize:v+"px",lineHeight:f,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px",transform:"rotate(-90deg)"})),(wt(t,["bpmn:Task","bpmn:CallActivity"])||function(I){return A(I,"bpmn:Participant")&&!Mt(I)}(t)||Iu(t))&&($(a,{width:i.width,height:i.height}),$(y,{fontSize:v+"px",lineHeight:f,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"})),function(I){return A(I,"bpmn:SubProcess")&&Mt(I)}(t)&&($(a,{width:i.width,x:i.x}),$(y,{fontSize:v+"px",lineHeight:f,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"}));var b=90*c,g=7*c,w=4*c;if(n.labelTarget&&($(a,{width:b,height:i.height+g+w,x:r-b/2,y:i.y-g}),$(y,{fontSize:p+"px",lineHeight:d,paddingTop:g+"px",paddingBottom:w+"px"})),Ir(n)&&!us(n)&&!be(n)){var x=ps(t),S=e.getAbsoluteBBox({x:x.x,y:x.y,width:0,height:0}),C=p+g+w;$(a,{width:b,height:C,x:S.x-b/2,y:S.y-C/2}),$(y,{fontSize:p+"px",lineHeight:d,paddingTop:g+"px",paddingBottom:w+"px"})}return A(t,"bpmn:TextAnnotation")&&($(a,{width:i.width,height:i.height,minWidth:30*c,minHeight:10*c}),$(y,{textAlign:"left",paddingTop:5*c+"px",paddingBottom:7*c+"px",paddingLeft:7*c+"px",paddingRight:5*c+"px",fontSize:v+"px",lineHeight:f})),{bounds:a,style:y}},Jo.prototype.update=function(t,e,n,i){var r,o,a;if(A(t,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(t),r={x:t.x,y:t.y,width:t.width/o.width*i.width,height:t.height/o.height*i.height}),A(t,"bpmn:Group")&&!et(t).categoryValueRef){var c=Nu(et(this._canvas.getRootElement()).$parent,this._bpmnFactory);et(t).categoryValueRef=c}(a=e)&&a.trim()||(e=null),this._modeling.updateLabel(t,e,r)};var Pv="djs-element-hidden",Mv="djs-label-hidden";function Rv(t,e,n,i){var r,o,a,c=this,l=e.getDefaultLayer();t.on("directEditing.activate",function(u){var p=u.active;if(A(r=p.element.label||p.element,"bpmn:TextAnnotation")){o=e.getAbsoluteBBox(r),a=rt("g");var d=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:r.width,containerHeight:r.height,position:{mx:0,my:0}}),v=c.path=rt("path");K(v,{d,strokeWidth:2,stroke:H_(r)}),lt(a,v),lt(l,a),Oe(a,r.x,r.y)}A(r,"bpmn:TextAnnotation")||r.labelTarget?e.addMarker(r,Pv):(A(r,"bpmn:Task")||A(r,"bpmn:CallActivity")||A(r,"bpmn:SubProcess")||A(r,"bpmn:Participant"))&&e.addMarker(r,Mv)}),t.on("directEditing.resize",function(u){if(A(r,"bpmn:TextAnnotation")){var p=u.height,d=u.dy,v=Math.max(r.height/o.height*(p+d),0),f=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:r.width,containerHeight:v,position:{mx:0,my:0}});K(c.path,{d:f})}}),t.on(["directEditing.complete","directEditing.cancel"],function(u){var p=u.active;p&&(e.removeMarker(p.element.label||p.element,Pv),e.removeMarker(r,Mv)),r=void 0,o=void 0,a&&(ee(a),a=void 0)})}function H_(t,e){return et(t).di.get("stroke")||e||"black"}Rv.$inject=["eventBus","canvas","elementRegistry","pathMap"];const q_={__depends__:[_v,kv,Lf],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",Jo],labelEditingPreview:["type",Rv]};var Du=["top","bottom","left","right"],js=10;function Bu(t,e){function n(i){if(us(i)){var r=function(o){var a=ft(o.label),c=ft(o),l=Nv(c,a);if(u=l,Du.indexOf(u)!==-1){var u,p=function(f){var y=ft(f),b=[].concat(f.incoming.map(function(g){return g.waypoints[g.waypoints.length-2]}),f.outgoing.map(function(g){return g.waypoints[1]})).map(function(g){return Nv(y,g)});return b}(o);if(o.host){var d=function(f){var y,b=f.host,g=ft(f),w=ge(g,b);y=w.indexOf("-")>=0?w.split("-"):[w];var x=Du.filter(function(S){return y.indexOf(S)===-1});return x}(o);p=p.concat(d)}var v=Du.filter(function(f){return p.indexOf(f)===-1});if(v.indexOf(l)===-1)return v[0]}}(i);r&&function(o,a){var c=ft(o),l=o.label,u=ft(l);if(l.parent){var p,d=ot(o);switch(a){case"top":p={x:c.x,y:d.top-js-l.height/2};break;case"left":p={x:d.left-js-l.width/2,y:c.y};break;case"bottom":p={x:c.x,y:d.bottom+js+l.height/2};break;case"right":p={x:d.right+js+l.width/2,y:c.y}}var v=Nn(p,u);e.moveShape(l,v)}}(i,r)}}Q.call(this,t),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(i){var r=i.context,o=r.connection,a=o.source,c=o.target;(r.hints||{}).createElementsBehavior!==!1&&(n(a),n(c))}),this.postExecuted(["label.create"],function(i){var r=i.context,o=r.shape;(r.hints||{}).createElementsBehavior!==!1&&n(o.labelTarget)}),this.postExecuted(["elements.create"],function(i){var r=i.context,o=r.elements;(r.hints||{}).createElementsBehavior!==!1&&o.forEach(function(a){n(a)})})}function Nv(t,e){return ge(e,t,5)}function Ou(t,e,n){Q.call(this,t),this.preExecute("shape.append",function(i){var r=i.source,o=i.shape;i.position||(A(o,"bpmn:TextAnnotation")?i.position={x:r.x+r.width/2+75,y:r.y-50-o.height/2}:i.position={x:r.x+r.width+80+o.width/2,y:r.y+r.height/2})},!0)}function Lu(t,e){t.invoke(Q,this),this.postExecute("shape.move",function(n){var i=n.newParent,r=n.shape;L(mt(r.incoming.concat(r.outgoing),function(o){return A(o,"bpmn:Association")}),function(o){e.moveConnection(o,{x:0,y:0},i)})},!0)}it(Bu,Q),Bu.$inject=["eventBus","modeling"],it(Ou,Q),Ou.$inject=["eventBus","elementFactory","bpmnRules"],it(Lu,Q),Lu.$inject=["injector","modeling"];function Vs(t,e){e.invoke(Q,this),this._bpmnReplace=t;var n=this;this.postExecuted("elements.create",500,function(i){var r=i.elements;(r=r.filter(function(o){return Iv(o,o.host)})).length===1&&r.map(function(o){return r.indexOf(o)}).forEach(function(o){var a=r[o];i.elements[o]=n.replaceShape(r[o],a)})},!0),this.preExecute("elements.move",500,function(i){var r=i.shapes,o=i.newHost;if(r.length===1){var a=r[0];Iv(a,o)&&(i.shapes=[n.replaceShape(a,o)])}},!0)}function Iv(t,e){return!be(t)&&wt(t,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!e}Vs.$inject=["bpmnReplace","injector"],it(Vs,Q),Vs.prototype.replaceShape=function(t,e){var n,i=(n=et(t).eventDefinitions)&&n[0],r={type:"bpmn:BoundaryEvent",host:e};return i&&(r.eventDefinitionType=i.$type),this._bpmnReplace.replaceElement(t,r,{layoutConnection:!1})};function ju(t,e,n){function i(r){return mt(r.attachers,function(o){return A(o,"bpmn:BoundaryEvent")})}Q.call(this,t),this.postExecute("connection.create",function(r){var o=r.context.source,a=r.context.target,c=i(a);A(o,"bpmn:EventBasedGateway")&&A(a,"bpmn:ReceiveTask")&&c.length>0&&n.removeElements(c)}),this.postExecute("connection.reconnect",function(r){var o=r.context.oldSource,a=r.context.newSource;A(o,"bpmn:Gateway")&&A(a,"bpmn:EventBasedGateway")&&L(a.outgoing,function(c){var l=c.target,u=i(l);A(l,"bpmn:ReceiveTask")&&u.length>0&&n.removeElements(u)})}),t.on("moddleCopy.canCopyProperty",2e3,function(r){var o=r.parent,a=r.property,c=r.propertyName,l=e.getPropertyDescriptor(o,c);l&&l.isReference&&A(a,"bpmn:RootElement")&&o.set(c,a)})}ju.$inject=["eventBus","moddle","modeling"],it(ju,Q);function Vu(t,e,n,i,r){function o(u){return wt(u,["bpmn:ReceiveTask","bpmn:SendTask"])||function(p,d){return gt(d)||(d=[d]),si(d,function(v){return ss(p,v)})}(u,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function a(u){return!!Pt(t.getDefinitions().get("rootElements"),Ke({id:u.id}))}function c(u){return A(u,"bpmn:ErrorEventDefinition")?"errorRef":A(u,"bpmn:EscalationEventDefinition")?"escalationRef":A(u,"bpmn:MessageEventDefinition")?"messageRef":A(u,"bpmn:SignalEventDefinition")?"signalRef":void 0}function l(u){if(wt(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.get("messageRef");var p=u.get("eventDefinitions")[0];return p.get(c(p))}n.invoke(Q,this),this.executed("shape.create",function(u){var p=u.shape;if(o(p)){var d=l(et(p));d&&!a(d)&&(Jt(t.getDefinitions().get("rootElements"),d),u.addedRootElement=d)}},!0),this.reverted("shape.create",function(u){var p=u.addedRootElement;p&&Yt(t.getDefinitions().get("rootElements"),p)},!0),e.on("copyPaste.copyElement",function(u){var p=u.descriptor,d=u.element;if(o(d)){var v=l(et(d));v&&(p.referencedRootElement=v)}}),e.on("copyPaste.pasteElement",500,function(u){var p=u.descriptor,d=p.businessObject;if(o(d)){var v=p.referencedRootElement;v&&(a(v)||(v=i.copyElement(v,r.create(v.$type))),function(f,y){if(wt(f,["bpmn:ReceiveTask","bpmn:SendTask"]))return f.set("messageRef",y);var b=f.get("eventDefinitions")[0];b.set(c(b),y)}(d,v))}})}function Fu(t){t.invoke(Q,this),this.preExecute("shape.create",1500,function(e){var n=e.context,i=n.parent,r=n.shape;A(i,"bpmn:Lane")&&!A(r,"bpmn:Lane")&&(n.parent=gs(i,"bpmn:Participant"))})}Vu.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"],it(Vu,Q),Fu.$inject=["injector"],it(Fu,Q);var Fs=1500;function Dv(t,e,n){e.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],Fs,function(i){var r=i.context.shape||i.shape,o=i.hover;A(o,"bpmn:Lane")&&!wt(r,["bpmn:Lane","bpmn:Participant"])&&(i.hover=fn(o),i.hoverGfx=t.getGraphics(i.hover));var a=n.getRootElement();o!==a&&(r.labelTarget||A(r,"bpmn:Group"))&&(i.hover=a,i.hoverGfx=t.getGraphics(i.hover))}),e.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],Fs,function(i){var r=i.hover;A(r,"bpmn:Lane")&&(i.hover=fn(r)||r,i.hoverGfx=t.getGraphics(i.hover))}),e.on(["bendpoint.move.hover"],Fs,function(i){var r=i.context,o=i.hover,a=r.type;A(o,"bpmn:Lane")&&/reconnect/.test(a)&&(i.hover=fn(o)||o,i.hoverGfx=t.getGraphics(i.hover))}),e.on(["connect.start"],Fs,function(i){var r=i.context,o=r.start;A(o,"bpmn:Lane")&&(r.start=fn(o)||o)}),e.on("shape.move.start",2e3,function(i){var r=i.shape;A(r,"bpmn:Lane")&&(i.shape=fn(r)||r)})}function $u(t,e,n){Q.call(this,t),this.preExecute("shape.create",function(i){var r=i.context.shape;if(A(r,"bpmn:DataObjectReference")&&r.type!=="label"){var o=e.create("bpmn:DataObject");r.businessObject.dataObjectRef=o}})}Dv.$inject=["elementRegistry","eventBus","canvas"],$u.$inject=["eventBus","bpmnFactory","moddle"],it($u,Q);var zu=20,Gu=20,Bv=30,$s=2e3;function Uu(t,e,n){function i(){var r=t.getRootElement();return A(r,"bpmn:Collaboration")?r:n.makeCollaboration()}Q.call(this,e),e.on(["create.start","shape.move.start"],$s,function(r){var o=r.context,a=o.shape,c=t.getRootElement();if(A(a,"bpmn:Participant")&&A(c,"bpmn:Process")&&c.children.length){var l=c.children.filter(function(d){return!A(d,"bpmn:Group")&&!be(d)&&!function(v){return!!v.waypoints}(d)});if(l.length){var u=ye(l),p=function(d,v){v={width:v.width+2*zu+Bv,height:v.height+2*Gu};var f=Math.max(d.width,v.width),y=Math.max(d.height,v.height);return{x:-f/2,y:-y/2,width:f,height:y}}(a,u);$(a,p),o.createConstraints=function(d,v){return v=ot(v),{bottom:v.top+d.height/2-Gu,left:v.right-d.width/2+zu,top:v.bottom-d.height/2+Gu,right:v.left+d.width/2-zu-Bv}}(a,u)}}}),e.on("create.start",$s,function(r){var o=r.context.shape,a=t.getRootElement(),c=t.getGraphics(a);function l(u){u.element=a,u.gfx=c}A(o,"bpmn:Participant")&&A(a,"bpmn:Process")&&(e.on("element.hover",$s,l),e.once("create.cleanup",function(){e.off("element.hover",l)}))}),this.preExecute("elements.create",$s,function(r){var o,a=r.elements,c=r.parent,l=function(u){return Pt(u,function(p){return A(p,"bpmn:Participant")})}(a);l&&A(c,"bpmn:Process")&&(r.parent=i(),(o=r.hints=r.hints||{}).participant=l,o.process=c,o.processRef=et(l).get("processRef"))},!0),this.preExecute("shape.create",function(r){var o=r.parent,a=r.shape;A(a,"bpmn:Participant")&&A(o,"bpmn:Process")&&(r.parent=i(),r.process=o,r.processRef=et(a).get("processRef"))},!0),this.execute("shape.create",function(r){var o=r.hints||{},a=r.process||o.process,c=r.shape,l=o.participant;!a||l&&c!==l||et(c).set("processRef",et(a))},!0),this.revert("shape.create",function(r){var o=r.hints||{},a=r.process||o.process,c=r.processRef||o.processRef,l=r.shape,u=o.participant;!a||u&&l!==u||et(l).set("processRef",c)},!0),this.postExecute("shape.create",function(r){var o=r.hints||{},a=r.process||r.hints.process,c=r.shape,l=o.participant;if(a){var u=a.children.slice();l?c===l&&n.moveElements(u,{x:0,y:0},l):n.moveElements(u,{x:0,y:0},c)}},!0)}Uu.$inject=["canvas","eventBus","modeling"],it(Uu,Q);var Ov="__targetRef_placeholder";function Hu(t,e){function n(o,a){var c=o.get("properties"),l=Pt(c,function(u){return u.name===Ov});return!l&&a&&Jt(c,l=e.create("bpmn:Property",{name:Ov})),l}function i(o,a){var c=n(o);c&&(function(l,u,p){return Pt(l.get("dataInputAssociations"),function(d){return d!==p&&d.targetRef===u})}(o,c,a)||Yt(o.get("properties"),c))}function r(o){var a,c=o.context,l=c.connection,u=l.businessObject,p=l.target,d=p&&p.businessObject,v=c.newTarget,f=v&&v.businessObject,y=c.oldTarget||c.target,b=y&&y.businessObject,g=l.businessObject;b&&b!==d&&i(b,u),f&&f!==d&&i(f,u),d?(a=n(d,!0),g.targetRef=a):g.targetRef=null}Q.call(this,t),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],Lv(r)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],Lv(r))}function Lv(t){return function(e){if(A(e.context.connection,"bpmn:DataInputAssociation"))return t(e)}}function zs(t){this._bpmnUpdater=t}function qu(t,e,n,i){function r(a){return a.children.filter(function(c){return A(c,"bpmn:DataStoreReference")&&!c.labelTarget})}function o(a,c){var l=a.businessObject||a;if(c=c||n.filter(function(p){return A(p,"bpmn:Participant")&&et(p).processRef})[0]){var u=c.businessObject||c;e.execute("dataStore.updateContainment",{dataStoreBo:l,newSemanticParent:u.processRef||u,newDiParent:u.di})}}Q.call(this,i),e.registerHandler("dataStore.updateContainment",zs),this.preExecute("shape.create",function(a){var c=a.context,l=c.shape;A(l,"bpmn:DataStoreReference")&&l.type!=="label"&&(c.hints||(c.hints={}),c.hints.autoResize=!1)}),this.preExecute("elements.move",function(a){var c=a.context,l=c.shapes;l.filter(function(u){return A(u,"bpmn:DataStoreReference")}).length&&(c.hints||(c.hints={}),c.hints.autoResize=l.filter(function(u){return!A(u,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(a){var c=a.context.shape,l=c.parent;A(c,"bpmn:DataStoreReference")&&c.type!=="label"&&A(l,"bpmn:Collaboration")&&o(c)}),this.postExecute("shape.move",function(a){var c=a.context,l=c.shape,u=c.oldParent,p=l.parent;A(u,"bpmn:Collaboration")||A(l,"bpmn:DataStoreReference")&&l.type!=="label"&&A(p,"bpmn:Collaboration")&&o(l,A(u,"bpmn:Participant")?u:function(d,v){for(;d.parent;){if(A(d.parent,v))return d.parent;d=d.parent}}(u,"bpmn:Participant"))}),this.postExecute("shape.delete",function(a){var c=a.context.shape,l=t.getRootElement();wt(c,["bpmn:Participant","bpmn:SubProcess"])&&A(l,"bpmn:Collaboration")&&r(l).filter(function(u){return function(p,d){for(var v=p.businessObject||p,f=d.businessObject||d;v.$parent;){if(v.$parent===f.processRef||f)return!0;v=v.$parent}return!1}(u,c)}).forEach(function(u){o(u)})}),this.postExecute("canvas.updateRoot",function(a){var c=a.context,l=c.oldRoot,u=c.newRoot;r(l).forEach(function(p){A(u,"bpmn:Process")&&o(p,u)})})}Hu.$inject=["eventBus","bpmnFactory"],it(Hu,Q),zs.$inject=["bpmnUpdater"],zs.prototype.execute=function(t){var e=t.dataStoreBo,n=t.newSemanticParent,i=t.newDiParent;t.oldSemanticParent=e.$parent,t.oldDiParent=e.di.$parent,this._bpmnUpdater.updateSemanticParent(e,n),this._bpmnUpdater.updateDiParent(e.di,i)},zs.prototype.revert=function(t){var e=t.dataStoreBo,n=t.oldSemanticParent,i=t.oldDiParent;this._bpmnUpdater.updateSemanticParent(e,n),this._bpmnUpdater.updateDiParent(e.di,i)},qu.$inject=["canvas","commandStack","elementRegistry","eventBus"],it(qu,Q);function Wu(t,e,n){Q.call(this,t),this.postExecuted("shape.delete",500,function(i){var r=i.context,o=r.hints,a=r.shape,c=r.oldParent;A(a,"bpmn:Lane")&&(o&&o.nested||function(l,u){var p,d,v,f=ai(u),y=[],b=[];$i(f,function(g){return g.y>l.y?b.push(g):y.push(g),g.children}),f.length&&(p=b.length&&y.length?l.height/2:l.height,y.length&&(d=n.calculateAdjustments(y,"y",p,l.y-10),n.makeSpace(d.movingShapes,d.resizingShapes,{x:0,y:p},"s")),b.length&&(v=n.calculateAdjustments(b,"y",-p,l.y+l.height+10),n.makeSpace(v.movingShapes,v.resizingShapes,{x:0,y:-p},"n")))}(a,c))})}Wu.$inject=["eventBus","modeling","spaceTool"],it(Wu,Q);function Gs(t,e){e.invoke(Q,this),this._bpmnReplace=t;var n=this;this.postExecuted("elements.create",500,function(i){var r=i.elements;r.filter(function(o){return jv(o,o.host)}).map(function(o){return r.indexOf(o)}).forEach(function(o){i.elements[o]=n.replaceShape(r[o])})},!0),this.preExecute("elements.move",500,function(i){var r=i.shapes,o=i.newHost;r.forEach(function(a,c){var l,u=a.host;jv(a,(l=u,r.indexOf(l)!==-1?u:o))&&(r[c]=n.replaceShape(a))})},!0)}function jv(t,e){return!be(t)&&A(t,"bpmn:BoundaryEvent")&&!e}function Ku(t,e,n){function i(r,o,a){var c,l,u,p,d,v,f,y,b=o.waypoints,g=r.outgoing.slice(),w=r.incoming.slice(),x=yu(b,y=pt(a.width)?ft(a):a);if(x){if(c=b.slice(0,x.index),l=b.slice(x.index+(x.bendpoint?1:0)),!c.length||!l.length)return;u=x.bendpoint?b[x.index]:y,c.length!==1&&Vv(r,c[c.length-1])||c.push(Fv(u)),l.length!==1&&Vv(r,l[0])||l.unshift(Fv(u))}p=o.source,d=o.target,e.canConnect(p,r,o)&&(n.reconnectEnd(o,r,c||y),v=o),e.canConnect(r,d,o)&&(v?f=n.connect(r,d,{type:o.type,waypoints:l}):(n.reconnectStart(o,r,l||y),f=o));var S=[].concat(v&&mt(w,function(C){return C.source===v.source})||[],f&&mt(g,function(C){return C.target===f.target})||[]);S.length&&n.removeElements(S)}Q.call(this,t),this.preExecute("elements.move",function(r){var o=r.newParent,a=r.shapes,c=r.delta,l=a[0];if(l&&o){o&&o.waypoints&&(r.newParent=o=o.parent);var u=ft(l),p={x:u.x+c.x,y:u.y+c.y},d=Pt(o.children,function(v){return e.canInsert(a,v)&&yu(v.waypoints,p)});d&&(r.targetFlow=d,r.position=p)}},!0),this.postExecuted("elements.move",function(r){var o=r.shapes,a=r.targetFlow,c=r.position;a&&i(o[0],a,c)},!0),this.preExecute("shape.create",function(r){var o=r.parent,a=r.shape;e.canInsert(a,o)&&(r.targetFlow=o,r.parent=o.parent)},!0),this.postExecuted("shape.create",function(r){var o=r.shape,a=r.targetFlow,c=r.position;a&&i(o,a,c)},!0)}function Vv(t,e){var n=e.x,i=e.y;return n>=t.x&&n<=t.x+t.width&&i>=t.y&&i<=t.y+t.height}function Fv(t){return $({},t)}function Xu(t,e){Q.call(this,t),this.preExecuted("connection.create",function(n){var i=n.context,r=i.source,o=i.target,a=o.incoming.slice();i.hints&&i.hints.createElementsBehavior===!1||A(r,"bpmn:EventBasedGateway")&&o.incoming.length&&a.filter(Yu).forEach(function(c){e.removeConnection(c)})}),this.preExecuted("shape.replace",function(n){var i=n.context.newShape;A(i,"bpmn:EventBasedGateway")&&i.outgoing.filter(Yu).map(function(r){return r.target}).reduce(function(r,o){var a=o.incoming.filter(Yu);return r.concat(a)},[]).forEach(function(r){r.source!==i&&e.removeConnection(r)})})}function Yu(t){return A(t,"bpmn:SequenceFlow")}Gs.$inject=["bpmnReplace","injector"],it(Gs,Q),Gs.prototype.replaceShape=function(t){var e,n,i=(n=et(t).eventDefinitions)&&n[0];return e=i?{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:i.$type}:{type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(t,e,{layoutConnection:!1})},it(Ku,Q),Ku.$inject=["eventBus","bpmnRules","modeling"],Xu.$inject=["eventBus","modeling"],it(Xu,Q);function Ju(t,e,n,i,r,o){function a(){return et(e.getRootElement()).$parent}function c(l){var u=et(l).categoryValueRef;if(u){var p=u.$parent;u&&(Yt(p.categoryValue,u),p&&!p.categoryValue.length&&function(d){Yt(a().get("rootElements"),d)}(p))}}r.invoke(Q,this),this.executed("shape.delete",function(l){var u,p=l.context.shape;if(A(p,"bpmn:Group")){var d=et(p).categoryValueRef,v=n.filter(function(f){return A(f,"bpmn:Group")});u=d,v.some(function(f){var y=et(f);return y.categoryValueRef&&y.categoryValueRef===u})||c(p)}}),this.reverted("shape.delete",function(l){var u=l.context.shape;if(A(u,"bpmn:Group")){var p=et(u).categoryValueRef,d=a(),v=p?p.$parent:null;Jt(v.get("categoryValue"),p),Jt(d.get("rootElements"),v)}}),this.execute("shape.create",function(l){var u=et(l.context.shape);if(A(u,"bpmn:Group")&&!u.categoryValueRef){var p=Nu(a(),t);u.categoryValueRef=p}}),this.revert("shape.create",function(l){var u=l.context.shape;A(u,"bpmn:Group")&&(c(u),delete et(u).categoryValueRef)}),i.on("moddleCopy.canCopyProperty",2e3,function(l){var u,p=l.property;if(A(p,"bpmn:CategoryValue"))return u=Nu(a(),t),o.copyElement(p,u)})}function Zu(t,e,n,i){var r,o,a,c;return(r=(i.y-n.y)*(e.x-t.x)-(i.x-n.x)*(e.y-t.y))==0?null:(o=t.y-n.y,a=t.x-n.x,c=((i.x-n.x)*o-(i.y-n.y)*a)/r,{x:Math.round(t.x+c*(e.x-t.x)),y:Math.round(t.y+c*(e.y-t.y))})}function $v(t){function e(n,i,r){var o,a={x:r.x,y:r.y-50},c={x:r.x-50,y:r.y},l=Zu(n,i,r,a),u=Zu(n,i,r,c);o=l&&u?zv(l,r)>zv(u,r)?u:l:l||u,n.original=o}t.on("bpmnElement.added",function(n){var i,r,o=n.element;o.waypoints&&(e((r=(i=o).waypoints)[0],r[1],ft(i.source)),e(r[r.length-1],r[r.length-2],ft(i.target)))})}function zv(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Qu(t){Q.call(this,t);var e=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var i=et(n.context.shape);wt(i,e)&&!i.di.get("isHorizontal")&&i.di.set("isHorizontal",!0)})}function Gv(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function Uv(t){return Math.atan((t[1].y-t[0].y)/(t[1].x-t[0].x))}function Hv(t,e){var n=e[0],i=e[1],r={x:i.x-n.x,y:i.y-n.y},o=function(a,c,l){var u=[{n:a[0]-l[0],lambda:c[0]},{n:a[1]-l[1],lambda:c[1]}];return-(u[0].n*c[0]+u[1].n*c[1])/(u[0].lambda*c[0]+u[1].lambda*c[1])}([n.x,n.y],[r.x,r.y],[t.x,t.y]);return{x:n.x+o*r.x,y:n.y+o*r.y}}function W_(t,e){var n=Hv(t,e);return Gv({x:n.x-t.x,y:n.y-t.y})}function Us(t,e){return Gv({x:t.x-e.x,y:t.y-e.y})}Ju.$inject=["bpmnFactory","canvas","elementRegistry","eventBus","injector","moddleCopy"],it(Ju,Q),$v.$inject=["eventBus"],Qu.$inject=["eventBus"],it(Qu,Q);var qv=Math.sqrt,Wv=Math.min,K_=Math.max,Kv=Math.abs;function Xv(t){return Math.pow(t,2)}function Zo(t,e){return qv(Xv(t.x-e.x)+Xv(t.y-e.y))}function X_(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,a=n.x-t.x,c=n.y-t.y,l=r*r+o*o,u=(r*a+o*c)/l,p=u*u-(a*a+c*c-i*i)/l;if(p<0&&p>-1e-6&&(p=0),p<0)return[];var d=qv(p),v=-u+d,f=-u-d,y={x:t.x-r*v,y:t.y-o*v};return p===0?[y]:[y,{x:t.x-r*f,y:t.y-o*f}].filter(function(b){return function(g,w,x){return Yv(g.x,w.x,x.x)&&Yv(g.y,w.y,x.y)}(b,t,e)})}function Yv(t,e,n){return t>=Wv(e,n)-Hs&&t<=K_(e,n)+Hs}var Hs=.1;function Jv(t,e){return Kv(t.x-e.x)<=Hs&&Kv(t.y-e.y)<=Hs}function Y_(t,e,n,i){var r=0,o=0,a=function(T){return{x:T.x+T.width/2,y:T.y+T.height/2}}(t),c=function(T,R){var D,z,P,_,B,V,G,J,tt,ct,at,H,q=0;for(q=0;q<R.length-1;q++){if(Jv(D=R[q],z=R[q+1])?V=[D]:(P=Zo(T,D),_=Zo(T,z),V=X_(D,z,T,Wv(P,_))),V.length<1)throw new Error("expected between [1, 2] circle -> line intersections");V.length===1&&(G={type:"bendpoint",position:V[0],segmentIndex:q,bendpointIndex:Jv(D,V[0])?q:q+1}),V.length===2&&(at=V[0],H=V[1],G={type:"segment",position:B={x:(at.x+H.x)/2,y:(at.y+H.y)/2},segmentIndex:q,relativeLocation:Zo(D,B)/Zo(D,z)}),J=Zo(G.position,T),(!ct||tt>J)&&(ct=G,tt=J)}return ct}(a,n),l=c.segmentIndex,u=function(T,R,D,z){var P=D.segmentIndex,_=R.length-T.length;if(z.segmentMove){var B=z.segmentMove.segmentStartIndex,V=z.segmentMove.newSegmentStartIndex;return P===B?V:P>=V?P+_<V?V:P+_:P}if(z.bendpointMove){var G,J=z.bendpointMove.insert,tt=z.bendpointMove.bendpointIndex;return _===0?P:(P>=tt&&(G=J?P+1:P-1),P<tt&&(G=P,J&&D.type!=="bendpoint"&&tt-1===P&&Zv(R,tt)<D.relativeLocation&&G++),G)}return _===0?P:z.connectionStart?P===0?0:null:z.connectionEnd&&P===T.length-2?R.length-2:null}(n,e,c,i);if(u===null)return{x:r,y:o};if(u<0||u>e.length-2)return{x:r,y:o};var p,d,v=Qv(n,l),f=Qv(e,u),y=c.position,b=function(T,R){var D=Us(T[0],T[1]),z=Us(T[0],R);return D===0?0:z/D}(v,y),g=(p=f,d=Uv(v),Uv(p)-d);if(c.type==="bendpoint"){var w=e.length-n.length,x=c.bendpointIndex,S=n[x];if(e.indexOf(S)!==-1)return{x:r,y:o};if(w===0){var C=e[x];return{x:C.x-c.position.x,y:C.y-c.position.y}}w<0&&x!==0&&x<n.length-1&&(b=Zv(n,x))}var I,s,h=(f[1].x-f[0].x)*b+f[0].x,m=(f[1].y-f[0].y)*b+f[0].y,E=(I={x:a.x-y.x,y:a.y-y.y},(s=g)?{x:Math.cos(s)*I.x-Math.sin(s)*I.y,y:Math.sin(s)*I.x+Math.cos(s)*I.y}:I);return zi({x:r=h+E.x-a.x,y:o=m+E.y-a.y})}function Zv(t,e){var n=Us(t[e-1],t[e]);return n/(n+Us(t[e],t[e+1]))}function Qv(t,e){return[t[e],t[e+1]]}function Qo(t,e,n){var i=Oo(e),r=Oo(n),o=Nn(t,i),a=o.x*(n.width/e.width),c=o.y*(n.height/e.height);return zi({x:r.x+a,y:r.y+c})}function ty(t,e,n){var i=Oo(t),r=Oo(e),o=Oo(n),a=Nn(t,i),c=Nn(i,r),l=function(f,y,b){var g=ot(y),w=ot(b);if(function(s,h){return function(m,E){return m.right!==E.right&&m.left!==E.left}(s,h)||function(m,E){return m.top!==E.top&&m.bottom!==E.bottom}(s,h)}(g,w))return null;var x,S,C,I=ge(y,f);if(I==="top")x={x:0,y:w.bottom-g.bottom};else if(I==="bottom")x={x:0,y:w.top-g.top};else if(I==="right")x={x:w.left-g.left,y:0};else{if(I!=="left")return null;x={x:w.right-g.right,y:0}}return S={x:f.x+x.x,y:f.y+x.y},C=ge(b,S),C!==I?null:x}(i,e,n);if(l)return l;var u=c.x*(n.width/e.width),p=c.y*(n.height/e.height),d=o.x+u,v=o.y+p;return zi({x:d+a.x-t.x,y:v+a.y-t.y})}var J_={width:90,height:20},ey="name",ny="text";function tp(t,e,n,i){Q.call(this,t),this.postExecute("element.updateProperties",function(r){var o=r.context,a=o.element,c=o.properties;if(ey in c&&e.updateLabel(a,c[ey]),ny in c&&A(a,"bpmn:TextAnnotation")){var l=i.getTextAnnotationBounds({x:a.x,y:a.y,width:a.width,height:a.height},c[ny]||"");e.updateLabel(a,c.text,l)}}),this.postExecute(["shape.create","connection.create"],function(r){var o=r.context;if((o.hints||{}).createElementsBehavior!==!1){var a=o.shape||o.connection,c=a.businessObject;if(!be(a)&&Ir(a)&&pn(a)){var l=ps(a),u=i.getExternalLabelBounds(J_,pn(a));e.createLabel(a,l,{id:c.id+"_label",businessObject:c,width:u.width,height:u.height})}}}),this.postExecute("shape.delete",function(r){var o=r.context,a=o.labelTarget,c=o.hints||{};a&&c.unsetLabel!==!1&&e.updateLabel(a,null,null,{removeShape:!1})}),this.postExecute(["label.create"],function(r){var o,a=r.context.shape;a.labelTarget&&A(a.labelTarget||a,"bpmn:BaseElement")&&((o=a.businessObject.di).label||(o.label=n.create("bpmndi:BPMNLabel",{bounds:n.create("dc:Bounds")})),$(o.label.bounds,{x:a.x,y:a.y,width:a.width,height:a.height}))}),this.postExecute(["connection.layout","connection.updateWaypoints"],function(r){var o=r.context;if((o.hints||{}).labelBehavior!==!1){var a,c=o.connection.label;c&&c.parent&&(a=function(l){var u=l.context,p=u.connection,d=p.label,v=$({},u.hints),f=u.newWaypoints||p.waypoints,y=u.oldWaypoints;return v.startChanged===void 0&&(v.startChanged=!!v.connectionStart),v.endChanged===void 0&&(v.endChanged=!!v.connectionEnd),Y_(d,f,y,v)}(r),e.moveShape(c,a))}}),this.postExecute(["shape.replace"],function(r){var o=r.context,a=o.newShape,c=o.oldShape,l=et(a);l&&Ir(l)&&c.label&&a.label&&(a.label.x=c.label.x,a.label.y=c.label.y)}),this.postExecute("shape.resize",function(r){var o,a=r.context,c=a.shape,l=a.newBounds,u=a.oldBounds;if(us(c)){var p=c.label,d=Z_(function(v,f){if(f.length){var y=function(b,g){var w=g.map(function(x){return{line:x,distance:W_(b,x)}});return We(w,"distance")[0].line}(v,f);return Hv(v,y)}}(ft(p),[[{x:(o=u).x,y:o.y},{x:o.x+(o.width||0),y:o.y}],[{x:o.x+(o.width||0),y:o.y},{x:o.x+(o.width||0),y:o.y+(o.height||0)}],[{x:o.x,y:o.y+(o.height||0)},{x:o.x+(o.width||0),y:o.y+(o.height||0)}],[{x:o.x,y:o.y},{x:o.x,y:o.y+(o.height||0)}]]),u,l);e.moveShape(p,d)}})}function Z_(t,e,n){return zi(Nn(Qo(t,e,n),t))}function qs(t,e,n){var i=Ks(t),r=ry(i,e),o=i[0];return r.length?r[r.length-1]:Qo(o.original||o,n,e)}function Ws(t,e,n){var i=Ks(t),r=ry(i,e),o=i[i.length-1];return r.length?r[0]:Qo(o.original||o,n,e)}function ep(t,e,n){var i=Ks(t),r=iy(e,n),o=i[0];return Qo(o.original||o,r,e)}function np(t,e,n){var i=Ks(t),r=iy(e,n),o=i[i.length-1];return Qo(o.original||o,r,e)}function iy(t,e){return{x:t.x-e.x,y:t.y-e.y,width:t.width,height:t.height}}function Ks(t){var e=t.waypoints;if(!e.length)throw new Error("connection#"+t.id+": no waypoints");return e}function ry(t,e){return mt(le(t,Q_),function(n){return function(i,r){return ge(r,i,1)==="intersect"}(n,e)})}function Q_(t){return t.original||t}function ip(t,e){Q.call(this,t),this.postExecute("shape.replace",function(n){var i=n.oldShape,r=n.newShape;if(function(p,d){return A(p,"bpmn:Participant")&&Mt(p)&&A(d,"bpmn:Participant")&&!Mt(d)}(i,r)){var o,a,c,l,u=(a=Ga([o=i],!1),c=[],l=[],a.forEach(function(p){p!==o&&(p.incoming.forEach(function(d){A(d,"bpmn:MessageFlow")&&c.push(d)}),p.outgoing.forEach(function(d){A(d,"bpmn:MessageFlow")&&l.push(d)}))},[]),{incoming:c,outgoing:l});u.incoming.forEach(function(p){var d=Ws(p,r,i);e.reconnectEnd(p,r,d)}),u.outgoing.forEach(function(p){var d=qs(p,r,i);e.reconnectStart(p,r,d)})}},!0)}it(tp,Q),tp.$inject=["eventBus","modeling","bpmnFactory","textRenderer"],ip.$inject=["eventBus","modeling"],it(ip,Q);function oy(t,e,n){t.on(["shape.move.rejected","create.rejected"],function(i){var r,o,a,c=i.context,l=c.shape;A(c.target,"bpmn:Collaboration")&&A(l,"bpmn:FlowNode")&&(r=i,o=n("flow elements must be children of pools/participants"),e.add({position:{x:r.x+5,y:r.y+5},type:"error",timeout:a||2e3,html:"<div>"+o+"</div>"}))})}function rp(t,e,n,i){Q.call(this,t);var r=i.get("dragging",!1);function o(a){var c,l,u=a.source,p=a.target;a.parent&&(A(a,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(u,p)||(l=!0),n.canConnectMessageFlow(u,p)&&(c="bpmn:MessageFlow")),A(a,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(u,p)||(l=!0),n.canConnectSequenceFlow(u,p)&&(c="bpmn:SequenceFlow")),A(a,"bpmn:Association")&&!n.canConnectAssociation(u,p)&&(l=!0),l&&e.removeConnection(a),c&&e.connect(u,p,{type:c,waypoints:a.waypoints.slice()}))}this.postExecuted("elements.move",function(a){L(a.closure.allConnections,o)},!0),this.preExecute("connection.reconnect",function(a){var c,l,u=a.context,p=u.connection,d=u.newSource||p.source,v=u.newTarget||p.target;(c=n.canConnect(d,v))&&c.type!==p.type&&(l=e.connect(d,v,{type:c.type,waypoints:p.waypoints.slice()}),e.removeConnection(p),u.connection=l,r&&function(f,y){var b,g=r.context(),w=g&&g.payload.previousSelection;!w||!w.length||(b=w.indexOf(f),b!==-1&&w.splice(b,1,y))}(p,l))}),this.postExecuted("element.updateProperties",function(a){var c,l=a.context,u=l.properties,p=l.element,d=p.businessObject;u.default&&(c=Pt(p.outgoing,Ke({id:p.businessObject.default.id})))&&e.updateProperties(c,{conditionExpression:void 0}),u.conditionExpression&&d.sourceRef.default===d&&e.updateProperties(p.source,{default:void 0})})}function op(t,e){Q.call(this,t),this.preExecute("shape.delete",function(n){var i=n.shape,r=i.parent;A(i,"bpmn:Participant")&&(n.collaborationRoot=r)},!0),this.postExecute("shape.delete",function(n){var i=n.collaborationRoot;i&&!i.businessObject.participants.length&&e.makeProcess()},!0)}function Xs(t,e,n,i,r,o){i.invoke(Q,this),this._bpmnReplace=t,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.create"],500,function(a){var c=a.context,l=c.parent,u=c.elements,p=e.canReplace(u,l);p&&this.replaceElements(u,p.replacements)},this),this.postExecuted(["elements.move"],500,function(a){var c=a.context,l=c.newParent,u=c.newHost,p=[];L(c.closure.topLevel,function(v){p=Ne(v)?p.concat(v.children):p.concat(v)}),p.length===1&&u&&(l=u);var d=e.canReplace(p,l);d&&this.replaceElements(p,d.replacements,u)},this),this.postExecute(["shape.replace"],1500,function(a){var c,l=a.context,u=l.oldShape,p=l.newShape,d=u.attachers;d&&d.length&&(c=e.canReplace(d,p),this.replaceElements(d,c.replacements))},this),this.postExecuted(["shape.replace"],1500,function(a){var c=a.context,l=c.oldShape,u=c.newShape;r.unclaimId(l.businessObject.id,l.businessObject),r.updateProperties(u,{id:l.id})})}oy.$inject=["eventBus","tooltips","translate"],it(rp,Q),rp.$inject=["eventBus","modeling","bpmnRules","injector"],op.$inject=["eventBus","modeling"],it(op,Q),it(Xs,Q),Xs.prototype.replaceElements=function(t,e){var n=this._elementRegistry,i=this._bpmnReplace,r=this._selection;L(e,function(o){var a={type:o.newElementType},c=n.get(o.oldElementId),l=t.indexOf(c);t[l]=i.replaceElement(c,a,{select:!1})}),e&&r.select(t)},Xs.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var Zi={width:300,height:60},ta={width:300,height:150},ay={width:140,height:120},sy={width:50,height:30};function cy(t){t.on("resize.start",1500,function(e){var n=e.context,i=n.shape,r=n.direction,o=n.balanced;(A(i,"bpmn:Lane")||A(i,"bpmn:Participant"))&&(n.resizeConstraints=function(a,c,l){var u=fn(a),p=!0,d=!0,v=Is(u,[u]),f=ot(a),y={},b={};return/e/.test(c)?b.right=f.left+Zi.width:/w/.test(c)&&(b.left=f.right-Zi.width),v.forEach(function(g){var w=ot(g);/n/.test(c)&&(w.top<f.top-10&&(p=!1),l&&Ys(f.top-w.bottom)<10&&Zs(y,"top",w.top+Zi.height),Ys(f.top-w.top)<5&&Js(b,"top",w.bottom-Zi.height)),/s/.test(c)&&(w.bottom>f.bottom+10&&(d=!1),l&&Ys(f.bottom-w.top)<10&&Js(y,"bottom",w.bottom-Zi.height),Ys(f.bottom-w.bottom)<5&&Zs(b,"bottom",w.top+Zi.height))}),u.children.filter(function(g){return!g.hidden&&!g.waypoints&&(A(g,"bpmn:FlowElement")||A(g,"bpmn:Artifact"))}).forEach(function(g){var w=ot(g);p&&/n/.test(c)&&Js(b,"top",w.top-rw),/e/.test(c)&&Zs(b,"right",w.right+nw),d&&/s/.test(c)&&Zs(b,"bottom",w.bottom+ow),/w/.test(c)&&Js(b,"left",w.left-iw)}),{min:b,max:y}}(i,r,o)),A(i,"bpmn:Participant")&&(n.minDimensions=ta),A(i,"bpmn:SubProcess")&&Mt(i)&&(n.minDimensions=ay),A(i,"bpmn:TextAnnotation")&&(n.minDimensions=sy)})}cy.$inject=["eventBus"];var Ys=Math.abs,tw=Math.min,ew=Math.max;function ly(t,e,n,i){var r=t[e];t[e]=r===void 0?n:i(n,r)}function Js(t,e,n){return ly(t,e,n,tw)}function Zs(t,e,n){return ly(t,e,n,ew)}var nw=20,iw=50,rw=20,ow=20;function uy(t,e){t.on("resize.start",1501,function(n){var i=n.context,r=i.shape;(A(r,"bpmn:Lane")||A(r,"bpmn:Participant"))&&(i.balanced=!Br(n))}),t.on("resize.end",1001,function(n){var i=n.context,r=i.shape,o=i.canExecute,a=i.newBounds;if(A(r,"bpmn:Lane")||A(r,"bpmn:Participant"))return o&&(a=Ld(a),e.resizeLane(r,a,i.balanced)),!1})}function ap(t,e,n){Q.call(this,t),this.preExecute("shape.delete",function(i){var r=i.context.shape;if(r.incoming.length===1&&r.outgoing.length===1){var o=r.incoming[0],a=r.outgoing[0];if(A(o,"bpmn:SequenceFlow")&&A(a,"bpmn:SequenceFlow")&&e.canConnect(o.source,a.target,o)){var c=function(l,u){var p=Zu(Gr(l[l.length-2]),Gr(l[l.length-1]),Gr(u[1]),Gr(u[0]));return p?[].concat(l.slice(0,l.length-1),[p],u.slice(1)):[Gr(l[0]),Gr(u[u.length-1])]}(o.waypoints,a.waypoints);n.reconnectEnd(o,a.target,c)}}})}function Gr(t){return t.original||t}uy.$inject=["eventBus","modeling"],it(ap,Q),ap.$inject=["eventBus","bpmnRules","modeling"];var aw=Math.max;function py(t){t.on("spaceTool.getMinDimensions",function(e){var n=e.shapes,i=e.axis,r=e.start,o={};return L(n,function(a){var c=a.id;A(a,"bpmn:Participant")&&(function(l){return l==="x"}(i)?o[c]=ta:o[c]={width:ta.width,height:sw(a,r)}),A(a,"bpmn:SubProcess")&&Mt(a)&&(o[c]=ay),A(a,"bpmn:TextAnnotation")&&(o[c]=sy)}),o})}function sw(t,e){var n;return ai(t).length?(n=function(i,r){var o,a=ai(i);return o=hy(a,r),i.height-o.height+Zi.height}(t,e),aw(ta.height,n)):ta.height}function hy(t,e){var n,i,r;for(n=0;n<t.length;n++)if(e>=(i=t[n]).y&&e<=i.y+i.height)return(r=ai(i)).length?hy(r,e):i}function sp(t,e){t.invoke(Q,this),this.postExecuted("shape.replace",function(n){var i=n.context.oldShape,r=n.context.newShape;if(A(r,"bpmn:SubProcess")&&A(i,"bpmn:Task")&&Mt(r)){var o,a={x:(o=r).x+o.width/6,y:o.y+o.height/2};e.createShape({type:"bpmn:StartEvent"},a,r)}})}py.$inject=["eventBus"],sp.$inject=["injector","modeling"],it(sp,Q);function cp(t,e,n,i){Q.call(this,t),this.executed(["shape.toggleCollapse"],500,function(r){var o,a=r.context.shape;A(a,"bpmn:SubProcess")&&(a.collapsed?et(a).di.isExpanded=!1:((o=a.children).length&&o.forEach(function(c){c.type!=="label"||c.businessObject.name||(c.hidden=!0)}),et(a).di.isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],500,function(r){var o=r.context.shape;o.collapsed?et(o).di.isExpanded=!1:et(o).di.isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],500,function(r){var o,a=r.context.shape,c=e._getDefaultSize(a);o=a.collapsed?function(l,u){return{x:l.x+(l.width-u.width)/2,y:l.y+(l.height-u.height)/2,width:u.width,height:u.height}}(a,c):function(l,u){var p,d,v=l.children,f=u;return(p=sv((d=v,d.filter(function(y){return!y.hidden})).concat([l])))?(f.width=Math.max(p.width,f.width),f.height=Math.max(p.height,f.height),f.x=p.x+(p.width-f.width)/2,f.y=p.y+(p.height-f.height)/2):(f.x=l.x+(l.width-f.width)/2,f.y=l.y+(l.height-f.height)/2),f}(a,c),n.resizeShape(a,o,null,{autoResize:!a.collapsed&&"nwse"})})}function lp(t,e,n,i){e.invoke(Q,this),this.preExecute("shape.delete",function(r){var o=r.context.shape,a=o.businessObject;be(o)||(A(o,"bpmn:Participant")&&Mt(o)&&n.ids.unclaim(a.processRef.id),i.unclaimId(a.id,a))}),this.preExecute("connection.delete",function(r){var o=r.context.connection.businessObject;i.unclaimId(o.id,o)}),this.preExecute("canvas.updateRoot",function(){var r=t.getRootElement(),o=r.businessObject;A(r,"bpmn:Collaboration")&&n.ids.unclaim(o.id)})}it(cp,Q),cp.$inject=["eventBus","elementFactory","modeling"],it(lp,Q),lp.$inject=["canvas","injector","moddle","modeling"];function up(t,e,n){var i;function r(){if(!i)throw new Error(n("out of bounds release"));return i}Q.call(this,t);var o=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(o,5e3,function(a){(i=i||new cw).enter()}),this.postExecuted(o,500,function(a){(function(){if(!i)throw new Error(n("out of bounds release"));var c=i.leave();c&&(e.updateLaneRefs(i.flowNodes,i.lanes),i=null)})()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(a){var c=a.context.shape,l=r();c.labelTarget||(A(c,"bpmn:Lane")&&l.addLane(c),A(c,"bpmn:FlowNode")&&l.addFlowNode(c))})}function cw(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(t){this.lanes.push(t)},this.addFlowNode=function(t){this.flowNodes.push(t)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function pp(t,e){Q.call(this,t),this.preExecute("connection.delete",function(n){var i=n.context.connection,r=i.source;(function(o,a){if(!A(o,"bpmn:SequenceFlow"))return!1;var c=et(a),l=et(o);return c.get("default")===l})(i,r)&&e.updateProperties(r,{default:null})})}up.$inject=["eventBus","modeling","translate"],it(up,Q),it(pp,Q),pp.$inject=["eventBus","modeling"];const lw={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","rootElementReferenceBehavior","createBehavior","fixHoverBehavior","createDataObjectBehavior","createParticipantBehavior","dataStoreBehavior","dataInputAssociationBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","messageFlowBehavior","modelingFeedback","removeElementBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","toggleElementCollapseBehaviour","spaceToolBehavior","subProcessStartEventBehavior","unclaimIdBehavior","unsetDefaultFlowBehavior","updateFlowNodeRefsBehavior"],adaptiveLabelPositioningBehavior:["type",Bu],appendBehavior:["type",Ou],associationBehavior:["type",Lu],attachEventBehavior:["type",Vs],boundaryEventBehavior:["type",ju],rootElementReferenceBehavior:["type",Vu],createBehavior:["type",Fu],fixHoverBehavior:["type",Dv],createDataObjectBehavior:["type",$u],createParticipantBehavior:["type",Uu],dataInputAssociationBehavior:["type",Hu],dataStoreBehavior:["type",qu],deleteLaneBehavior:["type",Wu],detachEventBehavior:["type",Gs],dropOnFlowBehavior:["type",Ku],eventBasedGatewayBehavior:["type",Xu],groupBehavior:["type",Ju],importDockingFix:["type",$v],isHorizontalFix:["type",Qu],labelBehavior:["type",tp],messageFlowBehavior:["type",ip],modelingFeedback:["type",oy],replaceConnectionBehavior:["type",rp],removeParticipantBehavior:["type",op],replaceElementBehaviour:["type",Xs],resizeBehavior:["type",cy],resizeLaneBehavior:["type",uy],removeElementBehavior:["type",ap],toggleElementCollapseBehaviour:["type",cp],spaceToolBehavior:["type",py],subProcessStartEventBehavior:["type",sp],unclaimIdBehavior:["type",lp],updateFlowNodeRefsBehavior:["type",up],unsetDefaultFlowBehavior:["type",pp]};function dy(t,e){var n=ge(t,e,-15);return n!=="intersect"?n:null}function xe(t){bi.call(this,t)}function hp(t){return!t||be(t)}function my(t){do{if(A(t,"bpmn:Process"))return et(t);if(A(t,"bpmn:Participant"))return et(t).processRef||et(t)}while(t=t.parent)}function dp(t){return A(t,"bpmn:TextAnnotation")}function mp(t){return A(t,"bpmn:Group")&&!t.labelTarget}function fp(t){return A(t,"bpmn:BoundaryEvent")&&Bn(t,"bpmn:CompensateEventDefinition")}function Ur(t){return et(t).isForCompensation}function fy(t){for(var e=t;e=e.parent;){if(A(e,"bpmn:FlowElementsContainer"))return et(e);if(A(e,"bpmn:Participant"))return et(e).processRef}return null}function Bn(t,e){return!!Pt(et(t).eventDefinitions||[],function(n){return A(n,e)})}function vy(t,e){return(et(t).eventDefinitions||[]).every(function(n){return A(n,e)})}function yy(t){return A(t,"bpmn:ReceiveTask")||A(t,"bpmn:IntermediateCatchEvent")&&(Bn(t,"bpmn:MessageEventDefinition")||Bn(t,"bpmn:TimerEventDefinition")||Bn(t,"bpmn:ConditionalEventDefinition")||Bn(t,"bpmn:SignalEventDefinition"))}function Qs(t){return t.waypoints}function vp(t,e){var n=function(i){for(var r=[];i;)(i=i.parent)&&r.push(i);return r}(e);return n.indexOf(t)!==-1}function tc(t,e,n){if(hp(t)||hp(e))return null;if(!A(n,"bpmn:DataAssociation")){if(Cy(t,e))return{type:"bpmn:MessageFlow"};if(Ty(t,e))return{type:"bpmn:SequenceFlow"}}var i=gp(t,e);return i||(fp(t)&&Ur(e)?{type:"bpmn:Association",associationDirection:"One"}:!!Sy(t,e)&&{type:"bpmn:Association"})}function Hr(t,e,n){return!(!be(t)&&!mp(t))||!(A(e,"bpmn:Participant")&&!Mt(e))&&(A(t,"bpmn:Participant")?A(e,"bpmn:Process")||A(e,"bpmn:Collaboration"):wt(t,["bpmn:DataInput","bpmn:DataOutput"])&&t.parent?e===t.parent:A(t,"bpmn:Lane")?A(e,"bpmn:Participant")||A(e,"bpmn:Lane"):!(A(t,"bpmn:BoundaryEvent")&&!function(i){return et(i).cancelActivity&&(gy(i)||by(i))}(t))&&(A(t,"bpmn:FlowElement")&&!A(t,"bpmn:DataStoreReference")?A(e,"bpmn:FlowElementsContainer")?Mt(e):wt(e,["bpmn:Participant","bpmn:Lane"]):A(t,"bpmn:DataStoreReference")&&A(e,"bpmn:Collaboration")?si(et(e).get("participants"),function(i){return!!i.get("processRef")}):wt(t,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?wt(e,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):!!A(t,"bpmn:MessageFlow")&&(A(e,"bpmn:Collaboration")||t.source.parent==e||t.target.parent==e)))}function uw(t){return A(t,"bpmn:Lane")}function pw(t){return!!function(e){return!be(e)&&A(e,"bpmn:BoundaryEvent")}(t)||!(!A(t,"bpmn:IntermediateThrowEvent")||!gy(t))||A(t,"bpmn:IntermediateCatchEvent")&&by(t)}function gy(t){var e=et(t);return e&&!(e.eventDefinitions&&e.eventDefinitions.length)}function by(t){return xy(t,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function xy(t,e){return e.some(function(n){return Bn(t,n)})}function ea(t,e,n,i){if(Array.isArray(t)||(t=[t]),t.length!==1)return!1;var r=t[0];return!be(r)&&!!pw(r)&&!Ne(e)&&!(!A(e,"bpmn:Activity")||Ur(e))&&!(i&&!dy(i,e))&&!function(o){return A(o,"bpmn:ReceiveTask")&&Pt(o.incoming,function(a){return A(a.source,"bpmn:EventBasedGateway")})}(e)&&"attach"}function Ey(t,e,n){if(!e)return!1;var i={replacements:[]};return L(t,function(r){Ne(e)||A(r,"bpmn:StartEvent")&&r.type!=="label"&&Hr(r,e)&&(function(o){return o&&et(o).isInterrupting!==!1}(r)||i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),(function(o){return ss(o,"bpmn:ErrorEventDefinition")}(r)||function(o){return ss(o,"bpmn:EscalationEventDefinition")}(r)||function(o){return ss(o,"bpmn:CompensateEventDefinition")}(r))&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),xy(r,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&A(e,"bpmn:SubProcess")&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"})),A(e,"bpmn:Transaction")||Bn(r,"bpmn:CancelEventDefinition")&&r.type!=="label"&&(A(r,"bpmn:EndEvent")&&Hr(r,e)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:EndEvent"}),A(r,"bpmn:BoundaryEvent")&&ea(r,e,0,n)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:BoundaryEvent"}))}),!!i.replacements.length&&i}function _y(t,e){return!si(t,uw)&&(!e||t.every(function(n){return Hr(n,e)}))}function yp(t,e,n,i){return!!e&&(!(!be(t)&&!mp(t))||n!==e&&(!n||!vp(n,e))&&(Hr(t,e)||ec(t,e)))}function wy(t,e){return A(t,"bpmn:SubProcess")?Mt(t)&&(!e||e.width>=100&&e.height>=80):A(t,"bpmn:Lane")?!e||e.width>=130&&e.height>=60:A(t,"bpmn:Participant")?!e||e.width>=250&&e.height>=50:!!dp(t)||!!mp(t)}function Sy(t,e){return!Qs(t)&&!Qs(e)&&(!(!fp(t)||!Ur(e))||!vp(e,t)&&!vp(t,e)&&(!!function(n,i){var r=dp(n),o=dp(i);return(r||o)&&r!==o}(t,e)||!!gp(t,e)))}function Cy(t,e){return!(ky(t)&&!ky(e))&&A(i=t,"bpmn:InteractionNode")&&!A(i,"bpmn:BoundaryEvent")&&(!A(i,"bpmn:Event")||A(i,"bpmn:ThrowEvent")&&vy(i,"bpmn:MessageEventDefinition"))&&function(r){return A(r,"bpmn:InteractionNode")&&!Ur(r)&&(!A(r,"bpmn:Event")||A(r,"bpmn:CatchEvent")&&vy(r,"bpmn:MessageEventDefinition"))&&!(A(r,"bpmn:BoundaryEvent")&&!Bn(r,"bpmn:MessageEventDefinition"))}(e)&&(n=e,my(t)!==my(n));var n,i}function Ty(t,e){return!(yy(e)&&e.incoming.length>0&&(n=e.incoming,(n=n||[]).some(hw))&&!A(t,"bpmn:EventBasedGateway"))&&A(r=t,"bpmn:FlowNode")&&!A(r,"bpmn:EndEvent")&&!Ne(r)&&!(A(r,"bpmn:IntermediateThrowEvent")&&Bn(r,"bpmn:LinkEventDefinition"))&&!fp(r)&&!Ur(r)&&function(o){return A(o,"bpmn:FlowNode")&&!A(o,"bpmn:StartEvent")&&!A(o,"bpmn:BoundaryEvent")&&!Ne(o)&&!(A(o,"bpmn:IntermediateCatchEvent")&&Bn(o,"bpmn:LinkEventDefinition"))&&!Ur(o)}(e)&&(i=e,fy(t)===fy(i))&&!(A(t,"bpmn:EventBasedGateway")&&!yy(e));var n,i,r}function gp(t,e){return wt(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&wt(e,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:!(!wt(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])||!wt(t,["bpmn:Activity","bpmn:CatchEvent"]))&&{type:"bpmn:DataOutputAssociation"}}function ec(t,e,n){if(!e)return!1;if(Array.isArray(t)){if(t.length!==1)return!1;t=t[0]}return e.source!==t&&e.target!==t&&wt(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!be(e)&&A(t,"bpmn:FlowNode")&&!A(t,"bpmn:BoundaryEvent")&&Hr(t,e.parent)}function Ay(t,e){return!!be(e)||!(A(e,"bpmn:Lane")&&!function(n,i){return n&&i&&n.indexOf(i)!==-1}(t,e.parent))}function hw(t){if(t&&t.source)return A(t.source,"bpmn:EventBasedGateway")}function ky(t){return gs(t,"bpmn:Process")||gs(t,"bpmn:Collaboration")}it(xe,bi),xe.$inject=["eventBus"],xe.prototype.init=function(){this.addRule("connection.start",function(t){return function(e){return hp(e)?null:wt(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}(t.source)}),this.addRule("connection.create",function(t){var e=t.source,n=t.target,i=t.hints||{},r=i.targetParent;if(i.targetAttach)return!1;r&&(n.parent=r);try{return tc(e,n)}finally{r&&(n.parent=null)}}),this.addRule("connection.reconnect",function(t){var e=t.connection;return tc(t.source,t.target,e)}),this.addRule("connection.updateWaypoints",function(t){return{type:t.connection.type}}),this.addRule("shape.resize",function(t){return wy(t.shape,t.newBounds)}),this.addRule("elements.create",function(t){var e=t.elements,n=t.position,i=t.target;return!(Qs(i)&&!ec(e,i))&&ji(e,function(r){return Qs(r)?tc(r.source,r.target,r):r.host?ea(r,r.host,null,n):yp(r,i,null)})}),this.addRule("elements.move",function(t){var e=t.target,n=t.shapes,i=t.position;return ea(n,e,null,i)||Ey(n,e,i)||_y(n,e)||ec(n,e)}),this.addRule("shape.create",function(t){return yp(t.shape,t.target,t.source,t.position)}),this.addRule("shape.attach",function(t){return ea(t.shape,t.target,null,t.position)}),this.addRule("element.copy",function(t){var e=t.element;return Ay(t.elements,e)})},xe.prototype.canConnectMessageFlow=Cy,xe.prototype.canConnectSequenceFlow=Ty,xe.prototype.canConnectDataAssociation=gp,xe.prototype.canConnectAssociation=Sy,xe.prototype.canMove=_y,xe.prototype.canAttach=ea,xe.prototype.canReplace=Ey,xe.prototype.canDrop=Hr,xe.prototype.canInsert=ec,xe.prototype.canCreate=yp,xe.prototype.canConnect=tc,xe.prototype.canResize=wy,xe.prototype.canCopy=Ay;const dw={__depends__:[Dn],__init__:["bpmnRules"],bpmnRules:["type",xe]};function Py(t,e){t.on("saveXML.start",2e3,function(){var n,i,r=e.getRootElement(),o=et(r).di;n=mt(n=Ga([r],!1),function(a){return a!==r&&!a.labelTarget}),i=le(n,Rr),o.set("planeElement",i)})}Py.$inject=["eventBus","canvas"];const mw={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",Py]};function nc(t){Q.call(this,t);var e=this;this.preExecute(["shape.create","connection.create"],function(n){var i=n.context,r=i.shape||i.connection,o=i.parent,a=e.getOrdering(r,o);a&&(a.parent!==void 0&&(i.parent=a.parent),i.parentIndex=a.index)}),this.preExecute(["shape.move","connection.move"],function(n){var i=n.context,r=i.shape||i.connection,o=i.newParent||r.parent,a=e.getOrdering(r,o);a&&(a.parent!==void 0&&(i.newParent=a.parent),i.newParentIndex=a.index)})}function bp(t,e,n){nc.call(this,t);var i=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:3,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(o){var a=o.order;if(a||(o.order=a=function(c){if(c.labelTarget)return{level:10};var l=Pt(i,function(u){return wt(c,[u.type])});return l&&l.order||{level:1}}(o)),!a)throw new Error("no order for <"+o.id+">");return a}this.getOrdering=function(o,a){if(o.labelTarget)return{parent:e.getRootElement(),index:-1};var c=r(o);c.containers&&(a=function(p,d,v){for(var f=d;f&&!wt(f,v);)f=f.parent;if(!f)throw new Error("no parent for <"+p.id+"> in <"+(d&&d.id)+">");return f}(o,a,c.containers));var l=a.children.indexOf(o),u=ml(a.children,function(p){return!(!o.labelTarget&&p.labelTarget)&&c.level<r(p).level});return u!==-1&&l!==-1&&l<u&&(u-=1),{index:u,parent:a}}}nc.prototype.getOrdering=function(t,e){return null},it(nc,Q),bp.$inject=["eventBus","canvas","translate"],it(bp,nc);const fw={__depends__:[ls],__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",bp]};function Ht(t,e){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=e,this._eventBus=t,this._uid=1,t.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Ht.$inject=["eventBus","injector"],Ht.prototype.execute=function(t,e){if(!t)throw new Error("command required");this._currentExecution.trigger="execute";var n={command:t,context:e};this._pushAction(n),this._internalExecute(n),this._popAction(n)},Ht.prototype.canExecute=function(t,e){var n={command:t,context:e},i=this._getHandler(t),r=this._fire(t,"canExecute",n);if(r===void 0){if(!i)return!1;i.canExecute&&(r=i.canExecute(e))}return r},Ht.prototype.clear=function(t){this._stack.length=0,this._stackIdx=-1,t!==!1&&this._fire("changed",{trigger:"clear"})},Ht.prototype.undo=function(){var t,e=this._getUndoAction();if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),(t=this._getUndoAction())&&t.id===e.id);)e=t;this._popAction()}},Ht.prototype.redo=function(){var t,e=this._getRedoAction();if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),(t=this._getRedoAction())&&t.id===e.id);)e=t;this._popAction()}},Ht.prototype.register=function(t,e){this._setHandler(t,e)},Ht.prototype.registerHandler=function(t,e){if(!t||!e)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(e);this.register(t,n)},Ht.prototype.canUndo=function(){return!!this._getUndoAction()},Ht.prototype.canRedo=function(){return!!this._getRedoAction()},Ht.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},Ht.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},Ht.prototype._internalUndo=function(t){var e=this,n=t.command,i=t.context,r=this._getHandler(n);this._atomicDo(function(){e._fire(n,"revert",t),r.revert&&e._markDirty(r.revert(i)),e._revertedAction(t),e._fire(n,"reverted",t)})},Ht.prototype._fire=function(t,e,n){arguments.length<3&&(n=e,e=null);var i,r,o,a=e?[t+"."+e,e]:[t];for(n=this._eventBus.createEvent(n),i=0;(r=a[i])&&(o=this._eventBus.fire("commandStack."+r,n),!n.cancelBubble);i++);return o},Ht.prototype._createId=function(){return this._uid++},Ht.prototype._atomicDo=function(t){var e=this._currentExecution;e.atomic=!0;try{t()}finally{e.atomic=!1}},Ht.prototype._internalExecute=function(t,e){var n=this,i=t.command,r=t.context,o=this._getHandler(i);if(!o)throw new Error("no command handler registered for <"+i+">");this._pushAction(t),e||(this._fire(i,"preExecute",t),o.preExecute&&o.preExecute(r),this._fire(i,"preExecuted",t)),this._atomicDo(function(){n._fire(i,"execute",t),o.execute&&n._markDirty(o.execute(r)),n._executedAction(t,e),n._fire(i,"executed",t)}),e||(this._fire(i,"postExecute",t),o.postExecute&&o.postExecute(r),this._fire(i,"postExecuted",t)),this._popAction(t)},Ht.prototype._pushAction=function(t){var e=this._currentExecution,n=e.actions,i=n[0];if(e.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+t.command+")");t.id||(t.id=i&&i.id||this._createId()),n.push(t)},Ht.prototype._popAction=function(){var t=this._currentExecution,e=t.trigger,n=t.actions,i=t.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:fl("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:e}),t.trigger=null)},Ht.prototype._markDirty=function(t){var e=this._currentExecution;t&&(t=gt(t)?t:[t],e.dirty=e.dirty.concat(t))},Ht.prototype._executedAction=function(t,e){var n=++this._stackIdx;e||this._stack.splice(n,this._stack.length,t)},Ht.prototype._revertedAction=function(t){this._stackIdx--},Ht.prototype._getHandler=function(t){return this._handlerMap[t]},Ht.prototype._setHandler=function(t,e){if(!t||!e)throw new Error("command and handler required");if(this._handlerMap[t])throw new Error("overriding handler for command <"+t+">");this._handlerMap[t]=e};const vw={commandStack:["type",Ht]};var yw=new iu("tt");function xp(t,e){t.style.display=e===!1?"none":""}var My="djs-tooltip",Ep="."+My;function Me(t,e){var n,i;this._eventBus=t,this._canvas=e,this._ids=yw,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=(n=e.getContainer(),i=Vt('<div class="djs-tooltip-container" style="position: absolute; width: 0; height: 0;" />'),n.insertBefore(i,n.firstChild),i);var r=this;ze.bind(this._tooltipRoot,Ep,"mousedown",function(o){o.stopPropagation()}),ze.bind(this._tooltipRoot,Ep,"mouseover",function(o){r.trigger("mouseover",o)}),ze.bind(this._tooltipRoot,Ep,"mouseout",function(o){r.trigger("mouseout",o)}),this._init()}Me.$inject=["eventBus","canvas"],Me.prototype.add=function(t){if(!t.position)throw new Error("must specifiy tooltip position");if(!t.html)throw new Error("must specifiy tooltip html");var e=this._ids.next();return t=$({},this._tooltipDefaults,t,{id:e}),this._addTooltip(t),t.timeout&&this.setTimeout(t),e},Me.prototype.trigger=function(t,e){var n=e.delegateTarget||e.target,i=this.get($e(n,"data-tooltip-id"));i&&(t==="mouseover"&&i.timeout&&this.clearTimeout(i),t==="mouseout"&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))},Me.prototype.get=function(t){return typeof t!="string"&&(t=t.id),this._tooltips[t]},Me.prototype.clearTimeout=function(t){if(t=this.get(t)){var e=t.removeTimer;e&&(clearTimeout(e),t.removeTimer=null)}},Me.prototype.setTimeout=function(t){if(t=this.get(t)){this.clearTimeout(t);var e=this;t.removeTimer=setTimeout(function(){e.remove(t)},t.timeout)}},Me.prototype.remove=function(t){var e=this.get(t);e&&(An(e.html),An(e.htmlContainer),delete e.htmlContainer,delete this._tooltips[e.id])},Me.prototype.show=function(){xp(this._tooltipRoot)},Me.prototype.hide=function(){xp(this._tooltipRoot,!1)},Me.prototype._updateRoot=function(t){var e=t.scale||1,n=t.scale||1,i="matrix("+e+",0,0,"+n+","+-1*t.x*e+","+-1*t.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i},Me.prototype._addTooltip=function(t){var e,n=t.id,i=t.html,r=this._tooltipRoot;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),Ie(i)&&(i=Vt(i)),(e=Vt('<div data-tooltip-id="'+n+'" class="'+My+'" style="position: absolute">')).appendChild(i),t.type&&oe(e).add("djs-tooltip-"+t.type),t.className&&oe(e).add(t.className),t.htmlContainer=e,r.appendChild(e),this._tooltips[n]=t,this._updateTooltip(t)},Me.prototype._updateTooltip=function(t){var e,n,i,r=t.position,o=t.htmlContainer;e=o,n=r.x,i=r.y,$(e.style,{left:n+"px",top:i+"px"})},Me.prototype._updateTooltipVisibilty=function(t){L(this._tooltips,function(e){var n=e.show,i=e.htmlContainer,r=!0;n&&((n.minZoom>t.scale||n.maxZoom<t.scale)&&(r=!1),xp(i,r))})},Me.prototype._init=function(){var t=this;this._eventBus.on("canvas.viewbox.changing",function(e){t.hide()}),this._eventBus.on("canvas.viewbox.changed",function(e){var n;n=e.viewbox,t._updateRoot(n),t._updateTooltipVisibilty(n),t.show()})};const gw={__init__:["tooltips"],tooltips:["type",Me]};function qr(t,e){if(typeof e!="function")throw new Error("removeFn iterator must be a function");if(t){for(var n;n=t[0];)e(n);return t}}function _p(t,e,n){Q.call(this,e);var i=t.get("movePreview",!1);e.on("shape.move.start",1400,function(r){var o=r.context,a=o.shapes,c=o.validatedShapes;o.shapes=Ry(a),o.validatedShapes=Ry(c)}),i&&e.on("shape.move.start",250,function(r){var o=r.context,a=o.shapes,c=[];L(a,function(l){L(l.labels,function(u){u.hidden||o.shapes.indexOf(u)!==-1||c.push(u),l.labelTarget&&c.push(l)})}),L(c,function(l){i.makeDraggable(o,l,!0)})}),this.preExecuted("elements.move",1400,function(r){var o=r.context.closure,a=o.enclosedElements,c=[];L(a,function(l){L(l.labels,function(u){a[u.id]||c.push(u)})}),o.addAll(c)}),this.preExecute(["connection.delete","shape.delete"],function(r){var o=r.context;qr((o.connection||o.shape).labels,function(a){n.removeShape(a,{nested:!0})})}),this.execute("shape.delete",function(r){var o=r.context,a=o.shape,c=a.labelTarget;c&&(o.labelTargetIndex=Ol(c.labels,a),o.labelTarget=c,a.labelTarget=null)}),this.revert("shape.delete",function(r){var o=r.context,a=o.shape,c=o.labelTarget,l=o.labelTargetIndex;c&&(Jt(c.labels,a,l),a.labelTarget=c)})}function Ry(t){return mt(t,function(e){return t.indexOf(e.labelTarget)===-1})}it(_p,Q),_p.$inject=["injector","eventBus","modeling"];const bw={__init__:["labelSupport"],labelSupport:["type",_p]};var Ny="attach-ok";function wp(t,e,n,i,r){Q.call(this,e);var o=t.get("movePreview",!1);e.on("shape.move.start",1401,function(a){var c,l,u=a.context,p=u.shapes,d=u.validatedShapes;u.shapes=(l=Sp(c=p),ed("id",c,l)),u.validatedShapes=function(v){var f=Vi(v,"id");return mt(v,function(y){for(;y;){if(y.host&&f[y.host.id])return!1;y=y.parent}return!0})}(d)}),o&&e.on("shape.move.start",251,function(a){var c=a.context;L(Sp(c.shapes),function(l){o.makeDraggable(c,l,!0),L(l.labels,function(u){o.makeDraggable(c,u,!0)})})}),o&&e.on("shape.move.start",function(a){var c=a.context.shapes;if(c.length===1){var l=c[0].host;l&&(n.addMarker(l,Ny),e.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(l,Ny)}))}}),this.preExecuted("elements.move",1401,function(a){var c=a.context,l=c.closure;L(Sp(c.shapes),function(u){l.add(u,l.topLevel[u.host.id])})}),this.postExecuted("elements.move",function(a){var c=a.context,l=c.shapes,u=c.newHost;u&&l.length!==1||L(u?l:mt(l,function(p){var d,v=p.host;return function(f){return!!f.host}(p)&&(d=v,l.indexOf(d)===-1)}),function(p){r.updateAttachment(p,u)})}),this.postExecuted("elements.move",function(a){L(a.context.shapes,function(c){L(c.attachers,function(l){L(l.outgoing.slice(),function(u){i.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target})||r.removeConnection(u)}),L(l.incoming.slice(),function(u){i.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target})||r.removeConnection(u)})})})}),this.postExecute("shape.create",function(a){var c=a.context,l=c.shape,u=c.host;u&&r.updateAttachment(l,u)}),this.postExecute("shape.replace",function(a){var c=a.context,l=c.oldShape,u=c.newShape;qr(l.attachers,function(p){i.allowed("elements.move",{target:u,shapes:[p]})==="attach"?r.updateAttachment(p,u):r.removeShape(p)}),u.attachers.length&&L(u.attachers,function(p){var d=ty(p,l,u);r.moveShape(p,d,p.parent)})}),this.postExecute("shape.resize",function(a){var c=a.context,l=c.shape,u=c.oldBounds,p=c.newBounds,d=l.attachers;(c.hints||{}).attachSupport!==!1&&L(d,function(v){var f=ty(v,u,p);r.moveShape(v,f,v.parent),L(v.labels,function(y){r.moveShape(y,f,y.parent)})})}),this.preExecute("shape.delete",function(a){var c=a.context.shape;qr(c.attachers,function(l){r.removeShape(l)}),c.host&&r.updateAttachment(c,null)})}function Sp(t){return vo(le(t,function(e){return e.attachers||[]}))}it(wp,Q),wp.$inject=["injector","eventBus","canvas","rules","modeling"];const xw={__depends__:[Dn],__init__:["attachSupport"],attachSupport:["type",wp]};function Qi(t,e){this._eventBus=t,this._dragging=e,this._tools=[],this._active=null}Qi.$inject=["eventBus","dragging"],Qi.prototype.registerTool=function(t,e){var n=this._tools;if(!e)throw new Error(`A tool has to be registered with it's "events"`);n.push(t),this.bindEvents(t,e)},Qi.prototype.isActive=function(t){return t&&this._active===t},Qi.prototype.length=function(t){return this._tools.length},Qi.prototype.setActive=function(t){var e=this._eventBus;this._active!==t&&(this._active=t,e.fire("tool-manager.update",{tool:t}))},Qi.prototype.bindEvents=function(t,e){var n=this._eventBus,i=this._dragging,r=[];n.on(e.tool+".init",function(o){if(!o.context.reactivate&&this.isActive(t))return this.setActive(null),void i.cancel();this.setActive(t)},this),L(e,function(o){r.push(o+".ended"),r.push(o+".canceled")}),n.on(r,250,function(o){this._active&&(function(a){var c=a.originalEvent&&a.originalEvent.target;return c&&Fi(c,'.group[data-group="tools"]')}(o)||this.setActive(null))},this)};const ic={__depends__:[Kn],__init__:["toolManager"],toolManager:["type",Qi]};function na(t,e){return t.indexOf(e)!==-1}var Cp=Math.abs,Ew=Math.round,Jn={x:"width",y:"height"},Iy="crosshair",rc={n:"top",w:"left",s:"bottom",e:"right"},Dy={n:"s",w:"e",s:"n",e:"w"},oc=20;function Zn(t,e,n,i,r,o,a){this._canvas=t,this._dragging=e,this._eventBus=n,this._modeling=i,this._rules=r,this._toolManager=o,this._mouse=a;var c=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(l){n.once("spaceTool.selection.ended",function(){c.activateMakeSpace(l.originalEvent)})}),n.on("spaceTool.move",1500,function(l){var u=l.context,p=u.initialized;p||(p=u.initialized=c.init(l,u)),p&&Oy(l)}),n.on("spaceTool.end",function(l){var u=l.context,p=u.axis,d=u.direction,v=u.movingShapes,f=u.resizingShapes,y=u.start;if(u.initialized){Oy(l);var b={x:0,y:0};b[p]=Ew(l["d"+p]),c.makeSpace(v,f,b,d,y),n.once("spaceTool.ended",function(g){c.activateSelection(g.originalEvent,!0,!0)})}})}function By(t){return{top:t.top-oc,right:t.right+oc,bottom:t.bottom+oc,left:t.left-oc}}function Oy(t){var e,n,i=t.context.spaceToolConstraints;i&&(pt(i.left)&&(e=Math.max(t.x,i.left),t.dx=t.dx+e-t.x,t.x=e),pt(i.right)&&(e=Math.min(t.x,i.right),t.dx=t.dx+e-t.x,t.x=e),pt(i.top)&&(n=Math.max(t.y,i.top),t.dy=t.dy+n-t.y,t.y=n),pt(i.bottom)&&(n=Math.min(t.y,i.bottom),t.dy=t.dy+n-t.y,t.y=n))}function Tp(t,e){return t.indexOf(e)!==-1}function Ap(t){return!!t.waypoints}function Ly(t){return!!t.labelTarget}Zn.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],Zn.prototype.activateSelection=function(t,e,n){this._dragging.init(t,"spaceTool.selection",{autoActivate:e,cursor:Iy,data:{context:{reactivate:n}},trapClick:!1})},Zn.prototype.activateMakeSpace=function(t){this._dragging.init(t,"spaceTool",{autoActivate:!0,cursor:Iy,data:{context:{}}})},Zn.prototype.makeSpace=function(t,e,n,i,r){return this._modeling.createSpace(t,e,n,i,r)},Zn.prototype.init=function(t,e){var n=Cp(t.dx)>Cp(t.dy)?"x":"y",i=t["d"+n],r=t[n]-i;if(Cp(i)<5)return!1;i<0&&(i*=-1),Br(t)&&(i*=-1);var o=function(u,p){if(u==="x"){if(p>0)return"e";if(p<0)return"w"}if(u==="y"){if(p>0)return"s";if(p<0)return"n"}return null}(n,i),a=Ga(this._canvas.getRootElement(),!0),c=this.calculateAdjustments(a,n,i,r),l=function(u,p,d,v,f){var y=u.movingShapes,b=u.resizingShapes;if(b.length){var g,w,x={};return L(b,function(S){var C,I,s,h=ot(S),m=mt(S.children,function(R){return!(Ap(R)||Ly(R)||Tp(y,R)||Tp(b,R))}),E=mt(S.children,function(R){return!Ap(R)&&!Ly(R)&&Tp(y,R)});m.length&&(I=By(ot(ye(m))),C=v-h[rc[d]]+I[rc[d]],d==="n"?x.bottom=w=pt(w)?Math.min(w,C):C:d==="w"?x.right=w=pt(w)?Math.min(w,C):C:d==="s"?x.top=g=pt(g)?Math.max(g,C):C:d==="e"&&(x.left=g=pt(g)?Math.max(g,C):C)),E.length&&(s=By(ot(ye(E))),C=v-s[rc[Dy[d]]]+h[rc[Dy[d]]],d==="n"?x.bottom=w=pt(w)?Math.min(w,C):C:d==="w"?x.right=w=pt(w)?Math.min(w,C):C:d==="s"?x.top=g=pt(g)?Math.max(g,C):C:d==="e"&&(x.left=g=pt(g)?Math.max(g,C):C));var T=f&&f[S.id];T&&(d==="n"?(C=v+S[Jn[p]]-T[Jn[p]],x.bottom=w=pt(w)?Math.min(w,C):C):d==="w"?(C=v+S[Jn[p]]-T[Jn[p]],x.right=w=pt(w)?Math.min(w,C):C):d==="s"?(C=v-S[Jn[p]]+T[Jn[p]],x.top=g=pt(g)?Math.max(g,C):C):d==="e"&&(C=v-S[Jn[p]]+T[Jn[p]],x.left=g=pt(g)?Math.max(g,C):C))}),x}}(c,n,o,r,this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:c.resizingShapes,start:r}));return $(e,c,{axis:n,direction:o,spaceToolConstraints:l,start:r}),vs("resize-"+(n==="x"?"ew":"ns")),!0},Zn.prototype.calculateAdjustments=function(t,e,n,i){var r=this._rules,o=[],a=[];return L(t,function(c){if(c.parent&&!Ap(c)){var l=c[e],u=l+c[Jn[e]];return n>0&&l>i||n<0&&u<i?o.push(c):l<i&&u>i&&r.allowed("shape.resize",{shape:c})?a.push(c):void 0}}),{movingShapes:o,resizingShapes:a}},Zn.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateSelection(t,!!t)},Zn.prototype.isActive=function(){var t=this._dragging.context();return t&&/^spaceTool/.test(t.prefix)};var kp="djs-dragging",jy="djs-resizing",ac=Math.max;function Vy(t,e,n,i,r){function o(a,c){L(a,function(l){r.addDragger(l,c),n.addMarker(l,kp)})}t.on("spaceTool.selection.start",function(a){var c=n.getLayer("space"),l=a.context,u="M 0,-10000 L 0,10000",p="M -10000,0 L 10000,0",d=rt("g");K(d,i.cls("djs-crosshair-group",["no-events"])),lt(c,d);var v=rt("path");K(v,"d",u),bt(v).add("djs-crosshair"),lt(d,v);var f=rt("path");K(f,"d",p),bt(f).add("djs-crosshair"),lt(d,f),l.crosshairGroup=d}),t.on("spaceTool.selection.move",function(a){Oe(a.context.crosshairGroup,a.x,a.y)}),t.on("spaceTool.selection.cleanup",function(a){var c=a.context.crosshairGroup;c&&ee(c)}),t.on("spaceTool.move",250,function(a){var c=a.context,l=c.line,u=c.axis,p=c.movingShapes,d=c.resizingShapes;if(c.initialized){if(!c.dragGroup){var v=n.getLayer("space");K(l=rt("path"),"d","M0,0 L0,0"),bt(l).add("djs-crosshair"),lt(v,l),c.line=l;var f=rt("g");K(f,i.cls("djs-drag-group",["no-events"])),lt(n.getActiveLayer(),f),o(p,f),o(c.movingConnections=e.filter(function(w){var x=!1;L(p,function(s){L(s.outgoing,function(h){w===h&&(x=!0)})});var S=!1;L(p,function(s){L(s.incoming,function(h){w===h&&(S=!0)})});var C=!1;L(d,function(s){L(s.outgoing,function(h){w===h&&(C=!0)})});var I=!1;return L(d,function(s){L(s.incoming,function(h){w===h&&(I=!0)})}),function(s){return s.waypoints}(w)&&(x||C)&&(S||I)}),f),c.dragGroup=f}if(!c.frameGroup){var y=rt("g");K(y,i.cls("djs-frame-group",["no-events"])),lt(n.getActiveLayer(),y);var b=[];L(d,function(w){var x=r.addFrame(w,y),S=x.getBBox();b.push({element:x,initialBounds:S}),n.addMarker(w,jy)}),c.frameGroup=y,c.frames=b}K(l,{d:{x:"M"+a.x+", -10000 L"+a.x+", 10000",y:"M -10000, "+a.y+" L 10000, "+a.y}[u]});var g={x:a.dx,y:a.dy};g[{x:"y",y:"x"}[c.axis]]=0,Oe(c.dragGroup,g.x,g.y),L(c.frames,function(w){var x,S,C=w.element,I=w.initialBounds;c.direction==="e"?K(C,{width:ac(I.width+g.x,5)}):K(C,{width:x=ac(I.width-g.x,5),x:I.x+I.width-x}),c.direction==="s"?K(C,{height:ac(I.height+g.y,5)}):K(C,{height:S=ac(I.height-g.y,5),y:I.y+I.height-S})})}}),t.on("spaceTool.cleanup",function(a){var c=a.context,l=c.movingShapes,u=c.movingConnections,p=c.resizingShapes,d=c.line,v=c.dragGroup,f=c.frameGroup;L(l,function(y){n.removeMarker(y,kp)}),L(u,function(y){n.removeMarker(y,kp)}),v&&(ee(d),ee(v)),L(p,function(y){n.removeMarker(y,jy)}),f&&ee(f)})}Vy.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const Fy={__init__:["spaceToolPreview"],__depends__:[Kn,Dn,ic,zo,Ho],spaceTool:["type",Zn],spaceToolPreview:["type",Vy]};function rn(t){this._model=t}function je(t,e,n,i){Q.call(this,t),this._bpmnFactory=e,this._translate=i;var r=this;function o(p){L(p.context.oldRoot.children,function(d){A(d,"bpmn:BaseElement")&&r.updateParent(d)})}function a(p){var d=p.context.shape;A(d,"bpmn:BaseElement")&&r.updateBounds(d)}function c(p){r.updateConnection(p.context)}function l(p){r.updateConnectionWaypoints(p.context.connection)}function u(p){r.updateAttachment(p.context)}this.executed(["connection.layout","connection.create"],function(p){var d,v=p.context,f=v.hints||{};v.cropped||f.createElementsBehavior===!1||((d=v.connection).waypoints=n.getCroppedWaypoints(d),v.cropped=!0)}),this.reverted(["connection.layout"],function(p){delete p.context.cropped}),this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],on(function(p){var d=p.context;r.updateParent(d.shape||d.connection,d.oldParent)})),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],on(function(p){var d=p.context,v=d.shape||d.connection,f=d.parent||d.newParent;r.updateParent(v,f)})),this.executed(["canvas.updateRoot"],o),this.reverted(["canvas.updateRoot"],o),this.executed(["shape.move","shape.create","shape.resize"],on(function(p){p.context.shape.type!=="label"&&a(p)})),this.reverted(["shape.move","shape.create","shape.resize"],on(function(p){p.context.shape.type!=="label"&&a(p)})),t.on("shape.changed",function(p){p.element.type==="label"&&a({context:{shape:p.element}})}),this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],on(c)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],on(c)),this.executed(["connection.layout","connection.move","connection.updateWaypoints"],on(l)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],on(l)),this.executed("connection.reconnect",on(function(p){var d=p.context,v=d.connection,f=d.oldSource,y=d.newSource,b=et(v),g=et(f),w=et(y);b.conditionExpression&&!wt(w,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(d.oldConditionExpression=b.conditionExpression,delete b.conditionExpression),f!==y&&g.default===b&&(d.oldDefault=g.default,delete g.default)})),this.reverted("connection.reconnect",on(function(p){var d=p.context,v=d.connection,f=d.oldSource,y=d.newSource,b=et(v),g=et(f),w=et(y);d.oldConditionExpression&&(b.conditionExpression=d.oldConditionExpression),d.oldDefault&&(g.default=d.oldDefault,delete w.default)})),this.executed(["element.updateAttachment"],on(u)),this.reverted(["element.updateAttachment"],on(u))}function on(t){return function(e){var n=e.context;A(n.shape||n.connection,"bpmn:BaseElement")&&t(e)}}function _i(t,e,n){Gn.call(this),this._bpmnFactory=t,this._moddle=e,this._translate=n}function $y(t,e,n){t[n]=e[n],delete e[n]}function sc(t,e){this._modeling=t,this._canvas=e}function cc(t){this._modeling=t}function lc(t,e){this._canvas=t,this._layouter=e}rn.$inject=["moddle"],rn.prototype._needsId=function(t){return wt(t,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])},rn.prototype._ensureId=function(t){var e;t.id?this._model.ids.claim(t.id,t):(e=A(t,"bpmn:Activity")?"Activity":A(t,"bpmn:Event")?"Event":A(t,"bpmn:Gateway")?"Gateway":wt(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])?"Flow":(t.$type||"").replace(/^[^:]*:/g,""),e+="_",!t.id&&this._needsId(t)&&(t.id=this._model.ids.nextPrefixed(e,t)))},rn.prototype.create=function(t,e){var n=this._model.create(t,e||{});return this._ensureId(n),n},rn.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})},rn.prototype.createDiShape=function(t,e,n){return this.create("bpmndi:BPMNShape",$({bpmnElement:t,bounds:this.createDiBounds(e)},n))},rn.prototype.createDiBounds=function(t){return this.create("dc:Bounds",t)},rn.prototype.createDiWaypoints=function(t){var e=this;return le(t,function(n){return e.createDiWaypoint(n)})},rn.prototype.createDiWaypoint=function(t){return this.create("dc:Point",Xe(t,["x","y"]))},rn.prototype.createDiEdge=function(t,e,n){return this.create("bpmndi:BPMNEdge",$({bpmnElement:t,waypoint:this.createDiWaypoints(e)},n))},rn.prototype.createDiPlane=function(t){return this.create("bpmndi:BPMNPlane",{bpmnElement:t})},it(je,Q),je.$inject=["eventBus","bpmnFactory","connectionDocking","translate"],je.prototype.updateAttachment=function(t){var e=t.shape,n=e.businessObject,i=e.host;n.attachedToRef=i&&i.businessObject},je.prototype.updateParent=function(t,e){if(!(t instanceof Ja||A(t,"bpmn:DataStoreReference")&&t.parent&&A(t.parent,"bpmn:Collaboration"))){var n=t.parent,i=t.businessObject,r=n&&n.businessObject,o=r&&r.di;A(t,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,r,e&&e.businessObject),A(t,"bpmn:DataOutputAssociation")&&(r=t.source?t.source.businessObject:null),A(t,"bpmn:DataInputAssociation")&&(r=t.target?t.target.businessObject:null),this.updateSemanticParent(i,r),A(t,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,r),this.updateDiParent(i.di,o)}},je.prototype.updateBounds=function(t){var e=t.businessObject.di,n=t instanceof Ja?this._getLabel(e):e,i=n.bounds;i||(i=this._bpmnFactory.createDiBounds(),n.set("bounds",i)),$(i,{x:t.x,y:t.y,width:t.width,height:t.height})},je.prototype.updateFlowNodeRefs=function(t,e,n){n!==e&&(A(n,"bpmn:Lane")&&Yt(n.get("flowNodeRef"),t),A(e,"bpmn:Lane")&&Jt(e.get("flowNodeRef"),t))},je.prototype.updateDiConnection=function(t,e,n){t.sourceElement&&t.sourceElement.bpmnElement!==e&&(t.sourceElement=e&&e.di),t.targetElement&&t.targetElement.bpmnElement!==n&&(t.targetElement=n&&n.di)},je.prototype.updateDiParent=function(t,e){if(e&&!A(e,"bpmndi:BPMNPlane")&&(e=e.$parent),t.$parent!==e){var n=(e||t.$parent).get("planeElement");e?(n.push(t),t.$parent=e):(Yt(n,t),t.$parent=null)}},je.prototype.getLaneSet=function(t){var e,n;return A(t,"bpmn:Lane")?((e=t.childLaneSet)||(e=this._bpmnFactory.create("bpmn:LaneSet"),t.childLaneSet=e,e.$parent=t),e):(A(t,"bpmn:Participant")&&(t=t.processRef),(e=(n=t.get("laneSets"))[0])||((e=this._bpmnFactory.create("bpmn:LaneSet")).$parent=t,n.push(e)),e)},je.prototype.updateSemanticParent=function(t,e,n){var i,r=this._translate;if(t.$parent!==e&&(!A(t,"bpmn:DataInput")&&!A(t,"bpmn:DataOutput")||(A(e,"bpmn:Participant")&&"processRef"in e&&(e=e.processRef),!("ioSpecification"in e)||e.ioSpecification!==t.$parent))){if(A(t,"bpmn:Lane"))e&&(e=this.getLaneSet(e)),i="lanes";else if(A(t,"bpmn:FlowElement")){if(e){if(A(e,"bpmn:Participant"))e=e.processRef;else if(A(e,"bpmn:Lane"))do e=e.$parent.$parent;while(A(e,"bpmn:Lane"))}i="flowElements"}else if(A(t,"bpmn:Artifact")){for(;e&&!A(e,"bpmn:Process")&&!A(e,"bpmn:SubProcess")&&!A(e,"bpmn:Collaboration");){if(A(e,"bpmn:Participant")){e=e.processRef;break}e=e.$parent}i="artifacts"}else if(A(t,"bpmn:MessageFlow"))i="messageFlows";else if(A(t,"bpmn:Participant")){i="participants";var o,a=t.processRef;a&&(o=function(u){for(;u&&!A(u,"bpmn:Definitions");)u=u.$parent;return u}(t.$parent||e),t.$parent&&(Yt(o.get("rootElements"),a),a.$parent=null),e&&(Jt(o.get("rootElements"),a),a.$parent=o))}else A(t,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":A(t,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(r("no parent for {element} in {parent}",{element:t.id,parent:e.id}));var c;if(t.$parent&&Yt(c=t.$parent.get(i),t),e?((c=e.get(i)).push(t),t.$parent=e):t.$parent=null,n){var l=n.get(i);Yt(c,t),e&&(l||(l=[],e.set(i,l)),l.push(t))}}},je.prototype.updateConnectionWaypoints=function(t){t.businessObject.di.set("waypoint",this._bpmnFactory.createDiWaypoints(t.waypoints))},je.prototype.updateConnection=function(t){var e,n=t.connection,i=et(n),r=et(n.source),o=et(n.target);if(A(i,"bpmn:DataAssociation"))A(i,"bpmn:DataInputAssociation")?(i.get("sourceRef")[0]=r,e=t.parent||t.newParent||o,this.updateSemanticParent(i,o,e)):A(i,"bpmn:DataOutputAssociation")&&(e=t.parent||t.newParent||r,this.updateSemanticParent(i,r,e),i.targetRef=o);else{var a=A(i,"bpmn:SequenceFlow");i.sourceRef!==r&&(a&&(Yt(i.sourceRef&&i.sourceRef.get("outgoing"),i),r&&r.get("outgoing")&&r.get("outgoing").push(i)),i.sourceRef=r),i.targetRef!==o&&(a&&(Yt(i.targetRef&&i.targetRef.get("incoming"),i),o&&o.get("incoming")&&o.get("incoming").push(i)),i.targetRef=o)}this.updateConnectionWaypoints(n),this.updateDiConnection(i.di,r,o)},je.prototype._getLabel=function(t){return t.label||(t.label=this._bpmnFactory.createDiLabel()),t.label},it(_i,Gn),_i.$inject=["bpmnFactory","moddle","translate"],_i.prototype.baseCreate=Gn.prototype.create,_i.prototype.create=function(t,e){return t==="label"?this.baseCreate(t,$({type:"label"},Io,e)):this.createBpmnElement(t,e)},_i.prototype.createBpmnElement=function(t,e){var n,i,r,o=this._translate,a=(e=e||{}).businessObject;if(!a){if(!e.type)throw new Error(o("no shape type specified"));a=this._bpmnFactory.create(e.type)}return a.di||(a.di=t==="root"?this._bpmnFactory.createDiPlane(a,[],{id:a.id+"_di"}):t==="connection"?this._bpmnFactory.createDiEdge(a,[],{id:a.id+"_di"}):this._bpmnFactory.createDiShape(a,{},{id:a.id+"_di"})),A(a,"bpmn:Group")&&(e=$({isFrame:!0},e)),e.di&&($(a.di,e.di),delete e.di),function(c,l,u){L(u,function(p){l[p]!==void 0&&$y(c,l,p)})}(a,e,["processRef","isInterrupting","associationDirection","isForCompensation"]),e.isExpanded&&$y(a.di,e,"isExpanded"),A(a,"bpmn:ExclusiveGateway")&&(a.di.isMarkerVisible=!0),e.eventDefinitionType&&(i=a.get("eventDefinitions")||[],r=this._bpmnFactory.create(e.eventDefinitionType,e.eventDefinitionAttrs),e.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(r.condition=this._bpmnFactory.create("bpmn:FormalExpression")),i.push(r),r.$parent=a,a.eventDefinitions=i,delete e.eventDefinitionType),n=this._getDefaultSize(a),e=$({businessObject:a,id:a.id},n,e),this.baseCreate(t,e)},_i.prototype._getDefaultSize=function(t){return A(t,"bpmn:SubProcess")?Mt(t)?{width:350,height:200}:{width:100,height:80}:A(t,"bpmn:Task")?{width:100,height:80}:A(t,"bpmn:Gateway")?{width:50,height:50}:A(t,"bpmn:Event")?{width:36,height:36}:A(t,"bpmn:Participant")?Mt(t)?{width:600,height:250}:{width:400,height:60}:A(t,"bpmn:Lane")?{width:400,height:100}:A(t,"bpmn:DataObjectReference")?{width:36,height:50}:A(t,"bpmn:DataStoreReference")?{width:50,height:50}:A(t,"bpmn:TextAnnotation")?{width:100,height:30}:A(t,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}},_i.prototype.createParticipantShape=function(t){return te(t)||(t={isExpanded:t}),(t=$({type:"bpmn:Participant"},t||{})).isExpanded!==!1&&(t.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(t)},sc.$inject=["modeling","canvas"],sc.prototype.preExecute=function(t){var e=this._modeling,n=t.elements,i=t.alignment;L(n,function(r){var o={x:0,y:0};i.left?o.x=i.left-r.x:i.right?o.x=i.right-r.width-r.x:i.center?o.x=i.center-Math.round(r.width/2)-r.x:i.top?o.y=i.top-r.y:i.bottom?o.y=i.bottom-r.height-r.y:i.middle&&(o.y=i.middle-Math.round(r.height/2)-r.y),e.moveElements([r],o,r.parent)})},sc.prototype.postExecute=function(t){},cc.$inject=["modeling"],cc.prototype.preExecute=function(t){var e=t.source;if(!e)throw new Error("source required");var n=t.target||e.parent,i=t.shape,r=t.hints||{};i=t.shape=this._modeling.createShape(i,t.position,n,{attach:r.attach}),t.shape=i},cc.prototype.postExecute=function(t){var e,n,i=t.hints||{};e=t.source,n=t.shape,si(e.outgoing,function(r){return r.target===n})||(i.connectionTarget===t.source?this._modeling.connect(t.shape,t.source,t.connection):this._modeling.connect(t.source,t.shape,t.connection))},lc.$inject=["canvas","layouter"],lc.prototype.execute=function(t){var e=t.connection,n=t.source,i=t.target,r=t.parent,o=t.parentIndex,a=t.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return e.source=n,e.target=i,e.waypoints||(e.waypoints=this._layouter.layoutConnection(e,a)),this._canvas.addConnection(e,r,o),e},lc.prototype.revert=function(t){var e=t.connection;return this._canvas.removeConnection(e),e.source=null,e.target=null,e};var uc=Math.round;function Pp(t){this._modeling=t}function zy(t){return!!t.waypoints}Pp.$inject=["modeling"],Pp.prototype.preExecute=function(t){var e=t.elements,n=t.parent,i=t.parentIndex,r=t.position,o=t.hints,a=this._modeling;L(e,function(p){pt(p.x)||(p.x=0),pt(p.y)||(p.y=0)});var c=ye(e);L(e,function(p){zy(p)&&(p.waypoints=le(p.waypoints,function(d){return{x:uc(d.x-c.x-c.width/2+r.x),y:uc(d.y-c.y-c.height/2+r.y)}})),$(p,{x:uc(p.x-c.x-c.width/2+r.x),y:uc(p.y-c.y-c.height/2+r.y)})});var l=gd(e),u={};L(e,function(p){if(zy(p))u[p.id]=pt(i)?a.createConnection(u[p.source.id],u[p.target.id],i,p,p.parent||n,o):a.createConnection(u[p.source.id],u[p.target.id],p,p.parent||n,o);else{var d=$({},o);l.indexOf(p)===-1&&(d.autoResize=!1),u[p.id]=pt(i)?a.createShape(p,Xe(p,["x","y","width","height"]),p.parent||n,i,d):a.createShape(p,Xe(p,["x","y","width","height"]),p.parent||n,d)}}),t.elements=Va(u)};var Gy=Math.round;function wi(t){this._canvas=t}function ia(t){wi.call(this,t)}wi.$inject=["canvas"],wi.prototype.execute=function(t){var e=t.shape,n=t.position,i=t.parent,r=t.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?$(e,n):$(e,{x:n.x-Gy(e.width/2),y:n.y-Gy(e.height/2)}),this._canvas.addShape(e,i,r),e},wi.prototype.revert=function(t){var e=t.shape;return this._canvas.removeShape(e),e},it(ia,wi),ia.$inject=["canvas"];var _w=wi.prototype.execute;ia.prototype.execute=function(t){var e=t.shape;return function(n){["width","height"].forEach(function(i){n[i]===void 0&&(n[i]=0)})}(e),e.labelTarget=t.labelTarget,_w.call(this,t)};var ww=wi.prototype.revert;function pc(t,e){this._canvas=t,this._modeling=e}function Mp(t,e){this._modeling=t,this._elementRegistry=e}function ra(t,e){this._canvas=t,this._modeling=e}function hc(t){this._modeling=t}ia.prototype.revert=function(t){return t.shape.labelTarget=null,ww.call(this,t)},pc.$inject=["canvas","modeling"],pc.prototype.execute=function(t){var e=t.connection,n=e.parent;return t.parent=n,t.parentIndex=Ol(n.children,e),t.source=e.source,t.target=e.target,this._canvas.removeConnection(e),e.source=null,e.target=null,e},pc.prototype.revert=function(t){var e=t.connection,n=t.parent,i=t.parentIndex;return e.source=t.source,e.target=t.target,Jt(n.children,e,i),this._canvas.addConnection(e,n),e},Mp.$inject=["modeling","elementRegistry"],Mp.prototype.postExecute=function(t){var e=this._modeling,n=this._elementRegistry;L(t.elements,function(i){n.get(i.id)&&(i.waypoints?e.removeConnection(i):e.removeShape(i))})},ra.$inject=["canvas","modeling"],ra.prototype.preExecute=function(t){var e=this._modeling,n=t.shape;qr(n.incoming,function(i){e.removeConnection(i,{nested:!0})}),qr(n.outgoing,function(i){e.removeConnection(i,{nested:!0})}),qr(n.children,function(i){i.waypoints?e.removeConnection(i,{nested:!0}):e.removeShape(i,{nested:!0})})},ra.prototype.execute=function(t){var e=this._canvas,n=t.shape,i=n.parent;return t.oldParent=i,t.oldParentIndex=Ol(i.children,n),e.removeShape(n),n},ra.prototype.revert=function(t){var e=this._canvas,n=t.shape,i=t.oldParent,r=t.oldParentIndex;return Jt(i.children,n,r),e.addShape(n,i),n},hc.$inject=["modeling"];var Uy={x:"y",y:"x"};function dc(t,e){this._layouter=t,this._canvas=e}function Rp(){}function Np(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function oa(t){this._modeling=t}function mc(t){this._helper=new oa(t)}function tr(t){this._modeling=t,this._helper=new oa(t)}function aa(t){this._modeling=t}function Hy(t){return t.original||t}function Qn(t,e){this._modeling=t,this._rules=e}function sa(t){this._modeling=t}function Si(t){this._modeling=t}function qy(t){return $({},t)}function Wy(t){switch(t){case"n":case"s":return"y";case"w":case"e":return"x"}}function Ky(t,e,n){var i=Wy(n);return/e|s/.test(n)?t[i]>e:/n|w/.test(n)?t[i]<e:void 0}function Ci(t,e){return t.indexOf(e)!==-1}function fc(t){this._modeling=t}function Xy(t){var e={};return L(t,function(n){e[n.id]=n.hidden,n.children&&(e=$({},e,Xy(n.children)))}),e}function Yy(t,e){var n=[];return L(t,function(i){i.hidden=e,n=n.concat(i),i.children&&(n=n.concat(Yy(i.children,i.collapsed||e)))}),n}function Jy(t,e){var n=[];return L(t,function(i){i.hidden=e[i.id],n=n.concat(i),i.children&&(n=n.concat(Jy(i.children,e)))}),n}function vc(t){this._modeling=t}function Zy(t,e){return Yt(t&&t.attachers,e)}function Qy(t,e,n){if(t){var i=t.attachers;i||(t.attachers=i=[]),Jt(i,e,n)}}function Ip(){}function Dt(t,e,n){this._eventBus=t,this._elementFactory=e,this._commandStack=n;var i=this;t.on("diagram.init",function(){i.registerHandlers(n)})}function ca(t){this._elementRegistry=t}function tg(t,e){L(e,function(n,i){t.set(i,n)})}hc.prototype.preExecute=function(t){var e=this._modeling,n=t.groups,i=t.axis,r=t.dimension;function o(b,g){b.range.min=Math.min(g[i],b.range.min),b.range.max=Math.max(g[i]+g[r],b.range.max)}function a(b){return b[i]+b[r]/2}function c(b){return b.length-1}function l(b){return b.max-b.min}var u,p,d=n[0],v=c(n),f=n[v],y=0;L(n,function(b,g){var w,x,S;b.elements.length<2?g&&g!==n.length-1&&(o(b,b.elements[0]),y+=l(b.range)):(x=(w=We(b.elements,i))[0],g===v&&(x=w[c(w)]),S=a(x),b.range=null,L(w,function(C){(function(I,s){var h={y:0};h[i]=I-a(s),h[i]&&(h[Uy[i]]=0,e.moveElements([s],h,s.parent))})(S,C),b.range!==null?o(b,C):b.range={min:C[i],max:C[i]+C[r]}}),g&&g!==n.length-1&&(y+=l(b.range)))}),p=Math.abs(f.range.min-d.range.max),(u=Math.round((p-y)/(n.length-1)))<n.length-1||L(n,function(b,g){var w,x={};b!==d&&b!==f&&(w=n[g-1],b.range.max=0,L(b.elements,function(S,C){x[Uy[i]]=0,x[i]=w.range.max-S[i]+u,b.range.min!==S[i]&&(x[i]+=S[i]-b.range.min),x[i]&&e.moveElements([S],x,S.parent),b.range.max=Math.max(S[i]+S[r],C?b.range.max:0)}))})},hc.prototype.postExecute=function(t){},dc.$inject=["layouter","canvas"],dc.prototype.execute=function(t){var e=t.connection;return $(t,{oldWaypoints:e.waypoints}),e.waypoints=this._layouter.layoutConnection(e,t.hints),e},dc.prototype.revert=function(t){var e=t.connection;return e.waypoints=t.oldWaypoints,e},Rp.prototype.execute=function(t){var e=t.connection,n=t.delta,i=t.newParent||e.parent,r=t.newParentIndex,o=e.parent;return t.oldParent=o,t.oldParentIndex=Yt(o.children,e),Jt(i.children,e,r),e.parent=i,L(e.waypoints,function(a){a.x+=n.x,a.y+=n.y,a.original&&(a.original.x+=n.x,a.original.y+=n.y)}),e},Rp.prototype.revert=function(t){var e=t.connection,n=e.parent,i=t.oldParent,r=t.oldParentIndex,o=t.delta;return Yt(n.children,e),Jt(i.children,e,r),e.parent=i,L(e.waypoints,function(a){a.x-=o.x,a.y-=o.y,a.original&&(a.original.x-=o.x,a.original.y-=o.y)}),e},Np.prototype.add=function(t,e){return this.addAll([t],e)},Np.prototype.addAll=function(t,e){var n=function(i,r,o){Vn(r)&&(r=!0),te(r)&&(o=r,r=!0);var a=_o((o=o||{}).allShapes),c=_o(o.allConnections),l=_o(o.enclosedElements),u=_o(o.enclosedConnections),p=_o(o.topLevel,r&&Vi(i,function(v){return v.id}));function d(v){p[v.source.id]&&p[v.target.id]&&(p[v.id]=[v]),a[v.source.id]&&a[v.target.id]&&(u[v.id]=l[v.id]=v),c[v.id]=v}return $i(i,function(v){if(l[v.id]=v,!v.waypoints)return a[v.id]=v,L(v.incoming,d),L(v.outgoing,d),v.children;u[v.id]=c[v.id]=v}),{allShapes:a,allConnections:c,topLevel:p,enclosedConnections:u,enclosedElements:l}}(t,!!e,this);return $(this,n),this},oa.prototype.moveRecursive=function(t,e,n){return t?this.moveClosure(this.getClosure(t),e,n):[]},oa.prototype.moveClosure=function(t,e,n,i,r){var o=this._modeling,a=t.allShapes,c=t.allConnections,l=t.enclosedConnections,u=t.topLevel,p=!1;r&&r.parent===n&&(p=!0),L(a,function(d){o.moveShape(d,e,u[d.id]&&!p&&n,{recurse:!1,layout:!1})}),L(c,function(d){var v=!!a[d.source.id],f=!!a[d.target.id];l[d.id]&&v&&f?o.moveConnection(d,e,u[d.id]&&!p&&n):o.layoutConnection(d,{connectionStart:v&&ep(d,d.source,e),connectionEnd:f&&np(d,d.target,e)})})},oa.prototype.getClosure=function(t){return new Np().addAll(t,!0)},mc.$inject=["modeling"],mc.prototype.preExecute=function(t){t.closure=this._helper.getClosure(t.shapes)},mc.prototype.postExecute=function(t){var e,n=t.hints;n&&n.primaryShape&&(e=n.primaryShape,n.oldParent=e.parent),this._helper.moveClosure(t.closure,t.delta,t.newParent,t.newHost,e)},tr.$inject=["modeling"],tr.prototype.execute=function(t){var e=t.shape,n=t.delta,i=t.newParent||e.parent,r=t.newParentIndex,o=e.parent;return t.oldBounds=Xe(e,["x","y","width","height"]),t.oldParent=o,t.oldParentIndex=Yt(o.children,e),Jt(i.children,e,r),$(e,{parent:i,x:e.x+n.x,y:e.y+n.y}),e},tr.prototype.postExecute=function(t){var e=t.shape,n=t.delta,i=t.hints,r=this._modeling;i.layout!==!1&&(L(e.incoming,function(o){r.layoutConnection(o,{connectionEnd:np(o,e,n)})}),L(e.outgoing,function(o){r.layoutConnection(o,{connectionStart:ep(o,e,n)})})),i.recurse!==!1&&this.moveChildren(t)},tr.prototype.revert=function(t){var e=t.shape,n=t.oldParent,i=t.oldParentIndex,r=t.delta;return Jt(n.children,e,i),$(e,{parent:n,x:e.x-r.x,y:e.y-r.y}),e},tr.prototype.moveChildren=function(t){var e=t.delta,n=t.shape;this._helper.moveRecursive(n.children,e,null)},tr.prototype.getNewParent=function(t){return t.newParent||t.shape.parent},aa.$inject=["modeling"],aa.prototype.execute=function(t){var e=t.newSource,n=t.newTarget,i=t.connection,r=t.dockingOrPoints;if(!e&&!n)throw new Error("newSource or newTarget required");return gt(r)&&(t.oldWaypoints=i.waypoints,i.waypoints=r),e&&(t.oldSource=i.source,i.source=e),n&&(t.oldTarget=i.target,i.target=n),i},aa.prototype.postExecute=function(t){var e=t.connection,n=t.newSource,i=t.newTarget,r=t.dockingOrPoints,o=t.hints||{},a={};o.connectionStart&&(a.connectionStart=o.connectionStart),o.connectionEnd&&(a.connectionEnd=o.connectionEnd),o.layoutConnection!==!1&&(!n||i&&o.docking!=="source"||(a.connectionStart=a.connectionStart||Hy(gt(r)?r[0]:r)),!i||n&&o.docking!=="target"||(a.connectionEnd=a.connectionEnd||Hy(gt(r)?r[r.length-1]:r)),o.newWaypoints&&(a.waypoints=o.newWaypoints),this._modeling.layoutConnection(e,a))},aa.prototype.revert=function(t){var e=t.oldSource,n=t.oldTarget,i=t.oldWaypoints,r=t.connection;return e&&(r.source=e),n&&(r.target=n),i&&(r.waypoints=i),r},Qn.$inject=["modeling","rules"],Qn.prototype.preExecute=function(t){var e,n=this,i=this._modeling,r=this._rules,o=t.oldShape,a=t.newData,c=t.hints||{};function l(y,b,g){return r.allowed("connection.reconnect",{connection:g,source:y,target:b})}var u,p={x:a.x,y:a.y},d={x:o.x,y:o.y,width:o.width,height:o.height};e=t.newShape=t.newShape||n.createShape(a,p,o.parent,c),o.host&&i.updateAttachment(e,o.host),c.moveChildren!==!1&&(u=o.children.slice(),i.moveElements(u,{x:0,y:0},e,c));var v=o.incoming.slice(),f=o.outgoing.slice();L(v,function(y){l(y.source,e,y)&&n.reconnectEnd(y,e,Ws(y,e,d),c)}),L(f,function(y){var b=y.target;l(e,b,y)&&n.reconnectStart(y,e,qs(y,e,d),c)})},Qn.prototype.postExecute=function(t){var e=t.oldShape;this._modeling.removeShape(e)},Qn.prototype.execute=function(t){},Qn.prototype.revert=function(t){},Qn.prototype.createShape=function(t,e,n,i){return this._modeling.createShape(t,e,n,i)},Qn.prototype.reconnectStart=function(t,e,n,i){this._modeling.reconnectStart(t,e,n,i)},Qn.prototype.reconnectEnd=function(t,e,n,i){this._modeling.reconnectEnd(t,e,n,i)},sa.$inject=["modeling"],sa.prototype.execute=function(t){var e=t.shape,n=t.newBounds,i=t.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return t.oldBounds={width:e.width,height:e.height,x:e.x,y:e.y},$(e,{width:n.width,height:n.height,x:n.x,y:n.y}),e},sa.prototype.postExecute=function(t){var e=this._modeling,n=t.shape,i=t.oldBounds;(t.hints||{}).layout!==!1&&(L(n.incoming,function(r){e.layoutConnection(r,{connectionEnd:Ws(r,n,i)})}),L(n.outgoing,function(r){e.layoutConnection(r,{connectionStart:qs(r,n,i)})}))},sa.prototype.revert=function(t){var e=t.shape,n=t.oldBounds;return $(e,{width:n.width,height:n.height,x:n.x,y:n.y}),e},Si.$inject=["modeling"],Si.prototype.preExecute=function(t){var e=t.delta,n=t.direction,i=t.movingShapes,r=t.resizingShapes,o=t.start,a={};this.moveShapes(i,e),L(r,function(c){a[c.id]=function(l){return{x:l.x,y:l.y,height:l.height,width:l.width}}(c)}),this.resizeShapes(r,e,n),this.updateConnectionWaypoints(function(c,l){var u=[];return L(c.concat(l),function(p){var d=p.incoming,v=p.outgoing;L(d.concat(v),function(f){var y=f.source,b=f.target;(na(c,y)||na(c,b)||na(l,y)||na(l,b))&&(na(u,f)||u.push(f))})}),u}(i,r),e,n,o,i,r,a)},Si.prototype.execute=function(){},Si.prototype.revert=function(){},Si.prototype.moveShapes=function(t,e){var n=this;L(t,function(i){n._modeling.moveShape(i,e,null,{autoResize:!1,layout:!1,recurse:!1})})},Si.prototype.resizeShapes=function(t,e,n){var i=this;L(t,function(r){var o=function(a,c,l){var u=a.x,p=a.y,d=a.width,v=a.height,f=l.x,y=l.y;switch(c){case"n":return{x:u,y:p+y,width:d,height:v-y};case"s":return{x:u,y:p,width:d,height:v+y};case"w":return{x:u+f,y:p,width:d-f,height:v};case"e":return{x:u,y:p,width:d+f,height:v};default:throw new Error("unknown direction: "+c)}}(r,n,e);i._modeling.resizeShape(r,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})},Si.prototype.updateConnectionWaypoints=function(t,e,n,i,r,o,a){var c=this,l=r.concat(o);L(t,function(u){var p=u.source,d=u.target,v=function(b){return le(b.waypoints,function(g){return(g=qy(g)).original&&(g.original=qy(g.original)),g})}(u),f=Wy(n),y={labelBehavior:!1};Ci(l,p)&&Ci(l,d)?(v=le(v,function(b){return Ky(b,i,n)&&(b[f]=b[f]+e[f]),b.original&&Ky(b.original,i,n)&&(b.original[f]=b.original[f]+e[f]),b}),c._modeling.updateWaypoints(u,v,{labelBehavior:!1})):(Ci(l,p)||Ci(l,d))&&(Ci(r,p)?y.connectionStart=ep(u,p,e):Ci(r,d)?y.connectionEnd=np(u,d,e):Ci(o,p)?y.connectionStart=qs(u,p,a[p.id]):Ci(o,d)&&(y.connectionEnd=Ws(u,d,a[d.id])),c._modeling.layoutConnection(u,y))})},fc.$inject=["modeling"],fc.prototype.execute=function(t){var e=t.shape,n=e.children;t.oldChildrenVisibility=Xy(n),e.collapsed=!e.collapsed;var i=Yy(n,e.collapsed);return[e].concat(i)},fc.prototype.revert=function(t){var e=t.shape,n=t.oldChildrenVisibility,i=Jy(e.children,n);return e.collapsed=!e.collapsed,[e].concat(i)},vc.$inject=["modeling"],vc.prototype.execute=function(t){var e=t.shape,n=t.newHost,i=e.host;return t.oldHost=i,t.attacherIdx=Zy(i,e),Qy(n,e),e.host=n,e},vc.prototype.revert=function(t){var e=t.shape,n=t.newHost,i=t.oldHost,r=t.attacherIdx;return e.host=i,Zy(n,e),Qy(i,e,r),e},Ip.prototype.execute=function(t){var e=t.connection,n=t.newWaypoints;return t.oldWaypoints=e.waypoints,e.waypoints=n,e},Ip.prototype.revert=function(t){var e=t.connection,n=t.oldWaypoints;return e.waypoints=n,e},Dt.$inject=["eventBus","elementFactory","commandStack"],Dt.prototype.getHandlers=function(){return{"shape.append":cc,"shape.create":wi,"shape.delete":ra,"shape.move":tr,"shape.resize":sa,"shape.replace":Qn,"shape.toggleCollapse":fc,spaceTool:Si,"label.create":ia,"connection.create":lc,"connection.delete":pc,"connection.move":Rp,"connection.layout":dc,"connection.updateWaypoints":Ip,"connection.reconnect":aa,"elements.create":Pp,"elements.move":mc,"elements.delete":Mp,"elements.distribute":hc,"elements.align":sc,"element.updateAttachment":vc}},Dt.prototype.registerHandlers=function(t){L(this.getHandlers(),function(e,n){t.registerHandler(n,e)})},Dt.prototype.moveShape=function(t,e,n,i,r){typeof i=="object"&&(r=i,i=null);var o={shape:t,delta:e,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",o)},Dt.prototype.updateAttachment=function(t,e){var n={shape:t,newHost:e};this._commandStack.execute("element.updateAttachment",n)},Dt.prototype.moveElements=function(t,e,n,i){var r,o=(i=i||{}).attach,a=n;o===!0?(r=n,a=n.parent):o===!1&&(r=null);var c={shapes:t,delta:e,newParent:a,newHost:r,hints:i};this._commandStack.execute("elements.move",c)},Dt.prototype.moveConnection=function(t,e,n,i,r){typeof i=="object"&&(r=i,i=void 0);var o={connection:t,delta:e,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",o)},Dt.prototype.layoutConnection=function(t,e){var n={connection:t,hints:e||{}};this._commandStack.execute("connection.layout",n)},Dt.prototype.createConnection=function(t,e,n,i,r,o){typeof n=="object"&&(o=r,r=i,i=n,n=void 0);var a={source:t,target:e,parent:r,parentIndex:n,connection:i=this._create("connection",i),hints:o};return this._commandStack.execute("connection.create",a),a.connection},Dt.prototype.createShape=function(t,e,n,i,r){typeof i!="number"&&(r=i,i=void 0);var o,a,c=(r=r||{}).attach;t=this._create("shape",t),c?(o=n.parent,a=n):o=n;var l={position:e,shape:t,parent:o,parentIndex:i,host:a,hints:r};return this._commandStack.execute("shape.create",l),l.shape},Dt.prototype.createElements=function(t,e,n,i,r){gt(t)||(t=[t]),typeof i!="number"&&(r=i,i=void 0);var o={position:e,elements:t,parent:n,parentIndex:i,hints:r=r||{}};return this._commandStack.execute("elements.create",o),o.elements},Dt.prototype.createLabel=function(t,e,n,i){n=this._create("label",n);var r={labelTarget:t,position:e,parent:i||t.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape},Dt.prototype.appendShape=function(t,e,n,i,r){r=r||{};var o={source:t,position:n,target:i,shape:e=this._create("shape",e),connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",o),o.shape},Dt.prototype.removeElements=function(t){var e={elements:t};this._commandStack.execute("elements.delete",e)},Dt.prototype.distributeElements=function(t,e,n){var i={groups:t,axis:e,dimension:n};this._commandStack.execute("elements.distribute",i)},Dt.prototype.removeShape=function(t,e){var n={shape:t,hints:e||{}};this._commandStack.execute("shape.delete",n)},Dt.prototype.removeConnection=function(t,e){var n={connection:t,hints:e||{}};this._commandStack.execute("connection.delete",n)},Dt.prototype.replaceShape=function(t,e,n){var i={oldShape:t,newData:e,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape},Dt.prototype.alignElements=function(t,e){var n={elements:t,alignment:e};this._commandStack.execute("elements.align",n)},Dt.prototype.resizeShape=function(t,e,n,i){var r={shape:t,newBounds:e,minBounds:n,hints:i};this._commandStack.execute("shape.resize",r)},Dt.prototype.createSpace=function(t,e,n,i,r){var o={delta:n,direction:i,movingShapes:t,resizingShapes:e,start:r};this._commandStack.execute("spaceTool",o)},Dt.prototype.updateWaypoints=function(t,e,n){var i={connection:t,newWaypoints:e,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)},Dt.prototype.reconnect=function(t,e,n,i,r){var o={connection:t,newSource:e,newTarget:n,dockingOrPoints:i,hints:r||{}};this._commandStack.execute("connection.reconnect",o)},Dt.prototype.reconnectStart=function(t,e,n,i){i||(i={}),this.reconnect(t,e,t.target,n,$(i,{docking:"source"}))},Dt.prototype.reconnectEnd=function(t,e,n,i){i||(i={}),this.reconnect(t,t.source,e,n,$(i,{docking:"target"}))},Dt.prototype.connect=function(t,e,n,i){return this.createConnection(t,e,n||{},t.parent,i)},Dt.prototype._create=function(t,e){return e instanceof Co?e:this._elementFactory.create(t,e)},Dt.prototype.toggleCollapse=function(t,e){var n={shape:t,hints:e||{}};this._commandStack.execute("shape.toggleCollapse",n)},ca.$inject=["elementRegistry"],ca.prototype.execute=function(t){var e=t.element,n=t.moddleElement,i=t.properties;if(!n)throw new Error("<moddleElement> required");var r=t.changed||this.getVisualReferences(n).concat(e),o=t.oldProperties||function(a,c){return De(c,function(l,u){return l[u]=a.get(u),l},{})}(n,bo(i));return tg(n,i),t.oldProperties=o,t.changed=r,r},ca.prototype.revert=function(t){var e=t.oldProperties,n=t.moddleElement,i=t.changed;return tg(n,e),i},ca.prototype.getVisualReferences=function(t){var e=this._elementRegistry;return A(t,"bpmn:DataObject")?function(n,i){return i.filter(function(r){return A(r,"bpmn:DataObjectReference")&&et(r).dataObjectRef===n})}(t,e):[]};var la="default",ti="id",eg="di",Sw={width:0,height:0};function ua(t,e,n,i,r){this._elementRegistry=t,this._moddle=e,this._translate=n,this._modeling=i,this._textRenderer=r}function ng(t,e){return ti in t&&t[ti]!==e[ti]}function ig(t,e){L(e,function(n,i){i!==eg?t.set(i,n):t.di&&function(r,o){L(o,function(a,c){r.set(c,a)})}(t.di,n)})}ua.$inject=["elementRegistry","moddle","translate","modeling","textRenderer"],ua.prototype.execute=function(t){var e=t.element,n=[e],i=this._translate;if(!e)throw new Error(i("element required"));var r=this._elementRegistry,o=this._moddle.ids,a=e.businessObject,c=function(u){var p=$({},u);return Cw.forEach(function(d){d in u&&(p[d]=et(p[d]))}),p}(t.properties),l=t.oldProperties||function(u,p){var d=bo(p);return De(d,function(v,f){return v[f]=f!==eg?u.get(f):function(y,b){return De(b,function(g,w){return g[w]=y.get(w),g},{})}(u.di,bo(p.di)),v},{})}(a,c);return ng(c,a)&&(o.unclaim(a[ti]),r.updateId(e,c[ti]),o.claim(c[ti],a)),la in c&&(c[la]&&n.push(r.get(c[la].id)),a[la]&&n.push(r.get(a[la].id))),ig(a,c),t.oldProperties=l,t.changed=n,n},ua.prototype.postExecute=function(t){var e=t.element.label,n=e&&et(e).name;if(n){var i=this._textRenderer.getExternalLabelBounds(e,n);this._modeling.resizeShape(e,i,Sw)}},ua.prototype.revert=function(t){var e=t.element,n=t.properties,i=t.oldProperties,r=e.businessObject,o=this._elementRegistry,a=this._moddle.ids;return ig(r,i),ng(n,r)&&(a.unclaim(n[ti]),o.updateId(e,i[ti]),a.claim(i[ti],r)),t.changed};var Cw=["default"];function yc(t,e){this._canvas=t,this._modeling=e}function Dp(t,e){this._modeling=t,this._spaceTool=e}function Bp(t,e){this._modeling=t,this._translate=e}function pa(t,e){this._modeling=t,this._spaceTool=e}yc.$inject=["canvas","modeling"],yc.prototype.execute=function(t){var e=this._canvas,n=t.newRoot,i=n.businessObject,r=e.getRootElement(),o=r.businessObject,a=o.$parent,c=o.di;e.setRootElement(n,!0),Jt(a.rootElements,i),i.$parent=a,Yt(a.rootElements,o),o.$parent=null,o.di=null,c.bpmnElement=i,i.di=c,t.oldRoot=r},yc.prototype.revert=function(t){var e=this._canvas,n=t.newRoot.businessObject,i=t.oldRoot,r=i.businessObject,o=n.$parent,a=n.di;e.setRootElement(i,!0),Yt(o.rootElements,n),n.$parent=null,Jt(o.rootElements,r),r.$parent=o,n.di=null,a.bpmnElement=r,r.di=a},Dp.$inject=["modeling","spaceTool"],Dp.prototype.preExecute=function(t){var e=this._spaceTool,n=this._modeling,i=t.shape,r=t.location,o=fn(i),a=o===i,c=a?i:i.parent;ai(c).length||n.createShape({type:"bpmn:Lane"},{x:i.x+zr,y:i.y,width:i.width-zr,height:i.height},c);var l=[];$i(o,function(y){return l.push(y),y.label&&l.push(y.label),y===i?[]:mt(y.children,function(b){return b!==i})});var u=r==="top"?-120:120,p=r==="top"?i.y:i.y+i.height,d=p+(r==="top"?10:-10),v=r==="top"?"n":"s",f=e.calculateAdjustments(l,"y",u,d);e.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:u},v,d),t.newLane=n.createShape({type:"bpmn:Lane"},{x:i.x+(a?zr:0),y:p-(r==="top"?120:0),width:i.width-(a?zr:0),height:120},c)},Bp.$inject=["modeling","translate"],Bp.prototype.preExecute=function(t){var e=this._modeling,n=this._translate,i=t.shape,r=t.count,o=ai(i),a=o.length;if(a>r)throw new Error(n("more than {count} child lanes",{count:r}));var c,l,u,p,d,v=Math.round(i.height/r);for(d=0;d<r;d++)c=i.y+d*v,l=d===r-1?i.height-v*d:v,u={x:i.x+zr,y:c,width:i.width-zr,height:l},d<a?e.resizeShape(o[d],u):(p={type:"bpmn:Lane"},e.createShape(p,u,i))},pa.$inject=["modeling","spaceTool"],pa.prototype.preExecute=function(t){var e=t.shape,n=t.newBounds;t.balanced!==!1?this.resizeBalanced(e,n):this.resizeSpace(e,n)},pa.prototype.resizeBalanced=function(t,e){var n=this._modeling,i=A_(t,e);n.resizeShape(t,e),i.forEach(function(r){n.resizeShape(r.shape,r.newBounds)})},pa.prototype.resizeSpace=function(t,e){var n,i,r,o,a,c=this._spaceTool,l=ot(t),u=av(ot(e),l),p=fn(t),d=[],v=[];$i(p,function(f){return d.push(f),(A(f,"bpmn:Lane")||A(f,"bpmn:Participant"))&&v.push(f),f.children}),(u.bottom||u.top)&&(n=u.bottom||u.top,i=t.y+(u.bottom?t.height:0)+(u.bottom?-10:10),r=u.bottom?"s":"n",o=u.top>0||u.bottom<0?-n:n,a=c.calculateAdjustments(d,"y",o,i),c.makeSpace(a.movingShapes,a.resizingShapes,{x:0,y:n},r)),(u.left||u.right)&&(n=u.right||u.left,i=t.x+(u.right?t.width:0)+(u.right?-10:100),r=u.right?"e":"w",o=u.left>0||u.right<0?-n:n,a=c.calculateAdjustments(v,"x",o,i),c.makeSpace(a.movingShapes,a.resizingShapes,{x:n,y:0},r))};var ha="flowNodeRef",Op="lanes";function da(t){this._elementRegistry=t}function gc(t){this._moddle=t}da.$inject=["elementRegistry"],da.prototype.computeUpdates=function(t,e){var n=[],i=[],r={},o=[];function a(l){n.indexOf(l)===-1&&(o.push(l),n.push(l))}function c(l){if(!l.parent)return[];var u=function(p){var d=fn(p);return r[d.id]||(r[d.id]=Is(d)),r[d.id]}(l);return u.filter(function(p){return d=l,v=ot(p),f=d.x+d.width/2,y=d.y+d.height/2,f>v.left&&f<v.right&&y>v.top&&y<v.bottom;var d,v,f,y}).map(function(p){return p.businessObject})}return e.forEach(function(l){var u=fn(l);u&&n.indexOf(u)===-1&&(u.children.filter(function(p){return A(p,"bpmn:FlowNode")}).forEach(a),n.push(u))}),t.forEach(a),o.forEach(function(l){var u=l.businessObject,p=u.get(Op).slice(),d=c(l);i.push({flowNode:u,remove:p,add:d})}),e.forEach(function(l){var u=l.businessObject;l.parent||u.get(ha).forEach(function(p){i.push({flowNode:p,remove:[u],add:[]})})}),i},da.prototype.execute=function(t){var e=t.updates;e||(e=t.updates=this.computeUpdates(t.flowNodeShapes,t.laneShapes)),e.forEach(function(n){var i=n.flowNode,r=i.get(Op);n.remove.forEach(function(o){Yt(r,o),Yt(o.get(ha),i)}),n.add.forEach(function(o){Jt(r,o),Jt(o.get(ha),i)})})},da.prototype.revert=function(t){t.updates.forEach(function(e){var n=e.flowNode,i=n.get(Op);e.add.forEach(function(r){Yt(i,r),Yt(r.get(ha),n)}),e.remove.forEach(function(r){Jt(i,r),Jt(r.get(ha),n)})})},gc.$inject=["moddle"],gc.prototype.execute=function(t){var e=this._moddle.ids,n=t.id,i=t.element;t.claiming?e.claim(n,i):e.unclaim(n)},gc.prototype.revert=function(t){var e=this._moddle.ids,n=t.id,i=t.element;t.claiming?e.unclaim(n):e.claim(n,i)};var Tw={fill:void 0,stroke:void 0};function Lp(t){this._commandStack=t,this._normalizeColor=function(e){if(e){if(Ie(e)){var n=function(i){var r=document.createElement("canvas").getContext("2d");return r.fillStyle="transparent",r.fillStyle=i,/^#[0-9a-fA-F]{6}$/.test(r.fillStyle)?r.fillStyle:null}(e);if(n)return n}throw new Error("invalid color value: "+e)}}}Lp.$inject=["commandStack"],Lp.prototype.postExecute=function(t){var e=t.elements,n=t.colors||Tw,i=this,r={};"fill"in n&&$(r,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&$(r,{"border-color":this._normalizeColor(n.stroke)}),L(e,function(o){var a=function(c){return!!c.waypoints}(o)?Xe(r,["border-color"]):r;(function(c){"border-color"in c&&(c.stroke=c["border-color"]),"background-color"in c&&(c.fill=c["background-color"])})(a),o.labelTarget?i._commandStack.execute("element.updateModdleProperties",{element:o,moddleElement:o.businessObject.di.label,properties:{color:r["background-color"]}}):i._commandStack.execute("element.updateProperties",{element:o,properties:{di:a}})})};var Aw={width:0,height:0};function rg(t,e){function n(i,r){var o=i.label||i,a=i.labelTarget||i;return function(c,l,u){var p=c.businessObject,d=bm(p);d&&(d==="categoryValueRef"?p.categoryValueRef.value=l:p[d]=l)}(o,r),[o,a]}this.preExecute=function(i){var r=i.element,o=r.businessObject,a=i.newLabel;if(!be(r)&&Ir(r)&&!us(r)&&!og(a)){var c=ps(r);c={x:c.x,y:c.y+7},t.createLabel(r,c,{id:o.id+"_label",businessObject:o})}},this.execute=function(i){return i.oldLabel=pn(i.element),n(i.element,i.newLabel)},this.revert=function(i){return n(i.element,i.oldLabel)},this.postExecute=function(i){var r=i.element,o=r.label||r,a=i.newLabel,c=i.newBounds,l=i.hints||{};if(be(o)||A(o,"bpmn:TextAnnotation"))if(be(o)&&og(a))l.removeShape!==!1&&t.removeShape(o,{unsetLabel:!1});else{var u=pn(o);c===void 0&&(c=e.getExternalLabelBounds(o,u)),c&&t.resizeShape(o,c,Aw)}}}function og(t){return!t||!t.trim()}function Ee(t,e,n,i){Dt.call(this,t,e,n),this._bpmnRules=i}function ag(){}rg.$inject=["modeling","textRenderer"],it(Ee,Dt),Ee.$inject=["eventBus","elementFactory","commandStack","bpmnRules"],Ee.prototype.getHandlers=function(){var t=Dt.prototype.getHandlers.call(this);return t["element.updateModdleProperties"]=ca,t["element.updateProperties"]=ua,t["canvas.updateRoot"]=yc,t["lane.add"]=Dp,t["lane.resize"]=pa,t["lane.split"]=Bp,t["lane.updateRefs"]=da,t["id.updateClaim"]=gc,t["element.setColor"]=Lp,t["element.updateLabel"]=rg,t},Ee.prototype.updateLabel=function(t,e,n,i){this._commandStack.execute("element.updateLabel",{element:t,newLabel:e,newBounds:n,hints:i||{}})},Ee.prototype.connect=function(t,e,n,i){var r=this._bpmnRules;if(n||(n=r.canConnect(t,e)),n)return this.createConnection(t,e,n,t.parent,i)},Ee.prototype.updateModdleProperties=function(t,e,n){this._commandStack.execute("element.updateModdleProperties",{element:t,moddleElement:e,properties:n})},Ee.prototype.updateProperties=function(t,e){this._commandStack.execute("element.updateProperties",{element:t,properties:e})},Ee.prototype.resizeLane=function(t,e,n){this._commandStack.execute("lane.resize",{shape:t,newBounds:e,balanced:n})},Ee.prototype.addLane=function(t,e){var n={shape:t,location:e};return this._commandStack.execute("lane.add",n),n.newLane},Ee.prototype.splitLane=function(t,e){this._commandStack.execute("lane.split",{shape:t,count:e})},Ee.prototype.makeCollaboration=function(){var t=this._create("root",{type:"bpmn:Collaboration"}),e={newRoot:t};return this._commandStack.execute("canvas.updateRoot",e),t},Ee.prototype.updateLaneRefs=function(t,e){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:t,laneShapes:e})},Ee.prototype.makeProcess=function(){var t={newRoot:this._create("root",{type:"bpmn:Process"})};this._commandStack.execute("canvas.updateRoot",t)},Ee.prototype.claimId=function(t,e){this._commandStack.execute("id.updateClaim",{id:t,element:e,claiming:!0})},Ee.prototype.unclaimId=function(t,e){this._commandStack.execute("id.updateClaim",{id:t,element:e})},Ee.prototype.setColor=function(t,e){t.length||(t=[t]),this._commandStack.execute("element.setColor",{elements:t,colors:e})},ag.prototype.layoutConnection=function(t,e){return[(e=e||{}).connectionStart||ft(e.source||t.source),e.connectionEnd||ft(e.target||t.target)]};var bc=20,kw=5,xc=Math.round,sg=20,Pw={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function cg(t,e,n){var i,r,o,a=ge(e,t,kw),c=n.split(":")[0],l=xc((e.x-t.x)/2+t.x),u=xc((e.y-t.y)/2+t.y),p=(o=a,{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[c].test(o)),d=/h|r|l/.test(c),v=!1,f=!1;return p?(i=d?{x:l,y:t.y}:{x:t.x,y:u},r=d?"h:h":"v:v"):(v=function(y,b){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[b].test(y)}(a,c),r=d?"h:v":"v:h",v?d?(f=u===t.y,i={x:t.x+bc*(/l/.test(c)?-1:1),y:f?u+bc:u}):i={x:(f=l===t.x)?l+bc:l,y:t.y+bc*(/t/.test(c)?-1:1)}:i={x:l,y:u}),{waypoints:jp(t,i,r).concat(i),directions:r,turnNextDirections:f}}function lg(t){return t.split(":").reverse().join(":")}function jp(t,e,n){if(!function(a){return a&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(a)}(n=n||"h:h"))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(pg(n)){var i=function(a,c,l){return cg(a,c,l)}(t,e,n),r=function(a,c,l){var u=cg(c,a,lg(l));return{waypoints:u.waypoints.slice().reverse(),directions:lg(u.directions),turnNextDirections:u.turnNextDirections}}(t,e,n),o=function(a,c){var l=a.directions.split(":")[1],u=c.directions.split(":")[0];a.turnNextDirections&&(l=l=="h"?"v":"h"),c.turnNextDirections&&(u=u=="h"?"v":"h");var p=l+":"+u;return{waypoints:jp(a.waypoints[a.waypoints.length-1],c.waypoints[0],p),directions:p}}(i,r);return[].concat(i.waypoints,o.waypoints,r.waypoints)}return function(a,c,l){var u=xc((c.x-a.x)/2+a.x),p=xc((c.y-a.y)/2+a.y);if(l==="h:v")return[{x:c.x,y:a.y}];if(l==="v:h")return[{x:a.x,y:c.y}];if(l==="h:h")return[{x:u,y:a.y},{x:u,y:c.y}];if(l==="v:v")return[{x:a.x,y:p},{x:c.x,y:p}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}(t,e,n)}function Mw(t,e,n,i,r){var o=td(r&&r.preferredLayouts||[],"straight")[0]||"h:h",a=ge(t,e,Pw[o]||0),c=function(p,d){if(pg(d))return d;switch(p){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return d}}(a,o);n=n||ft(t),i=i||ft(e);var l=c.split(":"),u=hg(n,t,l[0],function(p){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[p]}(a));return function(p,d,v){var f=jp(p,d,v);return f.unshift(p),f.push(d),dg(f)}(u,hg(i,e,l[1],a),c)}function Rw(t,e,n,i,r,o){var a;return gt(n)&&(r=n,o=i,n=ft(t),i=ft(e)),r=r||[],a=(o=$({preferredLayouts:[]},o)).preferredLayouts.indexOf("straight")!==-1&&function(c,l,u,p,d){var v,f,y={};return f=ge(c,l),/^(top|bottom|left|right)$/.test(f)?(/top|bottom/.test(f)&&(v="x"),/left|right/.test(f)&&(v="y"),d.preserveDocking==="target"?ug(v,p,c)?(y[v]=p[v],[{x:y.x!==void 0?y.x:u.x,y:y.y!==void 0?y.y:u.y,original:{x:y.x!==void 0?y.x:u.x,y:y.y!==void 0?y.y:u.y}},{x:p.x,y:p.y}]):null:ug(v,u,l)?(y[v]=u[v],[{x:u.x,y:u.y},{x:y.x!==void 0?y.x:p.x,y:y.y!==void 0?y.y:p.y,original:{x:y.x!==void 0?y.x:p.x,y:y.y!==void 0?y.y:p.y}}]):null):null}(t,e,n,i,o),a||(a=o.connectionEnd&&function(c,l,u,p){var d=p.slice().reverse();return d=Vp(c,l,u,d),d?d.reverse():null}(e,t,i,r),a||(a=o.connectionStart&&Vp(t,e,n,r))||(!o.connectionStart&&!o.connectionEnd&&r&&r.length?r:Mw(t,e,n,i,o)))}function ug(t,e,n){return function(i,r,o){return i>=r&&i<=o}(e[t],n[t],n[t]+n[{x:"width",y:"height"}[t]])}function Vp(t,e,n,i){if(function(c){return c.length<3||!(c.length>4)&&!!Pt(c,function(l,u){var p=c[u-1];return p&&wo(l,p)<3})}(i))return null;var r,o=i[0],a=i.slice();return a[0]=n,a[1]=function(c,l,u){switch(zn(l,c)){case"v":return{x:u.x,y:c.y};case"h":return{x:c.x,y:u.y}}return{x:c.x,y:c.y}}(a[1],o,n),r=function(c,l,u){var p;for(p=c.length-2;p!==0;p--)if(Sd(c[p],l,sg)||Sd(c[p],u,sg))return c.slice(p);return c}(a,t,e),r!==a&&(a=Vp(t,e,n,r)),a&&zn(a)?null:a}function pg(t){return t&&/t|r|b|l/.test(t)}function hg(t,e,n,i){if(n==="h"&&(n=/left/.test(i)?"l":"r"),n==="v"&&(n=/top/.test(i)?"t":"b"),n==="t")return{original:t,x:t.x,y:e.y};if(n==="r")return{original:t,x:e.x+e.width,y:t.y};if(n==="b")return{original:t,x:t.x,y:e.y+e.height};if(n==="l")return{original:t,x:e.x,y:t.y};throw new Error("unexpected dockingDirection: <"+n+">")}function dg(t){return t.reduce(function(e,n,i){return Ll(e[e.length-1],t[i+1],n,0)||e.push(n),e},[])}var Nw=-10,Iw=40,Fp={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Ec={top:"t",right:"r",bottom:"b",left:"l"};function $p(){}function Dw(t,e){return A(e,"bpmn:Participant")?"source":A(t,"bpmn:Participant")?"target":ma(e)?"source":ma(t)||A(e,"bpmn:Event")?"target":A(t,"bpmn:Event")?"source":null}function Bw(t){return ma(t)?"target":"source"}function mg(t,e){return t?t.original||t:ft(e)}function fg(t,e){return A(e,"bpmn:Activity")&&A(t,"bpmn:BoundaryEvent")&&e.businessObject.isForCompensation}function ma(t){return A(t,"bpmn:SubProcess")&&Mt(t)}function fa(t,e){return t===e}function va(t){var e=/right|left/.exec(t);return e&&e[0]}function er(t){var e=/top|bottom/.exec(t);return e&&e[0]}function zp(t){return t==="right"||t==="left"}function Ow(t,e){var n=e.waypoints,i=n&&n.length&&ge(n[0],t);return i==="top"?["t:r"]:i==="right"?["r:b"]:i==="left"?["l:t"]:["b:l"]}function Lw(t,e,n){var i,r,o,a,c=ft(t),l=ft(e),u=(a=(o=t).host,ge(ft(o),a,Nw)),p=fa(t.host,e),d=["top","right","bottom","left"].indexOf(u)!==-1,v=ge(l,c,{x:t.width/2+e.width/2,y:t.height/2+e.height/2});return p?function(f,y,b,g,w){var x,S=y?f:er(f),C=Ec[S];return x=y?zp(f)?vg("y",b,g,w)?"h":"b":vg("x",b,g,w)?"v":"l":"v",[C+":"+x]}(u,d,t,e,n):(i=function(f,y,b){if(b)return Ec[f];if(fa(er(f),er(y))||(g=va(f),w=va(y),Fp[g]===w))return Ec[er(f)];var g,w;return Ec[va(f)]}(u,v,d),r=function(f,y,b){if(b)return zp(f)?(g=y,w=va(f),x=Fp[w],g.indexOf(x)!==-1||fa(f,y)?"h":"v"):function(S,C){var I=er(S),s=Fp[I];return C.indexOf(s)!==-1}(f,y)||fa(f,y)?"v":"h";var g,w,x;return zp(y)||fa(er(f),er(y))&&va(y)?"h":"v"}(u,v,d),[i+":"+r])}function vg(t,e,n,i){var r=Iw;return!(Gp(t,i,n,r)||Gp(t,i,{x:n.x+n.width,y:n.y+n.height},r)||Gp(t,i,ft(e),r))}function Gp(t,e,n,i){return Math.abs(e[t]-n[t])<i}function yg(t){return $({original:t.point.original||t.point},t.actual)}function Ti(t,e){this._elementRegistry=t,this._graphicsFactory=e}it($p,ag),$p.prototype.layoutConnection=function(t,e){e||(e={});var n,i,r=e.source||t.source,o=e.target||t.target,a=e.waypoints||t.waypoints,c=e.connectionStart,l=e.connectionEnd;return c||(c=mg(a&&a[0],r)),l||(l=mg(a&&a[a.length-1],o)),(A(t,"bpmn:Association")||A(t,"bpmn:DataAssociation"))&&a&&!fg(r,o)?[].concat([c],a.slice(1,-1),[l]):(A(t,"bpmn:MessageFlow")?n=function(u,p){return{preferredLayouts:["straight","v:v"],preserveDocking:Dw(u,p)}}(r,o):(A(t,"bpmn:SequenceFlow")||fg(r,o))&&(n=r===o?{preferredLayouts:Ow(r,t)}:A(r,"bpmn:BoundaryEvent")?{preferredLayouts:Lw(r,o,l)}:ma(r)||ma(o)?function(u){return{preferredLayouts:["straight","h:h"],preserveDocking:Bw(u)}}(r):A(r,"bpmn:Gateway")?{preferredLayouts:["v:h"]}:A(o,"bpmn:Gateway")?{preferredLayouts:["h:v"]}:{preferredLayouts:["h:h"]}),n&&(i=dg(Rw(r,o,c,l,a,n=$(n,e)))),i||[c,l])},Ti.$inject=["elementRegistry","graphicsFactory"],Ti.prototype.getCroppedWaypoints=function(t,e,n){e=e||t.source,n=n||t.target;var i=this.getDockingPoint(t,e,!0),r=this.getDockingPoint(t,n),o=t.waypoints.slice(i.idx+1,r.idx);return o.unshift(yg(i)),o.push(yg(r)),o},Ti.prototype.getDockingPoint=function(t,e,n){var i,r,o=t.waypoints;return{point:r=o[i=n?0:o.length-1],actual:this._getIntersection(e,t,n)||r,idx:i}},Ti.prototype._getIntersection=function(t,e,n){return zl(this._getShapePath(t),this._getConnectionPath(e),n)},Ti.prototype._getConnectionPath=function(t){return this._graphicsFactory.getConnectionPath(t)},Ti.prototype._getShapePath=function(t){return this._graphicsFactory.getShapePath(t)},Ti.prototype._getGfx=function(t){return this._elementRegistry.getGraphics(t)};const jw={__init__:["modeling","bpmnUpdater"],__depends__:[lw,dw,mw,fw,iv,vw,gw,bw,xw,Rn,_v,Fy],bpmnFactory:["type",rn],bpmnUpdater:["type",je],elementFactory:["type",_i],modeling:["type",Ee],layouter:["type",$p],connectionDocking:["type",Ti]};var _c=Math.round;function gg(t,e,n,i,r){function o(c,l,u,p){return r.allowed("elements.move",{shapes:c,delta:l,position:u,target:p})}function a(c,l,u,p){if(te(u)&&(p=u,u=!1),!l.waypoints&&l.parent){var d=function(v){return{x:v.x+_c(v.width/2),y:v.y+_c(v.height/2)}}(l);return e.init(c,d,"shape.move",{cursor:"grabbing",autoActivate:u,data:{shape:l,context:p||{}}}),!0}}t.on("shape.move.start",1500,function(c){var l=c.context,u=c.shape,p=i.get().slice();p.indexOf(u)===-1&&(p=[u]),p=function(d){var v=Vi(d,"id");return mt(d,function(f){for(;f=f.parent;)if(v[f.id])return!1;return!0})}(p),$(l,{shapes:p,validatedShapes:p,shape:u})}),t.on("shape.move.start",1250,function(c){var l=c.context,u=l.validatedShapes;if(!(l.canExecute=o(u)))return!1}),t.on("shape.move.move",500,function(c){var l,u=c.context,p=u.validatedShapes,d=c.hover,v={x:c.dx,y:c.dy};l=o(p,v,{x:c.x,y:c.y},d),u.delta=v,u.canExecute=l,u.target=l!==null?d:null}),t.on("shape.move.end",function(c){var l=c.context,u=l.delta,p=l.canExecute,d=p==="attach",v=l.shapes;if(p===!1)return!1;u.x=_c(u.x),u.y=_c(u.y),u.x===0&&u.y===0||n.moveElements(v,u,l.target,{primaryShape:l.shape,attach:d})}),t.on("element.mousedown",function(c){if(gi(c)){var l=Dr(c);if(!l)throw new Error("must supply DOM mousedown event");return a(l,c.element)}}),this.start=a}gg.$inject=["eventBus","dragging","modeling","selection","rules"];var Up="djs-dragging",bg="drop-ok",xg="drop-not-ok",Eg="new-parent",_g="attach-ok";function wg(t,e,n,i){function r(c){var l=function(u){var p=mt(u,function(d){return!function(v){return v.waypoints}(d)||Pt(u,Ke({id:d.source.id}))&&Pt(u,Ke({id:d.target.id}))});return p}(o(c));return l}function o(c){var l=Ga(c,!0),u=le(l,function(p){return(p.incoming||[]).concat(p.outgoing||[])});return vo(l.concat(u))}function a(c,l){[_g,bg,xg,Eg].forEach(function(u){u===l?e.addMarker(c,u):e.removeMarker(c,u)})}t.on("shape.move.start",499,function(c){var l=c.context,u=l.shapes,p=l.allDraggedElements,d=r(u);if(!l.dragGroup){var v=rt("g");K(v,n.cls("djs-drag-group",["no-events"])),lt(e.getActiveLayer(),v),l.dragGroup=v}d.forEach(function(f){i.addDragger(f,l.dragGroup)}),L(p=p?vo([p,o(u)]):o(u),function(f){e.addMarker(f,Up)}),l.allDraggedElements=p,l.differentParents=gr(Vi(u,function(f){return f.parent&&f.parent.id}))!==1}),t.on("shape.move.move",499,function(c){var l=c.context,u=l.dragGroup,p=l.target,d=l.shape.parent,v=l.canExecute;p&&(v==="attach"?a(p,_g):l.canExecute&&p&&p.id!==d.id?a(p,Eg):a(p,l.canExecute?bg:xg)),Oe(u,c.dx,c.dy)}),t.on(["shape.move.out","shape.move.cleanup"],function(c){var l=c.context.target;l&&a(l,null)}),t.on("shape.move.cleanup",function(c){var l=c.context,u=l.allDraggedElements,p=l.dragGroup;L(u,function(d){e.removeMarker(d,Up)}),p&&ee(p)}),this.makeDraggable=function(c,l,u){i.addDragger(l,c.dragGroup),u&&e.addMarker(l,Up),c.allDraggedElements?c.allDraggedElements.push(l):c.allDraggedElements=[l]}}wg.$inject=["eventBus","canvas","styles","previewSupport"];const Vw={__depends__:[Do,Rn,km,Dn,Kn,zo],__init__:["move","movePreview"],move:["type",gg],movePreview:["type",wg]};var Sg=".djs-palette-toggle",Cg=".entry",Fw=Sg+", "+Cg,Hp="djs-palette-",qp="open",Tg="two-column";function ie(t,e){this._eventBus=t,this._canvas=e;var n=this;t.on("tool-manager.update",function(i){var r=i.tool;n.updateToolHighlight(r)}),t.on("i18n.changed",function(){n._update()}),t.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}function $w(t,e){var n=e.getPaletteEntries();return ve(n)?n(t):(L(n,function(i,r){t[r]=i}),t)}ie.$inject=["eventBus","canvas"],ie.prototype.registerProvider=function(t,e){e||(e=t,t=1e3),this._eventBus.on("palette.getProviders",t,function(n){n.providers.push(e)}),this._rebuild()},ie.prototype.getEntries=function(){return this._getProviders().reduce($w,{})},ie.prototype._rebuild=function(){this._diagramInitialized&&this._getProviders().length&&(this._container||this._init(),this._update())},ie.prototype._init=function(){var t=this,e=this._eventBus,n=this._getParentContainer(),i=this._container=Vt(ie.HTML_MARKUP);n.appendChild(i),oe(n).add(Hp+"shown"),ze.bind(i,Fw,"click",function(r){var o=r.delegateTarget;if($a(o,Sg))return t.toggle();t.trigger("click",r)}),st.bind(i,"mousedown",function(r){r.stopPropagation()}),ze.bind(i,Cg,"dragstart",function(r){t.trigger("dragstart",r)}),e.on("canvas.resized",this._layoutChanged,this),e.fire("palette.create",{container:i})},ie.prototype._getProviders=function(t){var e=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},ie.prototype._toggleState=function(t){t=t||{};var e,n=this._getParentContainer(),i=this._container,r=this._eventBus,o=oe(i),a=oe(n);e="twoColumn"in t?t.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),o.toggle(Tg,e),a.toggle(Hp+Tg,e),"open"in t&&(o.toggle(qp,t.open),a.toggle(Hp+qp,t.open)),r.fire("palette.changed",{twoColumn:e,open:this.isOpen()})},ie.prototype._update=function(){var t=Wt(".djs-palette-entries",this._container),e=this._entries=this.getEntries();Fa(t),L(e,function(n,i){var r=n.group||"default",o=Wt("[data-group="+r+"]",t);o||(o=Vt('<div class="group" data-group="'+r+'"></div>'),t.appendChild(o));var a=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),c=Vt(a);o.appendChild(c),n.separator||($e(c,"data-action",i),n.title&&$e(c,"title",n.title),n.className&&function(l,u){var p=oe(l);(gt(u)?u:u.split(/\s+/g)).forEach(function(d){p.add(d)})}(c,n.className),n.imageUrl&&c.appendChild(Vt('<img src="'+n.imageUrl+'">')))}),this.open()},ie.prototype.trigger=function(t,e,n){var i,r,o,a=this._entries,c=e.delegateTarget||e.target;if(!c)return e.preventDefault();(i=a[$e(c,"data-action")])&&(r=i.action,o=e.originalEvent||e,ve(r)?t==="click"&&r(o,n):r[t]&&r[t](o,n),e.preventDefault())},ie.prototype._layoutChanged=function(){this._toggleState({})},ie.prototype._needsCollapse=function(t,e){return t<46*Object.keys(e).length+50},ie.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},ie.prototype.open=function(){this._toggleState({open:!0})},ie.prototype.toggle=function(t){this.isOpen()?this.close():this.open()},ie.prototype.isActiveTool=function(t){return t&&this._activeTool===t},ie.prototype.updateToolHighlight=function(t){var e;this._toolsContainer||(e=Wt(".djs-palette-entries",this._container),this._toolsContainer=Wt("[data-group=tools]",e)),L(this._toolsContainer.children,function(n){var i=n.getAttribute("data-action");if(i){var r=oe(n);i=i.replace("-tool",""),r.contains("entry")&&i===t?r.add("highlighted-entry"):r.remove("highlighted-entry")}})},ie.prototype.isOpen=function(){return oe(this._container).has(qp)},ie.prototype._getParentContainer=function(){return this._canvas.getContainer()},ie.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';const zw={__init__:["palette"],palette:["type",ie]};var Ag="crosshair";function nr(t,e,n,i,r,o,a){this._selection=r,this._dragging=n,this._mouse=a;var c=this,l=function(d){var v,f=e.getActiveLayer();K(v=d.frame=rt("rect"),{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),lt(f,v)},u=function(d){var v=d.frame,f=d.bbox;K(v,{x:f.x,y:f.y,width:f.width,height:f.height})},p=function(d){d.frame&&ee(d.frame)};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),t.on("lasso.selection.end",function(d){var v=d.originalEvent.target;(d.hover||v instanceof SVGElement)&&t.once("lasso.selection.ended",function(){c.activateLasso(d.originalEvent,!0)})}),t.on("lasso.end",function(d){var v=Wp(d),f=i.filter(function(y){return y});c.select(f,v)}),t.on("lasso.start",function(d){var v=d.context;v.bbox=Wp(d),l(v)}),t.on("lasso.move",function(d){var v=d.context;v.bbox=Wp(d),u(v)}),t.on("lasso.cleanup",function(d){var v=d.context;p(v)}),t.on("element.mousedown",1500,function(d){if(Tm(d))return c.activateLasso(d.originalEvent),!0})}function Wp(t){var e={x:t.x-t.dx,y:t.y-t.dy},n={x:t.x,y:t.y};return e.x<=n.x&&e.y<n.y||e.x<n.x&&e.y<=n.y?{x:e.x,y:e.y,width:n.x-e.x,height:n.y-e.y}:e.x>=n.x&&e.y<n.y||e.x>n.x&&e.y<=n.y?{x:n.x,y:e.y,width:e.x-n.x,height:n.y-e.y}:e.x<=n.x&&e.y>n.y||e.x<n.x&&e.y>=n.y?{x:e.x,y:n.y,width:n.x-e.x,height:e.y-n.y}:e.x>=n.x&&e.y>n.y||e.x>n.x&&e.y>=n.y?{x:n.x,y:n.y,width:e.x-n.x,height:e.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}nr.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],nr.prototype.activateLasso=function(t,e){this._dragging.init(t,"lasso",{autoActivate:e,cursor:Ag,data:{context:{}}})},nr.prototype.activateSelection=function(t,e){this._dragging.init(t,"lasso.selection",{trapClick:!1,autoActivate:e,cursor:Ag,data:{context:{}}})},nr.prototype.select=function(t,e){var n=function(i,r){var o={};return L(i,function(a){var c=a;c.waypoints&&(c=ye(c)),!pt(r.y)&&c.x>r.x&&(o[a.id]=a),!pt(r.x)&&c.y>r.y&&(o[a.id]=a),c.x>r.x&&c.y>r.y&&(pt(r.width)&&pt(r.height)&&c.width+c.x<r.width+r.x&&c.height+c.y<r.height+r.y?o[a.id]=a:pt(r.width)&&pt(r.height)||(o[a.id]=a))}),o}(t,e);this._selection.select(Va(n))},nr.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateSelection(t,!!t)},nr.prototype.isActive=function(){var t=this._dragging.context();return t&&/^lasso/.test(t.prefix)};const Gw={__depends__:[ic,Ho],__init__:["lassoTool"],lassoTool:["type",nr]};var Kp=1500,kg="grab";function Wr(t,e,n,i,r,o){this._dragging=n,this._mouse=o;var a=this,c=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),t.on("element.mousedown",Kp,function(l){if(Br(l))return a.activateMove(l.originalEvent,!0),!1}),c&&c.addListener(Kp,function(l){if(Pg(l.keyEvent)&&!a.isActive()){var u=a._mouse.getLastMoveEvent();a.activateMove(u,!!u)}},"keyboard.keydown"),c&&c.addListener(Kp,function(l){Pg(l.keyEvent)&&a.isActive()&&a.toggle()},"keyboard.keyup"),t.on("hand.end",function(l){var u=l.originalEvent.target;if(!(l.hover||u instanceof SVGElement))return!1;t.once("hand.ended",function(){a.activateMove(l.originalEvent,{reactivate:!0})})}),t.on("hand.move.move",function(l){var u=e.viewbox().scale;e.scroll({dx:l.dx*u,dy:l.dy*u})}),t.on("hand.move.end",function(l){var u=l.context.reactivate;return!Br(l)&&u&&t.once("hand.move.ended",function(p){a.activateHand(p.originalEvent,!0,!0)}),!1})}function Pg(t){return hn(" ",t)}Wr.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"],Wr.prototype.activateMove=function(t,e,n){typeof e=="object"&&(n=e,e=!1),this._dragging.init(t,"hand.move",{autoActivate:e,cursor:kg,data:{context:n||{}}})},Wr.prototype.activateHand=function(t,e,n){this._dragging.init(t,"hand",{trapClick:!1,autoActivate:e,cursor:kg,data:{context:{reactivate:n}}})},Wr.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateHand(t,!!t)},Wr.prototype.isActive=function(){var t=this._dragging.context();return!!t&&/^(hand|hand\.move)$/.test(t.prefix)};const Uw={__depends__:[ic,Ho],__init__:["handTool"],handTool:["type",Wr]};var Mg="connect-ok",Rg="connect-not-ok";function Kr(t,e,n,i,r,o,a){var c=this;this._dragging=e,this._rules=o,this._mouse=a,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),t.on("global-connect.hover",function(l){var u=l.context,p=l.hover,d=u.canStartConnect=c.canStartConnect(p);d!==null&&(u.startTarget=p,i.addMarker(p,d?Mg:Rg))}),t.on(["global-connect.out","global-connect.cleanup"],function(l){var u=l.context.startTarget,p=l.context.canStartConnect;u&&i.removeMarker(u,p?Mg:Rg)}),t.on(["global-connect.ended"],function(l){var u=l.context.startTarget,p={x:l.x,y:l.y};if(c.canStartConnect(u))return t.once("element.out",function(){t.once(["connect.ended","connect.canceled"],function(){t.fire("global-connect.drag.ended")}),n.start(null,u,p)}),!1})}Kr.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"],Kr.prototype.start=function(t,e){this._dragging.init(t,"global-connect",{autoActivate:e,trapClick:!1,data:{context:{}}})},Kr.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();return this.start(t,!!t)},Kr.prototype.isActive=function(){var t=this._dragging.context();return t&&/^global-connect/.test(t.prefix)},Kr.prototype.canStartConnect=function(t){return this._rules.allowed("connection.start",{source:t})};const Hw={__depends__:[Su,Dn,Kn,ic,Ho],globalConnect:["type",Kr]};Ba=function(t,e,n,i,r,o,a,c){this._palette=t,this._create=e,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=o,this._globalConnect=a,this._translate=c,t.registerProvider(this)},Ba.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],Ba.prototype.getPaletteEntries=function(t){var e={},n=this._create,i=this._elementFactory,r=this._spaceTool,o=this._lassoTool,a=this._handTool,c=this._globalConnect,l=this._translate;function u(v,f,y,b,g){function w(S){var C=i.createShape($({type:v},g));g&&(C.businessObject.di.isExpanded=g.isExpanded),n.start(S,C)}var x=v.replace(/^bpmn:/,"");return{group:f,className:y,title:b||l("Create {type}",{type:x}),action:{dragstart:w,click:w}}}function p(v){var f=i.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),y=i.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:f});n.start(v,[f,y],{hints:{autoSelect:[f]}})}function d(v){n.start(v,i.createParticipantShape())}return $(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:l("Activate the hand tool"),action:{click:function(v){a.activateHand(v)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:l("Activate the lasso tool"),action:{click:function(v){o.activateSelection(v)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:l("Activate the create/remove space tool"),action:{click:function(v){r.activateSelection(v)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:l("Activate the global connect tool"),action:{click:function(v){c.start(v)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":u("bpmn:StartEvent","event","bpmn-icon-start-event-none",l("Create StartEvent")),"create.intermediate-event":u("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",l("Create Intermediate/Boundary Event")),"create.end-event":u("bpmn:EndEvent","event","bpmn-icon-end-event-none",l("Create EndEvent")),"create.exclusive-gateway":u("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",l("Create Gateway")),"create.task":u("bpmn:Task","activity","bpmn-icon-task",l("Create Task")),"create.data-object":u("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",l("Create DataObjectReference")),"create.data-store":u("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",l("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:l("Create expanded SubProcess"),action:{dragstart:p,click:p}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:l("Create Pool/Participant"),action:{dragstart:d,click:d}},"create.group":u("bpmn:Group","artifact","bpmn-icon-group",l("Create Group"))}),e};const qw={__depends__:[zw,Ss,Fy,Gw,Uw,Hw,ls],__init__:["paletteProvider"],paletteProvider:["type",Ba]};function Xp(t,e,n,i,r){Q.call(this,t),t.on("shape.move.move",250,function(o){var a=o.context,c=a.canExecute;a.visualReplacements||(a.visualReplacements={}),c&&c.replacements?function(l){L(l.canExecute.replacements,function(u){var p=u.oldElementId,d={type:u.newElementType};if(!l.visualReplacements[p]){var v=e.get(p);$(d,{x:v.x,y:v.y});var f=n.createShape(d);i.addShape(f,v.parent);var y=Wt('[data-element-id="'+xu(v.id)+'"]',l.dragGroup);y&&K(y,{display:"none"});var b=r.addDragger(f,l.dragGroup);l.visualReplacements[p]=b,i.removeShape(f)}})}(a):function(l){var u=l.visualReplacements;L(u,function(p,d){var v=Wt('[data-element-id="'+xu(d)+'"]',l.dragGroup);v&&K(v,{display:"inline"}),p.remove(),u[d]&&delete u[d]})}(a)})}Xp.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"],it(Xp,Q);const Ww={__depends__:[zo],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Xp]};var Yp=40,Kw=20,Xw=10,Ng=20,Ig=["x","y"],Yw=Math.abs;function Dg(t){t.on(["connect.hover","connect.move","connect.end"],1250,function(e){var n=e.context,i=n.canExecute,r=n.start,o=n.hover,a=n.source,c=n.target;e.originalEvent&&He(e.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&o&&function(l,u,p){Ig.forEach(function(d){var v=Lg(d,u);l[d]<u[d]+p?se(l,d,u[d]+p):l[d]>u[d]+v-p&&se(l,d,u[d]+v-p)})}(e,o,function(l){return A(l,"bpmn:Task")?Xw:Kw}(o)),o&&function(l,u){return si(u,function(p){return Og(l,p)})}(i,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=Ze(r),wt(o,["bpmn:Event","bpmn:Gateway"])&&Bg(e,Ze(o)),wt(o,["bpmn:Task","bpmn:SubProcess"])&&function(l,u){var p=Ze(u);Ig.forEach(function(d){(function(v,f,y){return v[y]>f[y]+Ng&&v[y]<f[y]+Lg(y,f)-Ng})(l,u,d)&&se(l,d,p[d])})}(e,o),A(a,"bpmn:BoundaryEvent")&&c===a.host&&function(l){var u=l.context,p=u.source,d=u.target;if(!function(b){var g=b.hover,w=b.source;return g&&w&&g===w}(u)){var v=Ze(p),f=ge(v,d,-10),y=[];/top|bottom/.test(f)&&y.push("x"),/left|right/.test(f)&&y.push("y"),y.forEach(function(b){var g,w=l[b];Yw(w-v[b])<Yp&&(g=w>v[b]?v[b]+Yp:v[b]-Yp,se(l,b,g))})}}(e)):Og(i,"bpmn:MessageFlow")?(A(r,"bpmn:Event")&&(n.connectionStart=Ze(r)),A(o,"bpmn:Event")&&Bg(e,Ze(o))):n.connectionStart=n.initialConnectionStart)})}function Bg(t,e){se(t,"x",e.x),se(t,"y",e.y)}function Og(t,e){return t&&t.type===e}function Lg(t,e){return t==="x"?e.width:e.height}function Ai(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function wc(t){this._snapValues={}}Dg.$inject=["eventBus"],Ai.prototype.getSnapOrigin=function(t){return this._snapOrigins[t]},Ai.prototype.setSnapOrigin=function(t,e){this._snapOrigins[t]=e,this._snapLocations.indexOf(t)===-1&&this._snapLocations.push(t)},Ai.prototype.addDefaultSnap=function(t,e){var n=this._defaultSnaps[t];n||(n=this._defaultSnaps[t]=[]),n.push(e)},Ai.prototype.getSnapLocations=function(){return this._snapLocations},Ai.prototype.setSnapLocations=function(t){this._snapLocations=t},Ai.prototype.pointsForTarget=function(t){var e=t.id||t,n=this._targets[e];return n||(n=this._targets[e]=new wc).initDefaults(this._defaultSnaps),n},wc.prototype.add=function(t,e){var n=this._snapValues[t];n||(n=this._snapValues[t]={x:[],y:[]}),n.x.indexOf(e.x)===-1&&n.x.push(e.x),n.y.indexOf(e.y)===-1&&n.y.push(e.y)},wc.prototype.snap=function(t,e,n,i){var r=this._snapValues[e];return r&&function(o,a,c){var l,u;for(c=c===void 0?10:c,l=0;l<a.length;l++)if(u=a[l],XE(u-o)<=c)return u}(t[n],r[n],i)},wc.prototype.initDefaults=function(t){var e=this;L(t||{},function(n,i){L(n,function(r){e.add(i,r)})})};var Jw=1250;function On(t,e,n){var i=this;this._elementRegistry=t,e.on(["create.start","shape.move.start"],function(r){i.initSnap(r)}),e.on(["create.move","create.end","shape.move.move","shape.move.end"],Jw,function(r){var o=r.context,a=o.shape,c=o.snapContext,l=o.target;if((!r.originalEvent||!He(r.originalEvent))&&!$r(r)&&l){var u=c.pointsForTarget(l);u.initialized||((u=i.addSnapTargetPoints(u,a,l)).initialized=!0),n.snap(r,u)}}),e.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}function Jp(t){return!!t.labelTarget}On.$inject=["elementRegistry","eventBus","snapping"],On.prototype.initSnap=function(t){var e,n=this._elementRegistry,i=t.context,r=i.shape,o=i.snapContext;o||(o=i.snapContext=new Ai);var a=(e=n.get(r.id)?Ze(r,t):{x:t.x+Ze(r).x,y:t.y+Ze(r).y}).x-r.width/2,c=e.y-r.height/2,l=e.x+r.width/2,u=e.y+r.height/2;return o.setSnapOrigin("mid",{x:e.x-t.x,y:e.y-t.y}),Jp(r)||(o.setSnapOrigin("top-left",{x:a-t.x,y:c-t.y}),o.setSnapOrigin("bottom-right",{x:l-t.x,y:u-t.y})),o},On.prototype.addSnapTargetPoints=function(t,e,n){return L(this.getSnapTargets(e,n),function(i){if(Jp(i))Jp(e)&&t.add("mid",Ze(i));else if(i.waypoints){if(i.waypoints.length<3)return;L(i.waypoints.slice(1,-1),function(r){t.add("mid",r)})}else t.add("mid",Ze(i))}),pt(e.x)&&pt(e.y)&&this._elementRegistry.get(e.id)&&t.add("mid",Ze(e)),t},On.prototype.getSnapTargets=function(t,e){return kf(e).filter(function(n){return!n.hidden})};function Xr(t,e){e.invoke(On,this),t.on(["create.move","create.end"],1500,Zw),t.on(["create.move","create.end","shape.move.move","shape.move.end"],1500,function(n){var i=n.context,r=i.canExecute,o=i.target;r&&(r==="attach"||r.attach)&&!$r(n)&&function(a,c){var l,u=ot(c),p=dy(a,c),d=a.context,v=d.shape;l=v.parent?{x:0,y:0}:ft(v),/top/.test(p)?se(a,"y",u.top-l.y):/bottom/.test(p)&&se(a,"y",u.bottom-l.y),/left/.test(p)?se(a,"x",u.left-l.x):/right/.test(p)&&se(a,"x",u.right-l.x)}(n,o)})}function Zw(t){var e=t.context.createConstraints;if(e){var n=e.top,i=e.right,r=e.bottom,o=e.left;(o&&o>=t.x||i&&i<=t.x)&&se(t,"x",t.x),(n&&n>=t.y||r&&r<=t.y)&&se(t,"y",t.y)}}function jg(t,e){return t.indexOf(e)!==-1}function Vg(t,e,n){return e?{x:t.x-n.x,y:t.y-n.y}:{x:t.x,y:t.y}}it(Xr,On),Xr.$inject=["eventBus","injector"],Xr.prototype.initSnap=function(t){var e=On.prototype.initSnap.call(this,t),n=t.shape,i=!!this._elementRegistry.get(n.id);return L(n.outgoing,function(r){var o=r.waypoints[0];o=o.original||o,e.setSnapOrigin(r.id+"-docking",Vg(o,i,t))}),L(n.incoming,function(r){var o=r.waypoints[r.waypoints.length-1];o=o.original||o,e.setSnapOrigin(r.id+"-docking",Vg(o,i,t))}),A(n,"bpmn:Participant")&&e.setSnapLocations(["top-left","bottom-right","mid"]),e},Xr.prototype.addSnapTargetPoints=function(t,e,n){On.prototype.addSnapTargetPoints.call(this,t,e,n);var i=this.getSnapTargets(e,n);L(i,function(o){var a;(function(c){return A(c,"bpmn:SubProcess")&&Mt(c)?!0:A(c,"bpmn:Participant")}(o)||(a="bpmn:TextAnnotation",[e,o].every(function(c){return A(c,a)})))&&(t.add("top-left",Tf(o)),t.add("bottom-right",Af(o)))});var r=this._elementRegistry;return L(e.incoming,function(o){if(r.get(e.id)){jg(i,o.source)||t.add("mid",ft(o.source));var a=o.waypoints[0];t.add(o.id+"-docking",a.original||a)}}),L(e.outgoing,function(o){if(r.get(e.id)){jg(i,o.target)||t.add("mid",ft(o.target));var a=o.waypoints[o.waypoints.length-1];t.add(o.id+"-docking",a.original||a)}}),A(n,"bpmn:SequenceFlow")&&(t=this.addSnapTargetPoints(t,e,n.parent)),t},Xr.prototype.getSnapTargets=function(t,e){return On.prototype.getSnapTargets.call(this,t,e).filter(function(n){return!A(n,"bpmn:Lane")})};function ya(t,e){var n=this;t.on(["resize.start"],function(i){n.initSnap(i)}),t.on(["resize.move","resize.end"],1250,function(i){var r=i.context,o=r.shape,a=o.parent,c=r.direction,l=r.snapContext;if(!(i.originalEvent&&He(i.originalEvent)||$r(i))){var u=l.pointsForTarget(a);u.initialized||((u=n.addSnapTargetPoints(u,o,a,c)).initialized=!0),function(p){return p==="n"||p==="s"}(c)&&se(i,"x",i.x),function(p){return p==="e"||p==="w"}(c)&&se(i,"y",i.y),e.snap(i,u)}}),t.on(["resize.cleanup"],function(){e.hide()})}function Fg(t,e){var n=ft(t),i=ot(t),r={x:n.x,y:n.y};return e.indexOf("n")!==-1?r.y=i.top:e.indexOf("s")!==-1&&(r.y=i.bottom),e.indexOf("e")!==-1?r.x=i.right:e.indexOf("w")!==-1&&(r.x=i.left),r}ya.prototype.initSnap=function(t){var e=t.context,n=e.shape,i=e.direction,r=e.snapContext;r||(r=e.snapContext=new Ai);var o=Fg(n,i);return r.setSnapOrigin("corner",{x:o.x-t.x,y:o.y-t.y}),r},ya.prototype.addSnapTargetPoints=function(t,e,n,i){return L(this.getSnapTargets(e,n),function(r){t.add("corner",Af(r)),t.add("corner",Tf(r))}),t.add("corner",Fg(e,i)),t},ya.$inject=["eventBus","snapping"],ya.prototype.getSnapTargets=function(t,e){return kf(e).filter(function(n){return i=n,r=t,!(i.host===r||function(o){return!!o.waypoints}(n)||function(o){return!!o.hidden}(n)||function(o){return!!o.labelTarget}(n));var i,r})};function ki(t){this._canvas=t,this._asyncHide=gl(Se(this.hide,this),1e3)}ki.$inject=["canvas"],ki.prototype.snap=function(t,e){var n=t.context.snapContext,i=n.getSnapLocations(),r={x:$r(t,"x"),y:$r(t,"y")};L(i,function(o){var a=n.getSnapOrigin(o),c={x:t.x+a.x,y:t.y+a.y};if(L(["x","y"],function(l){var u;r[l]||(u=e.snap(c,o,l,7))!==void 0&&(r[l]={value:u,originValue:u-a[l]})}),r.x&&r.y)return!1}),this.showSnapLine("vertical",r.x&&r.x.value),this.showSnapLine("horizontal",r.y&&r.y.value),L(["x","y"],function(o){var a=r[o];te(a)&&se(t,o,a.originValue)})},ki.prototype._createLine=function(t){var e=this._canvas.getLayer("snap"),n=rt("path");return K(n,{d:"M0,0 L0,0"}),bt(n).add("djs-snap-line"),lt(e,n),{update:function(i){pt(i)?K(n,t==="horizontal"?{d:"M-100000,"+i+" L+100000,"+i,display:""}:{d:"M "+i+",-100000 L "+i+", +100000",display:""}):K(n,{display:"none"})}}},ki.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},ki.prototype.showSnapLine=function(t,e){var n=this.getSnapLine(t);n&&n.update(e),this._asyncHide()},ki.prototype.getSnapLine=function(t){return this._snapLines||this._createSnapLines(),this._snapLines[t]},ki.prototype.hide=function(){L(this._snapLines,function(t){t.update()})};const Qw={__depends__:[{__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",On],resizeSnapping:["type",ya],snapping:["type",ki]}],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",Dg],createMoveSnapping:["type",Xr]};function ut(t,e,n,i){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=t,this._eventBus=e,this._overlays=n,this._selection=i,this._container=Vt(ut.BOX_HTML),this._searchInput=Wt(ut.INPUT_SELECTOR,this._container),this._resultsContainer=Wt(ut.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),e.on(["canvas.destroy","diagram.destroy"],this.close,this)}function $g(t,e,n){var i=function(o){var a="";return o.forEach(function(c){c.matched?a+='<strong class="'+ut.RESULT_HIGHLIGHT_CLASS+'">'+pf(c.matched)+"</strong>":a+=pf(c.normal)}),a!==""?a:null}(e),r=Vt(n);r.innerHTML=i,t.appendChild(r)}ut.$inject=["canvas","eventBus","overlays","selection"],ut.prototype._bindEvents=function(){var t=this;function e(n,i,r,o){t._eventMaps.push({el:n,type:r,listener:ze.bind(n,i,r,o)})}e(document,"html","click",function(n){t.close()}),e(this._container,ut.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),e(this._container,ut.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),t._scrollToNode(n.delegateTarget),t._preselect(n.delegateTarget)}),e(this._container,ut.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),t._select(n.delegateTarget)}),e(this._container,ut.INPUT_SELECTOR,"keydown",function(n){n.keyCode===38&&n.preventDefault(),n.keyCode===40&&n.preventDefault()}),e(this._container,ut.INPUT_SELECTOR,"keyup",function(n){if(n.keyCode===27)return t.close();if(n.keyCode===13){var i=t._getCurrentResult();return i?t._select(i):t.close()}return n.keyCode===38?t._scrollToDirection(!0):n.keyCode===40?t._scrollToDirection():void(n.keyCode!==37&&n.keyCode!==39&&t._search(n.delegateTarget.value))})},ut.prototype._unbindEvents=function(){this._eventMaps.forEach(function(t){ze.unbind(t.el,t.type,t.listener)})},ut.prototype._search=function(t){var e=this;if(this._clearResults(),t&&t!==""){var n=this._searchProvider.find(t);if(n.length){n.forEach(function(r){var o=r.element.id,a=e._createResultNode(r,o);e._results[o]={element:r.element,node:a}});var i=Wt(ut.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}}},ut.prototype._scrollToDirection=function(t){var e=this._getCurrentResult();if(e){var n=t?e.previousElementSibling:e.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}},ut.prototype._scrollToNode=function(t){if(t&&t!==this._getCurrentResult()){var e=t.offsetTop,n=this._resultsContainer.scrollTop,i=e-this._resultsContainer.clientHeight+t.clientHeight;e<n?this._resultsContainer.scrollTop=e:n<i&&(this._resultsContainer.scrollTop=i)}},ut.prototype._clearResults=function(){Fa(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},ut.prototype._getCurrentResult=function(){return Wt(ut.RESULT_SELECTED_SELECTOR,this._resultsContainer)},ut.prototype._createResultNode=function(t,e){var n=Vt(ut.RESULT_HTML);return t.primaryTokens.length>0&&$g(n,t.primaryTokens,ut.RESULT_PRIMARY_HTML),$g(n,t.secondaryTokens,ut.RESULT_SECONDARY_HTML),$e(n,ut.RESULT_ID_ATTRIBUTE,e),this._resultsContainer.appendChild(n),n},ut.prototype.registerProvider=function(t){this._searchProvider=t},ut.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,oe(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},ut.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,oe(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},ut.prototype.toggle=function(){this.isOpen()?this.close():this.open()},ut.prototype.isOpen=function(){return this._open},ut.prototype._preselect=function(t){var e=this._getCurrentResult();if(t!==e){e&&oe(e).remove(ut.RESULT_SELECTED_CLASS);var n=$e(t,ut.RESULT_ID_ATTRIBUTE),i=this._results[n].element;oe(t).add(ut.RESULT_SELECTED_CLASS),this._resetOverlay(i),this._canvas.scrollToElement(i,{top:400}),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}},ut.prototype._select=function(t){var e=$e(t,ut.RESULT_ID_ATTRIBUTE),n=this._results[e].element;this.close(),this._resetOverlay(),this._canvas.scrollToElement(n,{top:400}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)},ut.prototype._resetOverlay=function(t){if(this._overlayId&&this._overlays.remove(this._overlayId),t){var e=function(n){var i=6,r=n.width+2*i,o=n.height+2*i,a=["width: "+r+"px","height: "+o+"px"].join("; ");return{position:{bottom:o-i,right:r-i},show:!0,html:'<div style="'+a+'" class="'+ut.OVERLAY_CLASS+'"></div>'}}(ye(t));this._overlayId=this._overlays.add(t,e)}},ut.CONTAINER_SELECTOR=".djs-search-container",ut.INPUT_SELECTOR=".djs-search-input input",ut.RESULTS_CONTAINER_SELECTOR=".djs-search-results",ut.RESULT_SELECTOR=".djs-search-result",ut.RESULT_SELECTED_CLASS="djs-search-result-selected",ut.RESULT_SELECTED_SELECTOR="."+ut.RESULT_SELECTED_CLASS,ut.RESULT_ID_ATTRIBUTE="data-result-id",ut.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",ut.OVERLAY_CLASS="djs-search-overlay",ut.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',ut.RESULT_HTML='<div class="djs-search-result"></div>',ut.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',ut.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const t1={__depends__:[ru,Rn],searchPad:["type",ut]};function Zp(t,e,n){this._elementRegistry=t,this._canvas=n,e.registerProvider(this)}function zg(t){return mt(t,function(e){return!!e.matched}).length>0}function Gg(t,e){var n=[],i=t;if(!t)return n;t=t.toLowerCase(),e=e.toLowerCase();var r=t.indexOf(e);return r>-1?(r!==0&&n.push({normal:i.substr(0,r)}),n.push({matched:i.substr(r,e.length)}),e.length+r<t.length&&n.push({normal:i.substr(e.length+r,t.length)})):n.push({normal:i}),n}Zp.$inject=["elementRegistry","searchPad","canvas"],Zp.prototype.find=function(t){var e=this._canvas.getRootElement(),n=this._elementRegistry.filter(function(i){return!i.labelTarget});return n=mt(n,function(i){return i!==e}),n=We(n=mt(n=le(n,function(i){return{primaryTokens:Gg(pn(i),t),secondaryTokens:Gg(i.id,t),element:i}}),function(i){return zg(i.primaryTokens)||zg(i.secondaryTokens)}),function(i){return pn(i.element)+i.element.id})};const e1={__depends__:[t1],__init__:["bpmnSearch"],bpmnSearch:["type",Zp]};function Ln(t){Ro.call(this,t)}it(Ln,Ro),Ln.Viewer=qn,Ln.NavigatedViewer=Lo,Ln.prototype.createDiagram=Mr(function(){return this.importXML('<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>')}),Ln.prototype._interactionModules=[jm,zm,NE,Um],Ln.prototype._modelingModules=[DE,$E,HE,zE,JE,Su,ZE,k_,Qf,Ss,R_,I_,O_,L_,j_,z_,q_,jw,Vw,qw,Ww,kv,Qw,e1],Ln.prototype._modules=[].concat(qn.prototype._modules,Ln.prototype._interactionModules,Ln.prototype._modelingModules);const Ug=(t,e,n)=>(n||(n="camunda"),`<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
  id="diagram_${t}"
  targetNamespace="${{activiti:"http://activiti.org/bpmn",camunda:"http://bpmn.io/schema/bpmn",flowable:"http://flowable.org/bpmn"}[n]}">
  <bpmn2:process id="${t}" name="${e}" isExecutable="true">
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="${t}">
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>`),n1={"Append EndEvent":"\u8FFD\u52A0\u7ED3\u675F\u4E8B\u4EF6","Append Gateway":"\u8FFD\u52A0\u7F51\u5173","Append Task":"\u8FFD\u52A0\u4EFB\u52A1","Append Intermediate/Boundary Event":"\u8FFD\u52A0\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6/\u8FB9\u754C\u4E8B\u4EF6","Activate the global connect tool":"\u6FC0\u6D3B\u5168\u5C40\u8FDE\u63A5\u5DE5\u5177","Append {type}":"\u6DFB\u52A0 {type}","Add Lane above":"\u5728\u4E0A\u9762\u6DFB\u52A0\u9053","Divide into two Lanes":"\u5206\u5272\u6210\u4E24\u4E2A\u9053","Divide into three Lanes":"\u5206\u5272\u6210\u4E09\u4E2A\u9053","Add Lane below":"\u5728\u4E0B\u9762\u6DFB\u52A0\u9053","Append compensation activity":"\u8FFD\u52A0\u8865\u507F\u6D3B\u52A8","Change type":"\u4FEE\u6539\u7C7B\u578B","Connect using Association":"\u4F7F\u7528\u5173\u8054\u8FDE\u63A5","Connect using Sequence/MessageFlow or Association":"\u4F7F\u7528\u987A\u5E8F/\u6D88\u606F\u6D41\u6216\u8005\u5173\u8054\u8FDE\u63A5","Connect using DataInputAssociation":"\u4F7F\u7528\u6570\u636E\u8F93\u5165\u5173\u8054\u8FDE\u63A5",Remove:"\u79FB\u9664","Activate the hand tool":"\u6FC0\u6D3B\u6293\u624B\u5DE5\u5177","Activate the lasso tool":"\u6FC0\u6D3B\u5957\u7D22\u5DE5\u5177","Activate the create/remove space tool":"\u6FC0\u6D3B\u521B\u5EFA/\u5220\u9664\u7A7A\u95F4\u5DE5\u5177","Create expanded SubProcess":"\u521B\u5EFA\u6269\u5C55\u5B50\u8FC7\u7A0B","Create IntermediateThrowEvent/BoundaryEvent":"\u521B\u5EFA\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6/\u8FB9\u754C\u4E8B\u4EF6","Create Pool/Participant":"\u521B\u5EFA\u6C60/\u53C2\u4E0E\u8005","Parallel Multi Instance":"\u5E76\u884C\u591A\u91CD\u4E8B\u4EF6","Sequential Multi Instance":"\u65F6\u5E8F\u591A\u91CD\u4E8B\u4EF6",DataObjectReference:"\u6570\u636E\u5BF9\u8C61\u53C2\u8003",DataStoreReference:"\u6570\u636E\u5B58\u50A8\u53C2\u8003",Loop:"\u5FAA\u73AF","Ad-hoc":"\u5373\u5E2D","Create {type}":"\u521B\u5EFA {type}",Task:"\u4EFB\u52A1","Send Task":"\u53D1\u9001\u4EFB\u52A1","Receive Task":"\u63A5\u6536\u4EFB\u52A1","User Task":"\u7528\u6237\u4EFB\u52A1","Manual Task":"\u624B\u5DE5\u4EFB\u52A1","Business Rule Task":"\u4E1A\u52A1\u89C4\u5219\u4EFB\u52A1","Service Task":"\u670D\u52A1\u4EFB\u52A1","Script Task":"\u811A\u672C\u4EFB\u52A1","Call Activity":"\u8C03\u7528\u6D3B\u52A8","Sub Process (collapsed)":"\u5B50\u6D41\u7A0B\uFF08\u6298\u53E0\u7684\uFF09","Sub Process (expanded)":"\u5B50\u6D41\u7A0B\uFF08\u5C55\u5F00\u7684\uFF09","Start Event":"\u5F00\u59CB\u4E8B\u4EF6",StartEvent:"\u5F00\u59CB\u4E8B\u4EF6","Intermediate Throw Event":"\u4E2D\u95F4\u4E8B\u4EF6","End Event":"\u7ED3\u675F\u4E8B\u4EF6",EndEvent:"\u7ED3\u675F\u4E8B\u4EF6","Create StartEvent":"\u521B\u5EFA\u5F00\u59CB\u4E8B\u4EF6","Create EndEvent":"\u521B\u5EFA\u7ED3\u675F\u4E8B\u4EF6","Create Task":"\u521B\u5EFA\u4EFB\u52A1","Create User Task":"\u521B\u5EFA\u7528\u6237\u4EFB\u52A1","Create Gateway":"\u521B\u5EFA\u7F51\u5173","Create DataObjectReference":"\u521B\u5EFA\u6570\u636E\u5BF9\u8C61","Create DataStoreReference":"\u521B\u5EFA\u6570\u636E\u5B58\u50A8","Create Group":"\u521B\u5EFA\u5206\u7EC4","Create Intermediate/Boundary Event":"\u521B\u5EFA\u4E2D\u95F4/\u8FB9\u754C\u4E8B\u4EF6","Message Start Event":"\u6D88\u606F\u5F00\u59CB\u4E8B\u4EF6","Timer Start Event":"\u5B9A\u65F6\u5F00\u59CB\u4E8B\u4EF6","Conditional Start Event":"\u6761\u4EF6\u5F00\u59CB\u4E8B\u4EF6","Signal Start Event":"\u4FE1\u53F7\u5F00\u59CB\u4E8B\u4EF6","Error Start Event":"\u9519\u8BEF\u5F00\u59CB\u4E8B\u4EF6","Escalation Start Event":"\u5347\u7EA7\u5F00\u59CB\u4E8B\u4EF6","Compensation Start Event":"\u8865\u507F\u5F00\u59CB\u4E8B\u4EF6","Message Start Event (non-interrupting)":"\u6D88\u606F\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Timer Start Event (non-interrupting)":"\u5B9A\u65F6\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Conditional Start Event (non-interrupting)":"\u6761\u4EF6\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Signal Start Event (non-interrupting)":"\u4FE1\u53F7\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Escalation Start Event (non-interrupting)":"\u5347\u7EA7\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Message Intermediate Catch Event":"\u6D88\u606F\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Message Intermediate Throw Event":"\u6D88\u606F\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Timer Intermediate Catch Event":"\u5B9A\u65F6\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Escalation Intermediate Throw Event":"\u5347\u7EA7\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Conditional Intermediate Catch Event":"\u6761\u4EF6\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Link Intermediate Catch Event":"\u94FE\u63A5\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Link Intermediate Throw Event":"\u94FE\u63A5\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Compensation Intermediate Throw Event":"\u8865\u507F\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Signal Intermediate Catch Event":"\u4FE1\u53F7\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Signal Intermediate Throw Event":"\u4FE1\u53F7\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Message End Event":"\u6D88\u606F\u7ED3\u675F\u4E8B\u4EF6","Escalation End Event":"\u5B9A\u65F6\u7ED3\u675F\u4E8B\u4EF6","Error End Event":"\u9519\u8BEF\u7ED3\u675F\u4E8B\u4EF6","Cancel End Event":"\u53D6\u6D88\u7ED3\u675F\u4E8B\u4EF6","Compensation End Event":"\u8865\u507F\u7ED3\u675F\u4E8B\u4EF6","Signal End Event":"\u4FE1\u53F7\u7ED3\u675F\u4E8B\u4EF6","Terminate End Event":"\u7EC8\u6B62\u7ED3\u675F\u4E8B\u4EF6","Message Boundary Event":"\u6D88\u606F\u8FB9\u754C\u4E8B\u4EF6","Message Boundary Event (non-interrupting)":"\u6D88\u606F\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Timer Boundary Event":"\u5B9A\u65F6\u8FB9\u754C\u4E8B\u4EF6","Timer Boundary Event (non-interrupting)":"\u5B9A\u65F6\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Escalation Boundary Event":"\u5347\u7EA7\u8FB9\u754C\u4E8B\u4EF6","Escalation Boundary Event (non-interrupting)":"\u5347\u7EA7\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Conditional Boundary Event":"\u6761\u4EF6\u8FB9\u754C\u4E8B\u4EF6","Conditional Boundary Event (non-interrupting)":"\u6761\u4EF6\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Error Boundary Event":"\u9519\u8BEF\u8FB9\u754C\u4E8B\u4EF6","Cancel Boundary Event":"\u53D6\u6D88\u8FB9\u754C\u4E8B\u4EF6","Signal Boundary Event":"\u4FE1\u53F7\u8FB9\u754C\u4E8B\u4EF6","Signal Boundary Event (non-interrupting)":"\u4FE1\u53F7\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Compensation Boundary Event":"\u8865\u507F\u8FB9\u754C\u4E8B\u4EF6","Exclusive Gateway":"\u4E92\u65A5\u7F51\u5173","Parallel Gateway":"\u5E76\u884C\u7F51\u5173","Inclusive Gateway":"\u76F8\u5BB9\u7F51\u5173","Complex Gateway":"\u590D\u6742\u7F51\u5173","Event based Gateway":"\u4E8B\u4EF6\u7F51\u5173",Transaction:"\u8F6C\u8FD0","Sub Process":"\u5B50\u6D41\u7A0B","Event Sub Process":"\u4E8B\u4EF6\u5B50\u6D41\u7A0B","Collapsed Pool":"\u6298\u53E0\u6C60","Expanded Pool":"\u5C55\u5F00\u6C60","no parent for {element} in {parent}":"\u5728{parent}\u91CC\uFF0C{element}\u6CA1\u6709\u7236\u7C7B","no shape type specified":"\u6CA1\u6709\u6307\u5B9A\u7684\u5F62\u72B6\u7C7B\u578B","flow elements must be children of pools/participants":"\u6D41\u5143\u7D20\u5FC5\u987B\u662F\u6C60/\u53C2\u4E0E\u8005\u7684\u5B50\u7C7B","out of bounds release":"out of bounds release","more than {count} child lanes":"\u5B50\u9053\u5927\u4E8E{count} ","element required":"\u5143\u7D20\u4E0D\u80FD\u4E3A\u7A7A","diagram not part of bpmn:Definitions":"\u6D41\u7A0B\u56FE\u4E0D\u7B26\u5408bpmn\u89C4\u8303","no diagram to display":"\u6CA1\u6709\u53EF\u5C55\u793A\u7684\u6D41\u7A0B\u56FE","no process or collaboration to display":"\u6CA1\u6709\u53EF\u5C55\u793A\u7684\u6D41\u7A0B/\u534F\u4F5C","element {element} referenced by {referenced}#{property} not yet drawn":"\u7531{referenced}#{property}\u5F15\u7528\u7684{element}\u5143\u7D20\u4ECD\u672A\u7ED8\u5236","already rendered {element}":"{element} \u5DF2\u88AB\u6E32\u67D3","failed to import {element}":"\u5BFC\u5165{element}\u5931\u8D25",Id:"\u7F16\u53F7",Name:"\u540D\u79F0",General:"\u5E38\u89C4",Details:"\u8BE6\u60C5","Message Name":"\u6D88\u606F\u540D\u79F0",Message:"\u6D88\u606F",Initiator:"\u521B\u5EFA\u8005","Asynchronous Continuations":"\u6301\u7EED\u5F02\u6B65","Asynchronous Before":"\u5F02\u6B65\u524D","Asynchronous After":"\u5F02\u6B65\u540E","Job Configuration":"\u5DE5\u4F5C\u914D\u7F6E",Exclusive:"\u6392\u9664","Job Priority":"\u5DE5\u4F5C\u4F18\u5148\u7EA7","Retry Time Cycle":"\u91CD\u8BD5\u65F6\u95F4\u5468\u671F",Documentation:"\u6587\u6863","Element Documentation":"\u5143\u7D20\u6587\u6863","History Configuration":"\u5386\u53F2\u914D\u7F6E","History Time To Live":"\u5386\u53F2\u7684\u751F\u5B58\u65F6\u95F4",Forms:"\u8868\u5355","Form Key":"\u8868\u5355key","Form Fields":"\u8868\u5355\u5B57\u6BB5","Business Key":"\u4E1A\u52A1key","Form Field":"\u8868\u5355\u5B57\u6BB5",ID:"\u7F16\u53F7",Type:"\u7C7B\u578B",Label:"\u540D\u79F0","Default Value":"\u9ED8\u8BA4\u503C","Default Flow":"\u9ED8\u8BA4\u6D41\u8F6C\u8DEF\u5F84","Conditional Flow":"\u6761\u4EF6\u6D41\u8F6C\u8DEF\u5F84","Sequence Flow":"\u666E\u901A\u6D41\u8F6C\u8DEF\u5F84",Validation:"\u6821\u9A8C","Add Constraint":"\u6DFB\u52A0\u7EA6\u675F",Config:"\u914D\u7F6E",Properties:"\u5C5E\u6027","Add Property":"\u6DFB\u52A0\u5C5E\u6027",Value:"\u503C",Listeners:"\u76D1\u542C\u5668","Execution Listener":"\u6267\u884C\u76D1\u542C","Event Type":"\u4E8B\u4EF6\u7C7B\u578B","Listener Type":"\u76D1\u542C\u5668\u7C7B\u578B","Java Class":"Java\u7C7B",Expression:"\u8868\u8FBE\u5F0F","Must provide a value":"\u5FC5\u987B\u63D0\u4F9B\u4E00\u4E2A\u503C","Delegate Expression":"\u4EE3\u7406\u8868\u8FBE\u5F0F",Script:"\u811A\u672C","Script Format":"\u811A\u672C\u683C\u5F0F","Script Type":"\u811A\u672C\u7C7B\u578B","Inline Script":"\u5185\u8054\u811A\u672C","External Script":"\u5916\u90E8\u811A\u672C",Resource:"\u8D44\u6E90","Field Injection":"\u5B57\u6BB5\u6CE8\u5165",Extensions:"\u6269\u5C55","Input/Output":"\u8F93\u5165/\u8F93\u51FA","Input Parameters":"\u8F93\u5165\u53C2\u6570","Output Parameters":"\u8F93\u51FA\u53C2\u6570",Parameters:"\u53C2\u6570","Output Parameter":"\u8F93\u51FA\u53C2\u6570","Timer Definition Type":"\u5B9A\u65F6\u5668\u5B9A\u4E49\u7C7B\u578B","Timer Definition":"\u5B9A\u65F6\u5668\u5B9A\u4E49",Date:"\u65E5\u671F",Duration:"\u6301\u7EED",Cycle:"\u5FAA\u73AF",Signal:"\u4FE1\u53F7","Signal Name":"\u4FE1\u53F7\u540D\u79F0",Escalation:"\u5347\u7EA7",Error:"\u9519\u8BEF","Link Name":"\u94FE\u63A5\u540D\u79F0",Condition:"\u6761\u4EF6\u540D\u79F0","Variable Name":"\u53D8\u91CF\u540D\u79F0","Variable Event":"\u53D8\u91CF\u4E8B\u4EF6","Specify more than one variable change event as a comma separated list.":"\u591A\u4E2A\u53D8\u91CF\u4E8B\u4EF6\u4EE5\u9017\u53F7\u9694\u5F00","Wait for Completion":"\u7B49\u5F85\u5B8C\u6210","Activity Ref":"\u6D3B\u52A8\u53C2\u8003","Version Tag":"\u7248\u672C\u6807\u7B7E",Executable:"\u53EF\u6267\u884C\u6587\u4EF6","External Task Configuration":"\u6269\u5C55\u4EFB\u52A1\u914D\u7F6E","Task Priority":"\u4EFB\u52A1\u4F18\u5148\u7EA7",External:"\u5916\u90E8",Connector:"\u8FDE\u63A5\u5668","Must configure Connector":"\u5FC5\u987B\u914D\u7F6E\u8FDE\u63A5\u5668","Connector Id":"\u8FDE\u63A5\u5668\u7F16\u53F7",Implementation:"\u5B9E\u73B0\u65B9\u5F0F","Field Injections":"\u5B57\u6BB5\u6CE8\u5165",Fields:"\u5B57\u6BB5","Result Variable":"\u7ED3\u679C\u53D8\u91CF",Topic:"\u4E3B\u9898","Configure Connector":"\u914D\u7F6E\u8FDE\u63A5\u5668","Input Parameter":"\u8F93\u5165\u53C2\u6570",Assignee:"\u4EE3\u7406\u4EBA","Candidate Users":"\u5019\u9009\u7528\u6237","Candidate Groups":"\u5019\u9009\u7EC4","Due Date":"\u5230\u671F\u65F6\u95F4","Follow Up Date":"\u8DDF\u8E2A\u65E5\u671F",Priority:"\u4F18\u5148\u7EA7","The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"\u8DDF\u8E2A\u65E5\u671F\u5FC5\u987B\u7B26\u5408EL\u8868\u8FBE\u5F0F\uFF0C\u5982\uFF1A ${someDate} ,\u6216\u8005\u4E00\u4E2AISO\u6807\u51C6\u65E5\u671F\uFF0C\u5982\uFF1A2015-06-26T09:54:00","The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"\u8DDF\u8E2A\u65E5\u671F\u5FC5\u987B\u7B26\u5408EL\u8868\u8FBE\u5F0F\uFF0C\u5982\uFF1A ${someDate} ,\u6216\u8005\u4E00\u4E2AISO\u6807\u51C6\u65E5\u671F\uFF0C\u5982\uFF1A2015-06-26T09:54:00",Variables:"\u53D8\u91CF","Candidate Starter Configuration":"\u5019\u9009\u4EBA\u8D77\u52A8\u5668\u914D\u7F6E","Candidate Starter Groups":"\u5019\u9009\u4EBA\u8D77\u52A8\u5668\u7EC4","This maps to the process definition key.":"\u8FD9\u6620\u5C04\u5230\u6D41\u7A0B\u5B9A\u4E49\u952E\u3002","Candidate Starter Users":"\u5019\u9009\u4EBA\u8D77\u52A8\u5668\u7684\u7528\u6237","Specify more than one user as a comma separated list.":"\u6307\u5B9A\u591A\u4E2A\u7528\u6237\u4F5C\u4E3A\u9017\u53F7\u5206\u9694\u7684\u5217\u8868\u3002","Tasklist Configuration":"Tasklist\u914D\u7F6E",Startable:"\u542F\u52A8","Specify more than one group as a comma separated list.":"\u6307\u5B9A\u591A\u4E2A\u7EC4\u4F5C\u4E3A\u9017\u53F7\u5206\u9694\u7684\u5217\u8868\u3002"};var Sc,Qp,i1={exports:{}};Sc=typeof window<"u"?window:B0,Qp=function(t,e){var n=(this!==void 0?this:t).SVG=function(s){if(n.supported)return s=new n.Doc(s),n.parser.draw||n.prepare(),s};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.com/svgjs",n.supported=!!e.createElementNS&&!!e.createElementNS(n.ns,"svg").createSVGRect,!n.supported)return!1;n.did=1e3,n.eid=function(s){return"Svgjs"+d(s)+n.did++},n.create=function(s){var h=e.createElementNS(this.ns,s);return h.setAttribute("id",this.eid(s)),h},n.extend=function(){var s,h,m,E;for(h=(s=[].slice.call(arguments)).pop(),E=s.length-1;E>=0;E--)if(s[E])for(m in h)s[E].prototype[m]=h[m];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(s){var h=typeof s.create=="function"?s.create:function(){this.constructor.call(this,n.create(s.create))};return s.inherit&&(h.prototype=new s.inherit),s.extend&&n.extend(h,s.extend),s.construct&&n.extend(s.parent||n.Container,s.construct),h},n.adopt=function(s){return s?s.instance?s.instance:((h=s.nodeName=="svg"?s.parentNode instanceof t.SVGElement?new n.Nested:new n.Doc:s.nodeName=="linearGradient"?new n.Gradient("linear"):s.nodeName=="radialGradient"?new n.Gradient("radial"):n[d(s.nodeName)]?new n[d(s.nodeName)]:new n.Element(s)).type=s.nodeName,h.node=s,s.instance=h,h instanceof n.Doc&&h.namespace().defs(),h.setData(JSON.parse(s.getAttribute("svgjs:data"))||{}),h):null;var h},n.prepare=function(){var s=e.getElementsByTagName("body")[0],h=(s?new n.Doc(s):n.adopt(e.documentElement).nested()).size(2,0);n.parser={body:s||e.documentElement,draw:h.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:h.polyline().node,path:h.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},e.addEventListener("DOMContentLoaded",function(){n.parser.draw||n.prepare()},!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},n.utils={map:function(s,h){var m,E=s.length,T=[];for(m=0;m<E;m++)T.push(h(s[m]));return T},filter:function(s,h){var m,E=s.length,T=[];for(m=0;m<E;m++)h(s[m])&&T.push(s[m]);return T},radians:function(s){return s%360*Math.PI/180},degrees:function(s){return 180*s/Math.PI%360},filterSVGElements:function(s){return this.filter(s,function(h){return h instanceof t.SVGElement})}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(s){var h,m;this.r=0,this.g=0,this.b=0,s&&(typeof s=="string"?n.regex.isRgb.test(s)?(h=n.regex.rgb.exec(s.replace(n.regex.whitespace,"")),this.r=parseInt(h[1]),this.g=parseInt(h[2]),this.b=parseInt(h[3])):n.regex.isHex.test(s)&&(h=n.regex.hex.exec((m=s).length==4?["#",m.substring(1,2),m.substring(1,2),m.substring(2,3),m.substring(2,3),m.substring(3,4),m.substring(3,4)].join(""):m),this.r=parseInt(h[1],16),this.g=parseInt(h[2],16),this.b=parseInt(h[3],16)):typeof s=="object"&&(this.r=s.r,this.g=s.g,this.b=s.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+v(this.r)+v(this.g)+v(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(s){return this.destination=new n.Color(s),this},at:function(s){return this.destination?(s=s<0?0:s>1?1:s,new n.Color({r:~~(this.r+(this.destination.r-this.r)*s),g:~~(this.g+(this.destination.g-this.g)*s),b:~~(this.b+(this.destination.b-this.b)*s)})):this}}),n.Color.test=function(s){return s+="",n.regex.isHex.test(s)||n.regex.isRgb.test(s)},n.Color.isRgb=function(s){return s&&typeof s.r=="number"&&typeof s.g=="number"&&typeof s.b=="number"},n.Color.isColor=function(s){return n.Color.isRgb(s)||n.Color.test(s)},n.Array=function(s,h){(s=(s||[]).valueOf()).length==0&&h&&(s=h.valueOf()),this.value=this.parse(s)},n.extend(n.Array,{morph:function(s){if(this.destination=this.parse(s),this.value.length!=this.destination.length){for(var h=this.value[this.value.length-1],m=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(m);for(;this.value.length<this.destination.length;)this.value.push(h)}return this},settle:function(){for(var s=0,h=this.value.length,m=[];s<h;s++)m.indexOf(this.value[s])==-1&&m.push(this.value[s]);return this.value=m},at:function(s){if(!this.destination)return this;for(var h=0,m=this.value.length,E=[];h<m;h++)E.push(this.value[h]+(this.destination[h]-this.value[h])*s);return new n.Array(E)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(s){return s=s.valueOf(),Array.isArray(s)?s:this.split(s)},split:function(s){return s.trim().split(n.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var s=new this.constructor;return s.value=u(this.value),s}}),n.PointArray=function(s,h){n.Array.call(this,s,h||[[0,0]])},n.PointArray.prototype=new n.Array,n.PointArray.prototype.constructor=n.PointArray,n.extend(n.PointArray,{toString:function(){for(var s=0,h=this.value.length,m=[];s<h;s++)m.push(this.value[s].join(","));return m.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(s){if(!this.destination)return this;for(var h=0,m=this.value.length,E=[];h<m;h++)E.push([this.value[h][0]+(this.destination[h][0]-this.value[h][0])*s,this.value[h][1]+(this.destination[h][1]-this.value[h][1])*s]);return new n.PointArray(E)},parse:function(s){var h=[];if(s=s.valueOf(),Array.isArray(s)){if(Array.isArray(s[0]))return s.map(function(T){return T.slice()});if(s[0].x!=null)return s.map(function(T){return[T.x,T.y]})}else s=s.trim().split(n.regex.delimiter).map(parseFloat);s.length%2!=0&&s.pop();for(var m=0,E=s.length;m<E;m+=2)h.push([s[m],s[m+1]]);return h},move:function(s,h){var m=this.bbox();if(s-=m.x,h-=m.y,!isNaN(s)&&!isNaN(h))for(var E=this.value.length-1;E>=0;E--)this.value[E]=[this.value[E][0]+s,this.value[E][1]+h];return this},size:function(s,h){var m,E=this.bbox();for(m=this.value.length-1;m>=0;m--)E.width&&(this.value[m][0]=(this.value[m][0]-E.x)*s/E.width+E.x),E.height&&(this.value[m][1]=(this.value[m][1]-E.y)*h/E.height+E.y);return this},bbox:function(){return n.parser.poly.setAttribute("points",this.toString()),n.parser.poly.getBBox()}});for(var i={M:function(s,h,m){return h.x=m.x=s[0],h.y=m.y=s[1],["M",h.x,h.y]},L:function(s,h){return h.x=s[0],h.y=s[1],["L",s[0],s[1]]},H:function(s,h){return h.x=s[0],["H",s[0]]},V:function(s,h){return h.y=s[0],["V",s[0]]},C:function(s,h){return h.x=s[4],h.y=s[5],["C",s[0],s[1],s[2],s[3],s[4],s[5]]},S:function(s,h){return h.x=s[2],h.y=s[3],["S",s[0],s[1],s[2],s[3]]},Q:function(s,h){return h.x=s[2],h.y=s[3],["Q",s[0],s[1],s[2],s[3]]},T:function(s,h){return h.x=s[0],h.y=s[1],["T",s[0],s[1]]},Z:function(s,h,m){return h.x=m.x,h.y=m.y,["Z"]},A:function(s,h){return h.x=s[5],h.y=s[6],["A",s[0],s[1],s[2],s[3],s[4],s[5],s[6]]}},r="mlhvqtcsaz".split(""),o=0,a=r.length;o<a;++o)i[r[o]]=function(s){return function(h,m,E){if(s=="H")h[0]=h[0]+m.x;else if(s=="V")h[0]=h[0]+m.y;else if(s=="A")h[5]=h[5]+m.x,h[6]=h[6]+m.y;else for(var T=0,R=h.length;T<R;++T)h[T]=h[T]+(T%2?m.y:m.x);return i[s](h,m,E)}}(r[o].toUpperCase());n.PathArray=function(s,h){n.Array.call(this,s,h||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.PathArray.prototype.constructor=n.PathArray,n.extend(n.PathArray,{toString:function(){return function(s){for(var h=0,m=s.length,E="";h<m;h++)E+=s[h][0],s[h][1]!=null&&(E+=s[h][1],s[h][2]!=null&&(E+=" ",E+=s[h][2],s[h][3]!=null&&(E+=" ",E+=s[h][3],E+=" ",E+=s[h][4],s[h][5]!=null&&(E+=" ",E+=s[h][5],E+=" ",E+=s[h][6],s[h][7]!=null&&(E+=" ",E+=s[h][7])))));return E+" "}(this.value)},move:function(s,h){var m=this.bbox();if(s-=m.x,h-=m.y,!isNaN(s)&&!isNaN(h))for(var E,T=this.value.length-1;T>=0;T--)(E=this.value[T][0])=="M"||E=="L"||E=="T"?(this.value[T][1]+=s,this.value[T][2]+=h):E=="H"?this.value[T][1]+=s:E=="V"?this.value[T][1]+=h:E=="C"||E=="S"||E=="Q"?(this.value[T][1]+=s,this.value[T][2]+=h,this.value[T][3]+=s,this.value[T][4]+=h,E=="C"&&(this.value[T][5]+=s,this.value[T][6]+=h)):E=="A"&&(this.value[T][6]+=s,this.value[T][7]+=h);return this},size:function(s,h){var m,E,T=this.bbox();for(m=this.value.length-1;m>=0;m--)(E=this.value[m][0])=="M"||E=="L"||E=="T"?(this.value[m][1]=(this.value[m][1]-T.x)*s/T.width+T.x,this.value[m][2]=(this.value[m][2]-T.y)*h/T.height+T.y):E=="H"?this.value[m][1]=(this.value[m][1]-T.x)*s/T.width+T.x:E=="V"?this.value[m][1]=(this.value[m][1]-T.y)*h/T.height+T.y:E=="C"||E=="S"||E=="Q"?(this.value[m][1]=(this.value[m][1]-T.x)*s/T.width+T.x,this.value[m][2]=(this.value[m][2]-T.y)*h/T.height+T.y,this.value[m][3]=(this.value[m][3]-T.x)*s/T.width+T.x,this.value[m][4]=(this.value[m][4]-T.y)*h/T.height+T.y,E=="C"&&(this.value[m][5]=(this.value[m][5]-T.x)*s/T.width+T.x,this.value[m][6]=(this.value[m][6]-T.y)*h/T.height+T.y)):E=="A"&&(this.value[m][1]=this.value[m][1]*s/T.width,this.value[m][2]=this.value[m][2]*h/T.height,this.value[m][6]=(this.value[m][6]-T.x)*s/T.width+T.x,this.value[m][7]=(this.value[m][7]-T.y)*h/T.height+T.y);return this},equalCommands:function(s){var h,m,E;for(s=new n.PathArray(s),E=this.value.length===s.value.length,h=0,m=this.value.length;E&&h<m;h++)E=this.value[h][0]===s.value[h][0];return E},morph:function(s){return s=new n.PathArray(s),this.equalCommands(s)?this.destination=s:this.destination=null,this},at:function(s){if(!this.destination)return this;var h,m,E,T,R=this.value,D=this.destination.value,z=[],P=new n.PathArray;for(h=0,m=R.length;h<m;h++){for(z[h]=[R[h][0]],E=1,T=R[h].length;E<T;E++)z[h][E]=R[h][E]+(D[h][E]-R[h][E])*s;z[h][0]==="A"&&(z[h][4]=+(z[h][4]!=0),z[h][5]=+(z[h][5]!=0))}return P.value=z,P},parse:function(s){if(s instanceof n.PathArray)return s.valueOf();var h,m={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};s=typeof s=="string"?s.replace(n.regex.numbersWithDots,l).replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen,"$1 -").trim().split(n.regex.delimiter):s.reduce(function(P,_){return[].concat.call(P,_)},[]);var E=[],T=new n.Point,R=new n.Point,D=0,z=s.length;do n.regex.isPathLetter.test(s[D])?(h=s[D],++D):h=="M"?h="L":h=="m"&&(h="l"),E.push(i[h].call(null,s.slice(D,D+=m[h.toUpperCase()]).map(parseFloat),T,R));while(z>D);return E},bbox:function(){return n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(s,h){this.value=0,this.unit=h||"",typeof s=="number"?this.value=isNaN(s)?0:isFinite(s)?s:s<0?-34e37:34e37:typeof s=="string"?(h=s.match(n.regex.numberAndUnit))&&(this.value=parseFloat(h[1]),h[5]=="%"?this.value/=100:h[5]=="s"&&(this.value*=1e3),this.unit=h[5]):s instanceof n.Number&&(this.value=s.valueOf(),this.unit=s.unit)},extend:{toString:function(){return(this.unit=="%"?~~(1e8*this.value)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(s){return s=new n.Number(s),new n.Number(this+s,this.unit||s.unit)},minus:function(s){return s=new n.Number(s),new n.Number(this-s,this.unit||s.unit)},times:function(s){return s=new n.Number(s),new n.Number(this*s,this.unit||s.unit)},divide:function(s){return s=new n.Number(s),new n.Number(this/s,this.unit||s.unit)},to:function(s){var h=new n.Number(this);return typeof s=="string"&&(h.unit=s),h},morph:function(s){return this.destination=new n.Number(s),s.relative&&(this.destination.value+=this.value),this},at:function(s){return this.destination?new n.Number(this.destination).minus(this).times(s).plus(this):this}}}),n.Element=n.invent({create:function(s){this._stroke=n.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=s)&&(this.type=s.nodeName,this.node.instance=this,this._events=s._events||{},this._stroke=s.getAttribute("stroke")||this._stroke)},extend:{x:function(s){return this.attr("x",s)},y:function(s){return this.attr("y",s)},cx:function(s){return s==null?this.x()+this.width()/2:this.x(s-this.width()/2)},cy:function(s){return s==null?this.y()+this.height()/2:this.y(s-this.height()/2)},move:function(s,h){return this.x(s).y(h)},center:function(s,h){return this.cx(s).cy(h)},width:function(s){return this.attr("width",s)},height:function(s){return this.attr("height",s)},size:function(s,h){var m=f(this,s,h);return this.width(new n.Number(m.width)).height(new n.Number(m.height))},clone:function(s){this.writeDataToDom();var h=w(this.node.cloneNode(!0));return s?s.add(h):this.after(h),h},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(s){return this.after(s).remove(),s},addTo:function(s){return s.put(this)},putIn:function(s){return s.add(this)},id:function(s){return this.attr("id",s)},inside:function(s,h){var m=this.bbox();return s>m.x&&h>m.y&&s<m.x+m.width&&h<m.y+m.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var s=this.attr("class");return s==null?[]:s.trim().split(n.regex.delimiter)},hasClass:function(s){return this.classes().indexOf(s)!=-1},addClass:function(s){if(!this.hasClass(s)){var h=this.classes();h.push(s),this.attr("class",h.join(" "))}return this},removeClass:function(s){return this.hasClass(s)&&this.attr("class",this.classes().filter(function(h){return h!=s}).join(" ")),this},toggleClass:function(s){return this.hasClass(s)?this.removeClass(s):this.addClass(s)},reference:function(s){return n.get(this.attr(s))},parent:function(s){var h=this;if(!h.node.parentNode)return null;if(h=n.adopt(h.node.parentNode),!s)return h;for(;h&&h.node instanceof t.SVGElement;){if(typeof s=="string"?h.matches(s):h instanceof s)return h;if(!h.node.parentNode||h.node.parentNode.nodeName=="#document"||h.node.parentNode.nodeName=="#document-fragment")return null;h=n.adopt(h.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(s){var h=[],m=this;do{if(!(m=m.parent(s))||!m.node)break;h.push(m)}while(m.parent);return h},matches:function(s){return function(h,m){return(h.matches||h.matchesSelector||h.msMatchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector).call(h,m)}(this.node,s)},native:function(){return this.node},svg:function(s){var h=e.createElement("svg");if(!(s&&this instanceof n.Parent))return h.appendChild(s=e.createElement("svg")),this.writeDataToDom(),s.appendChild(this.node.cloneNode(!0)),h.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");h.innerHTML="<svg>"+s.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var m=0,E=h.firstChild.childNodes.length;m<E;m++)this.node.appendChild(h.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(s){return this.dom=s,this},is:function(s){return function(h,m){return h instanceof m}(this,s)}}}),n.easing={"-":function(s){return s},"<>":function(s){return-Math.cos(s*Math.PI)/2+.5},">":function(s){return Math.sin(s*Math.PI/2)},"<":function(s){return 1-Math.cos(s*Math.PI/2)}},n.morph=function(s){return function(h,m){return new n.MorphObj(h,m).at(s)}},n.Situation=n.invent({create:function(s){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(s.duration).valueOf(),this.delay=new n.Number(s.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=s.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.FX=n.invent({create:function(s){this._target=s,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(s,h,m){typeof s=="object"&&(h=s.ease,m=s.delay,s=s.duration);var E=new n.Situation({duration:s||1e3,delay:m||0,ease:n.easing[h||"-"]||h});return this.queue(E),this},delay:function(s){var h=new n.Situation({duration:s,delay:0,ease:n.easing["-"]});return this.queue(h)},target:function(s){return s&&s instanceof n.Element?(this._target=s,this):this._target},timeToAbsPos:function(s){return(s-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(s){return this.situation.duration/this._speed*s+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(s){return(typeof s=="function"||s instanceof n.Situation)&&this.situations.push(s),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof n.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var s,h,m,E=this.situation;if(E.init)return this;for(s in E.animations)for(m=this.target()[s](),Array.isArray(m)||(m=[m]),Array.isArray(E.animations[s])||(E.animations[s]=[E.animations[s]]),h=m.length;h--;)E.animations[s][h]instanceof n.Number&&(m[h]=new n.Number(m[h])),E.animations[s][h]=m[h].morph(E.animations[s][h]);for(s in E.attrs)E.attrs[s]=new n.MorphObj(this.target().attr(s),E.attrs[s]);for(s in E.styles)E.styles[s]=new n.MorphObj(this.target().style(s),E.styles[s]);return E.initialTransformation=this.target().matrixify(),E.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(s,h){var m=this.active;return this.active=!1,h&&this.clearQueue(),s&&this.situation&&(!m&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var s=this.situation;this.stop(),this.situation=s,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return this.situation.loops===!0&&(this.situation.loops=this.situation.loop+1),typeof this.situation.loops=="number"?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(s,h){var m=this.situation.duration/this._speed;return this.absPos=s,h||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*m,this.situation.finish=this.situation.start+m,this.step(!0)},speed:function(s){return s===0?this.pause():s?(this._speed=s,this.at(this.absPos,!0)):this._speed},loop:function(s,h){var m=this.last();return m.loops=s==null||s,m.loop=0,h&&(m.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(s){var h=this.last();return h.reversed=s===void 0?!h.reversed:s,this},progress:function(s){return s?this.situation.ease(this.pos):this.pos},after:function(s){var h=this.last();return this.target().on("finished.fx",function m(E){E.detail.situation==h&&(s.call(this,h),this.off("finished.fx",m))}),this._callStart()},during:function(s){var h=this.last(),m=function(E){E.detail.situation==h&&s.call(this,E.detail.pos,n.morph(E.detail.pos),E.detail.eased,h)};return this.target().off("during.fx",m).on("during.fx",m),this.after(function(){this.off("during.fx",m)}),this._callStart()},afterAll:function(s){var h=function m(E){s.call(this),this.off("allfinished.fx",m)};return this.target().off("allfinished.fx",h).on("allfinished.fx",h),this._callStart()},duringAll:function(s){var h=function(m){s.call(this,m.detail.pos,n.morph(m.detail.pos),m.detail.eased,m.detail.situation)};return this.target().off("during.fx",h).on("during.fx",h),this.afterAll(function(){this.off("during.fx",h)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(s,h,m){return this.last()[m||"animations"][s]=h,this._callStart()},step:function(s){var h,m,E;s||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1?(h=Math.max(this.absPos,0),m=Math.floor(h),this.situation.loops===!0||m<this.situation.loops?(this.pos=h-m,E=this.situation.loop,this.situation.loop=m):(this.absPos=this.situation.loops,this.pos=1,E=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-E)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var T=this.situation.ease(this.pos);for(var R in this.situation.once)R>this.lastPos&&R<=T&&(this.situation.once[R].call(this.target(),this.pos,T),delete this.situation.once[R]);return this.active&&this.target().fire("during",{pos:this.pos,eased:T,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=T,this):this},eachAt:function(){var s,h,m,E=this,T=this.target(),R=this.situation;for(s in R.animations)m=[].concat(R.animations[s]).map(function(z){return typeof z!="string"&&z.at?z.at(R.ease(E.pos),E.pos):z}),T[s].apply(T,m);for(s in R.attrs)m=[s].concat(R.attrs[s]).map(function(z){return typeof z!="string"&&z.at?z.at(R.ease(E.pos),E.pos):z}),T.attr.apply(T,m);for(s in R.styles)m=[s].concat(R.styles[s]).map(function(z){return typeof z!="string"&&z.at?z.at(R.ease(E.pos),E.pos):z}),T.style.apply(T,m);if(R.transforms.length){for(m=R.initialTransformation,s=0,h=R.transforms.length;s<h;s++){var D=R.transforms[s];D instanceof n.Matrix?m=D.relative?m.multiply(new n.Matrix().morph(D).at(R.ease(this.pos))):m.morph(D).at(R.ease(this.pos)):(D.relative||D.undo(m.extract()),m=m.multiply(D.at(R.ease(this.pos))))}T.matrix(m)}return this},once:function(s,h,m){var E=this.last();return m||(s=E.ease(s)),E.once[s]=h,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:n.Element,construct:{animate:function(s,h,m){return(this.fx||(this.fx=new n.FX(this))).animate(s,h,m)},delay:function(s){return(this.fx||(this.fx=new n.FX(this))).delay(s)},stop:function(s,h){return this.fx&&this.fx.stop(s,h),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(s){if(this.fx){if(s==null)return this.fx.speed();this.fx.speed(s)}return this}}}),n.MorphObj=n.invent({create:function(s,h){return n.Color.isColor(h)?new n.Color(s).morph(h):n.regex.delimiter.test(s)?n.regex.pathLetters.test(s)?new n.PathArray(s).morph(h):new n.Array(s).morph(h):n.regex.numberAndUnit.test(h)?new n.Number(s).morph(h):(this.value=s,void(this.destination=h))},extend:{at:function(s,h){return h<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(s,h,m){if(typeof s=="object")for(var E in s)this.attr(E,s[E]);else this.add(s,h,"attrs");return this},style:function(s,h){if(typeof s=="object")for(var m in s)this.style(m,s[m]);else this.add(s,h,"styles");return this},x:function(s,h){if(this.target()instanceof n.G)return this.transform({x:s},h),this;var m=new n.Number(s);return m.relative=h,this.add("x",m)},y:function(s,h){if(this.target()instanceof n.G)return this.transform({y:s},h),this;var m=new n.Number(s);return m.relative=h,this.add("y",m)},cx:function(s){return this.add("cx",new n.Number(s))},cy:function(s){return this.add("cy",new n.Number(s))},move:function(s,h){return this.x(s).y(h)},center:function(s,h){return this.cx(s).cy(h)},size:function(s,h){var m;return this.target()instanceof n.Text?this.attr("font-size",s):(s&&h||(m=this.target().bbox()),s||(s=m.width/m.height*h),h||(h=m.height/m.width*s),this.add("width",new n.Number(s)).add("height",new n.Number(h))),this},width:function(s){return this.add("width",new n.Number(s))},height:function(s){return this.add("height",new n.Number(s))},plot:function(s,h,m,E){return arguments.length==4?this.plot([s,h,m,E]):this.add("plot",new(this.target()).morphArray(s))},leading:function(s){return this.target().leading?this.add("leading",new n.Number(s)):this},viewbox:function(s,h,m,E){return this.target()instanceof n.Container&&this.add("viewbox",new n.ViewBox(s,h,m,E)),this},update:function(s){if(this.target()instanceof n.Stop){if(typeof s=="number"||s instanceof n.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});s.opacity!=null&&this.attr("stop-opacity",s.opacity),s.color!=null&&this.attr("stop-color",s.color),s.offset!=null&&this.attr("offset",s.offset)}return this}}),n.Box=n.invent({create:function(s,h,m,E){if(!(typeof s!="object"||s instanceof n.Element))return n.Box.call(this,s.left!=null?s.left:s.x,s.top!=null?s.top:s.y,s.width,s.height);arguments.length==4&&(this.x=s,this.y=h,this.width=m,this.height=E),x(this)},extend:{merge:function(s){var h=new this.constructor;return h.x=Math.min(this.x,s.x),h.y=Math.min(this.y,s.y),h.width=Math.max(this.x+this.width,s.x+s.width)-h.x,h.height=Math.max(this.y+this.height,s.y+s.height)-h.y,x(h)},transform:function(s){var h,m=1/0,E=-1/0,T=1/0,R=-1/0;return[new n.Point(this.x,this.y),new n.Point(this.x2,this.y),new n.Point(this.x,this.y2),new n.Point(this.x2,this.y2)].forEach(function(D){D=D.transform(s),m=Math.min(m,D.x),E=Math.max(E,D.x),T=Math.min(T,D.y),R=Math.max(R,D.y)}),(h=new this.constructor).x=m,h.width=E-m,h.y=T,h.height=R-T,x(h),h}}}),n.BBox=n.invent({create:function(s){if(n.Box.apply(this,[].slice.call(arguments)),s instanceof n.Element){var h;try{if(e.documentElement.contains){if(!e.documentElement.contains(s.node))throw new Exception("Element not in the dom")}else{for(var m=s.node;m.parentNode;)m=m.parentNode;if(m!=e)throw new Exception("Element not in the dom")}h=s.node.getBBox()}catch{if(s instanceof n.Shape){var E=s.clone(n.parser.draw.instance).show();h=E.node.getBBox(),E.remove()}else h={x:s.node.clientLeft,y:s.node.clientTop,width:s.node.clientWidth,height:s.node.clientHeight}}n.Box.call(this,h)}},inherit:n.Box,parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.BBox.prototype.constructor=n.BBox,n.extend(n.Element,{tbox:function(){return this.rbox(this.doc())}}),n.RBox=n.invent({create:function(s){n.Box.apply(this,[].slice.call(arguments)),s instanceof n.Element&&n.Box.call(this,s.node.getBoundingClientRect())},inherit:n.Box,parent:n.Element,extend:{addOffset:function(){return this.x+=t.pageXOffset,this.y+=t.pageYOffset,this}},construct:{rbox:function(s){return s?new n.RBox(this).transform(s.screenCTM().inverse()):new n.RBox(this).addOffset()}}}),n.RBox.prototype.constructor=n.RBox,n.Matrix=n.invent({create:function(s){var h,m=b([1,0,0,1,0,0]);for(s=s instanceof n.Element?s.matrixify():typeof s=="string"?b(s.split(n.regex.delimiter).map(parseFloat)):arguments.length==6?b([].slice.call(arguments)):Array.isArray(s)?b(s):typeof s=="object"?s:m,h=C.length-1;h>=0;--h)this[C[h]]=s[C[h]]!=null?s[C[h]]:m[C[h]]},extend:{extract:function(){var s=y(this,0,1),h=y(this,1,0),m=180/Math.PI*Math.atan2(s.y,s.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(m*Math.PI/180)+this.f*Math.sin(m*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(m*Math.PI/180)+this.e*Math.sin(-m*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-m,skewY:180/Math.PI*Math.atan2(h.y,h.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:m,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(s){return this.destination=new n.Matrix(s),this},at:function(s){return this.destination?new n.Matrix({a:this.a+(this.destination.a-this.a)*s,b:this.b+(this.destination.b-this.b)*s,c:this.c+(this.destination.c-this.c)*s,d:this.d+(this.destination.d-this.d)*s,e:this.e+(this.destination.e-this.e)*s,f:this.f+(this.destination.f-this.f)*s}):this},multiply:function(s){return new n.Matrix(this.native().multiply(function(h){return h instanceof n.Matrix||(h=new n.Matrix(h)),h}(s).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(s,h){return new n.Matrix(this.native().translate(s||0,h||0))},scale:function(s,h,m,E){return arguments.length==1?h=s:arguments.length==3&&(E=m,m=h,h=s),this.around(m,E,new n.Matrix(s,0,0,h,0,0))},rotate:function(s,h,m){return s=n.utils.radians(s),this.around(h,m,new n.Matrix(Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0))},flip:function(s,h){return s=="x"?this.scale(-1,1,h,0):s=="y"?this.scale(1,-1,0,h):this.scale(-1,-1,s,h??s)},skew:function(s,h,m,E){return arguments.length==1?h=s:arguments.length==3&&(E=m,m=h,h=s),s=n.utils.radians(s),h=n.utils.radians(h),this.around(m,E,new n.Matrix(1,Math.tan(h),Math.tan(s),1,0,0))},skewX:function(s,h,m){return this.skew(s,0,h,m)},skewY:function(s,h,m){return this.skew(0,s,h,m)},around:function(s,h,m){return this.multiply(new n.Matrix(1,0,0,1,s||0,h||0)).multiply(m).multiply(new n.Matrix(1,0,0,1,-s||0,-h||0))},native:function(){for(var s=n.parser.native.createSVGMatrix(),h=C.length-1;h>=0;h--)s[C[h]]=this[C[h]];return s},toString:function(){return"matrix("+S(this.a)+","+S(this.b)+","+S(this.c)+","+S(this.d)+","+S(this.e)+","+S(this.f)+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof n.Nested){var s=this.rect(1,1),h=s.node.getScreenCTM();return s.remove(),new n.Matrix(h)}return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(s,h){var m;m=Array.isArray(s)?{x:s[0],y:s[1]}:typeof s=="object"?{x:s.x,y:s.y}:s!=null?{x:s,y:h??s}:{x:0,y:0},this.x=m.x,this.y=m.y},extend:{clone:function(){return new n.Point(this)},morph:function(s,h){return this.destination=new n.Point(s,h),this},at:function(s){return this.destination?new n.Point({x:this.x+(this.destination.x-this.x)*s,y:this.y+(this.destination.y-this.y)*s}):this},native:function(){var s=n.parser.native.createSVGPoint();return s.x=this.x,s.y=this.y,s},transform:function(s){return new n.Point(this.native().matrixTransform(s.native()))}}}),n.extend(n.Element,{point:function(s,h){return new n.Point(s,h).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(s,h,m){if(s==null){for(s={},m=(h=this.node.attributes).length-1;m>=0;m--)s[h[m].nodeName]=n.regex.isNumber.test(h[m].nodeValue)?parseFloat(h[m].nodeValue):h[m].nodeValue;return s}if(typeof s=="object")for(h in s)this.attr(h,s[h]);else if(h===null)this.node.removeAttribute(s);else{if(h==null)return(h=this.node.getAttribute(s))==null?n.defaults.attrs[s]:n.regex.isNumber.test(h)?parseFloat(h):h;s=="stroke-width"?this.attr("stroke",parseFloat(h)>0?this._stroke:null):s=="stroke"&&(this._stroke=h),s!="fill"&&s!="stroke"||(n.regex.isImage.test(h)&&(h=this.doc().defs().image(h,0,0)),h instanceof n.Image&&(h=this.doc().defs().pattern(0,0,function(){this.add(h)}))),typeof h=="number"?h=new n.Number(h):n.Color.isColor(h)?h=new n.Color(h):Array.isArray(h)&&(h=new n.Array(h)),s=="leading"?this.leading&&this.leading(h):typeof m=="string"?this.node.setAttributeNS(m,s,h.toString()):this.node.setAttribute(s,h.toString()),!this.rebuild||s!="font-size"&&s!="x"||this.rebuild(s,h)}return this}}),n.extend(n.Element,{transform:function(s,h){var m,E,T=this;if(typeof s!="object")return m=new n.Matrix(T).extract(),typeof s=="string"?m[s]:m;if(m=new n.Matrix(T),h=!!h||!!s.relative,s.a!=null)m=h?m.multiply(new n.Matrix(s)):new n.Matrix(s);else if(s.rotation!=null)g(s,T),m=h?m.rotate(s.rotation,s.cx,s.cy):m.rotate(s.rotation-m.extract().rotation,s.cx,s.cy);else if(s.scale!=null||s.scaleX!=null||s.scaleY!=null){if(g(s,T),s.scaleX=s.scale!=null?s.scale:s.scaleX!=null?s.scaleX:1,s.scaleY=s.scale!=null?s.scale:s.scaleY!=null?s.scaleY:1,!h){var R=m.extract();s.scaleX=1*s.scaleX/R.scaleX,s.scaleY=1*s.scaleY/R.scaleY}m=m.scale(s.scaleX,s.scaleY,s.cx,s.cy)}else s.skew!=null||s.skewX!=null||s.skewY!=null?(g(s,T),s.skewX=s.skew!=null?s.skew:s.skewX!=null?s.skewX:0,s.skewY=s.skew!=null?s.skew:s.skewY!=null?s.skewY:0,h||(R=m.extract(),m=m.multiply(new n.Matrix().skew(R.skewX,R.skewY,s.cx,s.cy).inverse())),m=m.skew(s.skewX,s.skewY,s.cx,s.cy)):s.flip?(s.flip=="x"||s.flip=="y"?s.offset=s.offset==null?T.bbox()["c"+s.flip]:s.offset:s.offset==null?(E=T.bbox(),s.flip=E.cx,s.offset=E.cy):s.flip=s.offset,m=new n.Matrix().flip(s.flip,s.offset)):s.x==null&&s.y==null||(h?m=m.translate(s.x,s.y):(s.x!=null&&(m.e=s.x),s.y!=null&&(m.f=s.y)));return this.attr("transform",m)}}),n.extend(n.FX,{transform:function(s,h){var m,E,T=this.target();return typeof s!="object"?(m=new n.Matrix(T).extract(),typeof s=="string"?m[s]:m):(h=!!h||!!s.relative,s.a!=null?m=new n.Matrix(s):s.rotation!=null?(g(s,T),m=new n.Rotate(s.rotation,s.cx,s.cy)):s.scale!=null||s.scaleX!=null||s.scaleY!=null?(g(s,T),s.scaleX=s.scale!=null?s.scale:s.scaleX!=null?s.scaleX:1,s.scaleY=s.scale!=null?s.scale:s.scaleY!=null?s.scaleY:1,m=new n.Scale(s.scaleX,s.scaleY,s.cx,s.cy)):s.skewX!=null||s.skewY!=null?(g(s,T),s.skewX=s.skewX!=null?s.skewX:0,s.skewY=s.skewY!=null?s.skewY:0,m=new n.Skew(s.skewX,s.skewY,s.cx,s.cy)):s.flip?(s.flip=="x"||s.flip=="y"?s.offset=s.offset==null?T.bbox()["c"+s.flip]:s.offset:s.offset==null?(E=T.bbox(),s.flip=E.cx,s.offset=E.cy):s.flip=s.offset,m=new n.Matrix().flip(s.flip,s.offset)):s.x==null&&s.y==null||(m=new n.Translate(s.x,s.y)),m?(m.relative=h,this.last().transforms.push(m),this._callStart()):this)}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var s=(this.attr("transform")||"").split(n.regex.transforms).slice(0,-1).map(function(h){var m=h.trim().split("(");return[m[0],m[1].split(n.regex.delimiter).map(function(E){return parseFloat(E)})]}).reduce(function(h,m){return m[0]=="matrix"?h.multiply(b(m[1])):h[m[0]].apply(h,m[1])},new n.Matrix);return s},toParent:function(s){if(this==s)return this;var h=this.screenCTM(),m=s.screenCTM().inverse();return this.addTo(s).untransform().transform(m.multiply(h)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(s,h){if(arguments.length>1&&typeof h!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(s))for(var m=0,E=this.arguments.length;m<E;++m)this[this.arguments[m]]=s[m];else if(typeof s=="object")for(m=0,E=this.arguments.length;m<E;++m)this[this.arguments[m]]=s[this.arguments[m]];this.inversed=!1,h===!0&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(s){for(var h=[],m=0,E=this.arguments.length;m<E;++m)h.push(this[this.arguments[m]]);var T=this._undo||new n.Matrix;return T=new n.Matrix().morph(n.Matrix.prototype[this.method].apply(T,h)).at(s),this.inversed?T.inverse():T},undo:function(s){for(var h=0,m=this.arguments.length;h<m;++h)s[this.arguments[h]]=this[this.arguments[h]]===void 0?0:s[this.arguments[h]];return s.cx=this.cx,s.cy=this.cy,this._undo=new n[d(this.method)](s,!0).at(1),this}}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(s,h){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.Rotate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(s,h){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(s){var h=new n.Matrix().rotate(new n.Number().morph(this.rotation-(this._undo?this._undo.rotation:0)).at(s),this.cx,this.cy);return this.inversed?h.inverse():h},undo:function(s){return this._undo=s,this}}}),n.Scale=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(s,h){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),n.Skew=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(s,h){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),n.extend(n.Element,{style:function(s,h){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(typeof s=="object")for(h in s)this.style(h,s[h]);else{if(!n.regex.isCss.test(s))return this.node.style[p(s)];for(s=s.split(/\s*;\s*/).filter(function(m){return!!m}).map(function(m){return m.split(/\s*:\s*/)});h=s.pop();)this.style(h[0],h[1])}else this.node.style[p(s)]=h===null||n.regex.isBlank.test(h)?"":h;return this}}),n.Parent=n.invent({create:function(s){this.constructor.call(this,s)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),function(s){return n.adopt(s)})},add:function(s,h){return h==null?this.node.appendChild(s.node):s.node!=this.node.childNodes[h]&&this.node.insertBefore(s.node,this.node.childNodes[h]),this},put:function(s,h){return this.add(s,h),s},has:function(s){return this.index(s)>=0},index:function(s){return[].slice.call(this.node.childNodes).indexOf(s.node)},get:function(s){return n.adopt(this.node.childNodes[s])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(s,h){var m,E,T=this.children();for(m=0,E=T.length;m<E;m++)T[m]instanceof n.Element&&s.apply(T[m],[m,T]),h&&T[m]instanceof n.Container&&T[m].each(s,h);return this},removeElement:function(s){return this.node.removeChild(s.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(s,h){return h===0||this instanceof n.Defs||this.node==n.parser.draw||(s=s||(this instanceof n.Doc?this:this.parent(n.Parent)),h=h||1/0,this.each(function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(s,h-1):this.toParent(s)}),this.node.firstChild||this.remove()),this},flatten:function(s,h){return this.ungroup(s,h)}}),n.Container=n.invent({create:function(s){this.constructor.call(this,s)},inherit:n.Parent}),n.ViewBox=n.invent({create:function(s){var h,m,E,T,R,D,z,P=1,_=1,B=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(s instanceof n.Element){for(D=s,z=s,R=(s.attr("viewBox")||"").match(B),s.bbox,E=new n.Number(s.width()),T=new n.Number(s.height());E.unit=="%";)P*=E.value,E=new n.Number(D instanceof n.Doc?D.parent().offsetWidth:D.parent().width()),D=D.parent();for(;T.unit=="%";)_*=T.value,T=new n.Number(z instanceof n.Doc?z.parent().offsetHeight:z.parent().height()),z=z.parent();this.x=0,this.y=0,this.width=E*P,this.height=T*_,this.zoom=1,R&&(h=parseFloat(R[0]),m=parseFloat(R[1]),E=parseFloat(R[2]),T=parseFloat(R[3]),this.zoom=this.width/this.height>E/T?this.height/T:this.width/E,this.x=h,this.y=m,this.width=E,this.height=T)}else s=typeof s=="string"?s.match(B).map(function(V){return parseFloat(V)}):Array.isArray(s)?s:typeof s=="object"?[s.x,s.y,s.width,s.height]:arguments.length==4?[].slice.call(arguments):[0,0,0,0],this.x=s[0],this.y=s[1],this.width=s[2],this.height=s[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(s,h,m,E){return this.destination=new n.ViewBox(s,h,m,E),this},at:function(s){return this.destination?new n.ViewBox([this.x+(this.destination.x-this.x)*s,this.y+(this.destination.y-this.y)*s,this.width+(this.destination.width-this.width)*s,this.height+(this.destination.height-this.height)*s]):this}},parent:n.Container,construct:{viewbox:function(s,h,m,E){return arguments.length==0?new n.ViewBox(this):this.attr("viewBox",new n.ViewBox(s,h,m,E))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(s){n.Element.prototype[s]=function(h){return h==null?n.off(this,s):n.on(this,s,h),this}}),n.listenerId=0,n.on=function(s,h,m,E,T){var R=m.bind(E||s),D=s instanceof n.Element?s.node:s;D.instance=D.instance||{_events:{}};var z=D.instance._events;m._svgjsListenerId||(m._svgjsListenerId=++n.listenerId),h.split(n.regex.delimiter).forEach(function(P){var _=P.split(".")[0],B=P.split(".")[1]||"*";z[_]=z[_]||{},z[_][B]=z[_][B]||{},z[_][B][m._svgjsListenerId]=R,D.addEventListener(_,R,T||!1)})},n.off=function(s,h,m,E){var T=s instanceof n.Element?s.node:s;if(T.instance&&(typeof m!="function"||(m=m._svgjsListenerId))){var R=T.instance._events;(h||"").split(n.regex.delimiter).forEach(function(D){var z,P,_=D&&D.split(".")[0],B=D&&D.split(".")[1];if(m)R[_]&&R[_][B||"*"]&&(T.removeEventListener(_,R[_][B||"*"][m],E||!1),delete R[_][B||"*"][m]);else if(_&&B){if(R[_]&&R[_][B]){for(P in R[_][B])n.off(T,[_,B].join("."),P);delete R[_][B]}}else if(B)for(D in R)for(z in R[D])B===z&&n.off(T,[D,B].join("."));else if(_){if(R[_]){for(z in R[_])n.off(T,[_,z].join("."));delete R[_]}}else{for(D in R)n.off(T,D);T.instance._events={}}})}},n.extend(n.Element,{on:function(s,h,m,E){return n.on(this,s,h,m,E),this},off:function(s,h){return n.off(this.node,s,h),this},fire:function(s,h){return s instanceof t.Event?this.node.dispatchEvent(s):this.node.dispatchEvent(s=new n.CustomEvent(s,{detail:h,cancelable:!0})),this._event=s,this},event:function(){return this._event}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(s){return s==null?this.transform("x"):this.transform({x:s-this.x()},!0)},y:function(s){return s==null?this.transform("y"):this.transform({y:s-this.y()},!0)},cx:function(s){return s==null?this.gbox().cx:this.x(s-this.gbox().width/2)},cy:function(s){return s==null?this.gbox().cy:this.y(s-this.gbox().height/2)},gbox:function(){var s=this.bbox(),h=this.transform();return s.x+=h.x,s.x2+=h.x,s.cx+=h.x,s.y+=h.y,s.y2+=h.y,s.cy+=h.y,s}},construct:{group:function(){return this.put(new n.G)}}}),n.Doc=n.invent({create:function(s){s&&((s=typeof s=="string"?e.getElementById(s):s).nodeName=="svg"?this.constructor.call(this,s):(this.constructor.call(this,n.create("svg")),s.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){var s;return this._defs||((s=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(s):this._defs=new n.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&this.node.parentNode.nodeName!="#document"&&this.node.parentNode.nodeName!="#document-fragment"?this.node.parentNode:null},spof:function(){var s=this.node.getScreenCTM();return s&&this.style("left",-s.e%1+"px").style("top",-s.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,n.parser.draw.parentNode||this.node.appendChild(n.parser.draw),this},clone:function(s){this.writeDataToDom();var h=this.node,m=w(h.cloneNode(!0));return s?(s.node||s).appendChild(m.node):h.parentNode.insertBefore(m.node,h.nextSibling),m}}}),n.extend(n.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var s=this.position()+1,h=this.parent();return h.removeElement(this).add(this,s),h instanceof n.Doc&&h.node.appendChild(h.defs().node),this},backward:function(){var s=this.position();return s>0&&this.parent().removeElement(this).add(this,s-1),this},front:function(){var s=this.parent();return s.node.appendChild(this.node),s instanceof n.Doc&&s.node.appendChild(s.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(s){s.remove();var h=this.position();return this.parent().add(s,h),this},after:function(s){s.remove();var h=this.position();return this.parent().add(s,h+1),this}}),n.Mask=n.invent({create:function(){this.constructor.call(this,n.create("mask")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var s=this.targets.length-1;s>=0;s--)this.targets[s]&&this.targets[s].unmask();return this.targets=[],n.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new n.Mask)}}}),n.extend(n.Element,{maskWith:function(s){return this.masker=s instanceof n.Mask?s:this.parent().mask().add(s),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),n.ClipPath=n.invent({create:function(){this.constructor.call(this,n.create("clipPath")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var s=this.targets.length-1;s>=0;s--)this.targets[s]&&this.targets[s].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new n.ClipPath)}}}),n.extend(n.Element,{clipWith:function(s){return this.clipper=s instanceof n.ClipPath?s:this.parent().clip().add(s),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),n.Gradient=n.invent({create:function(s){this.constructor.call(this,n.create(s+"Gradient")),this.type=s},inherit:n.Container,extend:{at:function(s,h,m){return this.put(new n.Stop).update(s,h,m)},update:function(s){return this.clear(),typeof s=="function"&&s.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(s,h,m){return s=="transform"&&(s="gradientTransform"),n.Container.prototype.attr.call(this,s,h,m)}},construct:{gradient:function(s,h){return this.defs().gradient(s,h)}}}),n.extend(n.Gradient,n.FX,{from:function(s,h){return(this._target||this).type=="radial"?this.attr({fx:new n.Number(s),fy:new n.Number(h)}):this.attr({x1:new n.Number(s),y1:new n.Number(h)})},to:function(s,h){return(this._target||this).type=="radial"?this.attr({cx:new n.Number(s),cy:new n.Number(h)}):this.attr({x2:new n.Number(s),y2:new n.Number(h)})}}),n.extend(n.Defs,{gradient:function(s,h){return this.put(new n.Gradient(s)).update(h)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(s){return(typeof s=="number"||s instanceof n.Number)&&(s={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),s.opacity!=null&&this.attr("stop-opacity",s.opacity),s.color!=null&&this.attr("stop-color",s.color),s.offset!=null&&this.attr("offset",new n.Number(s.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(s){return this.clear(),typeof s=="function"&&s.call(this,this),this},toString:function(){return this.fill()},attr:function(s,h,m){return s=="transform"&&(s="patternTransform"),n.Container.prototype.attr.call(this,s,h,m)}},construct:{pattern:function(s,h,m){return this.defs().pattern(s,h,m)}}}),n.extend(n.Defs,{pattern:function(s,h,m){return this.put(new n.Pattern).update(m).attr({x:0,y:0,width:s,height:h,patternUnits:"userSpaceOnUse"})}}),n.Shape=n.invent({create:function(s){this.constructor.call(this,s)},inherit:n.Element}),n.Bare=n.invent({create:function(s,h){if(this.constructor.call(this,n.create(s)),h)for(var m in h.prototype)typeof h.prototype[m]=="function"&&(this[m]=h.prototype[m])},inherit:n.Element,extend:{words:function(s){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(e.createTextNode(s)),this}}}),n.extend(n.Parent,{element:function(s,h){return this.put(new n.Bare(s,h))}}),n.Symbol=n.invent({create:"symbol",inherit:n.Container,construct:{symbol:function(){return this.put(new n.Symbol)}}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(s,h){return this.attr("href",(h||"")+"#"+s,n.xlink)}},construct:{use:function(s,h){return this.put(new n.Use).element(s,h)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(s,h){return this.put(new n.Rect).size(s,h)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(s){return this.put(new n.Circle).rx(new n.Number(s).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(s){return this.attr("r",s)},ry:function(s){return this.rx(s)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(s,h){return this.put(new n.Ellipse).size(s,h).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(s){return this.attr("rx",s)},ry:function(s){return this.attr("ry",s)}}),n.extend(n.Circle,n.Ellipse,{x:function(s){return s==null?this.cx()-this.rx():this.cx(s+this.rx())},y:function(s){return s==null?this.cy()-this.ry():this.cy(s+this.ry())},cx:function(s){return s==null?this.attr("cx"):this.attr("cx",s)},cy:function(s){return s==null?this.attr("cy"):this.attr("cy",s)},width:function(s){return s==null?2*this.rx():this.rx(new n.Number(s).divide(2))},height:function(s){return s==null?2*this.ry():this.ry(new n.Number(s).divide(2))},size:function(s,h){var m=f(this,s,h);return this.rx(new n.Number(m.width).divide(2)).ry(new n.Number(m.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(s,h,m,E){return s==null?this.array():(s=h!==void 0?{x1:s,y1:h,x2:m,y2:E}:new n.PointArray(s).toLine(),this.attr(s))},move:function(s,h){return this.attr(this.array().move(s,h).toLine())},size:function(s,h){var m=f(this,s,h);return this.attr(this.array().size(m.width,m.height).toLine())}},construct:{line:function(s,h,m,E){return n.Line.prototype.plot.apply(this.put(new n.Line),s!=null?[s,h,m,E]:[0,0,0,0])}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(s){return this.put(new n.Polyline).plot(s||new n.PointArray)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(s){return this.put(new n.Polygon).plot(s||new n.PointArray)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(s){return s==null?this.array():this.clear().attr("points",typeof s=="string"?s:this._array=new n.PointArray(s))},clear:function(){return delete this._array,this},move:function(s,h){return this.attr("points",this.array().move(s,h))},size:function(s,h){var m=f(this,s,h);return this.attr("points",this.array().size(m.width,m.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(s){return s==null?this.bbox().x:this.move(s,this.bbox().y)},y:function(s){return s==null?this.bbox().y:this.move(this.bbox().x,s)},width:function(s){var h=this.bbox();return s==null?h.width:this.size(s,h.height)},height:function(s){var h=this.bbox();return s==null?h.height:this.size(h.width,s)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(s){return s==null?this.array():this.clear().attr("d",typeof s=="string"?s:this._array=new n.PathArray(s))},clear:function(){return delete this._array,this},move:function(s,h){return this.attr("d",this.array().move(s,h))},x:function(s){return s==null?this.bbox().x:this.move(s,this.bbox().y)},y:function(s){return s==null?this.bbox().y:this.move(this.bbox().x,s)},size:function(s,h){var m=f(this,s,h);return this.attr("d",this.array().size(m.width,m.height))},width:function(s){return s==null?this.bbox().width:this.size(s,this.bbox().height)},height:function(s){return s==null?this.bbox().height:this.size(this.bbox().width,s)}},construct:{path:function(s){return this.put(new n.Path).plot(s||new n.PathArray)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(s){if(!s)return this;var h=this,m=new t.Image;return n.on(m,"load",function(){n.off(m);var E=h.parent(n.Pattern);E!==null&&(h.width()==0&&h.height()==0&&h.size(m.width,m.height),E&&E.width()==0&&E.height()==0&&E.size(h.width(),h.height()),typeof h._loaded=="function"&&h._loaded.call(h,{width:m.width,height:m.height,ratio:m.width/m.height,url:s}))}),n.on(m,"error",function(E){n.off(m),typeof h._error=="function"&&h._error.call(h,E)}),this.attr("href",m.src=this.src=s,n.xlink)},loaded:function(s){return this._loaded=s,this},error:function(s){return this._error=s,this}},construct:{image:function(s,h,m){return this.put(new n.Image).load(s).size(h||0,m||h||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{x:function(s){return s==null?this.attr("x"):this.attr("x",s)},y:function(s){var h=this.attr("y"),m=typeof h=="number"?h-this.bbox().y:0;return s==null?typeof h=="number"?h-m:h:this.attr("y",typeof s.valueOf()=="number"?s+m:s)},cx:function(s){return s==null?this.bbox().cx:this.x(s-this.bbox().width/2)},cy:function(s){return s==null?this.bbox().cy:this.y(s-this.bbox().height/2)},text:function(s){if(s===void 0){s="";for(var h=this.node.childNodes,m=0,E=h.length;m<E;++m)m!=0&&h[m].nodeType!=3&&n.adopt(h[m]).dom.newLined==1&&(s+=`
`),s+=h[m].textContent;return s}if(this.clear().build(!0),typeof s=="function")s.call(this,this);else{m=0;for(var T=(s=s.split(`
`)).length;m<T;m++)this.tspan(s[m]).newLine()}return this.build(!1).rebuild()},size:function(s){return this.attr("font-size",s).rebuild()},leading:function(s){return s==null?this.dom.leading:(this.dom.leading=new n.Number(s),this.rebuild())},lines:function(){var s=(this.textPath&&this.textPath()||this).node,h=n.utils.map(n.utils.filterSVGElements(s.childNodes),function(m){return n.adopt(m)});return new n.Set(h)},rebuild:function(s){if(typeof s=="boolean"&&(this._rebuild=s),this._rebuild){var h=this,m=0,E=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(h.textPath()||this.attr("x",h.attr("x")),this.text()==`
`?m+=E:(this.attr("dy",E+m),m=0))}),this.fire("rebuild")}return this},build:function(s){return this._build=!!s,this},setData:function(s){return this.dom=s,this.dom.leading=new n.Number(s.leading||1.3),this}},construct:{text:function(s){return this.put(new n.Text).text(s)},plain:function(s){return this.put(new n.Text).plain(s)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(s){return s==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof s=="function"?s.call(this,this):this.plain(s),this)},dx:function(s){return this.attr("dx",s)},dy:function(s){return this.attr("dy",s)},newLine:function(){var s=this.parent(n.Text);return this.dom.newLined=!0,this.dy(s.dom.leading*s.attr("font-size")).attr("x",s.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(s){return this._build===!1&&this.clear(),this.node.appendChild(e.createTextNode(s)),this},tspan:function(s){var h=(this.textPath&&this.textPath()||this).node,m=new n.Tspan;return this._build===!1&&this.clear(),h.appendChild(m.node),m.text(s)},clear:function(){for(var s=(this.textPath&&this.textPath()||this).node;s.hasChildNodes();)s.removeChild(s.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{morphArray:n.PathArray,path:function(s){for(var h=new n.TextPath,m=this.doc().defs().path(s);this.node.hasChildNodes();)h.node.appendChild(this.node.firstChild);return this.node.appendChild(h.node),h.attr("href","#"+m,n.xlink),this},array:function(){var s=this.track();return s?s.array():null},plot:function(s){var h=this.track(),m=null;return h&&(m=h.plot(s)),s==null?m:this},track:function(){var s=this.textPath();if(s)return s.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}}),n.A=n.invent({create:"a",inherit:n.Container,extend:{to:function(s){return this.attr("href",s,n.xlink)},show:function(s){return this.attr("show",s,n.xlink)},target:function(s){return this.attr("target",s)}},construct:{link:function(s){return this.put(new n.A).to(s)}}}),n.extend(n.Element,{linkTo:function(s){var h=new n.A;return typeof s=="function"?s.call(h,h):h.to(s),this.parent().put(h).put(this)}}),n.Marker=n.invent({create:"marker",inherit:n.Container,extend:{width:function(s){return this.attr("markerWidth",s)},height:function(s){return this.attr("markerHeight",s)},ref:function(s,h){return this.attr("refX",s).attr("refY",h)},update:function(s){return this.clear(),typeof s=="function"&&s.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(s,h,m){return this.defs().marker(s,h,m)}}}),n.extend(n.Defs,{marker:function(s,h,m){return this.put(new n.Marker).size(s,h).ref(s/2,h/2).viewbox(0,0,s,h).attr("orient","auto").update(m)}}),n.extend(n.Line,n.Polyline,n.Polygon,n.Path,{marker:function(s,h,m,E){var T=["marker"];return s!="all"&&T.push(s),T=T.join("-"),s=arguments[1]instanceof n.Marker?arguments[1]:this.doc().marker(h,m,E),this.attr(T,s)}});var c={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(s,h){return h=="color"?s:s+"-"+h}};function l(s,h,m,E){return m+E.replace(n.regex.dots," .")}function u(s){for(var h=s.slice(0),m=h.length;m--;)Array.isArray(h[m])&&(h[m]=u(h[m]));return h}function p(s){return s.toLowerCase().replace(/-(.)/g,function(h,m){return m.toUpperCase()})}function d(s){return s.charAt(0).toUpperCase()+s.slice(1)}function v(s){var h=s.toString(16);return h.length==1?"0"+h:h}function f(s,h,m){if(h==null||m==null){var E=s.bbox();h==null?h=E.width/E.height*m:m==null&&(m=E.height/E.width*h)}return{width:h,height:m}}function y(s,h,m){return{x:h*s.a+m*s.c+0,y:h*s.b+m*s.d+0}}function b(s){return{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}}function g(s,h){s.cx=s.cx==null?h.bbox().cx:s.cx,s.cy=s.cy==null?h.bbox().cy:s.cy}function w(s){for(var h=s.childNodes.length-1;h>=0;h--)s.childNodes[h]instanceof t.SVGElement&&w(s.childNodes[h]);return n.adopt(s).id(n.eid(s.nodeName))}function x(s){return s.x==null&&(s.x=0,s.y=0,s.width=0,s.height=0),s.w=s.width,s.h=s.height,s.x2=s.x+s.width,s.y2=s.y+s.height,s.cx=s.x+s.width/2,s.cy=s.y+s.height/2,s}function S(s){return Math.abs(s)>1e-37?s:0}["fill","stroke"].forEach(function(s){var h,m={};m[s]=function(E){if(E===void 0)return this;if(typeof E=="string"||n.Color.isRgb(E)||E&&typeof E.fill=="function")this.attr(s,E);else for(h=c[s].length-1;h>=0;h--)E[c[s][h]]!=null&&this.attr(c.prefix(s,c[s][h]),E[c[s][h]]);return this},n.extend(n.Element,n.FX,m)}),n.extend(n.Element,n.FX,{rotate:function(s,h,m){return this.transform({rotation:s,cx:h,cy:m})},skew:function(s,h,m,E){return arguments.length==1||arguments.length==3?this.transform({skew:s,cx:h,cy:m}):this.transform({skewX:s,skewY:h,cx:m,cy:E})},scale:function(s,h,m,E){return arguments.length==1||arguments.length==3?this.transform({scale:s,cx:h,cy:m}):this.transform({scaleX:s,scaleY:h,cx:m,cy:E})},translate:function(s,h){return this.transform({x:s,y:h})},flip:function(s,h){return h=typeof s=="number"?s:h,this.transform({flip:s||"both",offset:h})},matrix:function(s){return this.attr("transform",new n.Matrix(arguments.length==6?[].slice.call(arguments):s))},opacity:function(s){return this.attr("opacity",s)},dx:function(s){return this.x(new n.Number(s).plus(this instanceof n.FX?0:this.x()),!0)},dy:function(s){return this.y(new n.Number(s).plus(this instanceof n.FX?0:this.y()),!0)},dmove:function(s,h){return this.dx(s).dy(h)}}),n.extend(n.Rect,n.Ellipse,n.Circle,n.Gradient,n.FX,{radius:function(s,h){var m=(this._target||this).type;return m=="radial"||m=="circle"?this.attr("r",new n.Number(s)):this.rx(s).ry(h??s)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(s){return this.node.getPointAtLength(s)}}),n.extend(n.Parent,n.Text,n.Tspan,n.FX,{font:function(s,h){if(typeof s=="object")for(h in s)this.font(h,s[h]);return s=="leading"?this.leading(h):s=="anchor"?this.attr("text-anchor",h):s=="size"||s=="family"||s=="weight"||s=="stretch"||s=="variant"||s=="style"?this.attr("font-"+s,h):this.attr(s,h)}}),n.Set=n.invent({create:function(s){s instanceof n.Set?this.members=s.members.slice():Array.isArray(s)?this.members=s:this.clear()},extend:{add:function(){var s,h,m=[].slice.call(arguments);for(s=0,h=m.length;s<h;s++)this.members.push(m[s]);return this},remove:function(s){var h=this.index(s);return h>-1&&this.members.splice(h,1),this},each:function(s){for(var h=0,m=this.members.length;h<m;h++)s.apply(this.members[h],[h,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(s){return this.index(s)>=0},index:function(s){return this.members.indexOf(s)},get:function(s){return this.members[s]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(this.members.length==0)return new n.RBox;var s=this.members[0].rbox(this.members[0].doc());return this.each(function(){s=s.merge(this.rbox(this.doc()))}),s}},construct:{set:function(s){return new n.Set(s)}}}),n.FX.Set=n.invent({create:function(s){this.set=s}}),n.Set.inherit=function(){var s=[];for(var h in n.Shape.prototype)typeof n.Shape.prototype[h]=="function"&&typeof n.Set.prototype[h]!="function"&&s.push(h);for(var h in s.forEach(function(E){n.Set.prototype[E]=function(){for(var T=0,R=this.members.length;T<R;T++)this.members[T]&&typeof this.members[T][E]=="function"&&this.members[T][E].apply(this.members[T],arguments);return E=="animate"?this.fx||(this.fx=new n.FX.Set(this)):this}}),s=[],n.FX.prototype)typeof n.FX.prototype[h]=="function"&&typeof n.FX.Set.prototype[h]!="function"&&s.push(h);s.forEach(function(m){n.FX.Set.prototype[m]=function(){for(var E=0,T=this.set.members.length;E<T;E++)this.set.members[E].fx[m].apply(this.set.members[E].fx,arguments);return this}})},n.extend(n.Element,{data:function(s,h,m){if(typeof s=="object")for(h in s)this.data(h,s[h]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+s))}catch{return this.attr("data-"+s)}else this.attr("data-"+s,h===null?null:m===!0||typeof h=="string"||typeof h=="number"?h:JSON.stringify(h));return this}}),n.extend(n.Element,{remember:function(s,h){if(typeof arguments[0]=="object")for(var h in s)this.remember(h,s[h]);else{if(arguments.length==1)return this.memory()[s];this.memory()[s]=h}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var s=arguments.length-1;s>=0;s--)delete this.memory()[arguments[s]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(s){var h=e.getElementById(function(m){var E=(m||"").toString().match(n.regex.reference);if(E)return E[1]}(s)||s);return n.adopt(h)},n.select=function(s,h){return new n.Set(n.utils.map((h||e).querySelectorAll(s),function(m){return n.adopt(m)}))},n.extend(n.Parent,{select:function(s){return n.select(s,this.node)}});var C="abcdef".split("");if(typeof t.CustomEvent!="function"){var I=function(s,h){h=h||{bubbles:!1,cancelable:!1,detail:void 0};var m=e.createEvent("CustomEvent");return m.initCustomEvent(s,h.bubbles,h.cancelable,h.detail),m};I.prototype=t.Event.prototype,n.CustomEvent=I}else n.CustomEvent=t.CustomEvent;return function(s){for(var h=0,m=["moz","webkit"],E=0;E<m.length&&!t.requestAnimationFrame;++E)s.requestAnimationFrame=s[m[E]+"RequestAnimationFrame"],s.cancelAnimationFrame=s[m[E]+"CancelAnimationFrame"]||s[m[E]+"CancelRequestAnimationFrame"];s.requestAnimationFrame=s.requestAnimationFrame||function(T){var R=new Date().getTime(),D=Math.max(0,16-(R-h)),z=s.setTimeout(function(){T(R+D)},D);return h=R+D,z},s.cancelAnimationFrame=s.cancelAnimationFrame||s.clearTimeout}(t),n};var r1=i1.exports=Sc.document?Qp(Sc,Sc.document):function(t){return Qp(t,t.document)},th={exports:{}};(function(t,e){function n(i,r){return r.querySelector(i)}(e=th.exports=function(i,r){return n(i,r=r||document)}).all=function(i,r){return(r=r||document).querySelectorAll(i)},e.engine=function(i){if(!i.one)throw new Error(".one callback required");if(!i.all)throw new Error(".all callback required");return n=i.one,e.all=i.all,e}})(0,th.exports);var ga=th.exports,Ve="tokenSimulation",Y={TOGGLE_MODE_EVENT:Ve+".toggleMode",GENERATE_TOKEN_EVENT:Ve+".generateToken",CONSUME_TOKEN_EVENT:Ve+".consumeToken",PLAY_SIMULATION_EVENT:Ve+".playSimulation",PAUSE_SIMULATION_EVENT:Ve+".pauseSimulation",RESET_SIMULATION_EVENT:Ve+".resetSimulation",TERMINATE_EVENT:Ve+".terminateEvent",UPDATE_ELEMENTS_EVENT:Ve+".updateElements",UPDATE_ELEMENT_EVENT:Ve+".updateElement",PROCESS_INSTANCE_CREATED_EVENT:Ve+".processInstanceCreated",PROCESS_INSTANCE_FINISHED_EVENT:Ve+".processInstanceFinished",PROCESS_INSTANCE_SHOWN_EVENT:Ve+".processInstanceShown",PROCESS_INSTANCE_HIDDEN_EVENT:Ve+".processInstanceHidden",ANIMATION_CREATED_EVENT:Ve+".animationCreated"},Ft={};const Hg=WA(ax);var o1=Hg.every,a1=Hg.some;function qg(t,e){for(var n=e.parent;n;){if(n===t)return!0;n=n.parent}return!1}Ft.is=function(t,e){if(t.type!=="label"){Array.isArray(e)||(e=[e]);var n=!1;return e.forEach(function(i){i===t.type&&(n=!0)}),n}},Ft.isTypedEvent=function(t,e,n){return a1(t.eventDefinitions,function(i){return i.$type===e&&function(r,o){return o1(o,function(a,c){return r[c]==a})}(t,n)})},Ft.getBusinessObject=function(t){return t&&t.businessObject||t},Ft.isAncestor=qg,Ft.getDescendants=function(t,e){return t.filter(function(n){return qg(e,n)})},Ft.supportedElements=["bpmn:Association","bpmn:BoundaryEvent","bpmn:BusinessRuleTask","bpmn:CallActivity","bpmn:DataInputAssociation","bpmn:DataObjectReference","bpmn:DataOutputAssociation","bpmn:DataStoreReference","bpmn:EndEvent","bpmn:EventBasedGateway","bpmn:ExclusiveGateway","bpmn:IntermediateCatchEvent","bpmn:ManualTask","bpmn:ParallelGateway","bpmn:Process","bpmn:ScriptTask","bpmn:SequenceFlow","bpmn:ServiceTask","bpmn:StartEvent","bpmn:SubProcess","bpmn:Task","bpmn:TextAnnotation","bpmn:UserTask"];var s1={getMid:function(t){var e=t.bbox();return{x:e.x+e.width/2,y:e.y+e.height/2}},distance:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}},Wg=r1,c1=ga,l1=Y.RESET_SIMULATION_EVENT,u1=Y.PLAY_SIMULATION_EVENT,p1=Y.PAUSE_SIMULATION_EVENT,h1=Y.TERMINATE_EVENT,d1=Y.PROCESS_INSTANCE_FINISHED_EVENT,m1=Y.ANIMATION_CREATED_EVENT,Kg=Ft.isAncestor,f1=s1.distance,v1=getComputedStyle(document.documentElement).getPropertyValue("--token-simulation-green-base-44"),Xg=20;function ir(t,e){var n=window.animation=this;this._eventBus=e,this.animations=[],this.hiddenAnimations=[],this.animationSpeed=1,e.on("import.done",function(){var i=Wg(t._svg),r=c1(".viewport",t._svg),o=Wg.adopt(r);n.group=i.group().attr("id","token-simulation"),o.put(n.group)}),e.on(h1,function(i){var r=i.element.parent;n.animations.forEach(function(o){Kg(r,o.element)&&(o.animation.stop(),n.animations=n.animations.filter(function(a){return a!==o}))})}),e.on(d1,function(i){var r=i.parent;n.animations.forEach(function(o){(i.processInstanceId===o.processInstanceId||Kg(r,o.element))&&(o.animation.stop(),n.animations=n.animations.filter(function(a){return a!==o}))})}),e.on(l1,function(){n.animations.forEach(function(i){i.animation.stop()}),n.animations=[],n.hiddenAnimations=[]}),e.on(p1,function(){n.animations.forEach(function(i){i.animation.pause()})}),e.on(u1,function(){n.animations.forEach(function(i){i.animation.play()})})}ir.prototype.createAnimation=function(t,e,n){var i=this;if(this.group){var r,o=this._createTokenGfx(e);return r=new ba(o,t.waypoints,function(){i.animations=i.animations.filter(function(a){return a.animation!==r}),n&&n()}),this.hiddenAnimations.includes(e)&&o.hide(),o.fx._speed=this.animationSpeed,this.animations.push({tokenGfx:o,animation:r,element:t,processInstanceId:e}),this._eventBus.fire(m1,{tokenGfx:o,animation:r,element:t,processInstanceId:e}),r}},ir.prototype.setAnimationSpeed=function(t){this.animations.forEach(function(e){e.tokenGfx.fx._speed=t}),this.animationSpeed=t},ir.prototype._createTokenGfx=function(t){var e=this.group.group().attr("class","token").hide();return e.circle(Xg,Xg).attr("fill",v1).attr("class","circle"),e.text(t.toString()).attr("transform","translate(10, -7)").attr("text-anchor","middle").attr("class","text"),e},ir.prototype.showProcessInstanceAnimations=function(t){this.animations.forEach(function(e){e.processInstanceId===t&&e.tokenGfx.show()}),this.hiddenAnimations=this.hiddenAnimations.filter(function(e){return e!==t})},ir.prototype.hideProcessInstanceAnimations=function(t){this.animations.forEach(function(e){e.processInstanceId===t&&e.tokenGfx.hide()}),this.hiddenAnimations.push(t)},ir.$inject=["canvas","eventBus"];var y1=ir;function ba(t,e,n){this.gfx=this.fx=t,this.waypoints=e,this.done=n,this.create()}ba.prototype.create=function(){var t=this.gfx,e=this.waypoints,n=this.done,i=this.fx;t.show().move(e[0].x-10,e[0].y-10),e.forEach(function(r,o){if(o>0){var a=r.x-10,c=r.y-10,l=function(p){return p===1}(o)?"<":"-";(function(p){return p.length==2})(e)&&(l="<>");var u=20*f1(e[o-1],r);i=i.animate(u,l,0).move(a,c)}}),i.after(function(){t.remove(),n()})},ba.prototype.play=function(){this.gfx.play()},ba.prototype.pause=function(){this.gfx.pause()},ba.prototype.stop=function(){this.fx.stop(),this.gfx.remove()};var eh,g1=function(t,e){if(typeof t!="string")throw new TypeError("String expected");e||(e=document);var n=/<([\w:]+)/.exec(t);if(!n)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body")return(r=e.createElement("html")).innerHTML=t,r.removeChild(r.lastChild);var r,o=Object.prototype.hasOwnProperty.call(re,i)?re[i]:re._default,a=o[0],c=o[1],l=o[2];for((r=e.createElement("div")).innerHTML=c+t+l;a--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(var u=e.createDocumentFragment();r.firstChild;)u.appendChild(r.removeChild(r.firstChild));return u},Yg=!1;typeof document<"u"&&((eh=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Yg=!eh.getElementsByTagName("link").length,eh=void 0);var re={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Yg?[1,"X<div>","</div>"]:[0,"",""]};re.td=re.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],re.option=re.optgroup=[1,'<select multiple="multiple">',"</select>"],re.thead=re.tbody=re.colgroup=re.caption=re.tfoot=[1,"<table>","</table>"],re.polyline=re.ellipse=re.polygon=re.circle=re.text=re.line=re.path=re.rect=re.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Re=g1,nh={},Jg=window.addEventListener?"addEventListener":"attachEvent",b1=window.removeEventListener?"removeEventListener":"detachEvent",Zg=Jg!=="addEventListener"?"on":"";nh.bind=function(t,e,n,i){return t[Jg](Zg+e,n,i||!1),n},nh.unbind=function(t,e,n,i){return t[b1](Zg+e,n,i||!1),n};var vn=nh,x1=Re,E1=vn,Qg=Ft.is,_1=Y.GENERATE_TOKEN_EVENT,w1=Y.UPDATE_ELEMENT_EVENT;function ih(t,e,n){this._eventBus=t,this._processInstances=e,this._processInstanceSettings=n}ih.prototype.createContextPads=function(t){if(t.attachers.length&&this._processInstances.getProcessInstances(t).length){var e=t.incoming.filter(function(r){return Qg(r,"bpmn:SequenceFlow")}),n=this,i=[];return t.attachers.forEach(function(r){var o=r.outgoing.filter(function(c){return Qg(c,"bpmn:SequenceFlow")});if(e.length&&o.length){var a=x1('<div class="context-pad" title="Trigger Event"><i class="fa fa-play"></i></div>');i.push({element:r,html:a}),E1.bind(a,"click",function(){n._processInstances.getProcessInstances(t).forEach(function(c){var l=c.parentProcessInstanceId;r.businessObject.cancelActivity&&(t.children.forEach(function(u){u.tokenCount&&u.tokenCount[c.processInstanceId]&&u.tokenCount[c.processInstanceId]--}),n._processInstances.finish(c.processInstanceId),n._eventBus.fire(w1,{element:t})),n._eventBus.fire(_1,{element:r,processInstanceId:l})})})}}),i}},ih.$inject=["eventBus","processInstances","processInstanceSettings"];var S1=ih,C1=Ft.is,T1=Re,A1=vn;function rh(t){this._exclusiveGatewaySettings=t}rh.prototype.createContextPads=function(t){var e=this;if(!(t.outgoing.filter(function(i){return C1(i,"bpmn:SequenceFlow")}).length<2)){var n=T1('<div class="context-pad" title="Set Sequence Flow"><i class="fa fa-code-fork"></i></div>');return A1.bind(n,"click",function(){e._exclusiveGatewaySettings.setSequenceFlow(t)}),[{element:t,html:n}]}},rh.$inject=["exclusiveGatewaySettings"];var k1=rh,tb=Re,eb=vn,oh=Ft.is,nb=Y.GENERATE_TOKEN_EVENT;function ah(t){this._eventBus=t}ah.prototype.createContextPads=function(t){var e=t.parent.shownProcessInstance,n=t.incoming.filter(function(c){return oh(c,"bpmn:SequenceFlow")}),i=[];n.forEach(function(c){var l=c.source;oh(l,"bpmn:EventBasedGateway")&&l.tokenCount&&l.tokenCount[e]&&i.push(l)});var r=t.outgoing.filter(function(c){return oh(c,"bpmn:SequenceFlow")});if(n.length&&r.length){var o,a=this;if(t.tokenCount&&t.tokenCount[e])o=tb('<div class="context-pad" title="Trigger Event"><i class="fa fa-play"></i></div>'),eb.bind(o,"click",function(){t.tokenCount[e]--,a._eventBus.fire(nb,{element:t,processInstanceId:e})});else{if(!i.length)return;o=tb('<div class="context-pad" title="Trigger Event"><i class="fa fa-play"></i></div>'),eb.bind(o,"click",function(){i.forEach(function(c){c.tokenCount[e]--}),a._eventBus.fire(nb,{element:t,processInstanceId:e})})}return[{element:t,html:o}]}},ah.$inject=["eventBus"];var P1=ah,M1=Re,R1=vn;function sh(t,e){this._processInstances=t,this._processInstanceSettings=e}sh.prototype.createContextPads=function(t){var e=this;if(!(this._processInstances.getProcessInstances(t).filter(function(i){return!i.isFinished}).length<2)){var n=M1('<div class="context-pad" title="View Process Instances"><i class="fa fa-list-ol"></i></div>');return R1.bind(n,"click",function(){e._processInstanceSettings.showNext(t)}),[{element:t,html:n}]}},sh.$inject=["processInstances","processInstanceSettings"];var N1=sh,I1=Re,D1=vn,B1=Ft.is,O1=Y.GENERATE_TOKEN_EVENT;function ch(t,e,n){this._eventBus=t,this._elementRegistry=e,this._animation=n}ch.prototype.createContextPads=function(t){var e=!1;if(this._elementRegistry.forEach(function(r){r.tokenCount&&Object.values(r.tokenCount).forEach(function(o){o&&(e=!0)})}),!(B1(t.parent,"bpmn:SubProcess")||e||this._animation.animations.length)){var n=this,i=I1('<div class="context-pad"><i class="fa fa-play"></i></div>');return D1.bind(i,"click",function(){n._eventBus.fire(O1,{element:t})}),[{element:t,html:i}]}},ch.$inject=["eventBus","elementRegistry","animation"];var L1=ch,ib=Ft.isAncestor,j1=Y.TOGGLE_MODE_EVENT,V1=Y.RESET_SIMULATION_EVENT,F1=Y.TERMINATE_EVENT,$1=Y.UPDATE_ELEMENTS_EVENT,z1=Y.UPDATE_ELEMENT_EVENT,G1=Y.PROCESS_INSTANCE_SHOWN_EVENT,U1=S1,H1=k1,q1=P1,W1=N1,K1=L1,xa=500;function rr(t,e,n,i,r,o){var a=this;this._elementRegistry=e,this._overlays=n,this._injector=i,this._canvas=r,this._processInstances=o,this.overlayIds={},this.handlers={},this.registerHandler("bpmn:ExclusiveGateway",H1),this.registerHandler("bpmn:IntermediateCatchEvent",q1),this.registerHandler("bpmn:SubProcess",W1),this.registerHandler("bpmn:SubProcess",U1),this.registerHandler("bpmn:StartEvent",K1),t.on(j1,xa,function(c){c.simulationModeActive?a.openContextPads():a.closeContextPads()}),t.on(V1,xa,function(){a.closeContextPads(),a.openContextPads()}),t.on(F1,xa,function(c){var l=c.element.parent;a.closeContextPads(l)}),t.on($1,xa,function(c){c.elements.forEach(function(l){a.closeElementContextPads(l),a.openElementContextPads(l)})}),t.on(z1,xa,function(c){var l=c.element;a.closeElementContextPads(l),a.openElementContextPads(l)}),t.on(G1,function(c){var l=c.processInstanceId,u=o.getProcessInstance(l).parent;a.closeContextPads(u),a.openContextPads(u)})}rr.prototype.registerHandler=function(t,e){var n=this._injector.instantiate(e);this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(n)},rr.prototype.openContextPads=function(t){var e=this;t||(t=this._canvas.getRootElement()),this._elementRegistry.forEach(function(n){e.handlers[n.type]&&ib(t,n)&&e.openElementContextPads(n)})},rr.prototype.openElementContextPads=function(t){if(this.handlers[t.type]){var e=[];this.handlers[t.type].forEach(function(i){var r=i.createContextPads(t);r&&r.forEach(function(o){o&&e.push(o)})});var n=this;e.forEach(function(i){var r={top:-15,left:-15},o=n._overlays.add(i.element,"context-menu",{position:r,html:i.html,show:{minZoom:.5}});n.overlayIds[i.element.id]=o})}},rr.prototype.closeContextPads=function(t){var e=this;t||(t=this._canvas.getRootElement()),this._elementRegistry.forEach(function(n){ib(t,n)&&e.closeElementContextPads(n)})},rr.prototype.closeElementContextPads=function(t){var e=this;t.attachers&&t.attachers.length>0&&t.attachers.forEach(function(i){e.closeElementContextPads(i)}),t.children&&t.children.length>0&&t.children.forEach(function(i){e.closeElementContextPads(i)});var n=this.overlayIds[t.id];n&&(this._overlays.remove(n),delete this.overlayIds[t.id])},rr.$inject=["eventBus","elementRegistry","overlays","injector","canvas","processInstances"];var X1=rr,Y1=Y.TOGGLE_MODE_EVENT;function rb(t,e,n,i,r,o,a,c){var l=this;function u(v,f,y){var b=v[f];v[f]=function(){return y.call(this,b,arguments)}}function p(v,f){u(v,f,function(y,b){if(!l.modelingDisabled)return y.apply(this,b)})}function d(v,f){u(v,f,function(y,b){if(l.modelingDisabled)throw new Error("model is read-only");return y.apply(this,b)})}this._eventBus=t,this.modelingDisabled=!1,t.on(Y1,10001,function(v){var f=v.simulationModeActive;l.modelingDisabled=f,l.modelingDisabled&&(i.cancel(),e.close(),n.cancel()),a._update()}),p(e,"open"),p(n,"init"),p(i,"activate"),p(n,"init"),p(i,"activate"),d(o,"moveShape"),d(o,"updateAttachment"),d(o,"moveElements"),d(o,"moveConnection"),d(o,"layoutConnection"),d(o,"createConnection"),d(o,"createShape"),d(o,"createLabel"),d(o,"appendShape"),d(o,"removeElements"),d(o,"distributeElements"),d(o,"removeShape"),d(o,"removeConnection"),d(o,"replaceShape"),d(o,"pasteElements"),d(o,"alignElements"),d(o,"resizeShape"),d(o,"createSpace"),d(o,"updateWaypoints"),d(o,"reconnectStart"),d(o,"reconnectEnd"),u(r,"trigger",function(v,f){var y=f[0];if(!l.modelingDisabled||!function(b,g){return b.indexOf(g)>-1}(["undo","redo","copy","paste","removeSelection","spaceTool","lassoTool","globalConnectTool","distributeElements","alignElements","directEditing"],y))return v.apply(this,f)})}rb.$inject=["eventBus","contextPad","dragging","directEditing","editorActions","modeling","palette","paletteProvider"];var J1=rb,Z1=Re,Q1=Y.TOGGLE_MODE_EVENT,tS=Y.RESET_SIMULATION_EVENT,eS=Y.GENERATE_TOKEN_EVENT;function Yr(t,e){var n=this;this._overlays=t,e.on(Q1,function(i){i.simulationModeActive||n.removeElementNotifications()}),e.on([tS,eS],function(){n.removeElementNotifications()})}Yr.prototype.addElementNotifications=function(t,e){var n=this;t.forEach(function(i){n.addElementNotification(i,e)})},Yr.prototype.addElementNotification=function(t,e){var n={top:-15,right:15},i='<div class="element-notification '+(e.type||"")+'">'+(e.icon?'<i class="fa '+e.icon+'"></i>':"")+('<span class="text">'+e.text+"</span>"||"")+"</div>",r=Z1(i);this._overlays.add(t,"element-notification",{position:n,html:r,show:{minZoom:.5}})},Yr.prototype.removeElementNotifications=function(t){var e=this;t?t.forEach(function(n){e.removeElementNotification(n)}):this._overlays.remove({type:"element-notification"})},Yr.prototype.removeElementNotification=function(t){this._overlays.remove({element:t})},Yr.$inject=["overlays","eventBus"];var ob,ab,nS=Yr;function sb(){return ab?ob:(ab=1,ob=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1})}try{var Cc=sb()}catch{Cc=sb()}var iS=/\s+/,rS=Object.prototype.toString;function Pi(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}Pi.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~Cc(e,t)||e.push(t),this.el.className=e.join(" "),this},Pi.prototype.remove=function(t){if(rS.call(t)=="[object RegExp]")return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=Cc(e,t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},Pi.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},Pi.prototype.toggle=function(t,e){return this.list?(e!==void 0?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(e!==void 0?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},Pi.prototype.array=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(iS);return t[0]===""&&t.shift(),t},Pi.prototype.has=Pi.prototype.contains=function(t){return this.list?this.list.contains(t):!!~Cc(this.array(),t)};var Mi=function(t){return new Pi(t)},cb=Mi,lb=Ft,Ea=lb.is,ub=lb.supportedElements,oS=Y.TOGGLE_MODE_EVENT,aS=Y.GENERATE_TOKEN_EVENT,pb=["bpmn:Process","bpmn:Collaboration","bpmn:Participant","bpmn:Lane","bpmn:TextAnnotation"];function hb(t){return t.labelTarget}function _a(t,e,n,i,r){var o=this;this._eventBus=t,this._elementRegistry=e,this._elementNotifications=r,this._notifications=i,this.canvasParent=n.getContainer().parentNode,t.on(aS,2e4,function(a){var c=a.element;if(Ea(c,"bpmn:StartEvent"))return o.allElementsSupported()?void 0:(o.showWarnings(),cb(o.canvasParent).add("warning"),!0)}),t.on(oS,function(a){a.simulationModeActive||cb(o.canvasParent).remove("warning")})}_a.prototype.allElementsSupported=function(){var t=!0;return this._elementRegistry.forEach(function(e){Ea(e,pb)||Ea(e,ub)||hb(e)||(t=!1)}),t},_a.prototype.showWarnings=function(t){var e=this,n=[];this._elementRegistry.forEach(function(i){Ea(i,pb)||Ea(i,ub)||hb(i)||(e.showWarning(i),n.indexOf(i.type)&&(e._notifications.showNotification(i.type+" not supported","warning"),n.push(i.type)))})},_a.prototype.showWarning=function(t){this._elementNotifications.addElementNotification(t,{type:"warning",icon:"fa-exclamation-triangle",text:"Not supported"})},_a.$inject=["eventBus","elementRegistry","canvas","notifications","elementNotifications"];var sS=_a,lh=Ft.is,cS=Y.TOGGLE_MODE_EVENT,lS=getComputedStyle(document.documentElement).getPropertyValue("--token-simulation-grey-lighten-56"),uS=getComputedStyle(document.documentElement).getPropertyValue("--token-simulation-grey-darken-30");function wa(t){return lh(t,"bpmn:SequenceFlow")}function or(t,e,n){var i=this;this._elementRegistry=e,this._graphicsFactory=n,t.on(cS,function(r){r.simulationModeActive?i.setSequenceFlowsDefault():i.resetSequenceFlows()})}or.prototype.setSequenceFlowsDefault=function(){var t=this;this._elementRegistry.filter(function(e){return lh(e,"bpmn:ExclusiveGateway")}).forEach(function(e){e.outgoing.filter(wa).length&&t.setSequenceFlow(e,e.outgoing.filter(wa)[0])})},or.prototype.resetSequenceFlows=function(){var t=this;this._elementRegistry.filter(function(e){return lh(e,"bpmn:ExclusiveGateway")}).forEach(function(e){e.outgoing.filter(wa).length&&t.resetSequenceFlow(e)})},or.prototype.resetSequenceFlow=function(t){t.sequenceFlow&&delete t.sequenceFlow},or.prototype.setSequenceFlow=function(t){var e=this,n=t.outgoing.filter(wa);if(n.length){var i=t.sequenceFlow;t.sequenceFlow=i?function(r){var o=r.outgoing.filter(wa),a=o.indexOf(r.sequenceFlow);return o[a+1]?o[a+1]:o[0]}(t):n[0],t.outgoing.forEach(function(r){r===t.sequenceFlow?e.setColor(r,uS):e.setColor(r,lS)})}},or.prototype.setColor=function(t,e){t.businessObject.di.set("stroke",e);var n=this._elementRegistry.getGraphics(t);this._graphicsFactory.update("connection",t,n)},or.$inject=["eventBus","elementRegistry","graphicsFactory"];var pS=or,Tc=Re,ei=Mi,Sa=vn,Ac=ga,uh=Ft,hS=uh.getBusinessObject,an=uh.is,dS=uh.isTypedEvent,mS=Y.GENERATE_TOKEN_EVENT,fS=Y.CONSUME_TOKEN_EVENT,vS=Y.TOGGLE_MODE_EVENT,yS=Y.RESET_SIMULATION_EVENT,gS=Y.PROCESS_INSTANCE_CREATED_EVENT;function ph(t){return t&&t.businessObject.name}function Jr(t,e,n,i){var r=this;this._notifications=e,this._tokenSimulationPalette=n,this._canvas=i,this._init(),t.on(mS,function(o){var a=o.element,c=ph(a);if(an(a,"bpmn:BusinessRuleTask"))r.log(c||"Business Rule Task","info","bpmn-icon-business-rule");else if(an(a,"bpmn:CallActivity"))r.log(c||"Call Activity","info","bpmn-icon-call-activity");else if(an(a,["bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent"]))r.log(c||"Intermediate Event","info","bpmn-icon-intermediate-event-none");else if(an(a,"bpmn:ManualTask"))r.log(c||"Manual Task","info","bpmn-icon-manual");else if(an(a,"bpmn:ScriptTask"))r.log(c||"Script Task","info","bpmn-icon-script");else if(an(a,"bpmn:ServiceTask"))r.log(c||"Service Task","info","bpmn-icon-service");else if(an(a,"bpmn:StartEvent"))r.log(c||"Start Event","info","bpmn-icon-start-event-none");else if(an(a,"bpmn:Task"))r.log(c||"Task","info","bpmn-icon-task");else if(an(a,"bpmn:UserTask"))r.log(c||"User Task","info","bpmn-icon-user");else if(an(a,"bpmn:ExclusiveGateway")){if(a.outgoing.length<2)return;var l=ph(a.sequenceFlow),u=c||"Gateway";l&&(u=u.concat(' <i class="fa fa-angle-right" aria-hidden="true"></i> '+l)),r.log(u,"info","bpmn-icon-gateway-xor")}}),t.on(fS,function(o){var a=o.element,c=ph(a);an(a,"bpmn:EndEvent")&&(dS(hS(a),"bpmn:TerminateEventDefinition")?r.log(c||"Terminate End Event","info","bpmn-icon-end-event-terminate"):r.log(c||"End Event","info","bpmn-icon-end-event-none"))}),t.on(gS,function(o){var a=o.processInstanceId,c=o.parent;an(c,"bpmn:Process")?r.log("Process "+a+" started","success","fa-check"):r.log("Subprocess "+a+" started","info","fa-check")}),t.on(vS,function(o){o.simulationModeActive||(r.emptyLog(),ei(r.container).add("hidden"))}),t.on(yS,function(o){r.emptyLog(),ei(r.container).add("hidden")})}Jr.prototype._init=function(){var t=this;this.container=Tc('<div class="token-simulation-log hidden"><div class="header"><i class="fa fa-align-left"></i><button class="close"><i class="fa fa-times" aria-hidden="true"></i></button></div><div class="content"><p class="entry placeholder">No Entries</p></div></div>'),this.placeholder=Ac(".placeholder",this.container),this.content=Ac(".content",this.container),Sa.bind(this.content,"wheel",function(e){e.stopPropagation()}),Sa.bind(this.content,"mousedown",function(e){e.stopPropagation()}),this.close=Ac(".close",this.container),Sa.bind(this.close,"click",function(){ei(t.container).add("hidden")}),this.icon=Ac(".fa-align-left",this.container),Sa.bind(this.icon,"click",function(){ei(t.container).add("hidden")}),this._canvas.getContainer().appendChild(this.container),this.paletteEntry=Tc('<div class="entry" title="Show Simulation Log"><i class="fa fa-align-left"></i></div>'),Sa.bind(this.paletteEntry,"click",function(){ei(t.container).remove("hidden")}),this._tokenSimulationPalette.addEntry(this.paletteEntry,3)},Jr.prototype.toggle=function(){var t=this.container;ei(t).has("hidden")?ei(t).remove("hidden"):ei(t).add("hidden")},Jr.prototype.log=function(t,e,n){ei(this.placeholder).add("hidden");var i,r=new Date,o=r.toLocaleTimeString()+":"+r.getUTCMilliseconds();this._notifications.showNotification(t,e,n),n||(n="fa-info"),i=n.includes("bpmn")?'<span class="icon '+n+'">':'<i class="icon fa '+n+'"></i>';var a=Tc('<p class="entry '+e+'"><span class="date">'+o+"</span>"+i+"</span>"+t+"</p>");this.content.appendChild(a),this.content.scrollTop=this.content.scrollHeight},Jr.prototype.emptyLog=function(){for(;this.content.firstChild;)this.content.removeChild(this.content.firstChild);this.placeholder=Tc('<p class="entry placeholder">No Entries</p>'),this.content.appendChild(this.placeholder)},Jr.$inject=["eventBus","notifications","tokenSimulationPalette","canvas"];var bS=Jr,db=Re,xS=Y.TOGGLE_MODE_EVENT;function Ca(t,e){var n=this;this._eventBus=t,this._canvas=e,this._init(),t.on(xS,function(i){i.simulationModeActive||n.removeAll()})}Ca.prototype._init=function(){this.container=db('<div class="notifications"></div>'),this._canvas.getContainer().appendChild(this.container)},Ca.prototype.showNotification=function(t,e,n){var i;n||(n="fa-info"),i=n.includes("bpmn")?'<i class="'+n+'"></i>':'<i class="fa '+n+'"></i>';var r=db('<div class="notification '+e+'"><span class="icon">'+i+"</span>"+t+"</div>");for(this.container.appendChild(r);this.container.children.length>5;)this.container.children[0].remove();setTimeout(function(){r.remove()},2e3)},Ca.prototype.removeAll=function(){for(;this.container.children.length;)this.container.children[0].remove()},Ca.$inject=["eventBus","canvas"];var ES=Ca,_S=Re,ar=Mi,wS=vn,SS=Y.TOGGLE_MODE_EVENT,CS=Y.PLAY_SIMULATION_EVENT,TS=Y.PAUSE_SIMULATION_EVENT,AS=Y.RESET_SIMULATION_EVENT,kS=Y.ANIMATION_CREATED_EVENT,PS=Y.PROCESS_INSTANCE_CREATED_EVENT,mb='<i class="fa fa-play"></i>';function Ri(t,e,n,i){var r=this;this._eventBus=t,this._tokenSimulationPalette=e,this._notifications=n,this.canvasParent=i.getContainer().parentNode,this.isActive=!1,this.isPaused=!1,this._init(),t.on(PS,function(o){o.parent.parent||(r.activate(),r.unpause(),n.showNotification("Start Simulation","info"))}),t.on([AS,SS],function(){r.deactivate(),r.unpause()}),t.on(kS,function(o){var a=o.animation;r.isPaused&&a.pause()})}Ri.prototype._init=function(){this.paletteEntry=_S('<div class="entry disabled" title="Play/Pause Simulation">'+mb+"</div>"),wS.bind(this.paletteEntry,"click",this.toggle.bind(this)),this._tokenSimulationPalette.addEntry(this.paletteEntry,1)},Ri.prototype.toggle=function(){this.isActive&&(this.isPaused?this.unpause():this.pause())},Ri.prototype.pause=function(){this.isActive&&(ar(this.paletteEntry).remove("active"),ar(this.canvasParent).add("paused"),this.paletteEntry.innerHTML=mb,this._eventBus.fire(TS),this._notifications.showNotification("Pause Simulation","info"),this.isPaused=!0)},Ri.prototype.unpause=function(){this.isActive&&(ar(this.paletteEntry).add("active"),ar(this.canvasParent).remove("paused"),this.paletteEntry.innerHTML='<i class="fa fa-pause"></i>',this._eventBus.fire(CS),this._notifications.showNotification("Play Simulation","info"),this.isPaused=!1)},Ri.prototype.activate=function(){this.isActive=!0,ar(this.paletteEntry).remove("disabled")},Ri.prototype.deactivate=function(){this.isActive=!1,ar(this.paletteEntry).remove("active"),ar(this.paletteEntry).add("disabled")},Ri.$inject=["eventBus","tokenSimulationPalette","notifications","canvas"];var MS=Ri,RS=Y.TOGGLE_MODE_EVENT;function Ta(t,e,n){var i=this;this._elementRegistry=e,this._graphicsFactory=n,this.elementColors={},t.on(RS,5e4,function(r){r.simulationModeActive?i.preserveColors():i.resetColors()})}Ta.prototype.preserveColors=function(){var t=this;this._elementRegistry.forEach(function(e){t.elementColors[e.id]={stroke:e.businessObject.di.get("stroke"),fill:e.businessObject.di.get("fill")},t.setColor(e,"#000","#fff")})},Ta.prototype.resetColors=function(){var t=this;this._elementRegistry.forEach(function(e){t.elementColors[e.id]&&t.setColor(e,t.elementColors[e.id].stroke,t.elementColors[e.id].fill)}),this.elementColors={}},Ta.prototype.setColor=function(t,e,n){var i=t.businessObject;i.di.set("stroke",e),i.di.set("fill",n);var r=this._elementRegistry.getGraphics(t),o=t.waypoints?"connection":"shape";this._graphicsFactory.update(o,t,r)},Ta.$inject=["eventBus","elementRegistry","graphicsFactory"];var NS=Ta,IS=Y.TOGGLE_MODE_EVENT,DS=Y.RESET_SIMULATION_EVENT;function kc(t){this.nextProcessInstanceId=1,t.on(IS,this.reset.bind(this)),t.on(DS,this.reset.bind(this))}kc.prototype.getNext=function(){var t=this.nextProcessInstanceId;return this.nextProcessInstanceId++,t},kc.prototype.reset=function(){this.nextProcessInstanceId=1},kc.$inject=["eventBus"];var BS=kc,OS=Y.TOGGLE_MODE_EVENT,LS=Y.PROCESS_INSTANCE_CREATED_EVENT,jS=Y.PROCESS_INSTANCE_FINISHED_EVENT,VS=Y.PROCESS_INSTANCE_SHOWN_EVENT,FS=Y.PROCESS_INSTANCE_HIDDEN_EVENT;function Aa(t,e,n,i){var r=this;this._animation=t,this._eventBus=e,this._processInstances=n,this._elementRegistry=i,this._eventBus.on(LS,500,function(o){var a=o.parent,c=o.processInstanceId,l=n.getProcessInstances(a).filter(function(u){return!u.isFinished});l.length===1?r.showProcessInstance(c,a):l.length>1&&r.hideProcessInstance(c)}),this._eventBus.on(jS,500,function(o){var a=o.parent,c=o.processInstanceId,l=n.getProcessInstances(a).filter(function(u){return c!==u.processInstanceId&&!u.isFinished});l.length&&c===a.shownProcessInstance?r.showProcessInstance(l[0].processInstanceId,a):delete a.shownProcessInstance,a.parent||i.forEach(function(u){delete u.shownProcessInstance})}),e.on(OS,function(){i.forEach(function(o){delete o.shownProcessInstance})})}Aa.prototype.showProcessInstance=function(t,e){this._animation.showProcessInstanceAnimations(t),e.shownProcessInstance=t,this._eventBus.fire(VS,{processInstanceId:t})},Aa.prototype.hideProcessInstance=function(t){this._animation.hideProcessInstanceAnimations(t),this._eventBus.fire(FS,{processInstanceId:t})},Aa.prototype.showNext=function(t){var e=this,n=this._processInstances.getProcessInstances(t),i=t.shownProcessInstance,r=0;for(let o=0;o<n.length&&n[o].processInstanceId!==i;o++)r++;n.forEach(function(o){e.hideProcessInstance(o.processInstanceId)}),r===n.length-1?this.showProcessInstance(n[0].processInstanceId,t):this.showProcessInstance(n[r+1].processInstanceId,t)},Aa.$inject=["animation","eventBus","processInstances","elementRegistry"];var $S=Aa,zS=Y.TOGGLE_MODE_EVENT,GS=Y.RESET_SIMULATION_EVENT,US=Y.PROCESS_INSTANCE_CREATED_EVENT,HS=Y.PROCESS_INSTANCE_FINISHED_EVENT;function sr(t,e){var n=this;this._eventBus=t,this._processInstanceIds=e,this.processInstances=[],t.on([zS,GS],function(){n.processInstances=[]})}sr.prototype.create=function(t,e){var n=this._processInstanceIds.getNext(),i={parent:t,processInstanceId:n,parentProcessInstanceId:e};return this.processInstances.push(i),this._eventBus.fire(US,i),n},sr.prototype.remove=function(t){this.processInstances=this.processInstances.filter(function(e){return e.processInstanceId!==t})},sr.prototype.finish=function(t){var e=this.processInstances.find(function(n){return n.processInstanceId===t});this._eventBus.fire(HS,e),e.isFinished=!0},sr.prototype.getProcessInstances=function(t,e){if(!t)return this.processInstances;var n=this.processInstances.filter(function(i){return i.parent===t});return e&&e.includeFinished!==!0&&(n=n.filter(function(i){return!i.isFinished})),n},sr.prototype.getProcessInstance=function(t){return this.processInstances.find(function(e){return e.processInstanceId===t})},sr.$inject=["eventBus","processInstanceIds"];var qS=sr,WS=Re,fb=Mi,KS=vn,XS=Ft.is,YS=Y.TOGGLE_MODE_EVENT,JS=Y.GENERATE_TOKEN_EVENT,ZS=Y.RESET_SIMULATION_EVENT;function Pc(t,e,n,i){var r=this;this._eventBus=t,this._tokenSimulationPalette=e,this._notifications=n,this._elementRegistry=i,this._init(),t.on(JS,function(o){XS(o.element,"bpmn:StartEvent")&&fb(r.paletteEntry).remove("disabled")}),t.on(YS,function(o){o.simulationModeActive||r.resetSimulation()})}Pc.prototype._init=function(){var t=this;this.paletteEntry=WS('<div class="entry disabled" title="Reset Simulation"><i class="fa fa-refresh"></i></div>'),KS.bind(this.paletteEntry,"click",function(){t.resetSimulation(),t._notifications.showNotification("Reset Simulation","info")}),this._tokenSimulationPalette.addEntry(this.paletteEntry,2)},Pc.prototype.resetSimulation=function(){fb(this.paletteEntry).add("disabled"),this._elementRegistry.forEach(function(t){t.tokenCount!==void 0&&delete t.tokenCount}),this._eventBus.fire(ZS)},Pc.$inject=["eventBus","tokenSimulationPalette","notifications","elementRegistry"];var QS=Pc,tC=Re,Mc=Mi,hh=vn,Rc=ga,eC=Y.TOGGLE_MODE_EVENT;function Nc(t,e,n){var i=this;this._canvas=t,this._animation=e,this._eventBus=n,this._init(),n.on(eC,function(r){r.simulationModeActive?Mc(i.container).remove("hidden"):Mc(i.container).add("hidden")})}Nc.prototype._init=function(){var t=this;this.container=tC('<div class="set-animation-speed hidden"><i title="Set Animation Speed" class="fa fa-tachometer" aria-hidden="true"></i><div class="animation-speed-buttons"><div title="Slow" id="animation-speed-1" class="animation-speed-button"><i class="fa fa-angle-right" aria-hidden="true"></i></div><div title="Normal" id="animation-speed-2" class="animation-speed-button active"><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-angle-right" aria-hidden="true"></i></div><div title="Fast" id="animation-speed-3" class="animation-speed-button"><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-angle-right" aria-hidden="true"></i></div></div></div>');var e=Rc("#animation-speed-1",this.container),n=Rc("#animation-speed-2",this.container),i=Rc("#animation-speed-3",this.container);hh.bind(e,"click",function(){t.setActive(e),t._animation.setAnimationSpeed(.5)}),hh.bind(n,"click",function(){t.setActive(n),t._animation.setAnimationSpeed(1)}),hh.bind(i,"click",function(){t.setActive(i),t._animation.setAnimationSpeed(1.5)}),this._canvas.getContainer().appendChild(this.container)},Nc.prototype.setActive=function(t){Rc.all(".animation-speed-button",this.container).forEach(function(e){Mc(e).remove("active")}),Mc(t).add("active")},Nc.$inject=["canvas","animation","eventBus"];var nC=Nc,vb=Re,Zr=Mi,dh=vn,mh=ga,iC=function(t){for(var e;t.childNodes.length;)e=t.childNodes[0],t.removeChild(e);return t},rC=Y.TOGGLE_MODE_EVENT,oC=Y.PROCESS_INSTANCE_CREATED_EVENT,aC=Y.PROCESS_INSTANCE_FINISHED_EVENT,sC=Y.PROCESS_INSTANCE_SHOWN_EVENT,cC=Y.PROCESS_INSTANCE_HIDDEN_EVENT,lC=Y.RESET_SIMULATION_EVENT,uC=getComputedStyle(document.documentElement).getPropertyValue("--token-simulation-silver-base-97"),pC=getComputedStyle(document.documentElement).getPropertyValue("--token-simulation-green-base-44");function yb(t){return t===null}function yn(t,e,n,i,r,o){var a=this;this._eventBus=t,this._canvas=e,this._processInstanceSettings=n,this._processInstances=i,this._graphicsFactory=r,this._elementRegistry=o,this.highlightedElement=null,this._init(),t.on(rC,function(c){c.simulationModeActive?Zr(a.container).remove("hidden"):(Zr(a.container).add("hidden"),iC(a.container),yb(a.highlightedElement)||(a.removeHighlightFromProcess(a.highlightedElement.element),a.highlightedElement=null))}),t.on(oC,function(c){a.addInstance(c)}),t.on(aC,function(c){a.removeInstance(c)}),t.on(sC,function(c){a.setInstanceShown(c.processInstanceId)}),t.on(cC,function(c){a.setInstanceHidden(c.processInstanceId)}),t.on(lC,function(){a.removeAllInstances()})}yn.prototype._init=function(){this.container=vb('<div class="process-instances hidden"></div>'),this._canvas.getContainer().appendChild(this.container)},yn.prototype.addInstance=function(t){var e=this,n=t.processInstanceId,i=t.parent,r=vb('<div id="instance-'+n+'" class="process-instance" title="View Process Instance '+n+'">'+n+"</div>");dh.bind(r,"click",function(){e._processInstances.getProcessInstances(i).forEach(function(o){e._processInstanceSettings.hideProcessInstance(o.processInstanceId)}),e._processInstanceSettings.showProcessInstance(n,i)}),dh.bind(r,"mouseenter",function(){e.highlightedElement={element:i,stroke:i.businessObject.di.get("stroke"),fill:i.businessObject.di.get("fill")},e.addHighlightToProcess(i)}),dh.bind(r,"mouseleave",function(){e.removeHighlightFromProcess(i),e.highlightedElement=null}),this.container.appendChild(r)},yn.prototype.removeInstance=function(t){var e=t.processInstanceId,n=mh("#instance-"+e,this.container);n&&n.remove()},yn.prototype.removeAllInstances=function(){this.container.innerHTML=""},yn.prototype.setInstanceShown=function(t){var e=mh("#instance-"+t,this.container);e&&Zr(e).add("active")},yn.prototype.setInstanceHidden=function(t){var e=mh("#instance-"+t,this.container);e&&Zr(e).remove("active")},yn.prototype.addHighlightToProcess=function(t){this.setColor(t,pC,uC),t.parent||Zr(this._canvas.getContainer()).add("highlight")},yn.prototype.removeHighlightFromProcess=function(t){yb(this.highlightedElement)||(this.setColor(t,this.highlightedElement.stroke,this.highlightedElement.fill),t.parent||Zr(this._canvas.getContainer()).remove("highlight"))},yn.prototype.setColor=function(t,e,n){var i=t.businessObject;i.di.set("stroke",e),i.di.set("fill",n);var r=this._elementRegistry.getGraphics(t);this._graphicsFactory.update("connection",t,r)},yn.$inject=["eventBus","canvas","processInstanceSettings","processInstances","graphicsFactory","elementRegistry"];var hC=yn,Ic=Ft,dC=Ic.getBusinessObject,Dc=Ic.is,mC=Ic.isAncestor,fC=Ic.isTypedEvent,vC=Y.CONSUME_TOKEN_EVENT;function Bc(t,e,n,i,r,o,a){this._animation=e,this._elementRegistry=n,this._log=i,this._elementNotifications=r,this._canvas=o,this._processInstances=a,t.on(vC,250,function(){})}Bc.prototype.isDeadlock=function(){var t=this,e=[];this._elementRegistry.forEach(function(r){r.tokenCount&&e.push(r)});var n=[],i=[];e.forEach(function(r){r.outgoing.filter(function(a){return Dc(a,"bpmn:SequenceFlow")}).length||n.push(r),Dc(r,"bpmn:ParallelGateway")&&r.incoming.filter(function(a){return Dc(a,"bpmn:SequenceFlow")}).length>r.tokenCount&&n.push(r);var o=[];(function a(c){c.outgoing.forEach(function(l){o.indexOf(l.target)===-1&&(o.push(l.target),fC(dC(l.target),"bpmn:TerminateEventDefinition")&&i.push(c),a(l.target))})})(r)}),e.length&&!i.length&&n.length&&!this._animation.animations.length&&(t._log.log("Deadlock","warning","fa-exclamation-triangle"),n.forEach(function(r){t._elementNotifications.addElementNotification(r,{type:"warning",icon:"fa-exclamation-triangle",text:"Deadlock"})}))},Bc.prototype.isFinished=function(t,e){var n=this._processInstances.getProcessInstance(e).parent,i=!1;n||(n=this._canvas.getRootElement()),n.children.forEach(function(o){o.tokenCount&&o.tokenCount[e]&&o.tokenCount[e].length&&(i=!0)});var r=!1;if(this._animation.animations.forEach(function(o){mC(n,o.element)&&o.processInstanceId===e&&(r=!0)}),!i&&!r)return Dc(n,"bpmn:SubProcess")?this._log.log("Subprocess "+e+" finished","info","fa-check-circle"):(this._log.log("Process "+e+" finished","success","fa-check-circle"),this._elementNotifications.addElementNotification(t,{type:"success",icon:"fa-check-circle",text:"Finished"})),!0},Bc.$inject=["eventBus","animation","elementRegistry","log","elementNotifications","canvas","processInstances"];var yC=Bc,gC=Re,Oc=Mi,bC=vn,xC=ga,gb=Y.TOGGLE_MODE_EVENT;function Lc(t,e,n,i){var r=this;this._eventBus=t,this._canvas=e,this._selection=n,this._contextPad=i,this.simulationModeActive=!1,t.on("import.done",function(){r.canvasParent=r._canvas.getContainer().parentNode,r.palette=xC(".djs-palette",r._canvas.getContainer()),r._init()})}Lc.prototype._init=function(){this.container=gC(`
    <div class="toggle-mode">
      Token Simulation <span class="toggle"><i class="fa fa-toggle-off"></i></span>
    </div>
  `),bC.bind(this.container,"click",this.toggleMode.bind(this)),this._canvas.getContainer().appendChild(this.container)},Lc.prototype.toggleMode=function(){if(this.simulationModeActive){this.container.innerHTML='Token Simulation <span class="toggle"><i class="fa fa-toggle-off"></i></span>',Oc(this.canvasParent).remove("simulation"),Oc(this.palette).remove("hidden"),this._eventBus.fire(gb,{simulationModeActive:!1});var t=this._selection.get();t.length===1&&this._contextPad.open(t[0])}else this.container.innerHTML='Token Simulation <span class="toggle"><i class="fa fa-toggle-on"></i></span>',Oc(this.canvasParent).add("simulation"),Oc(this.palette).add("hidden"),this._eventBus.fire(gb,{simulationModeActive:!0});this.simulationModeActive=!this.simulationModeActive},Lc.$inject=["eventBus","canvas","selection","contextPad"];var EC=Lc,_C=Re,bb=Ft.isAncestor,wC=Y.TOGGLE_MODE_EVENT,SC=Y.GENERATE_TOKEN_EVENT,CC=Y.CONSUME_TOKEN_EVENT,TC=Y.RESET_SIMULATION_EVENT,AC=Y.TERMINATE_EVENT,kC=Y.PROCESS_INSTANCE_SHOWN_EVENT;function cr(t,e,n,i,r){var o=this;this._overlays=e,this._elementRegistry=n,this._canvas=i,this._processInstances=r,this.overlayIds={},t.on(wC,function(a){a.simulationModeActive||o.removeTokenCounts()}),t.on(TC,function(){o.removeTokenCounts()}),t.on(AC,function(a){var c=a.element.parent;o.removeTokenCounts(c)}),t.on([SC,CC],500,function(a){var c=a.element.parent;o.removeTokenCounts(c),o.addTokenCounts(c)}),t.on(kC,function(a){var c=a.processInstanceId,l=r.getProcessInstance(c).parent;o.removeTokenCounts(l),o.addTokenCounts(l)})}cr.prototype.addTokenCounts=function(t){var e=this;t||(t=this._canvas.getRootElement());var n=t.shownProcessInstance;if(!n){var i=this._processInstances.getProcessInstances(t);if(!i.length)return;n=i[0].processInstanceId}this._elementRegistry.forEach(function(r){bb(t,r)&&e.addTokenCount(r,n)})},cr.prototype.addTokenCount=function(t,e){var n=t.tokenCount&&t.tokenCount[e];if(n){var i=this.createTokenCount(n),r={bottom:10,left:-15},o=this._overlays.add(t,"token-count",{position:r,html:i,show:{minZoom:.5}});this.overlayIds[t.id]=o}},cr.prototype.createTokenCount=function(t){return _C('<div class="token-count waiting">'+t+"</div>")},cr.prototype.removeTokenCounts=function(t){var e=this;t||(t=this._canvas.getRootElement()),this._elementRegistry.forEach(function(n){bb(t,n)&&e.removeTokenCount(n)})},cr.prototype.removeTokenCount=function(t){var e=this.overlayIds[t.id];e&&(this._overlays.remove(e),delete this.overlayIds[t.id])},cr.$inject=["eventBus","overlays","elementRegistry","canvas","processInstances"];var PC=cr,ka=Ft,MC=ka.getBusinessObject,RC=ka.is,NC=ka.isAncestor,IC=ka.getDescendants,DC=ka.isTypedEvent,BC=Y.GENERATE_TOKEN_EVENT,OC=Y.TERMINATE_EVENT,LC=Y.UPDATE_ELEMENTS_EVENT;function jc(t,e,n,i,r,o){this._animation=t,this._eventBus=e,this._log=n,this._simulationState=i,this._elementRegistry=r,this._processInstances=o}jc.prototype.consume=function(t){var e=t.element,n=t.processInstanceId,i=DC(MC(e),"bpmn:TerminateEventDefinition"),r=RC(e.parent,"bpmn:SubProcess");i&&(this._eventBus.fire(OC,t),this._elementRegistry.forEach(function(c){NC(e.parent,c)&&c.tokenCount&&c.tokenCount[n]&&delete c.tokenCount[n]}),this._processInstances.finish(n));var o=this._simulationState.isFinished(e,n);if(o&&this._processInstances.finish(n),(o||i)&&r){var a=this._processInstances.getProcessInstance(n);this._eventBus.fire(BC,{element:e.parent,processInstanceId:a.parentProcessInstanceId})}this._eventBus.fire(LC,{elements:IC(this._elementRegistry.getAll(),e.parent)})},jc.prototype.generate=function(t){},jc.$inject=["animation","eventBus","log","simulationState","elementRegistry","processInstances"];var jC=jc,VC=Ft.is,FC=Y.UPDATE_ELEMENTS_EVENT;function Vc(t,e){this._eventBus=t,this._animation=e}Vc.prototype.consume=function(t){var e=t.element,n=t.processInstanceId;e.tokenCount||(e.tokenCount={}),e.tokenCount[n]||(e.tokenCount[n]=0),e.tokenCount[n]++;var i=e.outgoing,r=[];i.forEach(function(o){var a=o.target;VC(a,"bpmn:IntermediateCatchEvent")&&r.push(a)}),this._eventBus.fire(FC,{elements:r})},Vc.prototype.generate=function(){},Vc.$inject=["eventBus","animation"];var $C=Vc,zC=Y.CONSUME_TOKEN_EVENT,GC=Y.GENERATE_TOKEN_EVENT;function Fc(t,e,n){this._eventBus=t,this._animation=e,this._elementRegistry=n}Fc.prototype.consume=function(t){var e=t.element;if(!e.sequenceFlow)throw new Error("no sequence flow configured for element "+e.id);this._eventBus.fire(GC,t)},Fc.prototype.generate=function(t){var e=t.element,n=t.processInstanceId;if(!e.sequenceFlow)throw new Error("no sequence flow configured for element "+e.id);var i=this,r=this._elementRegistry.get(e.sequenceFlow.id);this._animation.createAnimation(r,n,function(){i._eventBus.fire(zC,{element:r.target,processInstanceId:n})})},Fc.$inject=["eventBus","animation","elementRegistry"];var UC=Fc,xb=Ft.is,HC=Y.CONSUME_TOKEN_EVENT,qC=Y.UPDATE_ELEMENT_EVENT,WC=Y.UPDATE_ELEMENTS_EVENT;function $c(t,e,n){this._animation=t,this._eventBus=e,this._elementRegistry=n}$c.prototype.consume=function(t){var e=t.element,n=t.processInstanceId;e.tokenCount||(e.tokenCount={}),e.tokenCount[n]||(e.tokenCount[n]=0),e.tokenCount[n]++,this._eventBus.fire(qC,{element:e})},$c.prototype.generate=function(t){var e=this,n=t.element,i=t.processInstanceId;n.outgoing.filter(function(a){return xb(a,"bpmn:SequenceFlow")}).forEach(function(a){e._animation.createAnimation(a,i,function(){e._eventBus.fire(HC,{element:a.target,processInstanceId:i})})});var r=n.parent,o=this._elementRegistry.filter(function(a){return xb(a,"bpmn:IntermediateCatchEvent")&&a.parent===r});this._eventBus.fire(WC,{elements:o})},$c.$inject=["animation","eventBus","elementRegistry"];var KC=$c,XC=Ft.is,YC=Y.CONSUME_TOKEN_EVENT,JC=Y.GENERATE_TOKEN_EVENT;function zc(t,e){this._animation=t,this._eventBus=e}zc.prototype.consume=function(t){this._eventBus.fire(JC,{element:t})},zc.prototype.generate=function(t){var e=this;t.outgoing.filter(function(n){return XC(n,"bpmn:SequenceFlow")}).forEach(function(n){e._animation.createAnimation(n,function(){e._eventBus.fire(YC,{element:n.target})})})},zc.$inject=["animation","eventBus"];var ZC=zc,QC=Ft.is,tT=Y.CONSUME_TOKEN_EVENT,eT=Y.GENERATE_TOKEN_EVENT;function Gc(t,e){this._animation=t,this._eventBus=e}Gc.prototype.consume=function(t){var e=t.element,n=t.processInstanceId;e.tokenCount||(e.tokenCount={}),e.tokenCount[n]||(e.tokenCount[n]=0),e.tokenCount[n]++,e.incoming.length===e.tokenCount[n]&&(this._eventBus.fire(eT,t),e.tokenCount[n]=0)},Gc.prototype.generate=function(t){var e=this,n=t.element,i=t.processInstanceId;n.outgoing.filter(function(r){return QC(r,"bpmn:SequenceFlow")}).forEach(function(r){e._animation.createAnimation(r,i,function(){e._eventBus.fire(tT,{element:r.target,processInstanceId:i})})})},Gc.$inject=["animation","eventBus"];var nT=Gc,fh=Ft.is,iT=Y.CONSUME_TOKEN_EVENT,rT=Y.UPDATE_ELEMENTS_EVENT;function Uc(t,e,n,i){this._animation=t,this._eventBus=e,this._elementRegistry=n,this._processInstances=i}Uc.prototype.consume=function(){},Uc.prototype.generate=function(t){var e=this,n=t.element,i=t.parentProcessInstanceId,r=n.outgoing.filter(function(l){return fh(l,"bpmn:SequenceFlow")}),o=n.parent,a=this._processInstances.create(o,i);if(r.forEach(function(l){e._animation.createAnimation(l,a,function(){e._eventBus.fire(iT,{element:l.target,processInstanceId:a})})}),!fh(n.parent,"bpmn:SubProcess")){var c=this._elementRegistry.filter(function(l){return fh(l,"bpmn:StartEvent")});this._eventBus.fire(rT,{elements:c})}},Uc.$inject=["animation","eventBus","elementRegistry","processInstances"];var oT=Uc,Eb=Ft.is,aT=Y.CONSUME_TOKEN_EVENT,_b=Y.GENERATE_TOKEN_EVENT,wb=Y.UPDATE_ELEMENT_EVENT;function Hc(t,e,n){this._animation=t,this._eventBus=e,this._log=n}Hc.prototype.consume=function(t){var e=t.element,n=t.processInstanceId,i=e.children.filter(function(r){return Eb(r,"bpmn:StartEvent")})[0];i?(this._log.log("Starting Subprocess","info","fa-sign-in"),this._eventBus.fire(_b,{element:i,parentProcessInstanceId:n})):(this._log.log("Skipping Subprocess","info","fa-angle-double-right"),this._eventBus.fire(_b,t)),this._eventBus.fire(wb,{element:e})},Hc.prototype.generate=function(t){var e=this,n=t.element,i=t.processInstanceId;n.outgoing.filter(function(r){return Eb(r,"bpmn:SequenceFlow")}).forEach(function(r){e._animation.createAnimation(r,i,function(){e._eventBus.fire(aT,{element:r.target,processInstanceId:i})})}),this._eventBus.fire(wb,{element:n})},Hc.$inject=["animation","eventBus","log"];var sT=Hc,cT=Ft.is,lT=Y.CONSUME_TOKEN_EVENT,uT=Y.UPDATE_ELEMENT_EVENT;function qc(t,e,n){this._animation=t,this._eventBus=e,this._elementRegistry=n}qc.prototype.consume=function(t){var e=t.element,n=t.processInstanceId;e.tokenCount||(e.tokenCount={}),e.tokenCount[n]||(e.tokenCount[n]=0),e.tokenCount[n]++,this._eventBus.fire(uT,{element:e})},qc.prototype.generate=function(t){var e=this,n=t.element,i=t.processInstanceId;n.outgoing.filter(function(r){return cT(r,"bpmn:SequenceFlow")}).forEach(function(r){e._animation.createAnimation(r,i,function(){e._eventBus.fire(lT,{element:r.target,processInstanceId:i})})})},qc.$inject=["animation","eventBus","elementRegistry"];var pT=qc,hT=Ft.is,dT=Y.CONSUME_TOKEN_EVENT,mT=Y.GENERATE_TOKEN_EVENT;function Wc(t,e){this._animation=t,this._eventBus=e}Wc.prototype.consume=function(t){this._eventBus.fire(mT,t)},Wc.prototype.generate=function(t){var e=this,n=t.element,i=t.processInstanceId;n.outgoing.filter(function(r){return hT(r,"bpmn:SequenceFlow")}).forEach(function(r){e._animation.createAnimation(r,i,function(){e._eventBus.fire(dT,{element:r.target,processInstanceId:i})})})},Wc.$inject=["animation","eventBus"];var fT=jC,vT=$C,yT=UC,gT=KC,bT=ZC,xT=nT,ET=oT,_T=sT,wT=pT,ST=Wc,CT=Y.GENERATE_TOKEN_EVENT,TT=Y.CONSUME_TOKEN_EVENT;function vh(t,e,n){var i=this;this._injector=n,this.handlers={},this.registerHandler("bpmn:EndEvent",fT),this.registerHandler("bpmn:EventBasedGateway",vT),this.registerHandler("bpmn:ExclusiveGateway",yT),this.registerHandler("bpmn:IntermediateCatchEvent",gT),this.registerHandler("bpmn:IntermediateThrowEvent",bT),this.registerHandler("bpmn:ParallelGateway",xT),this.registerHandler("bpmn:StartEvent",ET),this.registerHandler("bpmn:SubProcess",_T),this.registerHandler("bpmn:BoundaryEvent",wT),this.registerHandler(["bpmn:BusinessRuleTask","bpmn:CallActivity","bpmn:ManualTask","bpmn:ScriptTask","bpmn:ServiceTask","bpmn:Task","bpmn:UserTask"],ST),t.on(CT,function(r){var o=r.element;if(!i.handlers[o.type])throw new Error("no handler for type "+o.type);i.handlers[o.type].generate(r)}),t.on(TT,function(r){var o=r.element;if(!i.handlers[o.type])throw new Error("no handler for type "+o.type);i.handlers[o.type].consume(r)})}vh.prototype.registerHandler=function(t,e){var n=this,i=this._injector.instantiate(e);Array.isArray(t)||(t=[t]),t.forEach(function(r){n.handlers[r]=i})},vh.$inject=["eventBus","animation","injector"];var AT=vh;function Sb(t,e,n,i,r,o){o.register({toggleTokenSimulation:function(){e.toggleMode()}}),o.register({togglePauseTokenSimulation:function(){n.toggle()}}),o.register({resetTokenSimulation:function(){r.resetSimulation()}}),o.register({toggleTokenSimulationLog:function(){i.toggle()}})}Sb.$inject=["eventBus","toggleMode","pauseSimulation","log","resetSimulation","editorActions"];var kT=Sb,PT=Y.TOGGLE_MODE_EVENT;function Cb(t,e){var n=e.get("editorActions",!1),i=e.get("keyboard",!1);if(i&&n){var r=!1;t.on("keyboard.init",function(){i.addListener(1e4,function(o){(function(a){Kc(["t","T"],a)?n.trigger("toggleTokenSimulation"):r&&(Kc(["l","L"],a)?n.trigger("toggleTokenSimulationLog"):Kc([" ","Spacebar"],a)?n.trigger("togglePauseTokenSimulation"):Kc(["r","R"],a)&&n.trigger("resetTokenSimulation"))})(o.keyEvent)})}),t.on(PT,function(o){var a=o.simulationModeActive;r=!!a})}}function Kc(t,e){return t.indexOf(e.key)>-1}Cb.$inject=["eventBus","injector"];var MT=Cb,RT=Re,Tb=Mi,NT=Y.TOGGLE_MODE_EVENT;function Xc(t,e){var n=this;this._canvas=e,this.entries=[],this._init(),t.on(NT,function(i){i.simulationModeActive?Tb(n.container).remove("hidden"):Tb(n.container).add("hidden")})}Xc.prototype._init=function(){this.container=RT('<div class="token-simulation-palette hidden"></div>'),this._canvas.getContainer().appendChild(this.container)},Xc.prototype.addEntry=function(t,e){var n=0;this.entries.forEach(function(i){e>=i.index&&n++}),this.container.insertBefore(t,this.container.childNodes[n]),this.entries.push({entry:t,index:e})},Xc.$inject=["eventBus","canvas"];const IT=so({__init__:["animation","contextPads","disableModeling","elementNotifications","elementSupport","exclusiveGatewaySettings","log","notifications","pauseSimulation","preserveElementColors","processInstanceIds","processInstanceSettings","processInstances","resetSimulation","setAnimationSpeed","showProcessInstance","simulationState","toggleMode","tokenCount","tokenSimulationBehavior","tokenSimulationEditorActions","tokenSimulationKeyboardBindings","tokenSimulationPalette"],animation:["type",y1],contextPads:["type",X1],disableModeling:["type",J1],elementNotifications:["type",nS],elementSupport:["type",sS],exclusiveGatewaySettings:["type",pS],log:["type",bS],notifications:["type",ES],pauseSimulation:["type",MS],preserveElementColors:["type",NS],processInstanceIds:["type",BS],processInstanceSettings:["type",$S],processInstances:["type",qS],resetSimulation:["type",QS],setAnimationSpeed:["type",nC],showProcessInstance:["type",hC],simulationState:["type",yC],toggleMode:["type",EC],tokenCount:["type",PC],tokenSimulationBehavior:["type",AT],tokenSimulationEditorActions:["type",kT],tokenSimulationKeyboardBindings:["type",MT],tokenSimulationPalette:["type",Xc]}),DT={name:"Camunda",uri:"http://camunda.org/schema/1.0/bpmn",prefix:"camunda",xml:{tagAlias:"lowerCase"},associations:[],types:[{name:"Definitions",isAbstract:!0,extends:["bpmn:Definitions"],properties:[{name:"diagramRelationId",isAttr:!0,type:"String"}]},{name:"InOutBinding",superClass:["Element"],isAbstract:!0,properties:[{name:"source",isAttr:!0,type:"String"},{name:"sourceExpression",isAttr:!0,type:"String"},{name:"target",isAttr:!0,type:"String"},{name:"businessKey",isAttr:!0,type:"String"},{name:"local",isAttr:!0,type:"Boolean",default:!1},{name:"variables",isAttr:!0,type:"String"}]},{name:"In",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity","bpmn:SignalEventDefinition"]}},{name:"Out",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"AsyncCapable",isAbstract:!0,extends:["bpmn:Activity","bpmn:Gateway","bpmn:Event"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1},{name:"asyncBefore",isAttr:!0,type:"Boolean",default:!1},{name:"asyncAfter",isAttr:!0,type:"Boolean",default:!1},{name:"exclusive",isAttr:!0,type:"Boolean",default:!0}]},{name:"JobPriorized",isAbstract:!0,extends:["bpmn:Process","camunda:AsyncCapable"],properties:[{name:"jobPriority",isAttr:!0,type:"String"}]},{name:"SignalEventDefinition",isAbstract:!0,extends:["bpmn:SignalEventDefinition"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1}]},{name:"ErrorEventDefinition",isAbstract:!0,extends:["bpmn:ErrorEventDefinition"],properties:[{name:"errorCodeVariable",isAttr:!0,type:"String"},{name:"errorMessageVariable",isAttr:!0,type:"String"}]},{name:"Error",isAbstract:!0,extends:["bpmn:Error"],properties:[{name:"camunda:errorMessage",isAttr:!0,type:"String"}]},{name:"PotentialStarter",superClass:["Element"],properties:[{name:"resourceAssignmentExpression",type:"bpmn:ResourceAssignmentExpression"}]},{name:"FormSupported",isAbstract:!0,extends:["bpmn:StartEvent","bpmn:UserTask"],properties:[{name:"formHandlerClass",isAttr:!0,type:"String"},{name:"formKey",isAttr:!0,type:"String"}]},{name:"TemplateSupported",isAbstract:!0,extends:["bpmn:Process","bpmn:FlowElement"],properties:[{name:"modelerTemplate",isAttr:!0,type:"String"},{name:"modelerTemplateVersion",isAttr:!0,type:"Integer"}]},{name:"Initiator",isAbstract:!0,extends:["bpmn:StartEvent"],properties:[{name:"initiator",isAttr:!0,type:"String"}]},{name:"ScriptTask",isAbstract:!0,extends:["bpmn:ScriptTask"],properties:[{name:"resultVariable",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"}]},{name:"Process",isAbstract:!0,extends:["bpmn:Process"],properties:[{name:"candidateStarterGroups",isAttr:!0,type:"String"},{name:"candidateStarterUsers",isAttr:!0,type:"String"},{name:"versionTag",isAttr:!0,type:"String"},{name:"historyTimeToLive",isAttr:!0,type:"String"},{name:"isStartableInTasklist",isAttr:!0,type:"Boolean",default:!0}]},{name:"EscalationEventDefinition",isAbstract:!0,extends:["bpmn:EscalationEventDefinition"],properties:[{name:"escalationCodeVariable",isAttr:!0,type:"String"}]},{name:"FormalExpression",isAbstract:!0,extends:["bpmn:FormalExpression"],properties:[{name:"resource",isAttr:!0,type:"String"}]},{name:"Assignable",extends:["bpmn:UserTask"],properties:[{name:"assignee",isAttr:!0,type:"String"},{name:"candidateUsers",isAttr:!0,type:"String"},{name:"candidateGroups",isAttr:!0,type:"String"},{name:"dueDate",isAttr:!0,type:"String"},{name:"followUpDate",isAttr:!0,type:"String"},{name:"priority",isAttr:!0,type:"String"}]},{name:"CallActivity",extends:["bpmn:CallActivity"],properties:[{name:"calledElementBinding",isAttr:!0,type:"String",default:"latest"},{name:"calledElementVersion",isAttr:!0,type:"String"},{name:"calledElementVersionTag",isAttr:!0,type:"String"},{name:"calledElementTenantId",isAttr:!0,type:"String"},{name:"caseRef",isAttr:!0,type:"String"},{name:"caseBinding",isAttr:!0,type:"String",default:"latest"},{name:"caseVersion",isAttr:!0,type:"String"},{name:"caseTenantId",isAttr:!0,type:"String"},{name:"variableMappingClass",isAttr:!0,type:"String"},{name:"variableMappingDelegateExpression",isAttr:!0,type:"String"}]},{name:"ServiceTaskLike",extends:["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"resultVariable",isAttr:!0,type:"String"}]},{name:"DmnCapable",extends:["bpmn:BusinessRuleTask"],properties:[{name:"decisionRef",isAttr:!0,type:"String"},{name:"decisionRefBinding",isAttr:!0,type:"String",default:"latest"},{name:"decisionRefVersion",isAttr:!0,type:"String"},{name:"mapDecisionResult",isAttr:!0,type:"String",default:"resultList"},{name:"decisionRefTenantId",isAttr:!0,type:"String"}]},{name:"ExternalCapable",extends:["camunda:ServiceTaskLike"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"topic",isAttr:!0,type:"String"}]},{name:"TaskPriorized",extends:["bpmn:Process","camunda:ExternalCapable"],properties:[{name:"taskPriority",isAttr:!0,type:"String"}]},{name:"Properties",superClass:["Element"],meta:{allowedIn:["*"]},properties:[{name:"values",type:"Property",isMany:!0}]},{name:"Property",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0}]},{name:"Connector",superClass:["Element"],meta:{allowedIn:["camunda:ServiceTaskLike"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"}]},{name:"InputOutput",superClass:["Element"],meta:{allowedIn:["bpmn:FlowNode","camunda:Connector"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"},{name:"inputParameters",isMany:!0,type:"InputParameter"},{name:"outputParameters",isMany:!0,type:"OutputParameter"}]},{name:"InputOutputParameter",properties:[{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"InputOutputParameterDefinition",isAbstract:!0},{name:"List",superClass:["InputOutputParameterDefinition"],properties:[{name:"items",isMany:!0,type:"InputOutputParameterDefinition"}]},{name:"Map",superClass:["InputOutputParameterDefinition"],properties:[{name:"entries",isMany:!0,type:"Entry"}]},{name:"Entry",properties:[{name:"key",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"Value",superClass:["InputOutputParameterDefinition"],properties:[{name:"id",isAttr:!0,type:"String"},{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Script",superClass:["InputOutputParameterDefinition"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Field",superClass:["Element"],meta:{allowedIn:["camunda:ServiceTaskLike","camunda:ExecutionListener","camunda:TaskListener"]},properties:[{name:"name",isAttr:!0,type:"String"},{name:"expression",type:"String"},{name:"stringValue",isAttr:!0,type:"String"},{name:"string",type:"String"}]},{name:"InputParameter",superClass:["InputOutputParameter"]},{name:"OutputParameter",superClass:["InputOutputParameter"]},{name:"Collectable",isAbstract:!0,extends:["bpmn:MultiInstanceLoopCharacteristics"],superClass:["camunda:AsyncCapable"],properties:[{name:"collection",isAttr:!0,type:"String"},{name:"elementVariable",isAttr:!0,type:"String"}]},{name:"FailedJobRetryTimeCycle",superClass:["Element"],meta:{allowedIn:["camunda:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},properties:[{name:"body",isBody:!0,type:"String"}]},{name:"ExecutionListener",superClass:["Element"],meta:{allowedIn:["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"TaskListener",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0},{name:"id",type:"String",isAttr:!0},{name:"eventDefinitions",type:"bpmn:TimerEventDefinition",isMany:!0}]},{name:"FormProperty",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"required",type:"String",isAttr:!0},{name:"readable",type:"String",isAttr:!0},{name:"writable",type:"String",isAttr:!0},{name:"variable",type:"String",isAttr:!0},{name:"expression",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"default",type:"String",isAttr:!0},{name:"values",type:"Value",isMany:!0}]},{name:"FormData",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"fields",type:"FormField",isMany:!0},{name:"businessKey",type:"String",isAttr:!0}]},{name:"FormField",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"label",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"defaultValue",type:"String",isAttr:!0},{name:"properties",type:"Properties"},{name:"validation",type:"Validation"},{name:"values",type:"Value",isMany:!0}]},{name:"Validation",superClass:["Element"],properties:[{name:"constraints",type:"Constraint",isMany:!0}]},{name:"Constraint",superClass:["Element"],properties:[{name:"name",type:"String",isAttr:!0},{name:"config",type:"String",isAttr:!0}]},{name:"ConditionalEventDefinition",isAbstract:!0,extends:["bpmn:ConditionalEventDefinition"],properties:[{name:"variableName",isAttr:!0,type:"String"},{name:"variableEvents",isAttr:!0,type:"String"}]}],emumerations:[]},BT={name:"Activiti",uri:"http://activiti.org/bpmn",prefix:"activiti",xml:{tagAlias:"lowerCase"},associations:[],types:[{name:"Definitions",isAbstract:!0,extends:["bpmn:Definitions"],properties:[{name:"diagramRelationId",isAttr:!0,type:"String"}]},{name:"InOutBinding",superClass:["Element"],isAbstract:!0,properties:[{name:"source",isAttr:!0,type:"String"},{name:"sourceExpression",isAttr:!0,type:"String"},{name:"target",isAttr:!0,type:"String"},{name:"businessKey",isAttr:!0,type:"String"},{name:"local",isAttr:!0,type:"Boolean",default:!1},{name:"variables",isAttr:!0,type:"String"}]},{name:"In",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"Out",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"AsyncCapable",isAbstract:!0,extends:["bpmn:Activity","bpmn:Gateway","bpmn:Event"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1},{name:"asyncBefore",isAttr:!0,type:"Boolean",default:!1},{name:"asyncAfter",isAttr:!0,type:"Boolean",default:!1},{name:"exclusive",isAttr:!0,type:"Boolean",default:!0}]},{name:"JobPriorized",isAbstract:!0,extends:["bpmn:Process","activiti:AsyncCapable"],properties:[{name:"jobPriority",isAttr:!0,type:"String"}]},{name:"SignalEventDefinition",isAbstract:!0,extends:["bpmn:SignalEventDefinition"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1}]},{name:"ErrorEventDefinition",isAbstract:!0,extends:["bpmn:ErrorEventDefinition"],properties:[{name:"errorCodeVariable",isAttr:!0,type:"String"},{name:"errorMessageVariable",isAttr:!0,type:"String"}]},{name:"Error",isAbstract:!0,extends:["bpmn:Error"],properties:[{name:"activiti:errorMessage",isAttr:!0,type:"String"}]},{name:"PotentialStarter",superClass:["Element"],properties:[{name:"resourceAssignmentExpression",type:"bpmn:ResourceAssignmentExpression"}]},{name:"FormSupported",isAbstract:!0,extends:["bpmn:StartEvent","bpmn:UserTask"],properties:[{name:"formHandlerClass",isAttr:!0,type:"String"},{name:"formKey",isAttr:!0,type:"String"}]},{name:"TemplateSupported",isAbstract:!0,extends:["bpmn:Process","bpmn:FlowElement"],properties:[{name:"modelerTemplate",isAttr:!0,type:"String"}]},{name:"Initiator",isAbstract:!0,extends:["bpmn:StartEvent"],properties:[{name:"initiator",isAttr:!0,type:"String"}]},{name:"ScriptTask",isAbstract:!0,extends:["bpmn:ScriptTask"],properties:[{name:"resultVariable",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"}]},{name:"Process",isAbstract:!0,extends:["bpmn:Process"],properties:[{name:"candidateStarterGroups",isAttr:!0,type:"String"},{name:"candidateStarterUsers",isAttr:!0,type:"String"},{name:"versionTag",isAttr:!0,type:"String"},{name:"historyTimeToLive",isAttr:!0,type:"String"},{name:"isStartableInTasklist",isAttr:!0,type:"Boolean",default:!0},{name:"executionListener",isAbstract:!0,type:"Expression"}]},{name:"EscalationEventDefinition",isAbstract:!0,extends:["bpmn:EscalationEventDefinition"],properties:[{name:"escalationCodeVariable",isAttr:!0,type:"String"}]},{name:"FormalExpression",isAbstract:!0,extends:["bpmn:FormalExpression"],properties:[{name:"resource",isAttr:!0,type:"String"}]},{name:"multiinstance_type",superClass:["Element"]},{name:"multiinstance_condition",superClass:["Element"]},{name:"Assignable",extends:["bpmn:UserTask"],properties:[{name:"assignee",isAttr:!0,type:"String"},{name:"candidateUsers",isAttr:!0,type:"String"},{name:"candidateGroups",isAttr:!0,type:"String"},{name:"dueDate",isAttr:!0,type:"String"},{name:"followUpDate",isAttr:!0,type:"String"},{name:"priority",isAttr:!0,type:"String"},{name:"multiinstance_condition",isAttr:!0,type:"String"}]},{name:"CallActivity",extends:["bpmn:CallActivity"],properties:[{name:"calledElementBinding",isAttr:!0,type:"String",default:"latest"},{name:"calledElementVersion",isAttr:!0,type:"String"},{name:"calledElementVersionTag",isAttr:!0,type:"String"},{name:"calledElementTenantId",isAttr:!0,type:"String"},{name:"caseRef",isAttr:!0,type:"String"},{name:"caseBinding",isAttr:!0,type:"String",default:"latest"},{name:"caseVersion",isAttr:!0,type:"String"},{name:"caseTenantId",isAttr:!0,type:"String"},{name:"variableMappingClass",isAttr:!0,type:"String"},{name:"variableMappingDelegateExpression",isAttr:!0,type:"String"}]},{name:"ServiceTaskLike",extends:["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"resultVariable",isAttr:!0,type:"String"}]},{name:"DmnCapable",extends:["bpmn:BusinessRuleTask"],properties:[{name:"decisionRef",isAttr:!0,type:"String"},{name:"decisionRefBinding",isAttr:!0,type:"String",default:"latest"},{name:"decisionRefVersion",isAttr:!0,type:"String"},{name:"mapDecisionResult",isAttr:!0,type:"String",default:"resultList"},{name:"decisionRefTenantId",isAttr:!0,type:"String"}]},{name:"ExternalCapable",extends:["activiti:ServiceTaskLike"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"topic",isAttr:!0,type:"String"}]},{name:"TaskPriorized",extends:["bpmn:Process","activiti:ExternalCapable"],properties:[{name:"taskPriority",isAttr:!0,type:"String"}]},{name:"Properties",superClass:["Element"],meta:{allowedIn:["*"]},properties:[{name:"values",type:"Property",isMany:!0}]},{name:"Property",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0}]},{name:"Connector",superClass:["Element"],meta:{allowedIn:["activiti:ServiceTaskLike"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"}]},{name:"InputOutput",superClass:["Element"],meta:{allowedIn:["bpmn:FlowNode","activiti:Connector"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"},{name:"inputParameters",isMany:!0,type:"InputParameter"},{name:"outputParameters",isMany:!0,type:"OutputParameter"}]},{name:"InputOutputParameter",properties:[{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"InputOutputParameterDefinition",isAbstract:!0},{name:"List",superClass:["InputOutputParameterDefinition"],properties:[{name:"items",isMany:!0,type:"InputOutputParameterDefinition"}]},{name:"Map",superClass:["InputOutputParameterDefinition"],properties:[{name:"entries",isMany:!0,type:"Entry"}]},{name:"Entry",properties:[{name:"key",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"Value",superClass:["InputOutputParameterDefinition"],properties:[{name:"id",isAttr:!0,type:"String"},{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Script",superClass:["InputOutputParameterDefinition"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Field",superClass:["Element"],meta:{allowedIn:["activiti:ServiceTaskLike","activiti:ExecutionListener","activiti:TaskListener"]},properties:[{name:"name",isAttr:!0,type:"String"},{name:"expression",type:"String"},{name:"stringValue",isAttr:!0,type:"String"},{name:"string",type:"String"}]},{name:"InputParameter",superClass:["InputOutputParameter"]},{name:"OutputParameter",superClass:["InputOutputParameter"]},{name:"Collectable",isAbstract:!0,extends:["bpmn:MultiInstanceLoopCharacteristics"],superClass:["activiti:AsyncCapable"],properties:[{name:"collection",isAttr:!0,type:"String"},{name:"elementVariable",isAttr:!0,type:"String"}]},{name:"FailedJobRetryTimeCycle",superClass:["Element"],meta:{allowedIn:["activiti:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},properties:[{name:"body",isBody:!0,type:"String"}]},{name:"ExecutionListener",superClass:["Element"],meta:{allowedIn:["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"TaskListener",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"FormProperty",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"required",type:"String",isAttr:!0},{name:"readable",type:"String",isAttr:!0},{name:"writable",type:"String",isAttr:!0},{name:"variable",type:"String",isAttr:!0},{name:"expression",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"default",type:"String",isAttr:!0},{name:"values",type:"Value",isMany:!0}]},{name:"FormProperty",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"label",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"defaultValue",type:"String",isAttr:!0},{name:"properties",type:"Properties"},{name:"validation",type:"Validation"},{name:"values",type:"Value",isMany:!0}]},{name:"Validation",superClass:["Element"],properties:[{name:"constraints",type:"Constraint",isMany:!0}]},{name:"Constraint",superClass:["Element"],properties:[{name:"name",type:"String",isAttr:!0},{name:"config",type:"String",isAttr:!0}]},{name:"ConditionalEventDefinition",isAbstract:!0,extends:["bpmn:ConditionalEventDefinition"],properties:[{name:"variableName",isAttr:!0,type:"String"},{name:"variableEvent",isAttr:!0,type:"String"}]}],emumerations:[]},OT={name:"Flowable",uri:"http://flowable.org/bpmn",prefix:"flowable",xml:{tagAlias:"lowerCase"},associations:[],types:[{name:"InOutBinding",superClass:["Element"],isAbstract:!0,properties:[{name:"source",isAttr:!0,type:"String"},{name:"sourceExpression",isAttr:!0,type:"String"},{name:"target",isAttr:!0,type:"String"},{name:"businessKey",isAttr:!0,type:"String"},{name:"local",isAttr:!0,type:"Boolean",default:!1},{name:"variables",isAttr:!0,type:"String"}]},{name:"In",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"Out",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"AsyncCapable",isAbstract:!0,extends:["bpmn:Activity","bpmn:Gateway","bpmn:Event"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1},{name:"asyncBefore",isAttr:!0,type:"Boolean",default:!1},{name:"asyncAfter",isAttr:!0,type:"Boolean",default:!1},{name:"exclusive",isAttr:!0,type:"Boolean",default:!0}]},{name:"JobPriorized",isAbstract:!0,extends:["bpmn:Process","flowable:AsyncCapable"],properties:[{name:"jobPriority",isAttr:!0,type:"String"}]},{name:"SignalEventDefinition",isAbstract:!0,extends:["bpmn:SignalEventDefinition"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1}]},{name:"ErrorEventDefinition",isAbstract:!0,extends:["bpmn:ErrorEventDefinition"],properties:[{name:"errorCodeVariable",isAttr:!0,type:"String"},{name:"errorMessageVariable",isAttr:!0,type:"String"}]},{name:"Error",isAbstract:!0,extends:["bpmn:Error"],properties:[{name:"flowable:errorMessage",isAttr:!0,type:"String"}]},{name:"PotentialStarter",superClass:["Element"],properties:[{name:"resourceAssignmentExpression",type:"bpmn:ResourceAssignmentExpression"}]},{name:"FormSupported",isAbstract:!0,extends:["bpmn:StartEvent","bpmn:UserTask"],properties:[{name:"formHandlerClass",isAttr:!0,type:"String"},{name:"formKey",isAttr:!0,type:"String"},{name:"formType",isAttr:!0,type:"String"},{name:"formReadOnly",isAttr:!0,type:"Boolean",default:!1},{name:"formInit",isAttr:!0,type:"Boolean",default:!0}]},{name:"TemplateSupported",isAbstract:!0,extends:["bpmn:Process","bpmn:FlowElement"],properties:[{name:"modelerTemplate",isAttr:!0,type:"String"}]},{name:"Initiator",isAbstract:!0,extends:["bpmn:StartEvent"],properties:[{name:"initiator",isAttr:!0,type:"String"}]},{name:"ScriptTask",isAbstract:!0,extends:["bpmn:ScriptTask"],properties:[{name:"resultVariable",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"}]},{name:"Process",isAbstract:!0,extends:["bpmn:Process"],properties:[{name:"candidateStarterGroups",isAttr:!0,type:"String"},{name:"candidateStarterUsers",isAttr:!0,type:"String"},{name:"versionTag",isAttr:!0,type:"String"},{name:"historyTimeToLive",isAttr:!0,type:"String"},{name:"isStartableInTasklist",isAttr:!0,type:"Boolean",default:!0}]},{name:"EscalationEventDefinition",isAbstract:!0,extends:["bpmn:EscalationEventDefinition"],properties:[{name:"escalationCodeVariable",isAttr:!0,type:"String"}]},{name:"FormalExpression",isAbstract:!0,extends:["bpmn:FormalExpression"],properties:[{name:"resource",isAttr:!0,type:"String"}]},{name:"Assignable",extends:["bpmn:UserTask"],properties:[{name:"assignee",isAttr:!0,type:"String"},{name:"candidateUsers",isAttr:!0,type:"String"},{name:"candidateGroups",isAttr:!0,type:"String"},{name:"dueDate",isAttr:!0,type:"String"},{name:"followUpDate",isAttr:!0,type:"String"},{name:"priority",isAttr:!0,type:"String"}]},{name:"Assignee",supperClass:"Element",meta:{allowedIn:["*"]},properties:[{name:"label",type:"String",isAttr:!0},{name:"viewId",type:"Number",isAttr:!0}]},{name:"CallActivity",extends:["bpmn:CallActivity"],properties:[{name:"calledElementBinding",isAttr:!0,type:"String",default:"latest"},{name:"calledElementVersion",isAttr:!0,type:"String"},{name:"calledElementVersionTag",isAttr:!0,type:"String"},{name:"calledElementTenantId",isAttr:!0,type:"String"},{name:"caseRef",isAttr:!0,type:"String"},{name:"caseBinding",isAttr:!0,type:"String",default:"latest"},{name:"caseVersion",isAttr:!0,type:"String"},{name:"caseTenantId",isAttr:!0,type:"String"},{name:"variableMappingClass",isAttr:!0,type:"String"},{name:"variableMappingDelegateExpression",isAttr:!0,type:"String"}]},{name:"ServiceTaskLike",extends:["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"resultVariable",isAttr:!0,type:"String"}]},{name:"DmnCapable",extends:["bpmn:BusinessRuleTask"],properties:[{name:"decisionRef",isAttr:!0,type:"String"},{name:"decisionRefBinding",isAttr:!0,type:"String",default:"latest"},{name:"decisionRefVersion",isAttr:!0,type:"String"},{name:"mapDecisionResult",isAttr:!0,type:"String",default:"resultList"},{name:"decisionRefTenantId",isAttr:!0,type:"String"}]},{name:"ExternalCapable",extends:["flowable:ServiceTaskLike"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"topic",isAttr:!0,type:"String"}]},{name:"TaskPriorized",extends:["bpmn:Process","flowable:ExternalCapable"],properties:[{name:"taskPriority",isAttr:!0,type:"String"}]},{name:"Properties",superClass:["Element"],meta:{allowedIn:["*"]},properties:[{name:"values",type:"Property",isMany:!0}]},{name:"Property",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0}]},{name:"Button",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"code",type:"String",isAttr:!0},{name:"isHide",type:"String",isAttr:!0},{name:"next",type:"String",isAttr:!0},{name:"sort",type:"Integer",isAttr:!0}]},{name:"Assignee",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0},{name:"condition",type:"String",isAttr:!0},{name:"operationType",type:"String",isAttr:!0},{name:"sort",type:"Integer",isAttr:!0}]},{name:"Connector",superClass:["Element"],meta:{allowedIn:["flowable:ServiceTaskLike"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"}]},{name:"InputOutput",superClass:["Element"],meta:{allowedIn:["bpmn:FlowNode","flowable:Connector"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"},{name:"inputParameters",isMany:!0,type:"InputParameter"},{name:"outputParameters",isMany:!0,type:"OutputParameter"}]},{name:"InputOutputParameter",properties:[{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"InputOutputParameterDefinition",isAbstract:!0},{name:"List",superClass:["InputOutputParameterDefinition"],properties:[{name:"items",isMany:!0,type:"InputOutputParameterDefinition"}]},{name:"Map",superClass:["InputOutputParameterDefinition"],properties:[{name:"entries",isMany:!0,type:"Entry"}]},{name:"Entry",properties:[{name:"key",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"Value",superClass:["InputOutputParameterDefinition"],properties:[{name:"id",isAttr:!0,type:"String"},{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Script",superClass:["InputOutputParameterDefinition"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Field",superClass:["Element"],meta:{allowedIn:["flowable:ServiceTaskLike","flowable:ExecutionListener","flowable:TaskListener"]},properties:[{name:"name",isAttr:!0,type:"String"},{name:"expression",type:"String"},{name:"stringValue",isAttr:!0,type:"String"},{name:"string",type:"String"}]},{name:"ChildField",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"required",type:"String",isAttr:!0},{name:"readable",type:"String",isAttr:!0},{name:"writable",type:"String",isAttr:!0},{name:"variable",type:"String",isAttr:!0},{name:"expression",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"default",type:"String",isAttr:!0},{name:"values",type:"Value",isMany:!0}]},{name:"InputParameter",superClass:["InputOutputParameter"]},{name:"OutputParameter",superClass:["InputOutputParameter"]},{name:"Collectable",isAbstract:!0,extends:["bpmn:MultiInstanceLoopCharacteristics"],superClass:["flowable:AsyncCapable"],properties:[{name:"collection",isAttr:!0,type:"String"},{name:"elementVariable",isAttr:!0,type:"String"}]},{name:"FailedJobRetryTimeCycle",superClass:["Element"],meta:{allowedIn:["flowable:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},properties:[{name:"body",isBody:!0,type:"String"}]},{name:"ExecutionListener",superClass:["Element"],meta:{allowedIn:["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"TaskListener",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"FormProperty",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"required",type:"String",isAttr:!0},{name:"readable",type:"String",isAttr:!0},{name:"writable",type:"String",isAttr:!0},{name:"variable",type:"String",isAttr:!0},{name:"expression",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"default",type:"String",isAttr:!0},{name:"values",type:"Value",isMany:!0},{name:"children",type:"ChildField",isMany:!0},{name:"extensionElements",type:"bpmn:ExtensionElements",isMany:!0}]},{name:"FormData",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"fields",type:"FormField",isMany:!0},{name:"businessKey",type:"String",isAttr:!0}]},{name:"FormField",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"label",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"defaultValue",type:"String",isAttr:!0},{name:"properties",type:"Properties"},{name:"validation",type:"Validation"},{name:"values",type:"Value",isMany:!0}]},{name:"Validation",superClass:["Element"],properties:[{name:"constraints",type:"Constraint",isMany:!0}]},{name:"Constraint",superClass:["Element"],properties:[{name:"name",type:"String",isAttr:!0},{name:"config",type:"String",isAttr:!0}]},{name:"ConditionalEventDefinition",isAbstract:!0,extends:["bpmn:ConditionalEventDefinition"],properties:[{name:"variableName",isAttr:!0,type:"String"},{name:"variableEvent",isAttr:!0,type:"String"}]},{name:"Condition",superClass:["Element"],meta:{allowedIn:["bpmn:SequenceFlow"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"field",type:"String",isAttr:!0},{name:"compare",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0},{name:"logic",type:"String",isAttr:!0},{name:"sort",type:"Integer",isAttr:!0}]}],emumerations:[]},yh=Object.prototype.toString,LT=Object.prototype.hasOwnProperty;Wh=function(t){return yh.call(t)==="[object Array]"};function Ab(t){const e=yh.call(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"||e==="[object Proxy]"}function jT(t,e){return LT.call(t,e)}function VT(t,e){const n=function(r){return Ab(r)?r:o=>o===r}(e);let i;return Kh(t,function(r,o){if(n(r,o))return i=r,!1}),i}Kh=function(t,e){let n,i;if(t===void 0)return;const r=Wh(t)?$T:FT;for(let o in t)if(jT(t,o)&&(n=t[o],i=e(n,r(o)),i===!1))return n};function Qr(t,e){return!!VT(t,e)}function FT(t){return t}function $T(t){return Number(t)}z0=function(t,...e){return Object.assign(t,...e)};const zT="*";function to(t){const e=this;t.on("moddleCopy.canCopyProperty",function(n){const i=n.property,r=n.parent;return e.canCopyProperty(i,r)})}function eo(t,e){return t&&Ab(t.$instanceOf)&&t.$instanceOf(e)}function kb(t,e){return Qr(e,function(n){return eo(t,n)})}function gn(t,e){return e?eo(t,e)?t:t.$parent?gn(t.$parent,e):void 0:t.$parent}to.$inject=["eventBus"],to.prototype.canCopyProperty=function(t,e){return n=t,!(yh.call(n)==="[object Object]"&&!function(i,r){const o=i.$type&&i.$model.getTypeDescriptor(i.$type),a=o&&o.meta&&o.meta.allowedIn;return!a||function(c){return c.indexOf(zT)!==-1}(a)?!0:Qr(a,function(c){return gn(r,c)})}(t,e))&&!(eo(t,"camunda:InputOutput")&&!this.canHostInputOutput(e))&&!(kb(t,["camunda:Connector","camunda:Field"])&&!this.canHostConnector(e))&&!(eo(t,"camunda:In")&&!this.canHostIn(e))&&void 0;var n},to.prototype.canHostInputOutput=function(t){if(gn(t,"camunda:Connector"))return!0;const e=gn(t,"bpmn:FlowNode");return!!e&&!kb(e,["bpmn:StartEvent","bpmn:Gateway","bpmn:BoundaryEvent"])&&!(eo(e,"bpmn:SubProcess")&&e.get("triggeredByEvent"))},to.prototype.canHostConnector=function(t){return!eo(gn(t,"camunda:ServiceTaskLike"),"bpmn:MessageEventDefinition")||gn(t,"bpmn:IntermediateThrowEvent")||gn(t,"bpmn:EndEvent")},to.prototype.canHostIn=function(t){return gn(t,"bpmn:CallActivity")?!0:!gn(t,"bpmn:SignalEventDefinition")||gn(t,"bpmn:IntermediateThrowEvent")||gn(t,"bpmn:EndEvent")};const GT={__init__:["camundaModdleExtension"],camundaModdleExtension:["type",to]},UT={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function gh(t,e){return t&&typeof t.$instanceOf=="function"&&t.$instanceOf(e)}function bh(t,e){return(n=t)&&n.length&&Qr(t,function(i){return gh(i,e)});var n}function xh(t,e,n){const i=e.name,r=UT[i.replace(/activiti:/,"")];return i===t&&function(o,a){return Qr(a,function(c){return gh(o,c)})}(n,r)}function Eh(t){t.on("property.clone",function(e){const n=e.newElement,i=e.propertyDescriptor;this.canCloneProperty(n,i)},this)}Eh.$inject=["eventBus"],Eh.prototype.canCloneProperty=function(t,e){return xh("activiti:FailedJobRetryTimeCycle",e,t)?bh(t.eventDefinitions,"bpmn:TimerEventDefinition")||bh(t.eventDefinitions,"bpmn:SignalEventDefinition")||gh(t.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics"):xh("activiti:Connector",e,t)||xh("activiti:Field",e,t)?bh(t.eventDefinitions,"bpmn:MessageEventDefinition"):void 0};const HT={__init__:["ActivitiModdleExtension"],ActivitiModdleExtension:["type",Eh]},qT={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function _h(t,e){return t&&typeof t.$instanceOf=="function"&&t.$instanceOf(e)}function wh(t,e){return(n=t)&&n.length&&Qr(t,function(i){return _h(i,e)});var n}function Sh(t,e,n){const i=e.name,r=qT[i.replace(/flowable:/,"")];return i===t&&function(o,a){return Qr(a,function(c){return _h(o,c)})}(n,r)}function Ch(t){t.on("property.clone",function(e){const n=e.newElement,i=e.propertyDescriptor;this.canCloneProperty(n,i)},this)}Ch.$inject=["eventBus"],Ch.prototype.canCloneProperty=function(t,e){return Sh("flowable:FailedJobRetryTimeCycle",e,t)?wh(t.eventDefinitions,"bpmn:TimerEventDefinition")||wh(t.eventDefinitions,"bpmn:SignalEventDefinition")||_h(t.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics"):Sh("flowable:Connector",e,t)||Sh("flowable:Field",e,t)?wh(t.eventDefinitions,"bpmn:MessageEventDefinition"):void 0};const WT={__init__:["FlowableModdleExtension"],FlowableModdleExtension:["type",Ch]};var Tt,Ni,KT=Object.defineProperty,Yc=Object.getOwnPropertySymbols,Pb=Object.prototype.hasOwnProperty,Mb=Object.prototype.propertyIsEnumerable,Th=(t,e,n)=>e in t?KT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rb=(t,e)=>{for(var n in e||(e={}))Pb.call(e,n)&&Th(t,n,e[n]);if(Yc)for(var n of Yc(e))Mb.call(e,n)&&Th(t,n,e[n]);return t},Ii=(t,e,n)=>(Th(t,typeof e!="symbol"?e+"":e,n),n);function bn(t){return t==null}function Ah(t){return typeof t=="string"}(Ni=Tt||(Tt={})).Root="Root",Ni.Declaration="Declaration",Ni.Comment="Comment",Ni.DocumentType="DocumentType",Ni.Element="Element",Ni.Text="Text",Ni.Instruction="Instruction",Ni.CDATA="CDATA";var sn=class{constructor(t,e=null,n=null){Ii(this,"name"),Ii(this,"type"),Ii(this,"parent"),Ii(this,"children"),Ii(this,"attributes"),Ii(this,"value"),Ii(this,"selfClosing"),Ii(this,"prefix"),this.name="",this.type=t,this.parent=e,this.value=n,this.children=null,this.attributes={},this.selfClosing=!1,this.prefix=""}setName(t){return this.name=t,this}setType(t){return this.type=t,this}setParent(t){return this.parent=t,this}setChildren(t){return this.children=t&&Array.from(t),this}setAttributes(t){return this.attributes=Rb({},t),this}setValue(t){return this.value=t,this}setSelfClosing(t){return this.selfClosing=t,this}setPrefix(t){return this.prefix=t,this}addAttribute(t,e){return this.attributes[t]=e,this}removeAttribute(t){return delete this.attributes[t],this}addChild(t){return t===this||(this.children||(this.children=[]),this.children.push(t),t.parent!==this&&(t.parent=this)),this}removeChild(t){if(this.children&&this.children.length){const e=this.children.findIndex(n=>n===t);~e&&(this.children.splice(e,1),t.parent=null)}return this}toJsObject(){return{name:this.name||void 0,prefix:this.prefix||void 0,type:this.type,attributes:Object.keys(this.attributes).length?this.attributes:void 0,value:bn(this.value)?void 0:this.value,selfClosing:this.selfClosing||void 0,children:(this.type===Tt.Element||this.type===Tt.Root)&&this.children&&this.children.length?this.children.map(t=>t.toJSON()):void 0}}toXmlString(t="  ",e=`
`,n=0){const i=t.repeat(n);let r="";switch(this.type){case Tt.Root:r+=this.children&&this.children.length?this.children.map(o=>o.toXmlString(t,e,n)).join(e):"";break;case Tt.Element:{if(!this.name)return"";const o=this.prefix?`${this.prefix}:${this.name}`:this.name;r+=`${i}<${o}`;const a=Nb(this.attributes||{});a&&(r+=` ${a}`),this.children&&this.children.length?r+=`>${e}${this.children.map(c=>c.toXmlString(t,e,n+1)).join(e)}${e}${i}</${o}>`:r+=this.selfClosing?" />":`></${o}>`;break}case Tt.CDATA:r+=`${i}<![CDATA[${bn(this.value)?"":this.value}]]>`;break;case Tt.Text:r+=bn(this.value)?"":`${i}${this.value}`;break;case Tt.DocumentType:r+=bn(this.value)?"":`${i}<!DOCTYPE ${this.value}>`;break;case Tt.Comment:r+=`${i}<!-- ${bn(this.value)?"":this.value+" "}-->`;break;case Tt.Declaration:if(r+=`${i}<?xml `,!this.attributes||bn(this.attributes.version))r+='version="1.0" ';else{const o=parseFloat(this.attributes.version);r+=`version="${Number.isNaN(o)?"1.0":o.toFixed(1)}" `}if(this.attributes){const o=((a,c)=>{var l={};for(var u in a)Pb.call(a,u)&&c.indexOf(u)<0&&(l[u]=a[u]);if(a!=null&&Yc)for(var u of Yc(a))c.indexOf(u)<0&&Mb.call(a,u)&&(l[u]=a[u]);return l})(this.attributes,["version"]);o&&(r+=Nb(o))}r+="?>";break;case Tt.Instruction:r+=bn(this.value)?"":`${i}<?${this.value}?>`}return r}toJSON(){return this.toJsObject()}toString(){return this.toXmlString("","")}};function Nb(t){return Object.keys(t).map(e=>{const n=t[e];return bn(n)?null:function(i){return typeof i=="boolean"}(n)?n?e:null:`${e}="${n}"`}).filter(Boolean).join(" ")}var Ib=t=>t,Db={ignoreAttributes:!1,parseNodeValue:!0,trimValues:!0,prefixInName:!1,valueProcessor:Ib,attributeProcessor:Ib},XT=Object.keys(Db),lr="Tag is not closed.";function YT(t,e={}){const n=t.replace(/\r\n?/g,`
`),i=function(l={}){const u=Rb({},l);return XT.forEach(p=>{bn(u[p])&&(u[p]=Db[p])}),u}(e),r=n.length,o=new sn(Tt.Root);let a=o,c="";for(let l=0;l<r;l++){const u=n[l];if(u!=="<")c+=u;else if(n[l+1]==="/"){const p=no(n,">",l,`Element End ${lr}`);let d=n.substring(l+2,p),v="";if(!i.prefixInName){const f=d.indexOf(":");~f&&(v=d.substring(0,f),d=d.substring(f+1))}if(a.prefix!==v||a.name!==d)throw new Error("End Tag is incorrect.");if(c){const f=kh(ur("",Tt.Text,c,i));f&&a.addChild(new sn(Tt.Text,a,f))}a=a.parent,c="",l=p}else if(n[l+1]==="?"){const p=no(n,"?>",l,`Processing Instruction ${lr}`),d=n.substring(l+2,p-1);if(a)if(d.startsWith("xml ")&&d.includes("version=")&&a.type===Tt.Root){const v=new sn(Tt.Declaration,a);v.attributes=Ph(d.substr(4),Tt.Declaration,i),a.addChild(v)}else a.addChild(new sn(Tt.Instruction,a,ur("",Tt.Instruction,d,i)));l=p}else if(n.substr(l+1,3)==="!--"){const p=no(n,"-->",l,`Comment ${lr}`),d=n.substring(l+4,p-2);a&&a.addChild(new sn(Tt.Comment,a,ur("",Tt.Comment,d,i))),l=p}else if(n.substr(l+1,8)==="!DOCTYPE"){let p=no(n,">",l,`Document Type ${lr}`),d=n.substring(l+9,p);d.includes("[")&&(p=no(n,"]>",l,`Document Type ${lr}`),d=n.substring(l+9,p)),a&&a.addChild(new sn(Tt.DocumentType,a,ur("",Tt.DocumentType,d,i))),l=p}else if(n.substr(l+1,8)==="![CDATA["){const p=no(n,"]]>",l,`CDATA Section ${lr}`),d=n.substring(l+9,p-2);if(a&&c){const v=kh(ur("",Tt.Text,c,i));v&&a.addChild(new sn(Tt.Text,a,v))}a.addChild(new sn(Tt.CDATA,a,ur("",Tt.CDATA,d,i))),c="",l=p}else{let p="",d="",v=l+1;for(;v<=r;){let g=n[v];if(p)g===p&&(p="");else if(g==='"'||g==="'")p=g;else if(g==="	")g=" ";else if(g===">")break;d+=g,v++}if(v>r)throw new Error(`Element ${lr}`);d=d.trim();const f=d.indexOf(" ");let y=d,b="";if(~f?(y=d.substr(0,f),d=d.substr(f+1)):d="",!i.prefixInName){const g=y.indexOf(":");~g&&(b=y.substring(0,g),y=y.substring(g+1))}if(a&&c){const g=kh(ur("",Tt.Text,c,i));g&&a.addChild(new sn(Tt.Text,a,g))}if(d.length&&d.lastIndexOf("/")===d.length-1){y[y.length-1]==="/"?(y=y.substr(0,y.length-1),d=""):d=d.substr(0,d.length-1);const g=new sn(Tt.Element,a);g.name=y,g.selfClosing=!0,g.prefix=b,d&&!i.ignoreAttributes&&(g.attributes=Ph(d,Tt.Element,i)),a.addChild(g)}else{const g=new sn(Tt.Element,a);d&&!i.ignoreAttributes&&(g.attributes=Ph(d,Tt.Element,i)),g.name=y,g.prefix=b,a.addChild(g),a=g}c="",l=v}}return o}function no(t,e,n,i){const r=t.indexOf(e,n);if(!~r)throw new Error(i);return r+e.length-1}function ur(t,e,n,i){return n?(i.trimValues&&(n=n.trim()),Bb(i.valueProcessor(n,e,t),i.parseNodeValue)):null}function Bb(t,e){return e&&Ah(t)?(t=t.trim())==="true"||t!=="false"&&function(n){const i=parseFloat(n);return Number.isNaN(i)?n:i}(t):bn(t)?null:t}function kh(t){return bn(t)?"":Ah(t)?t:String(t)}var JT=/[^\s=]+\s*(=\s*['"][\s\S]*?['"])?/g;function Ph(t,e,n){const i=(t=t.replace(/\r?\n/g," ")).match(JT)||[],r={};for(let o=0;o<i.length;o++){const a=i[o];let[c,l]=a.split("=");c=c.trim(),Ah(l)?(l=l.substring(1,l.length-1),n.trimValues&&(l=l.trim()),r[c]=Bb(n.attributeProcessor(l,c,e),n.parseNodeValue)):r[c]=!0}return r}let Ob,Lb,jb,Vb,Fb,$b,zb,Gb;Ob={class:"my-process-designer"},Lb={class:"my-process-designer__header",style:{display:"table-row-group","z-index":"999"}},jb={style:{color:"#409eff"}},Vb=It("br",null,null,-1),Fb=It("br",null,null,-1),$b=It("br",null,null,-1),zb={class:"my-process-designer__container"},Gb={class:"hljs"},Oa=pe({name:"MyProcessDesigner",__name:"ProcessDesigner",props:{value:String,processId:String,processName:String,formId:Number,translations:{type:Object,default:()=>{}},additionalModel:[Object,Array],moddleExtension:{type:Object,default:()=>{}},onlyCustomizeAddi:{type:Boolean,default:!1},onlyCustomizeModdle:{type:Boolean,default:!1},simulation:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},prefix:{type:String,default:"camunda"},events:{type:Array,default:()=>["element.click"]},headerButtonSize:{type:String,default:"small",validator:t=>["default","medium","small","mini"].indexOf(t)!==-1},headerButtonType:{type:String,default:"primary",validator:t=>["default","primary","success","warning","danger","info"].indexOf(t)!==-1}},emits:["destroy","init-finished","save","commandStack-changed","input","change","canvas-viewbox-changed","element-click"],setup(t,{emit:e}){const n=t,i=W(),r=W();Ra("configGlobal",n);let o=null;const a=W(1),c=W(!1),l=W(!1),u=W(""),p=W("xml"),d=W(!1),v=W(!1),f=cn(()=>{const E=[];if(n.onlyCustomizeAddi)return Object.prototype.toString.call(n.additionalModel)=="[object Array]"?n.additionalModel||[]:[n.additionalModel];Object.prototype.toString.call(n.additionalModel)=="[object Array]"?E.push(...n.additionalModel):n.additionalModel&&E.push(n.additionalModel);const T={translate:["value",(R=n.translations||n1,function(D,z){return z=z||{},(D=R[D]||D).replace(/{([^}]+)}/g,function(P,_){let B=z[_];return R[z[_]]!==null&&R[z[_]]!==void 0&&(B=R[z[_]]),B||"{"+_+"}"})})]};var R;return E.push(T),n.simulation&&E.push(IT),n.prefix==="camunda"&&E.push(GT),n.prefix==="flowable"&&E.push(WT),n.prefix==="activiti"&&E.push(HT),E}),y=cn(()=>{const E={};if(n.onlyCustomizeModdle)return n.moddleExtension||null;if(n.moddleExtension)for(let T in n.moddleExtension)E[T]=n.moddleExtension[T];return n.prefix==="activiti"&&(E.activiti=BT),n.prefix==="flowable"&&(E.flowable=OT),n.prefix==="camunda"&&(E.camunda=DT),E}),b=()=>{const E=o.get("eventBus");n.events.forEach(T=>{E.on(T,function(R){T.replace(/\./g,"-");let D=R?R.element:null;e("element-click",D,R)})}),E.on("commandStack.changed",async T=>{try{d.value=o.get("commandStack").canRedo(),v.value=o.get("commandStack").canUndo();let{xml:R}=await o.saveXML({format:!0});e("commandStack-changed",T),e("input",R),e("change",R)}catch{}}),o.on("canvas.viewbox.changed",({viewbox:T})=>{e("canvas-viewbox-changed",{viewbox:T});const{scale:R}=T;a.value=Math.floor(100*R)/100})},g=async E=>{let T=n.processId||`Process_${new Date().getTime()}`,R=n.processName||`\u4E1A\u52A1\u6D41\u7A0B_${new Date().getTime()}`,D=E||Ug(T,R,n.prefix);try{let{warnings:z}=await o.importXML(D);z&&z.length&&z.forEach(P=>{})}catch{}},w=async E=>{try{if(E==="xml"||E==="bpmn"){const{err:R,xml:D}=await o.saveXML();let{href:z,filename:P}=x(E.toUpperCase(),D);T(z,P)}else{const{err:R,svg:D}=await o.saveSVG();if(R)return;let{href:z,filename:P}=x("SVG",D);T(z,P)}}catch{}function T(R,D){if(R&&D){let z=document.createElement("a");z.download=D,z.href=R,z.click(),URL.revokeObjectURL(z.href)}}},x=(E,T)=>({filename:`diagram.${E}`,href:`data:application/${E==="svg"?"text/xml":"bpmn20-xml"};charset=UTF-8,${encodeURIComponent(T)}`,data:T}),S=()=>{const E=r.value.files[0],T=new FileReader;T.readAsText(E),T.onload=function(){let R=this.result;g(R)}},C=()=>{l.value=!l.value,n.simulation&&o.get("toggleMode","strict").toggleMode()},I=E=>{const T=o.get("alignElements"),R=o.get("selection").get();!R||R.length<=1?YA.warning("\u8BF7\u6309\u4F4F Shift \u952E\u9009\u62E9\u591A\u4E2A\u5143\u7D20\u5BF9\u9F50"):co.confirm("\u81EA\u52A8\u5BF9\u9F50\u53EF\u80FD\u9020\u6210\u56FE\u5F62\u53D8\u5F62\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F","\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{T.trigger(R,E)})},s=()=>{o.saveXML({format:!0}).then(({xml:E})=>{u.value=E,p.value="xml",c.value=!0})},h=()=>{o.saveXML({format:!0}).then(({xml:E})=>{var R;const T=new sn(Tt.Root,YT(E));u.value=(R=T.parent)==null?void 0:R.toJSON(),p.value="json",c.value=!0})},m=async()=>{const{err:E,xml:T}=await o.saveXML();E?alert("\u4FDD\u5B58\u6A21\u578B\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"):e("save",T)};return KA(()=>{}),Ia(()=>{(()=>{if(o)return;let E=document.getElementById("bpmnCanvas");o=new Ln({container:E,keyboard:n.keyboard?{bindTo:document}:null,additionalModules:f.value,moddleExtensions:y.value}),e("init-finished",o),b()})(),g(n.value)}),jn(()=>{o&&o.destroy(),e("destroy",o),o=null}),(E,T)=>{const R=mo,D=ok,z=JA,P=ZA,_=lo,B=OA,V=XA("highlight");return nt(),Nt("div",Ob,[It("div",Lb,[sl(E.$slots,"control-header"),E.$slots["control-header"]?kt("",!0):(nt(),Nt(ln,{key:0},[M(P,{key:"file-control"},{default:j(()=>[M(R,{preIcon:"ep:folder-opened",title:"\u6253\u5F00\u6587\u4EF6",onClick:T[0]||(T[0]=G=>N(r).click())}),M(z,{effect:"light",placement:"bottom"},{content:j(()=>[It("div",jb,[M(D,{title:"\u4E0B\u8F7D\u4E3AXML\u6587\u4EF6",onClick:T[1]||(T[1]=G=>{w("xml")})}),Vb,M(D,{title:"\u4E0B\u8F7D\u4E3ASVG\u6587\u4EF6",onClick:T[2]||(T[2]=G=>{w("svg")})}),Fb,M(D,{title:"\u4E0B\u8F7D\u4E3ABPMN\u6587\u4EF6",onClick:T[3]||(T[3]=G=>{w("bpmn")})})])]),default:j(()=>[M(R,{title:"\u4E0B\u8F7D\u6587\u4EF6",preIcon:"ep:download"})]),_:1}),M(z,{effect:"light"},{content:j(()=>[M(D,{title:"\u9884\u89C8XML",onClick:s}),$b,M(D,{title:"\u9884\u89C8JSON",onClick:h})]),default:j(()=>[M(R,{preIcon:"ep:view",title:"\u6D4F\u89C8"})]),_:1}),n.simulation?(nt(),Ct(z,{key:0,effect:"light",content:N(l)?"\u9000\u51FA\u6A21\u62DF":"\u5F00\u542F\u6A21\u62DF"},{default:j(()=>[M(R,{preIcon:"ep:cpu",title:"\u6A21\u62DF",onClick:C})]),_:1},8,["content"])):kt("",!0)]),_:1}),M(P,{key:"align-control"},{default:j(()=>[M(z,{effect:"light",content:"\u5411\u5DE6\u5BF9\u9F50"},{default:j(()=>[M(R,{preIcon:"fa:align-left",class:"align align-bottom",onClick:T[4]||(T[4]=G=>I("left"))})]),_:1}),M(z,{effect:"light",content:"\u5411\u53F3\u5BF9\u9F50"},{default:j(()=>[M(R,{preIcon:"fa:align-left",class:"align align-top",onClick:T[5]||(T[5]=G=>I("right"))})]),_:1}),M(z,{effect:"light",content:"\u5411\u4E0A\u5BF9\u9F50"},{default:j(()=>[M(R,{preIcon:"fa:align-left",class:"align align-left",onClick:T[6]||(T[6]=G=>I("top"))})]),_:1}),M(z,{effect:"light",content:"\u5411\u4E0B\u5BF9\u9F50"},{default:j(()=>[M(R,{preIcon:"fa:align-left",class:"align align-right",onClick:T[7]||(T[7]=G=>I("bottom"))})]),_:1}),M(z,{effect:"light",content:"\u6C34\u5E73\u5C45\u4E2D"},{default:j(()=>[M(R,{preIcon:"fa:align-left",class:"align align-center",onClick:T[8]||(T[8]=G=>I("center"))})]),_:1}),M(z,{effect:"light",content:"\u5782\u76F4\u5C45\u4E2D"},{default:j(()=>[M(R,{preIcon:"fa:align-left",class:"align align-middle",onClick:T[9]||(T[9]=G=>I("middle"))})]),_:1})]),_:1}),M(P,{key:"scale-control"},{default:j(()=>[M(z,{effect:"light",content:"\u7F29\u5C0F\u89C6\u56FE"},{default:j(()=>[M(R,{preIcon:"ep:zoom-out",onClick:T[10]||(T[10]=G=>((J=.1)=>{let tt=Math.floor(100*a.value-100*J)/100;if(tt<.2)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be less than 0.2");a.value=tt,o.get("canvas").zoom(a.value)})()),disabled:N(a)<.2},null,8,["disabled"])]),_:1}),M(_,null,{default:j(()=>[dt(Uh(Math.floor(10*N(a)*10)+"%"),1)]),_:1}),M(z,{effect:"light",content:"\u653E\u5927\u89C6\u56FE"},{default:j(()=>[M(R,{preIcon:"ep:zoom-in",onClick:T[11]||(T[11]=G=>((J=.1)=>{let tt=Math.floor(100*a.value+100*J)/100;if(tt>4)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be greater than 4");a.value=tt,o.get("canvas").zoom(a.value)})()),disabled:N(a)>4},null,8,["disabled"])]),_:1}),M(z,{effect:"light",content:"\u91CD\u7F6E\u89C6\u56FE\u5E76\u5C45\u4E2D"},{default:j(()=>[M(R,{preIcon:"ep:scale-to-original",onClick:T[12]||(T[12]=G=>(a.value=1,void o.get("canvas").zoom("fit-viewport","auto")))})]),_:1})]),_:1}),M(P,{key:"stack-control"},{default:j(()=>[M(z,{effect:"light",content:"\u64A4\u9500"},{default:j(()=>[M(R,{preIcon:"ep:refresh-left",onClick:T[13]||(T[13]=G=>{o.get("commandStack").undo()}),disabled:!N(v)},null,8,["disabled"])]),_:1}),M(z,{effect:"light",content:"\u6062\u590D"},{default:j(()=>[M(R,{preIcon:"ep:refresh-right",onClick:T[14]||(T[14]=G=>{o.get("commandStack").redo()}),disabled:!N(d)},null,8,["disabled"])]),_:1}),M(z,{effect:"light",content:"\u91CD\u65B0\u7ED8\u5236"},{default:j(()=>[M(R,{preIcon:"ep:refresh",onClick:T[15]||(T[15]=G=>(d.value=!1,v.value=!1,void g(null)))})]),_:1})]),_:1}),M(R,{preIcon:"ep:plus",title:"\u4FDD\u5B58\u6A21\u578B",onClick:m,type:n.headerButtonType,disabled:N(l)},null,8,["type","disabled"])],64)),It("input",{type:"file",id:"files",ref_key:"refFile",ref:r,style:{display:"none"},accept:".xml, .bpmn",onChange:S},null,544)]),It("div",zb,[It("div",{class:"my-process-designer__canvas",ref_key:"bpmnCanvas",ref:i,id:"bpmnCanvas",style:{width:"1680px",height:"800px"}},null,512)]),M(B,{title:"\u9884\u89C8",modelValue:N(c),"onUpdate:modelValue":T[16]||(T[16]=G=>un(c)?c.value=G:null),width:"80%",scroll:!0,"max-height":"600px"},{default:j(()=>[Na((nt(),Nt("div",null,[It("code",Gb,Uh(N(u)),1)])),[[V]])]),_:1},8,["modelValue"])])}}}),Oa.install=function(t){t.component(Oa.name,Oa)};const ZT={class:"panel-tab__content"},QT={key:0},tA={key:1},eA=pe({name:"ElementBaseInfo",__name:"ElementBaseInfo",props:{businessObject:{type:Object,default:()=>{}},model:{type:Object,default:()=>{}}},setup(t){const e=t,n=W({}),i=W(),r=W({}),o=QA({id:[{required:!0,message:"\u6D41\u7A0B\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u6D41\u7A0B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),a=()=>window==null?void 0:window.bpmnInstances,c=p=>{p&&p.match(/[a-zA-Z_][\-_.0-9a-zA-Z$]*/)&&(r.value.id=p,setTimeout(()=>{u("id")},100))},l=p=>{p&&(r.value.name=p,setTimeout(()=>{u("name")},100))},u=p=>{const d=Object.create(null);d[p]=r.value[p],n.value={...r.value,...n.value},p==="id"?a().modeling.updateProperties(jt(i.value),{id:r.value[p],di:{id:`${r.value[p]}_di`}}):a().modeling.updateProperties(jt(i.value),d)};return Ia(()=>{setTimeout(()=>{c(e.model.key),l(e.model.name)},1e3)}),ue(()=>e.businessObject,p=>{var d;p&&(i.value=(d=a())==null?void 0:d.bpmnElement,r.value=i.value.businessObject,n.value.type=i.value.businessObject.$type)}),jn(()=>{i.value=null}),(p,d)=>{const v=qh,f=wn,y=Sn,b=oi;return nt(),Nt("div",ZT,[M(b,{"label-width":"90px",model:N(n),rules:N(o)},{default:j(()=>[N(n).type=="bpmn:Process"?(nt(),Nt("div",QT,[M(v,{href:"https://doc.iocoder.cn/bpm/#_3-%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%A4%BA%E4%BE%8B",type:"danger",target:"_blank"},{default:j(()=>[dt(" \u5982\u4F55\u5B9E\u73B0\u5B9E\u73B0\u4F1A\u7B7E\u3001\u6216\u7B7E\uFF1F ")]),_:1}),M(y,{label:"\u6D41\u7A0B\u6807\u8BC6",prop:"id"},{default:j(()=>[M(f,{modelValue:N(n).id,"onUpdate:modelValue":d[0]||(d[0]=g=>N(n).id=g),placeholder:"\u8BF7\u8F93\u5165\u6D41\u6807\u6807\u8BC6",disabled:N(n).id!==void 0&&N(n).id.length>0,onChange:c},null,8,["modelValue","disabled"])]),_:1}),M(y,{label:"\u6D41\u7A0B\u540D\u79F0",prop:"name"},{default:j(()=>[M(f,{modelValue:N(n).name,"onUpdate:modelValue":d[1]||(d[1]=g=>N(n).name=g),placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0",clearable:"",onChange:l},null,8,["modelValue"])]),_:1})])):(nt(),Nt("div",tA,[M(y,{label:"ID"},{default:j(()=>[M(f,{modelValue:N(r).id,"onUpdate:modelValue":d[2]||(d[2]=g=>N(r).id=g),clearable:"",onChange:d[3]||(d[3]=g=>u("id"))},null,8,["modelValue"])]),_:1}),M(y,{label:"\u540D\u79F0"},{default:j(()=>[M(f,{modelValue:N(r).name,"onUpdate:modelValue":d[4]||(d[4]=g=>N(r).name=g),clearable:"",onChange:d[5]||(d[5]=g=>u("name"))},null,8,["modelValue"])]),_:1})]))]),_:1},8,["model","rules"])])}}}),nA={class:"panel-tab__content"},iA={class:"element-property input-property"},rA=It("div",{class:"element-property__label"},"\u5143\u7D20\u6587\u6863\uFF1A",-1),oA={class:"element-property__value"},aA=pe({name:"ElementOtherConfig",__name:"ElementOtherConfig",props:{id:String},setup(t){const e=t,n=W(""),i=W(),r=()=>window.bpmnInstances,o=()=>{i.value&&i.value.id===e.id||(i.value=r().elementRegistry.get(e.id));const a=r().bpmnFactory.create("bpmn:Documentation",{text:n.value});r().modeling.updateProperties(jt(i.value),{documentation:[a]})};return jn(()=>{i.value=null}),ue(()=>e.id,a=>{a&&a.length?Fe(()=>{var l;const c=(l=r().bpmnElement.businessObject)==null?void 0:l.documentation;n.value=c&&c.length?c[0].text:""}):n.value=""},{immediate:!0}),(a,c)=>{const l=wn;return nt(),Nt("div",nA,[It("div",iA,[rA,It("div",oA,[M(l,{type:"textarea",modelValue:N(n),"onUpdate:modelValue":c[0]||(c[0]=u=>un(n)?n.value=u:null),resize:"vertical",autosize:{minRows:2,maxRows:4},onInput:o,onBlur:o},null,8,["modelValue"])])])])}}}),sA={style:{"margin-top":"16px"}},cA=pe({name:"UserTask",__name:"UserTask",props:{id:String,type:String},setup(t){const e=t,n=W({assignee:"",candidateUsers:[],candidateGroups:[],dueDate:"",followUpDate:"",priority:""}),i=W({}),r=W(),o=()=>window==null?void 0:window.bpmnInstances,a=c=>{const l=Object.create(null);l[c]=c==="candidateUsers"||c==="candidateGroups"?i.value[c]&&i.value[c].length?i.value[c].join():null:i.value[c]||null,o().modeling.updateProperties(jt(r.value),l)};return ue(()=>e.id,()=>{r.value=o().bpmnElement,Fe(()=>{(()=>{var c,l;for(let u in n.value){let p;p=u==="candidateUsers"||u==="candidateGroups"?(c=r.value)!=null&&c.businessObject[u]?r.value.businessObject[u].split(","):[]:((l=r.value)==null?void 0:l.businessObject[u])||n.value[u],i.value[u]=p}})()})},{immediate:!0}),jn(()=>{r.value=null}),(c,l)=>{const u=wn,p=Sn,d=qh,v=O0("router-link");return nt(),Nt("div",sA,[M(p,{label:"\u5230\u671F\u65F6\u95F4"},{default:j(()=>[M(u,{modelValue:N(i).dueDate,"onUpdate:modelValue":l[0]||(l[0]=f=>N(i).dueDate=f),clearable:"",onChange:l[1]||(l[1]=f=>a("dueDate"))},null,8,["modelValue"])]),_:1}),M(p,{label:"\u8DDF\u8E2A\u65F6\u95F4"},{default:j(()=>[M(u,{modelValue:N(i).followUpDate,"onUpdate:modelValue":l[2]||(l[2]=f=>N(i).followUpDate=f),clearable:"",onChange:l[3]||(l[3]=f=>a("followUpDate"))},null,8,["modelValue"])]),_:1}),M(p,{label:"\u4F18\u5148\u7EA7"},{default:j(()=>[M(u,{modelValue:N(i).priority,"onUpdate:modelValue":l[4]||(l[4]=f=>N(i).priority=f),clearable:"",onChange:l[5]||(l[5]=f=>a("priority"))},null,8,["modelValue"])]),_:1}),dt(" \u53CB\u60C5\u63D0\u793A\uFF1A\u4EFB\u52A1\u7684\u5206\u914D\u89C4\u5219\uFF0C\u4F7F\u7528 "),M(v,{target:"_blank",to:{path:"/bpm/manager/model"}},{default:j(()=>[M(d,{type:"danger"},{default:j(()=>[dt("\u6D41\u7A0B\u6A21\u578B")]),_:1})]),_:1}),dt(" \u4E0B\u7684\u3010\u5206\u914D\u89C4\u5219\u3011\u66FF\u4EE3\uFF0C\u63D0\u4F9B\u6307\u5B9A\u89D2\u8272\u3001\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u90E8\u95E8\u6210\u5458\u3001\u5C97\u4F4D\u3001\u5DE5\u4F5C\u7EC4\u3001\u81EA\u5B9A\u4E49\u811A\u672C\u7B49 7 \u79CD\u7EF4\u62A4\u7684\u4EFB\u52A1\u5206\u914D\u7EF4\u5EA6\uFF0C\u66F4\u52A0\u7075\u6D3B\uFF01 ")])}}}),lA={style:{"margin-top":"16px"}},uA=pe({name:"ScriptTask",__name:"ScriptTask",props:{id:String,type:String},setup(t){const e=t,n=W({scriptFormat:"",script:"",resource:"",resultVariable:""}),i=W({}),r=W(),o=()=>window==null?void 0:window.bpmnInstances,a=()=>{let c=Object.create(null);c.scriptFormat=i.value.scriptFormat||null,c.resultVariable=i.value.resultVariable||null,i.value.scriptType==="inline"?(c.script=i.value.script||null,c.resource=null):(c.resource=i.value.resource||null,c.script=null),o().modeling.updateProperties(jt(r.value),c)};return jn(()=>{r.value=null}),ue(()=>e.id,()=>{r.value=o().bpmnElement,Fe(()=>{(()=>{var c;for(let l in n.value){let u=((c=r.value)==null?void 0:c.businessObject[l])||n.value[l];i.value[l]=u}i.value.scriptType=i.value.script?"inline":"external"})()})},{immediate:!0}),(c,l)=>{const u=wn,p=Sn,d=uo,v=po;return nt(),Nt("div",lA,[M(p,{label:"\u811A\u672C\u683C\u5F0F"},{default:j(()=>[M(u,{modelValue:N(i).scriptFormat,"onUpdate:modelValue":l[0]||(l[0]=f=>N(i).scriptFormat=f),clearable:"",onInput:l[1]||(l[1]=f=>a()),onChange:l[2]||(l[2]=f=>a())},null,8,["modelValue"])]),_:1}),M(p,{label:"\u811A\u672C\u7C7B\u578B"},{default:j(()=>[M(v,{modelValue:N(i).scriptType,"onUpdate:modelValue":l[3]||(l[3]=f=>N(i).scriptType=f)},{default:j(()=>[M(d,{label:"\u5185\u8054\u811A\u672C",value:"inline"}),M(d,{label:"\u5916\u90E8\u8D44\u6E90",value:"external"})]),_:1},8,["modelValue"])]),_:1}),Na(M(p,{label:"\u811A\u672C"},{default:j(()=>[M(u,{modelValue:N(i).script,"onUpdate:modelValue":l[4]||(l[4]=f=>N(i).script=f),type:"textarea",resize:"vertical",autosize:{minRows:2,maxRows:4},clearable:"",onInput:l[5]||(l[5]=f=>a()),onChange:l[6]||(l[6]=f=>a())},null,8,["modelValue"])]),_:1},512),[[cl,N(i).scriptType==="inline"]]),Na(M(p,{label:"\u8D44\u6E90\u5730\u5740"},{default:j(()=>[M(u,{modelValue:N(i).resource,"onUpdate:modelValue":l[7]||(l[7]=f=>N(i).resource=f),clearable:"",onInput:l[8]||(l[8]=f=>a()),onChange:l[9]||(l[9]=f=>a())},null,8,["modelValue"])]),_:1},512),[[cl,N(i).scriptType==="external"]]),M(p,{label:"\u7ED3\u679C\u53D8\u91CF"},{default:j(()=>[M(u,{modelValue:N(i).resultVariable,"onUpdate:modelValue":l[10]||(l[10]=f=>N(i).resultVariable=f),clearable:"",onInput:l[11]||(l[11]=f=>a()),onChange:l[12]||(l[12]=f=>a())},null,8,["modelValue"])]),_:1})])}}}),pA={style:{"margin-top":"16px"}},hA={style:{display:"flex","align-items":"center","justify-content":"space-between","flex-wrap":"nowrap"}},dA=pe({name:"ReceiveTask",__name:"ReceiveTask",props:{id:String,type:String},setup(t){const e=t,n=j0(),i=W(""),r=W({}),o=W({}),a=W(!1),c=W(),l=W(),u=W(),p=()=>window.bpmnInstances,d=()=>{a.value=!0,r.value={}},v=()=>{if(o.value[r.value.id])return void n.error("\u8BE5\u6D88\u606F\u5DF2\u5B58\u5728\uFF0C\u8BF7\u4FEE\u6539id\u540E\u91CD\u65B0\u4FDD\u5B58");const y=p().moddle.create("bpmn:Message",r.value);u.value.push(y),o.value[r.value.id]=r.value.name,l.value[r.value.id]=y,a.value=!1},f=y=>{y==="-1"?p().modeling.updateProperties(jt(c.value),{messageRef:null}):p().modeling.updateProperties(jt(c.value),{messageRef:l.value[y]})};return Ia(()=>{l.value=Object.create(null),u.value=p().modeler.getDefinitions().rootElements,u.value.filter(y=>y.$type==="bpmn:Message").forEach(y=>{l.value[y.id]=y,o.value[y.id]=y.name}),o.value[-1]="\u65E0"}),jn(()=>{c.value=null}),ue(()=>e.id,()=>{Fe(()=>{var y,b;c.value=p().bpmnElement,i.value=((b=(y=c.value.businessObject)==null?void 0:y.messageRef)==null?void 0:b.id)||"-1"})},{immediate:!0}),(y,b)=>{const g=uo,w=po,x=mo,S=Sn,C=wn,I=oi,s=lo,h=Da;return nt(),Nt("div",pA,[M(S,{label:"\u6D88\u606F\u5B9E\u4F8B"},{default:j(()=>[It("div",hA,[M(w,{modelValue:N(i),"onUpdate:modelValue":b[0]||(b[0]=m=>un(i)?i.value=m:null),onChange:f},{default:j(()=>[(nt(!0),Nt(ln,null,ho(Object.keys(N(o)),m=>(nt(),Ct(g,{value:m,label:N(o)[m],key:m},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),M(x,{type:"primary",preIcon:"ep:plus",style:{"margin-left":"8px"},onClick:d})])]),_:1}),M(h,{modelValue:N(a),"onUpdate:modelValue":b[3]||(b[3]=m=>un(a)?a.value=m:null),"close-on-click-modal":!1,title:"\u521B\u5EFA\u65B0\u6D88\u606F",width:"400px","append-to-body":"","destroy-on-close":""},{footer:j(()=>[M(s,{size:"small",type:"primary",onClick:v},{default:j(()=>[dt("\u786E \u8BA4")]),_:1})]),default:j(()=>[M(I,{model:N(r),size:"small","label-width":"90px"},{default:j(()=>[M(S,{label:"\u6D88\u606FID"},{default:j(()=>[M(C,{modelValue:N(r).id,"onUpdate:modelValue":b[1]||(b[1]=m=>N(r).id=m),clearable:""},null,8,["modelValue"])]),_:1}),M(S,{label:"\u6D88\u606F\u540D\u79F0"},{default:j(()=>[M(C,{modelValue:N(r).name,"onUpdate:modelValue":b[2]||(b[2]=m=>N(r).name=m),clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),mA={class:"panel-tab__content"},fA=pe({name:"ElementTaskConfig",__name:"ElementTask",props:{id:String,type:String},setup(t){const e=t,n=W({asyncAfter:!1,asyncBefore:!1,exclusive:!1}),i=W(),r=W({UserTask:"UserTask",ScriptTask:"ScriptTask",ReceiveTask:"ReceiveTask"}),o=W(),a=()=>window.bpmnInstances,c=()=>{n.value.asyncBefore||n.value.asyncAfter||(n.value.exclusive=!1),a().modeling.updateProperties(a().bpmnElement,{...n.value})};return ue(()=>e.id,()=>{var l,u,p,d,v,f;o.value=a().bpmnElement,n.value.asyncBefore=(u=(l=o.value)==null?void 0:l.businessObject)==null?void 0:u.asyncBefore,n.value.asyncAfter=(d=(p=o.value)==null?void 0:p.businessObject)==null?void 0:d.asyncAfter,n.value.exclusive=(f=(v=o.value)==null?void 0:v.businessObject)==null?void 0:f.exclusive},{immediate:!0}),ue(()=>e.type,()=>{e.type==r.value.UserTask&&(i.value=cA),e.type==r.value.ScriptTask&&(i.value=uA),e.type==r.value.ReceiveTask&&(i.value=dA)},{immediate:!0}),(l,u)=>{const p=L0,d=Sn,v=oi;return nt(),Nt("div",mA,[M(v,{size:"small","label-width":"90px"},{default:j(()=>[M(d,{label:"\u5F02\u6B65\u5EF6\u7EED"},{default:j(()=>[M(p,{modelValue:N(n).asyncBefore,"onUpdate:modelValue":u[0]||(u[0]=f=>N(n).asyncBefore=f),label:"\u5F02\u6B65\u524D",onChange:c},null,8,["modelValue"]),M(p,{modelValue:N(n).asyncAfter,"onUpdate:modelValue":u[1]||(u[1]=f=>N(n).asyncAfter=f),label:"\u5F02\u6B65\u540E",onChange:c},null,8,["modelValue"]),N(n).asyncAfter||N(n).asyncBefore?(nt(),Ct(p,{key:0,modelValue:N(n).exclusive,"onUpdate:modelValue":u[2]||(u[2]=f=>N(n).exclusive=f),label:"\u6392\u9664",onChange:c},null,8,["modelValue"])):kt("",!0)]),_:1}),(nt(),Ct(nk(N(i)),tk(ek(l.$props)),null,16))]),_:1})])}}}),vA={class:"panel-tab__content"},yA=pe({name:"ElementMultiInstance",__name:"ElementMultiInstance",props:{businessObject:Object,type:String},setup(t){const e=t,n=yr("prefix"),i=W(""),r=W({completionCondition:"",loopCardinality:"",extensionElements:[],asyncAfter:!1,asyncBefore:!1,exclusive:!1}),o=W({}),a=W(null),c=W(null),l=()=>window==null?void 0:window.bpmnInstances,u=b=>{if(b!=="Null"){if(b==="StandardLoop"){const g=l().moddle.create("bpmn:StandardLoopCharacteristics");return l().modeling.updateProperties(jt(a.value),{loopCharacteristics:g}),void(c.value=null)}c.value=b==="SequentialMultiInstance"?l().moddle.create("bpmn:MultiInstanceLoopCharacteristics",{isSequential:!0}):l().moddle.create("bpmn:MultiInstanceLoopCharacteristics",{collection:"${coll_userList}"}),l().modeling.updateProperties(jt(a.value),{loopCharacteristics:jt(c.value)})}else l().modeling.updateProperties(jt(a.value),{loopCharacteristics:null})},p=b=>{let g=null;b&&b.length&&(g=l().moddle.create("bpmn:FormalExpression",{body:b})),l().modeling.updateModdleProperties(jt(a.value),c.value,{loopCardinality:g})},d=b=>{let g=null;b&&b.length&&(g=l().moddle.create("bpmn:FormalExpression",{body:b})),l().modeling.updateModdleProperties(jt(a.value),c.value,{completionCondition:g})},v=b=>{const g=l().moddle.create("bpmn:ExtensionElements",{values:[l().moddle.create(`${n}:FailedJobRetryTimeCycle`,{body:b})]});l().modeling.updateModdleProperties(jt(a.value),c.value,{extensionElements:g})},f=()=>{l().modeling.updateModdleProperties(jt(a.value),c.value,{collection:o.value.collection||null,elementVariable:o.value.elementVariable||null})},y=b=>{const{asyncBefore:g,asyncAfter:w}=o.value;let x=Object.create(null);g||w?x[b]=o.value[b]:(o.value.exclusive=!1,x={asyncBefore:!1,asyncAfter:!1,exclusive:!1,extensionElements:null}),l().modeling.updateModdleProperties(jt(a.value),c.value,x)};return jn(()=>{c.value=null,a.value=null}),ue(()=>e.businessObject,b=>{var w,x,S,C;var g;a.value=l().bpmnElement,(g=b).loopCharacteristics?g.loopCharacteristics.$type==="bpmn:StandardLoopCharacteristics"?(i.value="StandardLoop",o.value={}):(g.loopCharacteristics.isSequential?i.value="SequentialMultiInstance":i.value="ParallelMultiInstance",o.value={...r.value,...g.loopCharacteristics,completionCondition:((x=(w=g.loopCharacteristics)==null?void 0:w.completionCondition)==null?void 0:x.body)??"",loopCardinality:((C=(S=g.loopCharacteristics)==null?void 0:S.loopCardinality)==null?void 0:C.body)??""},c.value=l().bpmnElement.businessObject.loopCharacteristics,g.loopCharacteristics.extensionElements&&g.loopCharacteristics.extensionElements.values&&g.loopCharacteristics.extensionElements.values.length&&(o.value.timeCycle=g.loopCharacteristics.extensionElements.values[0].body)):(i.value="Null",o.value={})},{immediate:!0}),(b,g)=>{const w=uo,x=po,S=Sn,C=wn,I=L0,s=oi;return nt(),Nt("div",vA,[M(s,{"label-width":"90px"},{default:j(()=>[M(S,{label:"\u56DE\u8DEF\u7279\u6027"},{default:j(()=>[M(x,{modelValue:N(i),"onUpdate:modelValue":g[0]||(g[0]=h=>un(i)?i.value=h:null),onChange:u},{default:j(()=>[M(w,{label:"\u5E76\u884C\u591A\u91CD\u4E8B\u4EF6",value:"ParallelMultiInstance"}),M(w,{label:"\u65F6\u5E8F\u591A\u91CD\u4E8B\u4EF6",value:"SequentialMultiInstance"}),M(w,{label:"\u5FAA\u73AF\u4E8B\u4EF6",value:"StandardLoop"}),M(w,{label:"\u65E0",value:"Null"})]),_:1},8,["modelValue"])]),_:1}),N(i)==="ParallelMultiInstance"||N(i)==="SequentialMultiInstance"?(nt(),Nt(ln,{key:0},[M(S,{label:"\u5FAA\u73AF\u57FA\u6570",key:"loopCardinality"},{default:j(()=>[M(C,{modelValue:N(o).loopCardinality,"onUpdate:modelValue":g[1]||(g[1]=h=>N(o).loopCardinality=h),clearable:"",onChange:p},null,8,["modelValue"])]),_:1}),Na(M(S,{label:"\u96C6\u5408",key:"collection"},{default:j(()=>[M(C,{modelValue:N(o).collection,"onUpdate:modelValue":g[2]||(g[2]=h=>N(o).collection=h),clearable:"",onChange:f},null,8,["modelValue"])]),_:1},512),[[cl,!1]]),M(S,{label:"\u5143\u7D20\u53D8\u91CF",key:"elementVariable"},{default:j(()=>[M(C,{modelValue:N(o).elementVariable,"onUpdate:modelValue":g[3]||(g[3]=h=>N(o).elementVariable=h),clearable:"",onChange:f},null,8,["modelValue"])]),_:1}),M(S,{label:"\u5B8C\u6210\u6761\u4EF6",key:"completionCondition"},{default:j(()=>[M(C,{modelValue:N(o).completionCondition,"onUpdate:modelValue":g[4]||(g[4]=h=>N(o).completionCondition=h),clearable:"",onChange:d},null,8,["modelValue"])]),_:1}),M(S,{label:"\u5F02\u6B65\u72B6\u6001",key:"async"},{default:j(()=>[M(I,{modelValue:N(o).asyncBefore,"onUpdate:modelValue":g[5]||(g[5]=h=>N(o).asyncBefore=h),label:"\u5F02\u6B65\u524D",onChange:g[6]||(g[6]=h=>y("asyncBefore"))},null,8,["modelValue"]),M(I,{modelValue:N(o).asyncAfter,"onUpdate:modelValue":g[7]||(g[7]=h=>N(o).asyncAfter=h),label:"\u5F02\u6B65\u540E",onChange:g[8]||(g[8]=h=>y("asyncAfter"))},null,8,["modelValue"]),N(o).asyncAfter||N(o).asyncBefore?(nt(),Ct(I,{key:0,modelValue:N(o).exclusive,"onUpdate:modelValue":g[9]||(g[9]=h=>N(o).exclusive=h),label:"\u6392\u9664",onChange:g[10]||(g[10]=h=>y("exclusive"))},null,8,["modelValue"])):kt("",!0)]),_:1}),N(o).asyncAfter||N(o).asyncBefore?(nt(),Ct(S,{label:"\u91CD\u8BD5\u5468\u671F",prop:"timeCycle",key:"timeCycle"},{default:j(()=>[M(C,{modelValue:N(o).timeCycle,"onUpdate:modelValue":g[11]||(g[11]=h=>N(o).timeCycle=h),clearable:"",onChange:v},null,8,["modelValue"])]),_:1})):kt("",!0)],64)):kt("",!0)]),_:1})])}}}),gA={class:"panel-tab__content"},bA=pe({name:"FlowCondition",__name:"FlowCondition",props:{businessObject:Object,type:String},setup(t){const e=t,n=W({}),i=W(),r=W(),o=W(),a=W(),c=()=>window==null?void 0:window.bpmnInstances,l=p=>p==="condition"?(a.value=c().moddle.create("bpmn:FormalExpression"),void c().modeling.updateProperties(jt(i.value),{conditionExpression:a.value})):p==="default"?(c().modeling.updateProperties(jt(i.value),{conditionExpression:null}),void c().modeling.updateProperties(jt(r.value),{default:i.value})):(o.value.default&&o.value.default.id===i.value.id&&c().modeling.updateProperties(jt(r.value),{default:null}),void c().modeling.updateProperties(jt(i.value),{conditionExpression:null})),u=()=>{let p,{conditionType:d,scriptType:v,body:f,resource:y,language:b}=n.value;d==="expression"?p=c().moddle.create("bpmn:FormalExpression",{body:f}):v==="inlineScript"?(p=c().moddle.create("bpmn:FormalExpression",{body:f,language:b}),n.value.resource=""):(n.value.body="",p=c().moddle.create("bpmn:FormalExpression",{resource:y,language:b})),c().modeling.updateProperties(jt(i.value),{conditionExpression:p})};return jn(()=>{i.value=null,r.value=null,o.value=null}),ue(()=>e.businessObject,p=>{Fe(()=>{(()=>{if(i.value=c().bpmnElement,r.value=i.value.source,o.value=i.value.businessObject.sourceRef,o.value&&o.value.default&&o.value.default.id===i.value.id&&n.value.type=="default")n.value={type:"default"};else if(i.value.businessObject.conditionExpression){const d=i.value.businessObject.conditionExpression;if(n.value={...d,type:"condition"},n.value.resource)return n.value.conditionType="script",void(n.value.scriptType="externalScript");if(d.language)return n.value.conditionType="script",void(n.value.scriptType="inlineScript");n.value.conditionType="expression"}else n.value={type:"normal"}})()})},{immediate:!0}),(p,d)=>{const v=uo,f=po,y=Sn,b=wn,g=oi;return nt(),Nt("div",gA,[M(g,{model:N(n),"label-width":"90px",size:"small"},{default:j(()=>[M(y,{label:"\u6D41\u8F6C\u7C7B\u578B"},{default:j(()=>[M(f,{modelValue:N(n).type,"onUpdate:modelValue":d[0]||(d[0]=w=>N(n).type=w),onChange:l},{default:j(()=>[M(v,{label:"\u666E\u901A\u6D41\u8F6C\u8DEF\u5F84",value:"normal"}),M(v,{label:"\u9ED8\u8BA4\u6D41\u8F6C\u8DEF\u5F84",value:"default"}),M(v,{label:"\u6761\u4EF6\u6D41\u8F6C\u8DEF\u5F84",value:"condition"})]),_:1},8,["modelValue"])]),_:1}),N(n).type==="condition"?(nt(),Ct(y,{label:"\u6761\u4EF6\u683C\u5F0F",key:"condition"},{default:j(()=>[M(f,{modelValue:N(n).conditionType,"onUpdate:modelValue":d[1]||(d[1]=w=>N(n).conditionType=w)},{default:j(()=>[M(v,{label:"\u8868\u8FBE\u5F0F",value:"expression"}),M(v,{label:"\u811A\u672C",value:"script"})]),_:1},8,["modelValue"])]),_:1})):kt("",!0),N(n).conditionType&&N(n).conditionType==="expression"?(nt(),Ct(y,{label:"\u8868\u8FBE\u5F0F",key:"express"},{default:j(()=>[M(b,{modelValue:N(n).body,"onUpdate:modelValue":d[2]||(d[2]=w=>N(n).body=w),style:{width:"192px"},clearable:"",onChange:u},null,8,["modelValue"])]),_:1})):kt("",!0),N(n).conditionType&&N(n).conditionType==="script"?(nt(),Nt(ln,{key:2},[M(y,{label:"\u811A\u672C\u8BED\u8A00",key:"language"},{default:j(()=>[M(b,{modelValue:N(n).language,"onUpdate:modelValue":d[3]||(d[3]=w=>N(n).language=w),clearable:"",onChange:u},null,8,["modelValue"])]),_:1}),M(y,{label:"\u811A\u672C\u7C7B\u578B",key:"scriptType"},{default:j(()=>[M(f,{modelValue:N(n).scriptType,"onUpdate:modelValue":d[4]||(d[4]=w=>N(n).scriptType=w)},{default:j(()=>[M(v,{label:"\u5185\u8054\u811A\u672C",value:"inlineScript"}),M(v,{label:"\u5916\u90E8\u811A\u672C",value:"externalScript"})]),_:1},8,["modelValue"])]),_:1}),N(n).scriptType==="inlineScript"?(nt(),Ct(y,{label:"\u811A\u672C",key:"body"},{default:j(()=>[M(b,{modelValue:N(n).body,"onUpdate:modelValue":d[5]||(d[5]=w=>N(n).body=w),type:"textarea",clearable:"",onChange:u},null,8,["modelValue"])]),_:1})):kt("",!0),N(n).scriptType==="externalScript"?(nt(),Ct(y,{label:"\u8D44\u6E90\u5730\u5740",key:"resource"},{default:j(()=>[M(b,{modelValue:N(n).resource,"onUpdate:modelValue":d[6]||(d[6]=w=>N(n).resource=w),clearable:"",onChange:u},null,8,["modelValue"])]),_:1})):kt("",!0)],64)):kt("",!0)]),_:1},8,["model"])])}}}),xA={class:"panel-tab__content"},EA={class:"panel-tab__content--title"},_A={class:"panel-tab__content--title",style:{"padding-top":"8px","margin-top":"8px","border-top":"1px solid #eee"}},wA=pe({name:"SignalAndMassage",__name:"SignalAndMessage",setup(t){const e=j0(),n=W([]),i=W([]),r=W(!1),o=W(""),a=W({}),c=W(),l=W(),u=W(),p=cn(()=>o.value==="message"?{title:"\u521B\u5EFA\u6D88\u606F",idLabel:"\u6D88\u606FID",nameLabel:"\u6D88\u606F\u540D\u79F0"}:{title:"\u521B\u5EFA\u4FE1\u53F7",idLabel:"\u4FE1\u53F7ID",nameLabel:"\u4FE1\u53F7\u540D\u79F0"}),d=()=>window==null?void 0:window.bpmnInstances,v=()=>{c.value=d().modeler.getDefinitions().rootElements,l.value={},u.value={},i.value=[],n.value=[],c.value.forEach(b=>{b.$type==="bpmn:Message"&&(l.value[b.id]=!0,i.value.push({...b})),b.$type==="bpmn:Signal"&&(u.value[b.id]=!0,n.value.push({...b}))})},f=b=>{o.value=b,a.value={},r.value=!0},y=()=>{if(o.value==="message"){l.value[a.value.id]&&e.error("\u8BE5\u6D88\u606F\u5DF2\u5B58\u5728\uFF0C\u8BF7\u4FEE\u6539id\u540E\u91CD\u65B0\u4FDD\u5B58");const b=d().moddle.create("bpmn:Message",a.value);c.value.push(b)}else{u.value[a.value.id]&&e.error("\u8BE5\u4FE1\u53F7\u5DF2\u5B58\u5728\uFF0C\u8BF7\u4FEE\u6539id\u540E\u91CD\u65B0\u4FDD\u5B58");const b=d().moddle.create("bpmn:Signal",a.value);c.value.push(b)}r.value=!1,v()};return Ia(()=>{v()}),(b,g)=>{const w=ll,x=mo,S=ul,C=pl,I=wn,s=Sn,h=oi,m=lo,E=Da;return nt(),Nt("div",xA,[It("div",EA,[It("span",null,[M(w,{icon:"ep:menu",style:{"margin-right":"8px",color:"#555"}}),dt("\u6D88\u606F\u5217\u8868")]),M(x,{type:"primary",title:"\u521B\u5EFA\u65B0\u6D88\u606F",preIcon:"ep:plus",onClick:g[0]||(g[0]=T=>f("message"))})]),M(C,{data:N(i),border:""},{default:j(()=>[M(S,{type:"index",label:"\u5E8F\u53F7",width:"60px"}),M(S,{label:"\u6D88\u606FID",prop:"id","max-width":"300px","show-overflow-tooltip":""}),M(S,{label:"\u6D88\u606F\u540D\u79F0",prop:"name","max-width":"300px","show-overflow-tooltip":""})]),_:1},8,["data"]),It("div",_A,[It("span",null,[M(w,{icon:"ep:menu",style:{"margin-right":"8px",color:"#555"}}),dt("\u4FE1\u53F7\u5217\u8868")]),M(x,{type:"primary",title:"\u521B\u5EFA\u65B0\u4FE1\u53F7",preIcon:"ep:plus",onClick:g[1]||(g[1]=T=>f("signal"))})]),M(C,{data:N(n),border:""},{default:j(()=>[M(S,{type:"index",label:"\u5E8F\u53F7",width:"60px"}),M(S,{label:"\u4FE1\u53F7ID",prop:"id","max-width":"300px","show-overflow-tooltip":""}),M(S,{label:"\u4FE1\u53F7\u540D\u79F0",prop:"name","max-width":"300px","show-overflow-tooltip":""})]),_:1},8,["data"]),M(E,{modelValue:N(r),"onUpdate:modelValue":g[5]||(g[5]=T=>un(r)?r.value=T:null),title:N(p).title,"close-on-click-modal":!1,width:"400px","append-to-body":"","destroy-on-close":""},{footer:j(()=>[M(m,{onClick:g[4]||(g[4]=T=>r.value=!1)},{default:j(()=>[dt("\u53D6 \u6D88")]),_:1}),M(m,{type:"primary",onClick:y},{default:j(()=>[dt("\u4FDD \u5B58")]),_:1})]),default:j(()=>[M(h,{model:N(a),"label-width":"90px"},{default:j(()=>[M(s,{label:N(p).idLabel},{default:j(()=>[M(I,{modelValue:N(a).id,"onUpdate:modelValue":g[2]||(g[2]=T=>N(a).id=T),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),M(s,{label:N(p).nameLabel},{default:j(()=>[M(I,{modelValue:N(a).name,"onUpdate:modelValue":g[3]||(g[3]=T=>N(a).name=T),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),pr=()=>window==null?void 0:window.bpmnInstances;function Ub(t,e,n){const i=Object.create(null);switch(i.event=t.event,e&&(i.id=t.id),t.listenerType){case"scriptListener":i.script=function(r,o){const{scriptType:a,scriptFormat:c,value:l,resource:u}=r,p=a==="inlineScript"?{scriptFormat:c,value:l}:{scriptFormat:c,resource:u};return pr().moddle.create(`${o}:Script`,p)}(t,n);break;case"expressionListener":i.expression=t.expression;break;case"delegateExpressionListener":i.delegateExpression=t.delegateExpression;break;default:i.class=t.class}if(t.fields&&(i.fields=t.fields.map(r=>function(o,a){const{name:c,fieldType:l,string:u,expression:p}=o,d=l==="string"?{name:c,string:u}:{name:c,expression:p};return pr().moddle.create(`${a}:Field`,d)}(r,n))),e&&t.event==="timeout"&&t.eventDefinitionType){const r=pr().moddle.create("bpmn:FormalExpression",{body:t.eventTimeDefinitions}),o=pr().moddle.create("bpmn:TimerEventDefinition",{id:`TimerEventDefinition_${SA(8)}`,[`time${t.eventDefinitionType.replace(/^\S/,a=>a.toUpperCase())}`]:r});i.eventDefinitions=[o]}return pr().moddle.create(`${n}:${e?"TaskListener":"ExecutionListener"}`,i)}function Jc(t,e){const n=pr().moddle.create("bpmn:ExtensionElements",{values:e});pr().modeling.updateProperties(jt(t),{extensionElements:n})}function SA(t=8,e){let n="";const i=e||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=t;r>0;--r)n+=i[Math.floor(Math.random()*i.length)];return n}function Hb(t){let e={...t};if(t.script&&(e={...t,...t.script,scriptType:t.script.resource?"externalScript":"inlineScript"}),t.event==="timeout"&&t.eventDefinitions&&t.eventDefinitions.length){let n="";for(const i in t.eventDefinitions[0])i.indexOf("time")!==-1&&(n=i,e.eventDefinitionType=i.replace("time","").toLowerCase());e.eventTimeDefinitions=t.eventDefinitions[0][n].body}return e}function qb(t){let e;return t.class&&(e="classListener"),t.expression&&(e="expressionListener"),t.delegateExpression&&(e="delegateExpressionListener"),t.script&&(e="scriptListener"),{...JSON.parse(JSON.stringify(t)),...t.script??{},listenerType:e}}let Mh,Wb,Rh,Kb,Xb,Yb,Jb,Zb,Qb,t0,e0,n0,i0,r0,o0,a0;Mh={classListener:"Java \u7C7B",expressionListener:"\u8868\u8FBE\u5F0F",delegateExpressionListener:"\u4EE3\u7406\u8868\u8FBE\u5F0F",scriptListener:"\u811A\u672C"},Wb={create:"\u521B\u5EFA",assignment:"\u6307\u6D3E",complete:"\u5B8C\u6210",delete:"\u5220\u9664",update:"\u66F4\u65B0",timeout:"\u8D85\u65F6"},Rh={string:"\u5B57\u7B26\u4E32",expression:"\u8868\u8FBE\u5F0F"},Kb={class:"panel-tab__content"},Xb={class:"element-drawer__button"},Yb={class:"listener-filed__title"},Jb={class:"element-drawer__button"},Zb=pe({name:"ElementListeners",__name:"ElementListeners",props:{id:String,type:String},setup(t){const e=t,n=yr("prefix"),i=yr("width"),r=W([]),o=W({}),a=W(!1),c=W([]),l=W({}),u=W(!1),p=W(-1),d=W(-1),v=W(Mh),f=W(Rh),y=W(),b=W(),g=W(),w=W(),x=W(),S=()=>{var m,E,T;y.value=(window==null?void 0:window.bpmnInstances).bpmnElement,b.value=[],g.value=((T=(E=(m=y.value.businessObject)==null?void 0:m.extensionElements)==null?void 0:E.values)==null?void 0:T.filter(R=>R.$type===`${n}:ExecutionListener`))??[],r.value=g.value.map(R=>qb(R))},C=(m,E)=>{m?(o.value=Hb(m),p.value=E):(o.value={},p.value=-1),m&&m.fields?c.value=m.fields.map(T=>({...T,fieldType:T.string?"string":"expression"})):(c.value=[],o.value.fields=[]),a.value=!0,Fe(()=>{w.value&&w.value.clearValidate()})},I=(m,E)=>{l.value=m?JSON.parse(JSON.stringify(m)):{},d.value=m?E:-1,u.value=!0,Fe(()=>{x.value&&x.value.clearValidate()})},s=async()=>{await x.value.validate()&&(d.value===-1?(c.value.push(l.value),o.value.fields.push(l.value)):(c.value.splice(d.value,1,l.value),o.value.fields.splice(d.value,1,l.value)),u.value=!1,Fe(()=>{l.value={}}))},h=async()=>{var E,T,R;if(!await w.value.validate())return;const m=Ub(o.value,!1,n);p.value===-1?(g.value.push(m),r.value.push(o.value)):(g.value.splice(p.value,1,m),r.value.splice(p.value,1,o.value)),b.value=((R=(T=(E=y.value.businessObject)==null?void 0:E.extensionElements)==null?void 0:T.values)==null?void 0:R.filter(D=>D.$type!==`${n}:ExecutionListener`))??[],Jc(y.value,b.value.concat(g.value)),a.value=!1,o.value={}};return ue(()=>e.id,m=>{m&&m.length&&Fe(()=>{S()})},{immediate:!0}),(m,E)=>{const T=ul,R=lo,D=Hh,z=pl,P=mo,_=uo,B=po,V=Sn,G=wn,J=oi,tt=ll,ct=V0,at=Da;return nt(),Nt("div",Kb,[M(z,{data:N(r),size:"small",border:""},{default:j(()=>[M(T,{label:"\u5E8F\u53F7",width:"50px",type:"index"}),M(T,{label:"\u4E8B\u4EF6\u7C7B\u578B","min-width":"100px",prop:"event"}),M(T,{label:"\u76D1\u542C\u5668\u7C7B\u578B","min-width":"100px","show-overflow-tooltip":"",formatter:H=>N(v)[H.listenerType]},null,8,["formatter"]),M(T,{label:"\u64CD\u4F5C",width:"100px"},{default:j(H=>[M(R,{size:"small",link:"",onClick:q=>C(H.row,H.$index)},{default:j(()=>[dt("\u7F16\u8F91")]),_:2},1032,["onClick"]),M(D,{direction:"vertical"}),M(R,{size:"small",link:"",style:{color:"#ff4d4f"},onClick:q=>(xt=>{co.confirm("\u786E\u8BA4\u79FB\u9664\u8BE5\u76D1\u542C\u5668\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E \u8BA4",cancelButtonText:"\u53D6 \u6D88"}).then(()=>{g.value.splice(xt,1),r.value.splice(xt,1),Jc(y.value,b.value.concat(g.value))}).catch(()=>{})})(H.$index)},{default:j(()=>[dt("\u79FB\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),It("div",Xb,[M(P,{type:"primary",preIcon:"ep:plus",title:"\u6DFB\u52A0\u76D1\u542C\u5668",onClick:E[0]||(E[0]=H=>C(null))})]),M(ct,{modelValue:N(a),"onUpdate:modelValue":E[12]||(E[12]=H=>un(a)?a.value=H:null),title:"\u6267\u884C\u76D1\u542C\u5668",size:`${N(i)}px`,"append-to-body":"","destroy-on-close":""},{default:j(()=>[M(J,{model:N(o),"label-width":"96px",ref_key:"listenerFormRef",ref:w},{default:j(()=>[M(V,{label:"\u4E8B\u4EF6\u7C7B\u578B",prop:"event",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(B,{modelValue:N(o).event,"onUpdate:modelValue":E[1]||(E[1]=H=>N(o).event=H)},{default:j(()=>[M(_,{label:"start",value:"start"}),M(_,{label:"end",value:"end"})]),_:1},8,["modelValue"])]),_:1}),M(V,{label:"\u76D1\u542C\u5668\u7C7B\u578B",prop:"listenerType",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(B,{modelValue:N(o).listenerType,"onUpdate:modelValue":E[2]||(E[2]=H=>N(o).listenerType=H)},{default:j(()=>[(nt(!0),Nt(ln,null,ho(Object.keys(N(v)),H=>(nt(),Ct(_,{key:H,label:N(v)[H],value:H},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),N(o).listenerType==="classListener"?(nt(),Ct(V,{label:"Java\u7C7B",prop:"class",key:"listener-class",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(G,{modelValue:N(o).class,"onUpdate:modelValue":E[3]||(E[3]=H=>N(o).class=H),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0),N(o).listenerType==="expressionListener"?(nt(),Ct(V,{label:"\u8868\u8FBE\u5F0F",prop:"expression",key:"listener-expression",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(G,{modelValue:N(o).expression,"onUpdate:modelValue":E[4]||(E[4]=H=>N(o).expression=H),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0),N(o).listenerType==="delegateExpressionListener"?(nt(),Ct(V,{label:"\u4EE3\u7406\u8868\u8FBE\u5F0F",prop:"delegateExpression",key:"listener-delegate",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(G,{modelValue:N(o).delegateExpression,"onUpdate:modelValue":E[5]||(E[5]=H=>N(o).delegateExpression=H),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0),N(o).listenerType==="scriptListener"?(nt(),Nt(ln,{key:3},[M(V,{label:"\u811A\u672C\u683C\u5F0F",prop:"scriptFormat",key:"listener-script-format",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u811A\u672C\u683C\u5F0F"}},{default:j(()=>[M(G,{modelValue:N(o).scriptFormat,"onUpdate:modelValue":E[6]||(E[6]=H=>N(o).scriptFormat=H),clearable:""},null,8,["modelValue"])]),_:1}),M(V,{label:"\u811A\u672C\u7C7B\u578B",prop:"scriptType",key:"listener-script-type",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u9009\u62E9\u811A\u672C\u7C7B\u578B"}},{default:j(()=>[M(B,{modelValue:N(o).scriptType,"onUpdate:modelValue":E[7]||(E[7]=H=>N(o).scriptType=H)},{default:j(()=>[M(_,{label:"\u5185\u8054\u811A\u672C",value:"inlineScript"}),M(_,{label:"\u5916\u90E8\u811A\u672C",value:"externalScript"})]),_:1},8,["modelValue"])]),_:1}),N(o).scriptType==="inlineScript"?(nt(),Ct(V,{label:"\u811A\u672C\u5185\u5BB9",prop:"value",key:"listener-script",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u811A\u672C\u5185\u5BB9"}},{default:j(()=>[M(G,{modelValue:N(o).value,"onUpdate:modelValue":E[8]||(E[8]=H=>N(o).value=H),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0),N(o).scriptType==="externalScript"?(nt(),Ct(V,{label:"\u8D44\u6E90\u5730\u5740",prop:"resource",key:"listener-resource",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u8D44\u6E90\u5730\u5740"}},{default:j(()=>[M(G,{modelValue:N(o).resource,"onUpdate:modelValue":E[9]||(E[9]=H=>N(o).resource=H),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0)],64)):kt("",!0)]),_:1},8,["model"]),M(D),It("p",Yb,[It("span",null,[M(tt,{icon:"ep:menu"}),dt("\u6CE8\u5165\u5B57\u6BB5\uFF1A")]),M(P,{type:"primary",onClick:E[10]||(E[10]=H=>I(null)),title:"\u6DFB\u52A0\u5B57\u6BB5"})]),M(z,{data:N(c),size:"small","max-height":"240",border:"",fit:"",style:{flex:"none"}},{default:j(()=>[M(T,{label:"\u5E8F\u53F7",width:"50px",type:"index"}),M(T,{label:"\u5B57\u6BB5\u540D\u79F0","min-width":"100px",prop:"name"}),M(T,{label:"\u5B57\u6BB5\u7C7B\u578B","min-width":"80px","show-overflow-tooltip":"",formatter:H=>N(f)[H.fieldType]},null,8,["formatter"]),M(T,{label:"\u5B57\u6BB5\u503C/\u8868\u8FBE\u5F0F","min-width":"100px","show-overflow-tooltip":"",formatter:H=>H.string||H.expression},null,8,["formatter"]),M(T,{label:"\u64CD\u4F5C",width:"130px"},{default:j(H=>[M(R,{size:"small",link:"",onClick:q=>I(H.row,H.$index)},{default:j(()=>[dt("\u7F16\u8F91")]),_:2},1032,["onClick"]),M(D,{direction:"vertical"}),M(R,{size:"small",link:"",style:{color:"#ff4d4f"},onClick:q=>(xt=>{co.confirm("\u786E\u8BA4\u79FB\u9664\u8BE5\u5B57\u6BB5\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E \u8BA4",cancelButtonText:"\u53D6 \u6D88"}).then(()=>{c.value.splice(xt,1),o.value.fields.splice(xt,1)}).catch(()=>{})})(H.$index)},{default:j(()=>[dt("\u79FB\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),It("div",Jb,[M(R,{onClick:E[11]||(E[11]=H=>a.value=!1)},{default:j(()=>[dt("\u53D6 \u6D88")]),_:1}),M(R,{type:"primary",onClick:h},{default:j(()=>[dt("\u4FDD \u5B58")]),_:1})])]),_:1},8,["modelValue","size"]),M(at,{title:"\u5B57\u6BB5\u914D\u7F6E",modelValue:N(u),"onUpdate:modelValue":E[18]||(E[18]=H=>un(u)?u.value=H:null),width:"600px","append-to-body":"","destroy-on-close":""},{footer:j(()=>[M(R,{size:"small",onClick:E[17]||(E[17]=H=>u.value=!1)},{default:j(()=>[dt("\u53D6 \u6D88")]),_:1}),M(R,{size:"small",type:"primary",onClick:s},{default:j(()=>[dt("\u786E \u5B9A")]),_:1})]),default:j(()=>[M(J,{model:N(l),"label-width":"96spx",ref_key:"listenerFieldFormRef",ref:x,style:{height:"136px"}},{default:j(()=>[M(V,{label:"\u5B57\u6BB5\u540D\u79F0\uFF1A",prop:"name",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(G,{modelValue:N(l).name,"onUpdate:modelValue":E[13]||(E[13]=H=>N(l).name=H),clearable:""},null,8,["modelValue"])]),_:1}),M(V,{label:"\u5B57\u6BB5\u7C7B\u578B\uFF1A",prop:"fieldType",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(B,{modelValue:N(l).fieldType,"onUpdate:modelValue":E[14]||(E[14]=H=>N(l).fieldType=H)},{default:j(()=>[(nt(!0),Nt(ln,null,ho(Object.keys(N(f)),H=>(nt(),Ct(_,{key:H,label:N(f)[H],value:H},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),N(l).fieldType==="string"?(nt(),Ct(V,{label:"\u5B57\u6BB5\u503C\uFF1A",prop:"string",key:"field-string",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(G,{modelValue:N(l).string,"onUpdate:modelValue":E[15]||(E[15]=H=>N(l).string=H),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0),N(l).fieldType==="expression"?(nt(),Ct(V,{label:"\u8868\u8FBE\u5F0F\uFF1A",prop:"expression",key:"field-expression",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(G,{modelValue:N(l).expression,"onUpdate:modelValue":E[16]||(E[16]=H=>N(l).expression=H),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),Qb={class:"panel-tab__content"},t0={class:"element-drawer__button"},e0=pe({name:"ElementProperties",__name:"ElementProperties",props:{id:String,type:String},setup(t){const e=t,n=yr("prefix"),i=W([]),r=W({}),o=W(-1),a=W(!1),c=W(),l=W(),u=W(),p=W(),d=W(),v=()=>window==null?void 0:window.bpmnInstances,f=()=>{var w,x;c.value=v().bpmnElement,l.value=[],u.value=((x=(w=c.value.businessObject)==null?void 0:w.extensionElements)==null?void 0:x.values.filter(S=>(S.$type!==`${n}:Properties`&&l.value.push(S),S.$type===`${n}:Properties`)))??[],p.value=u.value.reduce((S,C)=>S.concat(C.values),[]),i.value=JSON.parse(JSON.stringify(p.value??[]))},y=(w,x)=>{o.value=x,r.value=x===-1?{}:JSON.parse(JSON.stringify(w)),a.value=!0,Fe(()=>{d.value&&d.value.clearValidate()})},b=()=>{const{name:w,value:x}=r.value;if(o.value!==-1)v().modeling.updateModdleProperties(jt(c.value),jt(p.value)[jt(o.value)],{name:w,value:x});else{const S=v().moddle.create(`${n}:Property`,{name:w,value:x}),C=v().moddle.create(`${n}:Properties`,{values:p.value.concat([S])});g(C)}a.value=!1,f()},g=w=>{const x=v().moddle.create("bpmn:ExtensionElements",{values:l.value.concat([w])});v().modeling.updateProperties(jt(c.value),{extensionElements:x})};return ue(()=>e.id,w=>{w&&w&&w.length&&f()},{immediate:!0}),(w,x)=>{const S=ul,C=lo,I=Hh,s=pl,h=mo,m=wn,E=Sn,T=oi,R=Da;return nt(),Nt("div",Qb,[M(s,{data:N(i),"max-height":"240",border:"",fit:""},{default:j(()=>[M(S,{label:"\u5E8F\u53F7",width:"50px",type:"index"}),M(S,{label:"\u5C5E\u6027\u540D",prop:"name","min-width":"100px","show-overflow-tooltip":""}),M(S,{label:"\u5C5E\u6027\u503C",prop:"value","min-width":"100px","show-overflow-tooltip":""}),M(S,{label:"\u64CD\u4F5C",width:"110px"},{default:j(D=>[M(C,{link:"",onClick:z=>y(D.row,D.$index),size:"small"},{default:j(()=>[dt(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),M(I,{direction:"vertical"}),M(C,{link:"",size:"small",style:{color:"#ff4d4f"},onClick:z=>((P,_)=>{co.confirm("\u786E\u8BA4\u79FB\u9664\u8BE5\u5C5E\u6027\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E \u8BA4",cancelButtonText:"\u53D6 \u6D88"}).then(()=>{i.value.splice(_,1),p.value.splice(_,1);const B=v().moddle.create(`${n}:Properties`,{values:p.value});g(B),f()}).catch(()=>{})})(D.row,D.$index)},{default:j(()=>[dt(" \u79FB\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),It("div",t0,[M(h,{type:"primary",preIcon:"ep:plus",title:"\u6DFB\u52A0\u5C5E\u6027",onClick:x[0]||(x[0]=D=>y(null,-1))})]),M(R,{modelValue:N(a),"onUpdate:modelValue":x[4]||(x[4]=D=>un(a)?a.value=D:null),title:"\u5C5E\u6027\u914D\u7F6E",width:"600px","append-to-body":"","destroy-on-close":""},{footer:j(()=>[M(C,{onClick:x[3]||(x[3]=D=>a.value=!1)},{default:j(()=>[dt("\u53D6 \u6D88")]),_:1}),M(C,{type:"primary",onClick:b},{default:j(()=>[dt("\u786E \u5B9A")]),_:1})]),default:j(()=>[M(T,{model:N(r),"label-width":"80px",ref_key:"attributeFormRef",ref:d},{default:j(()=>[M(E,{label:"\u5C5E\u6027\u540D\uFF1A",prop:"name"},{default:j(()=>[M(m,{modelValue:N(r).name,"onUpdate:modelValue":x[1]||(x[1]=D=>N(r).name=D),clearable:""},null,8,["modelValue"])]),_:1}),M(E,{label:"\u5C5E\u6027\u503C\uFF1A",prop:"value"},{default:j(()=>[M(m,{modelValue:N(r).value,"onUpdate:modelValue":x[2]||(x[2]=D=>N(r).value=D),clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),n0={class:"panel-tab__content"},i0={class:"element-drawer__button"},r0={class:"listener-filed__title"},o0={class:"element-drawer__button"},a0=pe({name:"UserTaskListeners",__name:"UserTaskListeners",props:{id:String,type:String},setup(t){const e=t,n=yr("prefix"),i=yr("width"),r=W([]),o=W(Wb),a=W(Mh),c=W(!1),l=W({}),u=W(Rh),p=W([]),d=W(!1),v=W(-1),f=W(-1),y=W({}),b=W(),g=W(),w=W(),x=W(),S=W(),C=()=>{var E,T;b.value=(window==null?void 0:window.bpmnInstances).bpmnElement,w.value=[],g.value=((T=(E=b.value.businessObject)==null?void 0:E.extensionElements)==null?void 0:T.values.filter(R=>R.$type===`${n}:TaskListener`))??[],r.value=g.value.map(R=>qb(R))},I=(E,T)=>{E?(l.value=Hb(E),v.value=T):(l.value={},v.value=-1),E&&E.fields?p.value=E.fields.map(R=>({...R,fieldType:R.string?"string":"expression"})):(p.value=[],l.value.fields=[]),c.value=!0,Fe(()=>{x.value&&x.value.clearValidate()})},s=async()=>{var T,R,D;if(!await x.value.validate())return;const E=Ub(l.value,!0,n);v.value===-1?(g.value.push(E),r.value.push(l.value)):(g.value.splice(v.value,1,E),r.value.splice(v.value,1,l.value)),w.value=((D=(R=(T=b.value.businessObject)==null?void 0:T.extensionElements)==null?void 0:R.values)==null?void 0:D.filter(z=>z.$type!==`${n}:TaskListener`))??[],Jc(b.value,w.value.concat(g.value)),c.value=!1,l.value={}},h=(E,T)=>{y.value=E?JSON.parse(JSON.stringify(E)):{},f.value=E?T:-1,d.value=!0,Fe(()=>{S.value&&S.value.clearValidate()})},m=async()=>{await S.value.validate()&&(f.value===-1?(p.value.push(y.value),l.value.fields.push(y.value)):(p.value.splice(f.value,1,y.value),l.value.fields.splice(f.value,1,y.value)),d.value=!1,Fe(()=>{y.value={}}))};return ue(()=>e.id,E=>{E&&E.length&&Fe(()=>{C()})},{immediate:!0}),(E,T)=>{const R=ul,D=lo,z=Hh,P=pl,_=mo,B=uo,V=po,G=Sn,J=wn,tt=oi,ct=ll,at=V0,H=Da;return nt(),Nt("div",n0,[M(P,{data:N(r),size:"small",border:""},{default:j(()=>[M(R,{label:"\u5E8F\u53F7",width:"50px",type:"index"}),M(R,{label:"\u4E8B\u4EF6\u7C7B\u578B","min-width":"80px","show-overflow-tooltip":"",formatter:q=>N(o)[q.event]},null,8,["formatter"]),M(R,{label:"\u4E8B\u4EF6id","min-width":"80px",prop:"id","show-overflow-tooltip":""}),M(R,{label:"\u76D1\u542C\u5668\u7C7B\u578B","min-width":"80px","show-overflow-tooltip":"",formatter:q=>N(a)[q.listenerType]},null,8,["formatter"]),M(R,{label:"\u64CD\u4F5C",width:"90px"},{default:j(q=>[M(D,{size:"small",link:"",onClick:xt=>I(q.row,q.$index)},{default:j(()=>[dt("\u7F16\u8F91")]),_:2},1032,["onClick"]),M(z,{direction:"vertical"}),M(D,{size:"small",link:"",style:{color:"#ff4d4f"},onClick:xt=>((Kt,ce)=>{co.confirm("\u786E\u8BA4\u79FB\u9664\u8BE5\u76D1\u542C\u5668\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E \u8BA4",cancelButtonText:"\u53D6 \u6D88"}).then(()=>{g.value.splice(ce,1),r.value.splice(ce,1),Jc(b.value,w.value.concat(g.value))}).catch(()=>{})})(q.row,q.$index)},{default:j(()=>[dt("\u79FB\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),It("div",i0,[M(_,{size:"small",type:"primary",preIcon:"ep:plus",title:"\u6DFB\u52A0\u76D1\u542C\u5668",onClick:T[0]||(T[0]=q=>I(null))})]),M(at,{modelValue:N(c),"onUpdate:modelValue":T[15]||(T[15]=q=>un(c)?c.value=q:null),title:"\u4EFB\u52A1\u76D1\u542C\u5668",size:`${N(i)}px`,"append-to-body":"","destroy-on-close":""},{default:j(()=>[M(tt,{size:"small",model:N(l),"label-width":"96px",ref_key:"listenerFormRef",ref:x},{default:j(()=>[M(G,{label:"\u4E8B\u4EF6\u7C7B\u578B",prop:"event",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(V,{modelValue:N(l).event,"onUpdate:modelValue":T[1]||(T[1]=q=>N(l).event=q)},{default:j(()=>[(nt(!0),Nt(ln,null,ho(Object.keys(N(o)),q=>(nt(),Ct(B,{key:q,label:N(o)[q],value:q},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),M(G,{label:"\u76D1\u542C\u5668ID",prop:"id",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(J,{modelValue:N(l).id,"onUpdate:modelValue":T[2]||(T[2]=q=>N(l).id=q),clearable:""},null,8,["modelValue"])]),_:1}),M(G,{label:"\u76D1\u542C\u5668\u7C7B\u578B",prop:"listenerType",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(V,{modelValue:N(l).listenerType,"onUpdate:modelValue":T[3]||(T[3]=q=>N(l).listenerType=q)},{default:j(()=>[(nt(!0),Nt(ln,null,ho(Object.keys(N(a)),q=>(nt(),Ct(B,{key:q,label:N(a)[q],value:q},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),N(l).listenerType==="classListener"?(nt(),Ct(G,{label:"Java\u7C7B",prop:"class",key:"listener-class",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(J,{modelValue:N(l).class,"onUpdate:modelValue":T[4]||(T[4]=q=>N(l).class=q),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0),N(l).listenerType==="expressionListener"?(nt(),Ct(G,{label:"\u8868\u8FBE\u5F0F",prop:"expression",key:"listener-expression",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(J,{modelValue:N(l).expression,"onUpdate:modelValue":T[5]||(T[5]=q=>N(l).expression=q),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0),N(l).listenerType==="delegateExpressionListener"?(nt(),Ct(G,{label:"\u4EE3\u7406\u8868\u8FBE\u5F0F",prop:"delegateExpression",key:"listener-delegate",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(J,{modelValue:N(l).delegateExpression,"onUpdate:modelValue":T[6]||(T[6]=q=>N(l).delegateExpression=q),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0),N(l).listenerType==="scriptListener"?(nt(),Nt(ln,{key:3},[M(G,{label:"\u811A\u672C\u683C\u5F0F",prop:"scriptFormat",key:"listener-script-format",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u811A\u672C\u683C\u5F0F"}},{default:j(()=>[M(J,{modelValue:N(l).scriptFormat,"onUpdate:modelValue":T[7]||(T[7]=q=>N(l).scriptFormat=q),clearable:""},null,8,["modelValue"])]),_:1}),M(G,{label:"\u811A\u672C\u7C7B\u578B",prop:"scriptType",key:"listener-script-type",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u9009\u62E9\u811A\u672C\u7C7B\u578B"}},{default:j(()=>[M(V,{modelValue:N(l).scriptType,"onUpdate:modelValue":T[8]||(T[8]=q=>N(l).scriptType=q)},{default:j(()=>[M(B,{label:"\u5185\u8054\u811A\u672C",value:"inlineScript"}),M(B,{label:"\u5916\u90E8\u811A\u672C",value:"externalScript"})]),_:1},8,["modelValue"])]),_:1}),N(l).scriptType==="inlineScript"?(nt(),Ct(G,{label:"\u811A\u672C\u5185\u5BB9",prop:"value",key:"listener-script",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u811A\u672C\u5185\u5BB9"}},{default:j(()=>[M(J,{modelValue:N(l).value,"onUpdate:modelValue":T[9]||(T[9]=q=>N(l).value=q),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0),N(l).scriptType==="externalScript"?(nt(),Ct(G,{label:"\u8D44\u6E90\u5730\u5740",prop:"resource",key:"listener-resource",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u8D44\u6E90\u5730\u5740"}},{default:j(()=>[M(J,{modelValue:N(l).resource,"onUpdate:modelValue":T[10]||(T[10]=q=>N(l).resource=q),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0)],64)):kt("",!0),N(l).event==="timeout"?(nt(),Nt(ln,{key:4},[M(G,{label:"\u5B9A\u65F6\u5668\u7C7B\u578B",prop:"eventDefinitionType",key:"eventDefinitionType"},{default:j(()=>[M(V,{modelValue:N(l).eventDefinitionType,"onUpdate:modelValue":T[11]||(T[11]=q=>N(l).eventDefinitionType=q)},{default:j(()=>[M(B,{label:"\u65E5\u671F",value:"date"}),M(B,{label:"\u6301\u7EED\u65F6\u957F",value:"duration"}),M(B,{label:"\u5FAA\u73AF",value:"cycle"}),M(B,{label:"\u65E0",value:"null"})]),_:1},8,["modelValue"])]),_:1}),N(l).eventDefinitionType&&N(l).eventDefinitionType!=="null"?(nt(),Ct(G,{label:"\u5B9A\u65F6\u5668",prop:"eventTimeDefinitions",key:"eventTimeDefinitions",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u5B9A\u65F6\u5668\u914D\u7F6E"}},{default:j(()=>[M(J,{modelValue:N(l).eventTimeDefinitions,"onUpdate:modelValue":T[12]||(T[12]=q=>N(l).eventTimeDefinitions=q),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0)],64)):kt("",!0)]),_:1},8,["model"]),M(z),It("p",r0,[It("span",null,[M(ct,{icon:"ep:menu"}),dt("\u6CE8\u5165\u5B57\u6BB5\uFF1A")]),M(D,{size:"small",type:"primary",onClick:T[13]||(T[13]=q=>h(null))},{default:j(()=>[dt("\u6DFB\u52A0\u5B57\u6BB5")]),_:1})]),M(P,{data:N(p),size:"small","max-height":"240",border:"",fit:"",style:{flex:"none"}},{default:j(()=>[M(R,{label:"\u5E8F\u53F7",width:"50px",type:"index"}),M(R,{label:"\u5B57\u6BB5\u540D\u79F0","min-width":"100px",prop:"name"}),M(R,{label:"\u5B57\u6BB5\u7C7B\u578B","min-width":"80px","show-overflow-tooltip":"",formatter:q=>N(u)[q.fieldType]},null,8,["formatter"]),M(R,{label:"\u5B57\u6BB5\u503C/\u8868\u8FBE\u5F0F","min-width":"100px","show-overflow-tooltip":"",formatter:q=>q.string||q.expression},null,8,["formatter"]),M(R,{label:"\u64CD\u4F5C",width:"100px"},{default:j(q=>[M(D,{size:"small",link:"",onClick:xt=>h(q.row,q.$index)},{default:j(()=>[dt("\u7F16\u8F91")]),_:2},1032,["onClick"]),M(z,{direction:"vertical"}),M(D,{size:"small",link:"",style:{color:"#ff4d4f"},onClick:xt=>((Kt,ce)=>{co.confirm("\u786E\u8BA4\u79FB\u9664\u8BE5\u5B57\u6BB5\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E \u8BA4",cancelButtonText:"\u53D6 \u6D88"}).then(()=>{p.value.splice(ce,1),l.value.fields.splice(ce,1)}).catch(()=>{})})(q.row,q.$index)},{default:j(()=>[dt("\u79FB\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),It("div",o0,[M(D,{size:"small",onClick:T[14]||(T[14]=q=>c.value=!1)},{default:j(()=>[dt("\u53D6 \u6D88")]),_:1}),M(D,{size:"small",type:"primary",onClick:s},{default:j(()=>[dt("\u4FDD \u5B58")]),_:1})])]),_:1},8,["modelValue","size"]),M(H,{title:"\u5B57\u6BB5\u914D\u7F6E",modelValue:N(d),"onUpdate:modelValue":T[21]||(T[21]=q=>un(d)?d.value=q:null),width:"600px","append-to-body":"","destroy-on-close":""},{footer:j(()=>[M(D,{size:"small",onClick:T[20]||(T[20]=q=>d.value=!1)},{default:j(()=>[dt("\u53D6 \u6D88")]),_:1}),M(D,{size:"small",type:"primary",onClick:m},{default:j(()=>[dt("\u786E \u5B9A")]),_:1})]),default:j(()=>[M(tt,{model:N(y),size:"small","label-width":"96px",ref_key:"listenerFieldFormRef",ref:S,style:{height:"136px"}},{default:j(()=>[M(G,{label:"\u5B57\u6BB5\u540D\u79F0\uFF1A",prop:"name",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(J,{modelValue:N(y).name,"onUpdate:modelValue":T[16]||(T[16]=q=>N(y).name=q),clearable:""},null,8,["modelValue"])]),_:1}),M(G,{label:"\u5B57\u6BB5\u7C7B\u578B\uFF1A",prop:"fieldType",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(V,{modelValue:N(y).fieldType,"onUpdate:modelValue":T[17]||(T[17]=q=>N(y).fieldType=q)},{default:j(()=>[(nt(!0),Nt(ln,null,ho(Object.keys(N(u)),q=>(nt(),Ct(B,{key:q,label:N(u)[q],value:q},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),N(y).fieldType==="string"?(nt(),Ct(G,{label:"\u5B57\u6BB5\u503C\uFF1A",prop:"string",key:"field-string",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(J,{modelValue:N(y).string,"onUpdate:modelValue":T[18]||(T[18]=q=>N(y).string=q),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0),N(y).fieldType==="expression"?(nt(),Ct(G,{label:"\u8868\u8FBE\u5F0F\uFF1A",prop:"expression",key:"field-expression",rules:{required:!0,trigger:["blur","change"]}},{default:j(()=>[M(J,{modelValue:N(y).expression,"onUpdate:modelValue":T[19]||(T[19]=q=>N(y).expression=q),clearable:""},null,8,["modelValue"])]),_:1})):kt("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),La=pe({name:"MyPropertiesPanel",__name:"PropertiesPanel",props:{bpmnModeler:{type:Object,default:()=>{}},prefix:{type:String,default:"camunda"},width:{type:Number,default:480},idEditDisabled:{type:Boolean,default:!1},model:Object},setup(t){const e=t,n=W("base"),i=W(""),r=W(""),o=W({}),a=W(!1),c=W(!1),l=W();Ra("prefix",e.prefix),Ra("width",e.width);const u=()=>window==null?void 0:window.bpmnInstances,p=ue(()=>e.bpmnModeler,()=>{e.bpmnModeler&&(window.bpmnInstances={modeler:e.bpmnModeler,modeling:e.bpmnModeler.get("modeling"),moddle:e.bpmnModeler.get("moddle"),eventBus:e.bpmnModeler.get("eventBus"),bpmnFactory:e.bpmnModeler.get("bpmnFactory"),elementFactory:e.bpmnModeler.get("elementFactory"),elementRegistry:e.bpmnModeler.get("elementRegistry"),replace:e.bpmnModeler.get("replace"),selection:e.bpmnModeler.get("selection")},d(),p())},{immediate:!0}),d=()=>{v(null),e.bpmnModeler.on("import.done",f=>{v(null)}),e.bpmnModeler.on("selection.changed",({newSelection:f})=>{v(f[0]||null)}),e.bpmnModeler.on("element.changed",({element:f})=>{f&&f.id===i.value&&v(f)})},v=f=>{let y=f;y||(y=u().elementRegistry.find(b=>b.type==="bpmn:Process")??u().elementRegistry.find(b=>b.type==="bpmn:Collaboration")),y&&(u().bpmnElement=y,l.value=y,i.value=y.id,r.value=y.type.split(":")[1]||"",o.value=JSON.parse(JSON.stringify(y.businessObject)),a.value=!(r.value!=="SequenceFlow"||!y.source||y.source.type.indexOf("StartEvent")!==-1),c.value=r.value==="UserTask"||r.value==="StartEvent")};return jn(()=>{window.bpmnInstances=null}),ue(()=>i.value,()=>{n.value="base"}),(f,y)=>{const b=ll,g=ex,w=qh,x=O0("router-link"),S=tx;return nt(),Nt("div",{class:"process-panel__container",style:ik({width:`${t.width}px`})},[M(S,{modelValue:N(n),"onUpdate:modelValue":y[0]||(y[0]=C=>un(n)?n.value=C:null)},{default:j(()=>[M(g,{name:"base"},{title:j(()=>[M(b,{icon:"ep:info-filled"}),dt(" \u5E38\u89C4")]),default:j(()=>[M(eA,{"id-edit-disabled":t.idEditDisabled,"business-object":N(o),type:N(r),model:t.model},null,8,["id-edit-disabled","business-object","type","model"])]),_:1}),N(r)==="Process"?(nt(),Ct(g,{name:"condition",key:"message"},{title:j(()=>[M(b,{icon:"ep:comment"}),dt("\u6D88\u606F\u4E0E\u4FE1\u53F7")]),default:j(()=>[M(wA)]),_:1})):kt("",!0),N(a)?(nt(),Ct(g,{name:"condition",key:"condition"},{title:j(()=>[M(b,{icon:"ep:promotion"}),dt("\u6D41\u8F6C\u6761\u4EF6")]),default:j(()=>[M(bA,{"business-object":N(o),type:N(r)},null,8,["business-object","type"])]),_:1})):kt("",!0),N(c)?(nt(),Ct(g,{name:"condition",key:"form"},{title:j(()=>[M(b,{icon:"ep:list"}),dt("\u8868\u5355")]),default:j(()=>[dt(" \u53CB\u60C5\u63D0\u793A\uFF1A\u4F7F\u7528 "),M(x,{to:{path:"/bpm/manager/form"}},{default:j(()=>[M(w,{type:"danger"},{default:j(()=>[dt("\u6D41\u7A0B\u8868\u5355")]),_:1})]),_:1}),dt(" \u66FF\u4EE3\uFF0C\u63D0\u4F9B\u66F4\u597D\u7684\u8868\u5355\u8BBE\u8BA1\u529F\u80FD ")]),_:1})):kt("",!0),N(r).indexOf("Task")!==-1?(nt(),Ct(g,{name:"task",key:"task"},{title:j(()=>[M(b,{icon:"ep:checked"}),dt("\u4EFB\u52A1")]),default:j(()=>[M(fA,{id:N(i),type:N(r)},null,8,["id","type"])]),_:1})):kt("",!0),N(r).indexOf("Task")!==-1?(nt(),Ct(g,{name:"multiInstance",key:"multiInstance"},{title:j(()=>[M(b,{icon:"ep:help-filled"}),dt("\u591A\u5B9E\u4F8B")]),default:j(()=>[M(yA,{"business-object":N(o),type:N(r)},null,8,["business-object","type"])]),_:1})):kt("",!0),M(g,{name:"listeners",key:"listeners"},{title:j(()=>[M(b,{icon:"ep:bell-filled"}),dt("\u6267\u884C\u76D1\u542C\u5668")]),default:j(()=>[M(Zb,{id:N(i),type:N(r)},null,8,["id","type"])]),_:1}),N(r)==="UserTask"?(nt(),Ct(g,{name:"taskListeners",key:"taskListeners"},{title:j(()=>[M(b,{icon:"ep:bell-filled"}),dt("\u4EFB\u52A1\u76D1\u542C\u5668")]),default:j(()=>[M(a0,{id:N(i),type:N(r)},null,8,["id","type"])]),_:1})):kt("",!0),M(g,{name:"extensions",key:"extensions"},{title:j(()=>[M(b,{icon:"ep:circle-plus-filled"}),dt("\u6269\u5C55\u5C5E\u6027")]),default:j(()=>[M(e0,{id:N(i),type:N(r)},null,8,["id","type"])]),_:1}),M(g,{name:"other",key:"other"},{title:j(()=>[M(b,{icon:"ep:promotion"}),dt("\u5176\u4ED6")]),default:j(()=>[M(aA,{id:N(i)},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])],4)}}}),La.install=function(t){t.component(La.name,La)};let s0,c0;s0={class:"my-process-designer"},c0={class:"my-process-designer__container"},ja=pe({name:"MyProcessViewer",__name:"ProcessViewer",props:{value:{type:String,default:""},prefix:{type:String,default:"camunda"},activityData:{type:Array,default:()=>[]},processInstanceData:{type:Object,default:()=>{}},taskData:{type:Array,default:()=>[]}},emits:["destroy"],setup(t,{emit:e}){const n=t;let i;Ra("configGlobal",n);const r=W(""),o=W([]),a=W(void 0),c=W([]),l=W(),u=W(null),p=W(null),d=async x=>{let S=`Process_${new Date().getTime()}`,C=`\u4E1A\u52A1\u6D41\u7A0B_${new Date().getTime()}`,I=x||Ug(S,C,n.prefix);try{let{warnings:s}=await i.importXML(I);s&&s.length&&s.forEach(h=>{}),await v(),i.get("canvas").zoom("fit-viewport","auto")}catch{}},v=async()=>{var s;const x=o.value;if(x.length===0)return;let S=i.get("canvas"),C=x.find(h=>!h.endTime),I=x[x.length-1];(s=i.getDefinitions().rootElements[0].flowElements)==null||s.forEach(h=>{var E,T,R;let m=x.find(D=>D.key===h.id);if(m){if(h.$type==="bpmn:UserTask"){const D=c.value.find(P=>P.id===m.taskId);if(!D||(S.addMarker(h.id,y(D.result)),D.result!==2))return;const z=b(m);z==null||z.forEach(P=>{let _=x.find(B=>B.key===P.targetRef.id);_?S.addMarker(P.id,_.endTime?"highlight":"highlight-todo"):P.targetRef.$type==="bpmn:ExclusiveGateway"?(S.addMarker(P.id,m.endTime?"highlight":"highlight-todo"),S.addMarker(P.targetRef.id,m.endTime?"highlight":"highlight-todo")):P.targetRef.$type==="bpmn:EndEvent"&&(C||I.key!==h.id||(S.addMarker(P.id,"highlight"),S.addMarker(P.targetRef.id,"highlight")),m.endTime||(S.addMarker(P.id,"highlight-todo"),S.addMarker(P.targetRef.id,"highlight-todo")))})}else if(h.$type==="bpmn:ExclusiveGateway"){let D,z;S.addMarker(h.id,f(m)),(E=h.outgoing)==null||E.forEach(P=>{let _=x.find(B=>B.key===P.targetRef.id);_&&(z&&z.type!=="endEvent"||(D=P,z=_))}),D&&z&&S.addMarker(D.id,f(z))}else if(h.$type==="bpmn:ParallelGateway")S.addMarker(h.id,f(m)),(T=h.outgoing)==null||T.forEach(D=>{const z=x.find(P=>P.key===D.targetRef.id);z&&(S.addMarker(D.id,f(z)),S.addMarker(D.targetRef.id,f(z)))});else if(h.$type==="bpmn:StartEvent")(R=h.outgoing)==null||R.forEach(D=>{x.find(z=>z.key===D.targetRef.id)&&(S.addMarker(D.id,"highlight"),S.addMarker(h.id,"highlight"))});else if(h.$type==="bpmn:EndEvent"){if(!a.value||a.value.result===1)return;S.addMarker(h.id,y(a.value.result))}else if(h.$type==="bpmn:ServiceTask"&&(m.startTime>0&&m.endTime===0&&S.addMarker(h.id,y(1)),m.endTime>0)){S.addMarker(h.id,y(2));const D=b(m);D==null||D.forEach(z=>{S.addMarker(z.id,y(2))})}}})},f=x=>x.endTime?"highlight":"highlight-todo",y=x=>x===1?"highlight-todo":x===2?"highlight":x===3?"highlight-reject":x===4?"highlight-cancel":"",b=x=>{if(x.outgoing&&x.outgoing.length>0)return x.outgoing;const S=i.getDefinitions().rootElements[0].flowElements,C=[];return S.forEach(I=>{I.$type==="bpmn:SequenceFlow"&&I.sourceRef.id===x.key&&C.push(I)}),C},g=x=>{x.value=x,!u.value&&(u.value={}),!p.value&&(p.value=i.get("overlays"));const S=o.value.find(C=>C.key===x.value.id);if(!u.value[x.value.id]&&x.value.type!=="bpmn:Process"){let C=`<div class="element-overlays">
            <p>Elemet id: ${x.value.id}</p>
            <p>Elemet type: ${x.value.type}</p>
          </div>`;if(x.value.type==="bpmn:StartEvent"&&a.value)C=`<p>\u53D1\u8D77\u4EBA\uFF1A${a.value.startUser.nickname}</p>
                  <p>\u90E8\u95E8\uFF1A${a.value.startUser.deptName}</p>
                  <p>\u521B\u5EFA\u65F6\u95F4\uFF1A${fo(a.value.createTime)}`;else if(x.value.type==="bpmn:UserTask"){let I=c.value.find(m=>m.id===S.taskId);if(!I)return;let s=F0($0.BPM_PROCESS_INSTANCE_RESULT),h="";s.forEach(m=>{m.value==I.result&&(h=m.label)}),C=`<p>\u5BA1\u6279\u4EBA\uFF1A${I.assigneeUser.nickname}</p>
                  <p>\u90E8\u95E8\uFF1A${I.assigneeUser.deptName}</p>
                  <p>\u7ED3\u679C\uFF1A${h}</p>
                  <p>\u521B\u5EFA\u65F6\u95F4\uFF1A${fo(I.createTime)}</p>`,I.endTime&&(C+=`<p>\u7ED3\u675F\u65F6\u95F4\uFF1A${fo(I.endTime)}</p>`),I.reason&&(C+=`<p>\u5BA1\u6279\u5EFA\u8BAE\uFF1A${I.reason}</p>`)}else if(x.value.type==="bpmn:ServiceTask"&&a.value)S.startTime>0&&(C=`<p>\u521B\u5EFA\u65F6\u95F4\uFF1A${fo(S.startTime)}</p>`),S.endTime>0&&(C+=`<p>\u7ED3\u675F\u65F6\u95F4\uFF1A${fo(S.endTime)}</p>`);else if(x.value.type==="bpmn:EndEvent"&&a.value){let I=F0($0.BPM_PROCESS_INSTANCE_RESULT),s="";I.forEach(h=>{h.value==a.value.result&&(s=h.label)}),C=`<p>\u7ED3\u679C\uFF1A${s}</p>`,a.value.endTime&&(C+=`<p>\u7ED3\u675F\u65F6\u95F4\uFF1A${fo(a.value.endTime)}</p>`)}u.value[x.value.id]=jt(p.value).add(x.value,{position:{left:0,bottom:0},html:`<div class="element-overlays">${C}</div>`})}},w=x=>{jt(p.value).remove({element:x}),u.value[x.id]=null};return Ia(()=>{r.value=n.value,o.value=n.activityData,i||(i=new qn({container:l.value,bpmnRenderer:{}})),d(r.value),(()=>{const x=i.get("eventBus");x.on("element.hover",function(S){let C=S?S.element:null;g(C)}),x.on("element.out",function(S){let C=S?S.element:null;w(C)})})()}),jn(()=>{i&&i.destroy(),e("destroy",i),i=null}),ue(()=>n.value,x=>{r.value=x,d(r.value)}),ue(()=>n.activityData,x=>{o.value=x,d(r.value)}),ue(()=>n.processInstanceData,x=>{a.value=x,d(r.value)}),ue(()=>n.taskData,x=>{c.value=x,d(r.value)}),(x,S)=>(nt(),Nt("div",s0,[It("div",c0,[It("div",{class:"my-process-designer__canvas",style:{height:"760px"},ref_key:"bpmnCanvas",ref:l},null,512)])]))}}),ja.install=function(t){t.component(ja.name,ja)}});export{Ba as P,Oa as _,dk as __tla,A as a,z0 as b,Ne as c,Wh as d,Mt as e,Kh as f,ai as g,La as h,wt as i,ja as j};
