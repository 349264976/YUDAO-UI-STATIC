import{cf as ve,aP as me,ag as pe,aU as be,bX as ge,aW as S,d as V,cg as q,ch as ke,ci as _e,bn as we,ah as he,cj as xe,r as z,ck as Ie,c4 as ye,b as k,af as G,a9 as ze,A as Ce,o as C,q as H,i as o,w as p,g as d,V as r,a,au as J,aN as Oe,a1 as O,aT as _,cl as Ne,c as E,F as Q,cm as Te,cn as Ae,co as Le,cp as Re,ay as Xe,cq as Ye,cr as Ee,k as Be,B as Fe,a3 as $e,al as Pe,Y as We,cs as je,aj as De,ct as A,bk as y,cu as Me,an as Se,__tla as Ve}from"./index-0f589822.js";let U,qe=Promise.all([(()=>{try{return Ve}catch{}})()]).then(async()=>{function L(h,N,b){var n=!0,f=!0;if(typeof h!="function")throw new TypeError("Expected a function");return ve(b)&&(n="leading"in b?!!b.leading:n,f="trailing"in b?!!b.trailing:f),me(h,N,{leading:n,maxWait:N,trailing:f})}const Z=pe({urlList:{type:be(Array),default:()=>ge([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),K={close:()=>!0,switch:h=>S(h)},ee=["src"],ae=V({name:"ElImageViewer"});U=Se(De(V({...ae,props:Z,emits:K,setup(h,{expose:N,emit:b}){const n=h,f={CONTAIN:{name:"contain",icon:q(ke)},ORIGINAL:{name:"original",icon:q(_e)}},{t:se}=we(),l=he("image-viewer"),{nextZIndex:ne}=xe(),R=z(),B=z([]),F=Ie(),x=z(!0),g=z(n.initialIndex),T=ye(f.CONTAIN),i=z({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),te=k(()=>{const{urlList:e}=n;return e.length<=1}),$=k(()=>g.value===0),P=k(()=>g.value===n.urlList.length-1),le=k(()=>n.urlList[g.value]),oe=k(()=>[l.e("btn"),l.e("prev"),l.is("disabled",!n.infinite&&$.value)]),ie=k(()=>[l.e("btn"),l.e("next"),l.is("disabled",!n.infinite&&P.value)]),ce=k(()=>{const{scale:e,deg:s,offsetX:t,offsetY:u,enableTransition:c}=i.value;let v=t/e,m=u/e;switch(s%360){case 90:case-270:[v,m]=[m,-v];break;case 180:case-180:[v,m]=[-v,-m];break;case 270:case-90:[v,m]=[-m,v]}const I={transform:`scale(${e}) rotate(${s}deg) translate(${v}px, ${m}px)`,transition:c?"transform .3s":""};return T.value.name===f.CONTAIN.name&&(I.maxWidth=I.maxHeight="100%"),I}),ue=k(()=>S(n.zIndex)?n.zIndex:ne());function X(){F.stop(),b("close")}function re(){x.value=!1}function de(e){x.value=!1,e.target.alt=se("el.image.error")}function fe(e){if(x.value||e.button!==0||!R.value)return;i.value.enableTransition=!1;const{offsetX:s,offsetY:t}=i.value,u=e.pageX,c=e.pageY,v=L(I=>{i.value={...i.value,offsetX:s+I.pageX-u,offsetY:t+I.pageY-c}}),m=A(document,"mousemove",v);A(document,"mouseup",()=>{m()}),e.preventDefault()}function W(){i.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function j(){if(x.value)return;const e=Me(f),s=Object.values(f),t=T.value.name,u=(s.findIndex(c=>c.name===t)+1)%e.length;T.value=f[e[u]],W()}function Y(e){const s=n.urlList.length;g.value=(e+s)%s}function D(){$.value&&!n.infinite||Y(g.value-1)}function M(){P.value&&!n.infinite||Y(g.value+1)}function w(e,s={}){if(x.value)return;const{zoomRate:t,rotateDeg:u,enableTransition:c}={zoomRate:n.zoomRate,rotateDeg:90,enableTransition:!0,...s};switch(e){case"zoomOut":i.value.scale>.2&&(i.value.scale=Number.parseFloat((i.value.scale/t).toFixed(3)));break;case"zoomIn":i.value.scale<7&&(i.value.scale=Number.parseFloat((i.value.scale*t).toFixed(3)));break;case"clockwise":i.value.deg+=u;break;case"anticlockwise":i.value.deg-=u}i.value.enableTransition=c}return G(le,()=>{ze(()=>{const e=B.value[0];e!=null&&e.complete||(x.value=!0)})}),G(g,e=>{W(),b("switch",e)}),Ce(()=>{var e,s;(function(){const t=L(c=>{switch(c.code){case y.esc:n.closeOnPressEscape&&X();break;case y.space:j();break;case y.left:D();break;case y.up:w("zoomIn");break;case y.right:M();break;case y.down:w("zoomOut")}}),u=L(c=>{w((c.deltaY||c.deltaX)<0?"zoomIn":"zoomOut",{zoomRate:n.zoomRate,enableTransition:!1})});F.run(()=>{A(document,"keydown",t),A(document,"wheel",u)})})(),(s=(e=R.value)==null?void 0:e.focus)==null||s.call(e)}),N({setActiveItem:Y}),(e,s)=>(C(),H(je,{to:"body",disabled:!e.teleported},[o(We,{name:"viewer-fade",appear:""},{default:p(()=>[d("div",{ref_key:"wrapper",ref:R,tabindex:-1,class:r(a(l).e("wrapper")),style:J({zIndex:a(ue)})},[d("div",{class:r(a(l).e("mask")),onClick:s[0]||(s[0]=Oe(t=>e.hideOnClickModal&&X(),["self"]))},null,2),O(" CLOSE "),d("span",{class:r([a(l).e("btn"),a(l).e("close")]),onClick:X},[o(a(_),null,{default:p(()=>[o(a(Ne))]),_:1})],2),O(" ARROW "),a(te)?O("v-if",!0):(C(),E(Q,{key:0},[d("span",{class:r(a(oe)),onClick:D},[o(a(_),null,{default:p(()=>[o(a(Te))]),_:1})],2),d("span",{class:r(a(ie)),onClick:M},[o(a(_),null,{default:p(()=>[o(a(Ae))]),_:1})],2)],64)),O(" ACTIONS "),d("div",{class:r([a(l).e("btn"),a(l).e("actions")])},[d("div",{class:r(a(l).e("actions__inner"))},[o(a(_),{onClick:s[1]||(s[1]=t=>w("zoomOut"))},{default:p(()=>[o(a(Le))]),_:1}),o(a(_),{onClick:s[2]||(s[2]=t=>w("zoomIn"))},{default:p(()=>[o(a(Re))]),_:1}),d("i",{class:r(a(l).e("actions__divider"))},null,2),o(a(_),{onClick:j},{default:p(()=>[(C(),H(Xe(a(T).icon)))]),_:1}),d("i",{class:r(a(l).e("actions__divider"))},null,2),o(a(_),{onClick:s[3]||(s[3]=t=>w("anticlockwise"))},{default:p(()=>[o(a(Ye))]),_:1}),o(a(_),{onClick:s[4]||(s[4]=t=>w("clockwise"))},{default:p(()=>[o(a(Ee))]),_:1})],2)],2),O(" CANVAS "),d("div",{class:r(a(l).e("canvas"))},[(C(!0),E(Q,null,Be(e.urlList,(t,u)=>Fe((C(),E("img",{ref_for:!0,ref:c=>B.value[u]=c,key:t,src:t,style:J(a(ce)),class:r(a(l).e("img")),onLoad:re,onError:de,onMousedown:fe},null,46,ee)),[[$e,u===g.value]])),128))],2),Pe(e.$slots,"default")],6)]),_:3})],8,["disabled"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]))});export{U as E,qe as __tla};
