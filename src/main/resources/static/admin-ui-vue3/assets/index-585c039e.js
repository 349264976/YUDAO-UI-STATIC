import{_ as e}from"./XModal.vue_vue_type_script_setup_true_lang-c47b87cf.js";import{_ as t}from"./Descriptions-8db90f03.js";import{_ as o}from"./Form-a0e23abc.js";import{_ as i}from"./ContentWrap.vue_vue_type_script_setup_true_lang-63555901.js";import{_ as s}from"./XTable.vue_vue_type_style_index_0_lang-9c560634.js";import{_ as l}from"./XTextButton-ab77381a.js";import"./base-085523fd.js";/* empty css               */import{_ as r}from"./XButton-39866472.js";import{a}from"./index-a7ef0ded.js";import{i as n,D as p}from"./dict-3e42505d.js";import{u as m}from"./useI18n-56d4bc42.js";import{r as d}from"./formRules-a3380b28.js";import{u as c}from"./useVxeCrudSchemas-8bec068b.js";import{A as u,d as f,r as _,Q as j,o as y,i as b,l as h,w as T,f as v,b as k,k as S,t as g,F as x,z as w,a as C,h as V,M as I}from"./runtime-core.esm-bundler-ccc21fcd.js";import{u as P}from"./useMessage-5e709b20.js";import{u as F}from"./useXTable-bf420a68.js";import{E as z}from"./index-795de047.js";/* empty css                     */import"./propTypes-5cfdbdab.js";import"./index-be3181b1.js";import"./aria-8fadfbe9.js";import"./runtime-dom.esm-bundler-daa7e741.js";import"./el-notification-c7d5f4ea.js";import"./el-button-6b012e5e.js";import"./index-4665dced.js";import"./index-c2caee16.js";import"./is-a7957d81.js";import"./focus-trap-f53979c5.js";import"./index-7a379d2e.js";import"./el-descriptions-item-d373bc22.js";import"./DictTag.vue_vue_type_script_lang-a5ff2643.js";import"./color-a8b4eb58.js";import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./Icon.vue_vue_type_script_setup_true_lang-4448c023.js";import"./dayjs.min-65a6b1e4.js";import"./useCache-d48cf6c5.js";import"./app-41ac77cd.js";import"./index-cf52a0ab.js";import"./el-message-7ddf9388.js";import"./index-7486e100.js";import"./index-183fdc84.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./Form.vue_vue_type_style_index_0_scoped_f983cb9f_lang-54d674bd.js";import"./el-form-item-8022b942.js";import"./cloneDeep-8298b498.js";import"./el-row-ad412a39.js";import"./el-col-613bea3c.js";import"./el-checkbox-cd7dd8c1.js";import"./isEqual-6e1d5dd6.js";import"./_flatRest-ac7abae6.js";import"./el-radio-group-d1c0e064.js";import"./el-input-number-4fe7018b.js";/* empty css                  */import"./el-tree-39cab679.js";import"./el-tree-select-6f481715.js";import"./index-168f367d.js";import"./strings-777507ad.js";import"./debounce-eb6bb100.js";import"./index-9d88d8a4.js";import"./el-switch-4b318cc1.js";/* empty css                   */import"./InputPassword-d0077663.js";import"./auth-2fa258a0.js";import"./el-image-viewer-f62c5b85.js";import"./el-progress-64245232.js";import"./isArrayLikeObject-26c677c4.js";import"./index-653de86a.js";/* empty css                        *//* empty css                                                                   *//* empty css                    */import"./el-card-d8ab0074.js";import"./download-20922b56.js";import"./XTextButton.vue_vue_type_style_index_0_scoped_0fcea4df_lang-41ab76b9.js";import"./vue-router-0864a153.js";import"./index-6f87c872.js";const A=e=>a.get({url:"/system/oauth2-client/page",params:e}),O=e=>a.get({url:"/system/oauth2-client/get?id="+e}),U=e=>a.delete({url:"/system/oauth2-client/delete?id="+e}),{t:M}=m(),R=n(p.SYSTEM_OAUTH2_GRANT_TYPE),G=u({clientId:[d],secret:[d],name:[d],status:[d],accessTokenValiditySeconds:[d],refreshTokenValiditySeconds:[d],redirectUris:[d],authorizedGrantTypes:[d]}),D=u({primaryKey:"clientId",primaryType:null,action:!0,columns:[{title:"客户端密钥",field:"secret"},{title:"应用名",field:"name",isSearch:!0},{title:"应用图标",field:"logo",table:{cellRender:{name:"XImg"}},form:{component:"UploadImg"}},{title:M("common.status"),field:"status",dictType:p.COMMON_STATUS,dictClass:"number",isSearch:!0},{title:"访问令牌的有效期",field:"accessTokenValiditySeconds",form:{component:"InputNumber"},table:{slots:{default:"accessTokenValiditySeconds_default"}}},{title:"刷新令牌的有效期",field:"refreshTokenValiditySeconds",form:{component:"InputNumber"},table:{slots:{default:"refreshTokenValiditySeconds_default"}}},{title:"授权类型",field:"authorizedGrantTypes",table:{width:400,slots:{default:"authorizedGrantTypes_default"}},form:{component:"Select",componentProps:{options:R,multiple:!0,filterable:!0}}},{title:"授权范围",field:"scopes",isTable:!1,form:{component:"Select",componentProps:{options:[],multiple:!0,filterable:!0,allowCreate:!0,defaultFirstOption:!0}}},{title:"自动授权范围",field:"autoApproveScopes",isTable:!1,form:{component:"Select",componentProps:{options:[],multiple:!0,filterable:!0,allowCreate:!0,defaultFirstOption:!0}}},{title:"可重定向的 URI 地址",field:"redirectUris",isTable:!1,form:{component:"Select",componentProps:{options:[],multiple:!0,filterable:!0,allowCreate:!0,defaultFirstOption:!0}}},{title:"权限",field:"authorities",isTable:!1,form:{component:"Select",componentProps:{options:[],multiple:!0,filterable:!0,allowCreate:!0,defaultFirstOption:!0}}},{title:"资源",field:"resourceIds",isTable:!1,form:{component:"Select",componentProps:{options:[],multiple:!0,filterable:!0,allowCreate:!0,defaultFirstOption:!0}}},{title:"附加信息",field:"additionalInformation",isTable:!1,form:{component:"Input",componentProps:{type:"textarea",rows:4},colProps:{span:24}}},{title:M("common.createTime"),field:"createTime",formatter:"formatDate",isForm:!1}]}),{allSchemas:X}=c(D),E=f({name:"Client"}),N=f({...E,setup(n){const{t:p}=m(),d=P(),[c,{reload:u,deleteData:f}]=F({allSchemas:X,getListApi:A,deleteApi:U}),M=_(!1),R=_("edit"),D=_(""),E=_(!1),N=_(),B=_(),q=e=>{R.value=p("action."+e),D.value=e,M.value=!0},L=async()=>{var e;const t=null==(e=v(N))?void 0:e.getElFormRef();t&&t.validate((async e=>{var t;if(e){E.value=!0;try{const e=null==(t=v(N))?void 0:t.formModel;"create"===D.value?(await(e=>a.post({url:"/system/oauth2-client/create",data:e}))(e),d.success(p("common.createSuccess"))):(await(e=>a.put({url:"/system/oauth2-client/update",data:e}))(e),d.success(p("common.updateSuccess"))),M.value=!1}finally{E.value=!1,await u()}}}))};return(a,n)=>{const m=r,d=z,u=l,_=s,P=i,F=o,A=t,U=e,Y=j("hasPermi");return y(),b(x,null,[h(P,null,{default:T((()=>[h(_,{onRegister:v(c)},{toolbar_buttons:T((()=>[k(h(m,{type:"primary",preIcon:"ep:zoom-in",title:v(p)("action.add"),onClick:n[0]||(n[0]=e=>{q("create")})},null,8,["title"]),[[Y,["system:oauth2-client:create"]]])])),accessTokenValiditySeconds_default:T((({row:e})=>[S(g(e.accessTokenValiditySeconds+"秒"),1)])),refreshTokenValiditySeconds_default:T((({row:e})=>[S(g(e.refreshTokenValiditySeconds+"秒"),1)])),authorizedGrantTypes_default:T((({row:e})=>[(y(!0),b(x,null,w(e.authorizedGrantTypes,((e,t)=>(y(),C(d,{"disable-transitions":!0,key:t,index:t},{default:T((()=>[S(g(e),1)])),_:2},1032,["index"])))),128))])),actionbtns_default:T((({row:e})=>[k(h(u,{preIcon:"ep:edit",title:v(p)("action.edit"),onClick:t=>(async e=>{var t;q("update");const o=await O(e);null==(t=v(N))||t.setValues(o)})(e.id)},null,8,["title","onClick"]),[[Y,["system:oauth2-client:update"]]]),k(h(u,{preIcon:"ep:view",title:v(p)("action.detail"),onClick:t=>(async e=>{q("detail");const t=await O(e);B.value=t})(e.id)},null,8,["title","onClick"]),[[Y,["system:oauth2-client:query"]]]),k(h(u,{preIcon:"ep:delete",title:v(p)("action.del"),onClick:t=>v(f)(e.id)},null,8,["title","onClick"]),[[Y,["system:oauth2-client:delete"]]])])),_:1},8,["onRegister"])])),_:1}),h(U,{id:"postModel",modelValue:v(M),"onUpdate:modelValue":n[3]||(n[3]=e=>I(M)?M.value=e:null),title:v(R)},{footer:T((()=>[["create","update"].includes(v(D))?(y(),C(m,{key:0,type:"primary",title:v(p)("action.save"),loading:v(E),onClick:n[1]||(n[1]=e=>L())},null,8,["title","loading"])):V("",!0),h(m,{loading:v(E),title:v(p)("dialog.close"),onClick:n[2]||(n[2]=e=>M.value=!1)},null,8,["loading","title"])])),default:T((()=>[["create","update"].includes(v(D))?(y(),C(F,{key:0,ref_key:"formRef",ref:N,schema:v(X).formSchema,rules:v(G)},null,8,["schema","rules"])):V("",!0),"detail"===v(D)?(y(),C(A,{key:1,schema:v(X).detailSchema,data:v(B)},{accessTokenValiditySeconds:T((({row:e})=>[S(g(e.accessTokenValiditySeconds+"秒"),1)])),refreshTokenValiditySeconds:T((({row:e})=>[S(g(e.refreshTokenValiditySeconds+"秒"),1)])),authorizedGrantTypes:T((({row:e})=>[(y(!0),b(x,null,w(e.authorizedGrantTypes,((e,t)=>(y(),C(d,{"disable-transitions":!0,key:t,index:t},{default:T((()=>[S(g(e),1)])),_:2},1032,["index"])))),128))])),scopes:T((({row:e})=>[(y(!0),b(x,null,w(e.scopes,((e,t)=>(y(),C(d,{"disable-transitions":!0,key:t,index:t},{default:T((()=>[S(g(e),1)])),_:2},1032,["index"])))),128))])),autoApproveScopes:T((({row:e})=>[(y(!0),b(x,null,w(e.autoApproveScopes,((e,t)=>(y(),C(d,{"disable-transitions":!0,key:t,index:t},{default:T((()=>[S(g(e),1)])),_:2},1032,["index"])))),128))])),redirectUris:T((({row:e})=>[(y(!0),b(x,null,w(e.redirectUris,((e,t)=>(y(),C(d,{"disable-transitions":!0,key:t,index:t},{default:T((()=>[S(g(e),1)])),_:2},1032,["index"])))),128))])),_:1},8,["schema","data"])):V("",!0)])),_:1},8,["modelValue","title"])],64)}}});export{N as default};
