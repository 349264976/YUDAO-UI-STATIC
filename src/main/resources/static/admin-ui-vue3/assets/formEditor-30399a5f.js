import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-63555901.js";import{_ as t}from"./XModal.vue_vue_type_script_setup_true_lang-c47b87cf.js";import"./base-085523fd.js";import{a,E as o}from"./el-form-item-8022b942.js";import{b as s,E as l}from"./el-radio-group-d1c0e064.js";import{E as r}from"./el-notification-c7d5f4ea.js";import{_ as i}from"./Dialog.vue_vue_type_style_index_0_lang-cfbb4036.js";/* empty css                     */import{_ as u}from"./XTextButton-ab77381a.js";import{_ as m}from"./XButton-39866472.js";import{g as p,D as n}from"./dict-3e42505d.js";import{C as d}from"./constants-97c4dd5f.js";import{g as c,c as f,u as _}from"./index-918c96df.js";import{s as j,e as v,a as y}from"./formCreate-a3356cdc.js";import{h as g}from"./aria-8fadfbe9.js";import{u as x}from"./useI18n-56d4bc42.js";import{u as b}from"./useMessage-5e709b20.js";import{b as h}from"./vue-router-0864a153.js";import{E as V}from"./index-be3181b1.js";import{d as k,r as C,A as w,x as E,C as S,o as O,a as B,w as M,l as T,f as U,i as D,e as N,t as R,h as X,M as q,z as A,k as I,F}from"./runtime-core.esm-bundler-ccc21fcd.js";import"./el-card-d8ab0074.js";import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./Icon.vue_vue_type_script_setup_true_lang-4448c023.js";import"./propTypes-5cfdbdab.js";import"./index-7486e100.js";import"./focus-trap-f53979c5.js";import"./runtime-dom.esm-bundler-daa7e741.js";import"./index-4665dced.js";import"./index-7a379d2e.js";import"./index-c2caee16.js";import"./cloneDeep-8298b498.js";import"./el-button-6b012e5e.js";import"./is-a7957d81.js";import"./el-dialog-41953601.js";import"./use-dialog-625287c4.js";import"./refs-41718667.js";import"./XTextButton.vue_vue_type_style_index_0_scoped_0fcea4df_lang-41ab76b9.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./useCache-d48cf6c5.js";import"./index-a7ef0ded.js";import"./el-message-7ddf9388.js";import"./auth-2fa258a0.js";import"./_flatRest-ac7abae6.js";const J={key:0,ref:"editor"},z=k({name:"BpmFormEditor"}),H=k({...z,setup(k){const{t:z}=x(),H=b(),{query:L}=h(),W=C(),Y=C(-1),Z=C(""),$=C(""),G=C(!1),K=C(!1),P=C(!1),Q=C(),ee=w({name:[{required:!0,message:"表单名不能为空",trigger:"blur"}],status:[{required:!0,message:"开启状态不能为空",trigger:"blur"}]}),te=C({name:"",status:d.ENABLE,remark:""}),ae=()=>{G.value=!0},oe=async()=>{const e=U(Q);if(!e)return;if(await e.validate()){P.value=!0;try{const e=te.value;e.conf=v(W),e.fields=y(W),e.id?(await _(e),H.success(z("common.updateSuccess"))):(await f(e),H.success(z("common.createSuccess"))),G.value=!1}finally{P.value=!1}}},se=()=>{re("生成JSON"),Y.value=0,Z.value=W.value.getRule()},le=()=>{re("生成Options"),Y.value=1,Z.value=W.value.getOption()},re=e=>{K.value=!0,$.value=e};return E((()=>{const e=L.id;e&&c(e).then((e=>{te.value=e,j(W,e.conf,e.fields)}))})),(d,c)=>{const f=m,_=S("fc-designer"),j=u,v=V,y=i,x=r,b=a,h=s,k=l,C=o,w=t,E=e;return O(),B(E,null,{default:M((()=>[T(_,{ref_key:"designer",ref:W,height:"780px"},{handle:M((()=>[T(f,{type:"primary",title:"生成JSON",onClick:se}),T(f,{type:"primary",title:"生成Options",onClick:le}),T(f,{type:"primary",title:U(z)("action.save"),onClick:ae},null,8,["title"])])),_:1},512),T(y,{title:U($),modelValue:U(K),"onUpdate:modelValue":c[1]||(c[1]=e=>q(K)?K.value=e:null),maxHeight:"600"},{default:M((()=>[U(K)?(O(),D("div",J,[T(j,{style:{float:"right"},title:U(z)("common.copy"),onClick:c[0]||(c[0]=e=>(async e=>{const{copy:t,copied:a,isSupported:o}=g({source:e});o?(await t(),U(a)&&H.success(z("common.copySuccess"))):H.error(z("common.copyError"))})(U(Z)))},null,8,["title"]),T(v,{height:"580"},{default:M((()=>[N("pre",null,"            "+R(U(Z))+"\n          ",1)])),_:1})],512)):X("",!0)])),_:1},8,["title","modelValue"]),T(w,{modelValue:U(G),"onUpdate:modelValue":c[6]||(c[6]=e=>q(G)?G.value=e:null),title:"保存表单"},{footer:M((()=>[T(f,{type:"primary",title:U(z)("action.save"),loading:U(P),onClick:oe},null,8,["title","loading"]),T(f,{title:U(z)("dialog.close"),onClick:c[5]||(c[5]=e=>G.value=!1)},null,8,["title"])])),default:M((()=>[T(C,{ref_key:"formRef",ref:Q,model:U(te),rules:U(ee),"label-width":"80px"},{default:M((()=>[T(b,{label:"表单名",prop:"name"},{default:M((()=>[T(x,{modelValue:U(te).name,"onUpdate:modelValue":c[2]||(c[2]=e=>U(te).name=e),placeholder:"请输入表单名"},null,8,["modelValue"])])),_:1}),T(b,{label:"开启状态",prop:"status"},{default:M((()=>[T(k,{modelValue:U(te).status,"onUpdate:modelValue":c[3]||(c[3]=e=>U(te).status=e)},{default:M((()=>[(O(!0),D(F,null,A(U(p)(U(n).COMMON_STATUS),(e=>(O(),B(h,{key:e.value,label:e.value},{default:M((()=>[I(R(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),T(b,{label:"备注",prop:"remark"},{default:M((()=>[T(x,{modelValue:U(te).remark,"onUpdate:modelValue":c[4]||(c[4]=e=>U(te).remark=e),type:"textarea",placeholder:"请输入备注"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])),_:1})}}});export{H as default};
