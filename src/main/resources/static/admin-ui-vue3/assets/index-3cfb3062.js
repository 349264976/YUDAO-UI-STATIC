import{_ as e}from"./XModal.vue_vue_type_script_setup_true_lang-c47b87cf.js";import{_ as t}from"./Descriptions-8db90f03.js";import{_ as s}from"./Form-a0e23abc.js";import"./base-085523fd.js";import"./el-notification-c7d5f4ea.js";/* empty css               *//* empty css                  *//* empty css                     *//* empty css                  */import{_ as i}from"./ContentWrap.vue_vue_type_script_setup_true_lang-63555901.js";import{_ as o}from"./XTable.vue_vue_type_style_index_0_lang-9c560634.js";import{_ as a}from"./XTextButton-ab77381a.js";import{_ as r}from"./XButton-39866472.js";import{a as l}from"./index-a7ef0ded.js";import{u as m}from"./useI18n-56d4bc42.js";import{r as p}from"./formRules-a3380b28.js";import{D as n}from"./dict-3e42505d.js";import{u as d}from"./useVxeCrudSchemas-8bec068b.js";import{A as u,d as c,r as j,x as _,Q as f,o as v,i as y,l as g,w as x,f as w,b,F as h,z as k,a as C,k as T,t as S,h as I,M as V}from"./runtime-core.esm-bundler-ccc21fcd.js";import{u as D}from"./useMessage-5e709b20.js";import{u as F}from"./useXTable-bf420a68.js";import{E as M}from"./index-795de047.js";import{a as R,E as X}from"./index-168f367d.js";import"./propTypes-5cfdbdab.js";import"./index-be3181b1.js";import"./aria-8fadfbe9.js";import"./runtime-dom.esm-bundler-daa7e741.js";import"./el-descriptions-item-d373bc22.js";import"./index-c2caee16.js";import"./DictTag.vue_vue_type_script_lang-a5ff2643.js";import"./color-a8b4eb58.js";import"./el-tooltip-4ed993c7.js";import"./Icon.vue_vue_type_script_setup_true_lang-4448c023.js";import"./dayjs.min-65a6b1e4.js";import"./useCache-d48cf6c5.js";import"./app-41ac77cd.js";import"./index-cf52a0ab.js";import"./el-message-7ddf9388.js";import"./is-a7957d81.js";import"./index-7a379d2e.js";import"./index-7486e100.js";import"./focus-trap-f53979c5.js";import"./index-4665dced.js";import"./index-183fdc84.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./Form.vue_vue_type_style_index_0_scoped_f983cb9f_lang-54d674bd.js";import"./el-form-item-8022b942.js";import"./cloneDeep-8298b498.js";import"./el-row-ad412a39.js";import"./el-col-613bea3c.js";import"./el-checkbox-cd7dd8c1.js";import"./el-button-6b012e5e.js";import"./isEqual-6e1d5dd6.js";import"./_flatRest-ac7abae6.js";import"./el-radio-group-d1c0e064.js";import"./el-input-number-4fe7018b.js";import"./el-tree-39cab679.js";import"./el-tree-select-6f481715.js";import"./el-switch-4b318cc1.js";/* empty css                   */import"./InputPassword-d0077663.js";import"./auth-2fa258a0.js";import"./el-image-viewer-f62c5b85.js";import"./debounce-eb6bb100.js";import"./el-progress-64245232.js";import"./strings-777507ad.js";import"./index-9d88d8a4.js";import"./isArrayLikeObject-26c677c4.js";import"./index-653de86a.js";/* empty css                        *//* empty css                                                                   *//* empty css                    */import"./el-card-d8ab0074.js";import"./download-20922b56.js";import"./XTextButton.vue_vue_type_style_index_0_scoped_0fcea4df_lang-41ab76b9.js";import"./vue-router-0864a153.js";import"./index-6f87c872.js";const A=e=>l.get({url:"/system/sensitive-word/page",params:e}),P=e=>l.get({url:"/system/sensitive-word/get?id="+e}),L=e=>l.delete({url:"/system/sensitive-word/delete?id="+e}),U=e=>l.download({url:"/system/sensitive-word/export-excel",params:e}),{t:B}=m(),E=u({name:[p],tags:[p]}),O=u({primaryKey:"id",primaryType:"seq",primaryTitle:"敏感词编号",action:!0,columns:[{title:"敏感词",field:"name",isSearch:!0},{title:"标签",field:"tag",isTable:!1,isForm:!1,isDetail:!1,isSearch:!0},{title:"标签",field:"tags",table:{slots:{default:"tags_default"}}},{title:B("common.status"),field:"status",dictType:n.COMMON_STATUS,dictClass:"number",isSearch:!0},{title:"描述",field:"description",form:{component:"Input",componentProps:{type:"textarea",rows:4},colProps:{span:24}}},{title:B("common.createTime"),field:"createTime",formatter:"formatDate",isForm:!1,search:{show:!0,itemRender:{name:"XDataTimePicker"}}}]}),{allSchemas:q}=d(O),z=c({name:"SensitiveWord"}),W=c({...z,setup(p){const{t:n}=m(),d=D(),[u,{reload:c,deleteData:B,exportList:O}]=F({allSchemas:q,getListApi:A,deleteApi:L,exportListApi:U}),z=j(!1),W=j(""),K=j(!1),N=j("edit"),Q=j(),J=j(),Y=j(),Z=async()=>{const e=await l.get({url:"/system/sensitive-word/get-tags"});Y.value=e},$=e=>{N.value=n("action."+e),W.value=e,K.value=!0},G=async()=>{var e;const t=null==(e=w(Q))?void 0:e.getElFormRef();t&&t.validate((async e=>{var t;if(e){z.value=!0;try{const e=null==(t=w(Q))?void 0:t.formModel;"create"===W.value?(await(e=>l.post({url:"/system/sensitive-word/create",data:e}))(e),d.success(n("common.createSuccess"))):(await(e=>l.put({url:"/system/sensitive-word/update",data:e}))(e),d.success(n("common.updateSuccess"))),K.value=!1}finally{z.value=!1,await c()}}}))};return _((async()=>{await Z()})),(l,m)=>{const p=r,d=M,c=a,j=o,_=i,D=R,F=X,A=s,L=t,U=e,Z=f("hasPermi");return v(),y(h,null,[g(_,null,{default:x((()=>[g(j,{onRegister:w(u)},{toolbar_buttons:x((()=>[b(g(p,{type:"primary",preIcon:"ep:zoom-in",title:w(n)("action.add"),onClick:m[0]||(m[0]=e=>{$("create")})},null,8,["title"]),[[Z,["system:sensitive-word:create"]]]),b(g(p,{type:"warning",preIcon:"ep:download",title:w(n)("action.export"),onClick:m[1]||(m[1]=e=>w(O)("敏感词数据.xls"))},null,8,["title"]),[[Z,["system:sensitive-word:export"]]])])),tags_default:x((({row:e})=>[(v(!0),y(h,null,k(e.tags,((e,t)=>(v(),C(d,{"disable-transitions":!0,key:t,index:t},{default:x((()=>[T(S(e),1)])),_:2},1032,["index"])))),128))])),actionbtns_default:x((({row:e})=>[b(g(c,{preIcon:"ep:edit",title:w(n)("action.edit"),onClick:t=>(async e=>{var t;$("update");const s=await P(e);null==(t=w(Q))||t.setValues(s)})(e.id)},null,8,["title","onClick"]),[[Z,["system:sensitive-word:update"]]]),b(g(c,{preIcon:"ep:view",title:w(n)("action.detail"),onClick:t=>(async e=>{$("detail");const t=await P(e);J.value=t})(e.id)},null,8,["title","onClick"]),[[Z,["system:sensitive-word:update"]]]),b(g(c,{preIcon:"ep:delete",title:w(n)("action.del"),onClick:t=>w(B)(e.id)},null,8,["title","onClick"]),[[Z,["system:sensitive-word:delete"]]])])),_:1},8,["onRegister"])])),_:1}),g(U,{modelValue:w(K),"onUpdate:modelValue":m[4]||(m[4]=e=>V(K)?K.value=e:null),title:w(N)},{footer:x((()=>[["create","update"].includes(w(W))?(v(),C(p,{key:0,type:"primary",title:w(n)("action.save"),loading:w(z),onClick:m[2]||(m[2]=e=>G())},null,8,["title","loading"])):I("",!0),g(p,{loading:w(z),title:w(n)("dialog.close"),onClick:m[3]||(m[3]=e=>K.value=!1)},null,8,["loading","title"])])),default:x((()=>[["create","update"].includes(w(W))?(v(),C(A,{key:0,schema:w(q).formSchema,rules:w(E),ref_key:"formRef",ref:Q},{tags:x((e=>[g(F,{modelValue:e.tags,"onUpdate:modelValue":t=>e.tags=t,multiple:"",placeholder:"请选择"},{default:x((()=>[(v(!0),y(h,null,k(w(Y),(e=>(v(),C(D,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1},8,["schema","rules"])):I("",!0),"detail"===w(W)?(v(),C(L,{key:1,schema:w(q).detailSchema,data:w(J)},{tags:x((({row:e})=>[(v(!0),y(h,null,k(e.tags,((e,t)=>(v(),C(d,{"disable-transitions":!0,key:t,index:t},{default:x((()=>[T(S(e),1)])),_:2},1032,["index"])))),128))])),_:1},8,["schema","data"])):I("",!0)])),_:1},8,["modelValue","title"])],64)}}});export{W as default};
