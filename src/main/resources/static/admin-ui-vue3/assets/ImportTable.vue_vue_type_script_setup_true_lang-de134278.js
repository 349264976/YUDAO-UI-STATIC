import"./base-085523fd.js";/* empty css                   */import{_ as e}from"./XModal.vue_vue_type_script_setup_true_lang-c47b87cf.js";import{a,E as l}from"./el-form-item-8022b942.js";import{_ as o}from"./XButton-39866472.js";import{E as t}from"./el-notification-c7d5f4ea.js";/* empty css               *//* empty css                  *//* empty css                     *//* empty css                  */import{a as r,c as i}from"./index-6f787488.js";import{g as s}from"./index-1e0c357f.js";import{u as m}from"./useI18n-56d4bc42.js";import{u as n}from"./useMessage-5e709b20.js";import{a as u,E as d}from"./index-168f367d.js";import{v as c}from"./directive-7e87637f.js";import{d as p,r as f,A as v,C as g,o as b,a as h,w as _,e as j,l as y,f as C,i as x,F as I,z as k,b as V,M as w}from"./runtime-core.esm-bundler-ccc21fcd.js";const S={class:"dialog-footer"},U=p({__name:"ImportTable",emits:["ok"],setup(p,{expose:U,emit:E}){const{t:M}=m(),R=n(),q=f(!1),T=f(!0),X=v({name:void 0,comment:void 0,dataSourceConfigId:0}),z=f([]),A=f([]),B=async()=>{T.value=!0;const e=await r(X);A.value=e,T.value=!1},F=f(),J=f([]),N=()=>{q.value=!1,J.value=[]};return U({show:async()=>{const e=await s();z.value=e,X.dataSourceConfigId=z.value[0].id,q.value=!0,await B()}}),(r,s)=>{const m=u,n=d,p=a,f=t,v=o,U=l,D=g("vxe-column"),G=g("vxe-table"),H=e,K=c;return b(),h(H,{title:"导入表",modelValue:C(q),"onUpdate:modelValue":s[7]||(s[7]=e=>w(q)?q.value=e:null)},{footer:_((()=>[j("div",S,[y(v,{type:"primary",title:C(M)("action.import"),onClick:s[5]||(s[5]=e=>(async()=>{var e,a;0!==(null==(e=F.value)?void 0:e.getCheckboxRecords().length)?(null==(a=F.value)||a.getCheckboxRecords().forEach((e=>{J.value.push(e.name)})),await i({dataSourceConfigId:X.dataSourceConfigId,tableNames:J.value}),R.success("导入成功"),E("ok"),N()):R.error("请选择要导入的表")})())},null,8,["title"]),y(v,{title:C(M)("dialog.close"),onClick:s[6]||(s[6]=e=>N())},null,8,["title"])])])),default:_((()=>[y(U,{model:C(X),ref:"queryRef",inline:!0},{default:_((()=>[y(p,{label:"数据源",prop:"dataSourceConfigId"},{default:_((()=>[y(n,{modelValue:C(X).dataSourceConfigId,"onUpdate:modelValue":s[0]||(s[0]=e=>C(X).dataSourceConfigId=e),placeholder:"请选择数据源",clearable:""},{default:_((()=>[(b(!0),x(I,null,k(C(z),(e=>(b(),h(m,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(p,{label:"表名称",prop:"name"},{default:_((()=>[y(f,{modelValue:C(X).name,"onUpdate:modelValue":s[1]||(s[1]=e=>C(X).name=e),placeholder:"请输入表名称",clearable:""},null,8,["modelValue"])])),_:1}),y(p,{label:"表描述",prop:"comment"},{default:_((()=>[y(f,{modelValue:C(X).comment,"onUpdate:modelValue":s[2]||(s[2]=e=>C(X).comment=e),placeholder:"请输入表描述",clearable:""},null,8,["modelValue"])])),_:1}),y(p,null,{default:_((()=>[y(v,{type:"primary",preIcon:"ep:search",title:C(M)("common.query"),onClick:s[3]||(s[3]=e=>(async()=>{await B()})())},null,8,["title"]),y(v,{preIcon:"ep:refresh-right",title:C(M)("common.reset"),onClick:s[4]||(s[4]=e=>(async()=>{X.name=void 0,X.comment=void 0,X.dataSourceConfigId=0,await B()})())},null,8,["title"])])),_:1})])),_:1},8,["model"]),V((b(),h(G,{ref_key:"xTable",ref:F,data:C(A),"checkbox-config":{highlight:!0,range:!0},height:"260px",class:"xtable-scrollbar"},{default:_((()=>[y(D,{type:"checkbox",width:"60"}),y(D,{field:"name",title:"表名称"}),y(D,{field:"comment",title:"表描述"})])),_:1},8,["data"])),[[K,C(T)]])])),_:1},8,["modelValue"])}}});export{U as _};
