import{_ as e}from"./XModal.vue_vue_type_script_setup_true_lang-c47b87cf.js";import{_ as t}from"./Descriptions-8db90f03.js";import{_ as i}from"./Form-a0e23abc.js";import{_ as o}from"./ContentWrap.vue_vue_type_script_setup_true_lang-63555901.js";import{_ as r}from"./XTable.vue_vue_type_style_index_0_lang-9c560634.js";import{_ as s}from"./XTextButton-ab77381a.js";import{_ as a}from"./XButton-39866472.js";import{a as l}from"./index-a7ef0ded.js";import{u as p}from"./useI18n-56d4bc42.js";import{r as n}from"./formRules-a3380b28.js";import{D as m}from"./dict-3e42505d.js";import{u as c}from"./useVxeCrudSchemas-8bec068b.js";import{A as u,d,r as j,Q as f,o as _,i as v,l as g,w as y,f as b,b as x,e as h,t as k,a as w,h as C,M as T,F as I}from"./runtime-core.esm-bundler-ccc21fcd.js";import{u as S}from"./useMessage-5e709b20.js";import{u as R}from"./useXTable-bf420a68.js";import"./base-085523fd.js";/* empty css                     */import"./propTypes-5cfdbdab.js";import"./index-be3181b1.js";import"./aria-8fadfbe9.js";import"./runtime-dom.esm-bundler-daa7e741.js";import"./el-notification-c7d5f4ea.js";import"./el-button-6b012e5e.js";import"./index-4665dced.js";import"./index-c2caee16.js";import"./is-a7957d81.js";import"./focus-trap-f53979c5.js";import"./index-7a379d2e.js";import"./el-descriptions-item-d373bc22.js";import"./DictTag.vue_vue_type_script_lang-a5ff2643.js";import"./color-a8b4eb58.js";/* empty css               */import"./index-795de047.js";import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./Icon.vue_vue_type_script_setup_true_lang-4448c023.js";import"./dayjs.min-65a6b1e4.js";import"./useCache-d48cf6c5.js";import"./app-41ac77cd.js";import"./index-cf52a0ab.js";import"./el-message-7ddf9388.js";import"./index-7486e100.js";import"./index-183fdc84.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./Form.vue_vue_type_style_index_0_scoped_f983cb9f_lang-54d674bd.js";import"./el-form-item-8022b942.js";import"./cloneDeep-8298b498.js";import"./el-row-ad412a39.js";import"./el-col-613bea3c.js";import"./el-checkbox-cd7dd8c1.js";import"./isEqual-6e1d5dd6.js";import"./_flatRest-ac7abae6.js";import"./el-radio-group-d1c0e064.js";import"./el-input-number-4fe7018b.js";/* empty css                  */import"./el-tree-39cab679.js";import"./el-tree-select-6f481715.js";import"./index-168f367d.js";import"./strings-777507ad.js";import"./debounce-eb6bb100.js";import"./index-9d88d8a4.js";import"./el-switch-4b318cc1.js";/* empty css                   */import"./InputPassword-d0077663.js";import"./auth-2fa258a0.js";import"./el-image-viewer-f62c5b85.js";import"./el-progress-64245232.js";import"./isArrayLikeObject-26c677c4.js";import"./index-653de86a.js";/* empty css                        *//* empty css                                                                   *//* empty css                    */import"./el-card-d8ab0074.js";import"./download-20922b56.js";import"./XTextButton.vue_vue_type_style_index_0_scoped_0fcea4df_lang-41ab76b9.js";import"./vue-router-0864a153.js";import"./index-6f87c872.js";const D=e=>l.get({url:"/infra/config/page",params:e}),F=e=>l.get({url:"/infra/config/get?id="+e}),P=e=>l.delete({url:"/infra/config/delete?id="+e}),X=e=>l.download({url:"/infra/config/export",params:e}),{t:A}=p(),V=u({category:[n],name:[n],key:[n],value:[n]}),B=u({primaryKey:"id",primaryType:null,action:!0,columns:[{title:"参数分类",field:"category"},{title:"参数名称",field:"name",isSearch:!0},{title:"参数键名",field:"key",isSearch:!0},{title:"参数键值",field:"value"},{title:"系统内置",field:"type",dictType:m.INFRA_CONFIG_TYPE,dictClass:"number",isSearch:!0},{title:"是否可见",field:"visible",table:{slots:{default:"visible_default"}},form:{component:"RadioButton",componentProps:{options:[{label:"是",value:!0},{label:"否",value:!1}]}}},{title:A("form.remark"),field:"remark",isTable:!1,form:{component:"Input",componentProps:{type:"textarea",rows:4},colProps:{span:24}}},{title:A("common.createTime"),field:"createTime",formatter:"formatDate",isForm:!1,search:{show:!0,itemRender:{name:"XDataTimePicker"}}}]}),{allSchemas:L}=c(B),M=d({name:"Config"}),q=d({...M,setup(n){const{t:m}=p(),c=S(),[u,{reload:d,deleteData:A,exportList:B}]=R({allSchemas:L,getListApi:D,deleteApi:P,exportListApi:X}),M=j(!1),q=j(""),E=j(!1),N=j("edit"),O=j(),z=j(),K=e=>{N.value=m("action."+e),q.value=e,E.value=!0},Q=async()=>{var e;const t=null==(e=b(O))?void 0:e.getElFormRef();t&&t.validate((async e=>{var t;if(e){M.value=!0;try{const e=null==(t=b(O))?void 0:t.formModel;"create"===q.value?(await(e=>l.post({url:"/infra/config/create",data:e}))(e),c.success(m("common.createSuccess"))):(await(e=>l.put({url:"/infra/config/update",data:e}))(e),c.success(m("common.updateSuccess"))),E.value=!1}finally{M.value=!1,await d()}}}))};return(l,p)=>{const n=a,c=s,d=r,j=o,S=i,R=t,D=e,P=f("hasPermi");return _(),v(I,null,[g(j,null,{default:y((()=>[g(d,{onRegister:b(u)},{toolbar_buttons:y((()=>[x(g(n,{type:"primary",preIcon:"ep:zoom-in",title:b(m)("action.add"),onClick:p[0]||(p[0]=e=>{K("create")})},null,8,["title"]),[[P,["infra:config:create"]]]),x(g(n,{type:"warning",preIcon:"ep:download",title:b(m)("action.export"),onClick:p[1]||(p[1]=e=>b(B)("配置.xls"))},null,8,["title"]),[[P,["infra:config:export"]]])])),visible_default:y((({row:e})=>[h("span",null,k(e.visible?"是":"否"),1)])),actionbtns_default:y((({row:e})=>[x(g(c,{preIcon:"ep:edit",title:b(m)("action.edit"),onClick:t=>(async e=>{var t;K("update");const i=await F(e);null==(t=b(O))||t.setValues(i)})(e.id)},null,8,["title","onClick"]),[[P,["infra:config:update"]]]),x(g(c,{preIcon:"ep:view",title:b(m)("action.detail"),onClick:t=>(async e=>{K("detail");const t=await F(e);z.value=t})(e.id)},null,8,["title","onClick"]),[[P,["infra:config:query"]]]),x(g(c,{preIcon:"ep:delete",title:b(m)("action.del"),onClick:t=>b(A)(e.id)},null,8,["title","onClick"]),[[P,["infra:config:delete"]]])])),_:1},8,["onRegister"])])),_:1}),g(D,{modelValue:b(E),"onUpdate:modelValue":p[4]||(p[4]=e=>T(E)?E.value=e:null),title:b(N)},{footer:y((()=>[["create","update"].includes(b(q))?(_(),w(n,{key:0,type:"primary",title:b(m)("action.save"),loading:b(M),onClick:p[2]||(p[2]=e=>Q())},null,8,["title","loading"])):C("",!0),g(n,{loading:b(M),title:b(m)("dialog.close"),onClick:p[3]||(p[3]=e=>E.value=!1)},null,8,["loading","title"])])),default:y((()=>[["create","update"].includes(b(q))?(_(),w(S,{key:0,schema:b(L).formSchema,rules:b(V),ref_key:"formRef",ref:O},null,8,["schema","rules"])):C("",!0),"detail"===b(q)?(_(),w(R,{key:1,schema:b(L).detailSchema,data:b(z)},{visible:y((({row:e})=>[h("span",null,k(e.visible?"是":"否"),1)])),_:1},8,["schema","data"])):C("",!0)])),_:1},8,["modelValue","title"])],64)}}});export{q as default};
