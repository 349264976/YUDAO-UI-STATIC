import{_ as e}from"./XModal.vue_vue_type_script_setup_true_lang-c47b87cf.js";import{_ as t}from"./Descriptions-8db90f03.js";import{_ as i}from"./Form-a0e23abc.js";import{_ as s}from"./ContentWrap.vue_vue_type_script_setup_true_lang-63555901.js";import{_ as o}from"./XTable.vue_vue_type_style_index_0_lang-9c560634.js";import{_ as r}from"./XTextButton-ab77381a.js";import{_ as a}from"./XButton-39866472.js";import{u as l}from"./useI18n-56d4bc42.js";import{r as m}from"./formRules-a3380b28.js";import{D as p}from"./dict-3e42505d.js";import{u as n}from"./useVxeCrudSchemas-8bec068b.js";import{A as u,d as c,r as d,Q as j,o as _,i as f,l as v,w as y,f as g,b,a as h,h as x,M as w,F as k}from"./runtime-core.esm-bundler-ccc21fcd.js";import{g as S,d as T,a as C,c as I,u as M}from"./index-aee95b75.js";import{u as A}from"./useMessage-5e709b20.js";import{u as R}from"./useXTable-bf420a68.js";import"./base-085523fd.js";/* empty css                     */import"./propTypes-5cfdbdab.js";import"./index-be3181b1.js";import"./aria-8fadfbe9.js";import"./runtime-dom.esm-bundler-daa7e741.js";import"./el-notification-c7d5f4ea.js";import"./el-button-6b012e5e.js";import"./index-4665dced.js";import"./index-c2caee16.js";import"./is-a7957d81.js";import"./focus-trap-f53979c5.js";import"./index-7a379d2e.js";import"./el-descriptions-item-d373bc22.js";import"./DictTag.vue_vue_type_script_lang-a5ff2643.js";import"./color-a8b4eb58.js";/* empty css               */import"./index-795de047.js";import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./Icon.vue_vue_type_script_setup_true_lang-4448c023.js";import"./dayjs.min-65a6b1e4.js";import"./useCache-d48cf6c5.js";import"./app-41ac77cd.js";import"./index-cf52a0ab.js";import"./el-message-7ddf9388.js";import"./index-7486e100.js";import"./index-183fdc84.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./Form.vue_vue_type_style_index_0_scoped_f983cb9f_lang-54d674bd.js";import"./el-form-item-8022b942.js";import"./cloneDeep-8298b498.js";import"./el-row-ad412a39.js";import"./el-col-613bea3c.js";import"./el-checkbox-cd7dd8c1.js";import"./isEqual-6e1d5dd6.js";import"./_flatRest-ac7abae6.js";import"./el-radio-group-d1c0e064.js";import"./el-input-number-4fe7018b.js";/* empty css                  */import"./el-tree-39cab679.js";import"./el-tree-select-6f481715.js";import"./index-168f367d.js";import"./strings-777507ad.js";import"./debounce-eb6bb100.js";import"./index-9d88d8a4.js";import"./el-switch-4b318cc1.js";/* empty css                   */import"./InputPassword-d0077663.js";import"./auth-2fa258a0.js";import"./el-image-viewer-f62c5b85.js";import"./el-progress-64245232.js";import"./isArrayLikeObject-26c677c4.js";import"./index-653de86a.js";/* empty css                        *//* empty css                                                                   *//* empty css                    */import"./el-card-d8ab0074.js";import"./download-20922b56.js";import"./XTextButton.vue_vue_type_style_index_0_scoped_0fcea4df_lang-41ab76b9.js";import"./index-a7ef0ded.js";import"./vue-router-0864a153.js";import"./index-6f87c872.js";const{t:D}=l(),F=u({mail:[{required:!0,message:D("profile.rules.mail"),trigger:"blur"},{type:"email",message:D("profile.rules.truemail"),trigger:["blur","change"]}],username:[m],password:[m],host:[m],port:[m],sslEnable:[m]}),V=u({primaryKey:"id",primaryTitle:"编号",primaryType:"id",action:!0,actionWidth:"200",columns:[{title:"邮箱",field:"mail",isSearch:!0},{title:"用户名",field:"username",isSearch:!0},{title:"密码",field:"password",isTable:!1},{title:"SMTP 服务器域名",field:"host"},{title:"SMTP 服务器端口",field:"port",form:{component:"InputNumber",value:465}},{title:"是否开启 SSL",field:"sslEnable",dictType:p.INFRA_BOOLEAN_STRING,dictClass:"boolean"},{title:"创建时间",field:"createTime",isForm:!1,formatter:"formatDate",table:{width:180}}]}),{allSchemas:X}=n(V),B=c({name:"MailAccount"}),E=c({...B,setup(m){const{t:p}=l(),n=A(),[u,{reload:c,deleteData:D}]=R({allSchemas:X,getListApi:S,deleteApi:T}),V=d(!1),B=d("edit"),E=d(!1),L=d(""),N=d(!1),P=d(),q=d(),O=e=>{E.value=!0,B.value=p("action."+e),L.value=e,V.value=!0};return(l,m)=>{const d=a,S=r,T=o,A=s,R=i,W=t,z=e,K=j("hasPermi");return _(),f(k,null,[v(A,null,{default:y((()=>[v(T,{onRegister:g(u)},{toolbar_buttons:y((()=>[b(v(d,{type:"primary",preIcon:"ep:zoom-in",title:g(p)("action.add"),onClick:m[0]||(m[0]=e=>(O("create"),void(E.value=!1)))},null,8,["title"]),[[K,["system:mail-account:create"]]])])),actionbtns_default:y((({row:e})=>[b(v(S,{preIcon:"ep:edit",title:g(p)("action.edit"),onClick:t=>(async e=>{var t;O("update");const i=await C(e);null==(t=g(P))||t.setValues(i),E.value=!1})(e.id)},null,8,["title","onClick"]),[[K,["system:mail-account:update"]]]),b(v(S,{preIcon:"ep:view",title:g(p)("action.detail"),onClick:t=>(async e=>{O("detail");const t=await C(e);q.value=t,E.value=!1})(e.id)},null,8,["title","onClick"]),[[K,["system:mail-account:query"]]]),b(v(S,{preIcon:"ep:delete",title:g(p)("action.del"),onClick:t=>g(D)(e.id)},null,8,["title","onClick"]),[[K,["system:mail-account:delete"]]])])),_:1},8,["onRegister"])])),_:1}),v(z,{id:"mailAccountModel",loading:g(E),modelValue:g(V),"onUpdate:modelValue":m[3]||(m[3]=e=>w(V)?V.value=e:null),title:g(B)},{footer:y((()=>[["create","update"].includes(g(L))?(_(),h(d,{key:0,type:"primary",title:g(p)("action.save"),loading:g(N),onClick:m[1]||(m[1]=e=>(async()=>{var e;const t=null==(e=g(P))?void 0:e.getElFormRef();t&&t.validate((async e=>{var t;if(e){N.value=!0;try{const e=null==(t=g(P))?void 0:t.formModel;"create"===L.value?(await I(e),n.success(p("common.createSuccess"))):(await M(e),n.success(p("common.updateSuccess"))),V.value=!1}finally{N.value=!1,await c()}}}))})())},null,8,["title","loading"])):x("",!0),v(d,{loading:g(N),title:g(p)("dialog.close"),onClick:m[2]||(m[2]=e=>V.value=!1)},null,8,["loading","title"])])),default:y((()=>[["create","update"].includes(g(L))?(_(),h(R,{key:0,ref_key:"formRef",ref:P,schema:g(X).formSchema,rules:g(F)},null,8,["schema","rules"])):x("",!0),"detail"===g(L)?(_(),h(W,{key:1,schema:g(X).detailSchema,data:g(q)},null,8,["schema","data"])):x("",!0)])),_:1},8,["loading","modelValue","title"])],64)}}});export{E as default};
