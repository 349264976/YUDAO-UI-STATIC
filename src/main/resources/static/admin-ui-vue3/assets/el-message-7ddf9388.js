import{v as e,T as s,a as t,r as n}from"./runtime-dom.esm-bundler-daa7e741.js";import{b as a,u as o,i as l,_ as r,w as u,d as i,ad as d,l as p,E as c,z as m,y as f,A as g}from"./base-085523fd.js";import{u as y,i as v,T as b,a as x}from"./index-c2caee16.js";import{d as C,c as h,o as N,i as T,j,l as k,w as B,b as _,e as w,n as S,f as z,t as I,m as M,aM as $,r as E,x as L,a as O,s as D,h as H,g as F,F as U,b8 as A,au as q,b7 as R}from"./runtime-core.esm-bundler-ccc21fcd.js";import{c as P,b as V,E as Z}from"./aria-8fadfbe9.js";import{m as G}from"./is-a7957d81.js";import{u as J}from"./index-7a379d2e.js";const K=a({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),Q=["textContent"],W=C({name:"ElBadge"});const X=u(r(C({...W,props:K,setup(t,{expose:n}){const a=t,r=o("badge"),u=h((()=>a.isDot?"":l(a.value)&&l(a.max)&&a.max<a.value?`${a.max}+`:`${a.value}`));return n({content:u}),(t,n)=>(N(),T("div",{class:S(z(r).b())},[j(t.$slots,"default"),k(s,{name:`${z(r).namespace.value}-zoom-in-center`,persisted:""},{default:B((()=>[_(w("sup",{class:S([z(r).e("content"),z(r).em("content",t.type),z(r).is("fixed",!!t.$slots.default),z(r).is("dot",t.isDot)]),textContent:I(z(u))},null,10,Q),[[e,!t.hidden&&(z(u)||t.isDot)]])])),_:1},8,["name"])],2))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]])),Y={},ee=C({name:"ElConfigProvider",props:a({a11y:{type:Boolean,default:!0},locale:{type:i(Object)},size:y,button:{type:i(Object)},experimentalFeatures:{type:i(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:i(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),setup(e,{slots:s}){M((()=>e.message),(e=>{Object.assign(Y,null!=e?e:{})}),{immediate:!0,deep:!0});const t=d(e);return()=>j(s,"default",{config:null==t?void 0:t.value})}}),se=["success","info","warning","error"],te=G({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:p?document.body:void 0}),ne=a({customClass:{type:String,default:te.customClass},center:{type:Boolean,default:te.center},dangerouslyUseHTMLString:{type:Boolean,default:te.dangerouslyUseHTMLString},duration:{type:Number,default:te.duration},icon:{type:v,default:te.icon},id:{type:String,default:te.id},message:{type:i([String,Object,Function]),default:te.message},onClose:{type:i(Function),required:!1},showClose:{type:Boolean,default:te.showClose},type:{type:String,values:se,default:te.type},offset:{type:Number,default:te.offset},zIndex:{type:Number,default:te.zIndex},grouping:{type:Boolean,default:te.grouping},repeatNum:{type:Number,default:te.repeatNum}}),ae=$([]),oe=e=>{const{prev:s}=(e=>{const s=ae.findIndex((s=>s.id===e)),t=ae[s];let n;return s>0&&(n=ae[s-1]),{current:t,prev:n}})(e);return s?s.vm.exposed.bottom.value:0},le=["id"],re=["innerHTML"],ue=C({name:"ElMessage"});var ie=r(C({...ue,props:ne,emits:{destroy:()=>!0},setup(n,{expose:a}){const l=n,{Close:r}=x,u=o("message"),i=E(),d=E(!1),p=E(0);let f;const g=h((()=>l.type?"error"===l.type?"danger":l.type:"info")),y=h((()=>{const e=l.type;return{[u.bm("icon",e)]:e&&b[e]}})),v=h((()=>l.icon||b[l.type]||"")),C=h((()=>oe(l.id))),$=h((()=>((e,s)=>ae.findIndex((s=>s.id===e))>0?20:s)(l.id,l.offset)+C.value)),A=h((()=>p.value+$.value)),q=h((()=>({top:`${$.value}px`,zIndex:l.zIndex})));function R(){0!==l.duration&&({stop:f}=m((()=>{J()}),l.duration))}function G(){null==f||f()}function J(){d.value=!1}return L((()=>{R(),d.value=!0})),M((()=>l.repeatNum),(()=>{G(),R()})),P(document,"keydown",(function({code:e}){e===Z.esc&&J()})),V(i,(()=>{p.value=i.value.getBoundingClientRect().height})),a({visible:d,bottom:A,close:J}),(n,a)=>(N(),O(s,{name:z(u).b("fade"),onBeforeLeave:n.onClose,onAfterLeave:a[0]||(a[0]=e=>n.$emit("destroy")),persisted:""},{default:B((()=>[_(w("div",{id:n.id,ref_key:"messageRef",ref:i,class:S([z(u).b(),{[z(u).m(n.type)]:n.type&&!n.icon},z(u).is("center",n.center),z(u).is("closable",n.showClose),n.customClass]),style:D(z(q)),role:"alert",onMouseenter:G,onMouseleave:R},[n.repeatNum>1?(N(),O(z(X),{key:0,value:n.repeatNum,type:z(g),class:S(z(u).e("badge"))},null,8,["value","type","class"])):H("v-if",!0),z(v)?(N(),O(z(c),{key:1,class:S([z(u).e("icon"),z(y)])},{default:B((()=>[(N(),O(F(z(v))))])),_:1},8,["class"])):H("v-if",!0),j(n.$slots,"default",{},(()=>[n.dangerouslyUseHTMLString?(N(),T(U,{key:1},[H(" Caution here, message could've been compromised, never use user's input as message "),w("p",{class:S(z(u).e("content")),innerHTML:n.message},null,10,re)],2112)):(N(),T("p",{key:0,class:S(z(u).e("content"))},I(n.message),3))])),n.showClose?(N(),O(z(c),{key:2,class:S(z(u).e("closeBtn")),onClick:t(J,["stop"])},{default:B((()=>[k(z(r))])),_:1},8,["class","onClick"])):H("v-if",!0)],46,le),[[e,d.value]])])),_:3},8,["name","onBeforeLeave"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let de=1;const pe=e=>{const s=!e||A(e)||q(e)||R(e)?{message:e}:e,t={...te,...s};if(t.appendTo){if(A(t.appendTo)){let e=document.querySelector(t.appendTo);f(e)||(e=document.body),t.appendTo=e}}else t.appendTo=document.body;return t},ce=({appendTo:e,...s},t)=>{const{nextZIndex:a}=J(),o="message_"+de++,l=s.onClose,r=document.createElement("div"),u={...s,zIndex:a()+s.zIndex,id:o,onClose:()=>{null==l||l(),(e=>{const s=ae.indexOf(e);if(-1===s)return;ae.splice(s,1);const{handler:t}=e;t.close()})(c)},onDestroy:()=>{n(null,r)}},i=k(ie,u,R(u.message)||q(u.message)?{default:R(u.message)?u.message:()=>u.message}:null);i.appContext=t||me._context,n(i,r),e.appendChild(r.firstElementChild);const d=i.component,p={close:()=>{d.exposed.visible.value=!1}},c={id:o,vnode:i,vm:d,handler:p,props:i.component.props};return c},me=(e={},s)=>{if(!p)return{close:()=>{}};if(l(Y.max)&&ae.length>=Y.max)return{close:()=>{}};const t=pe(e);if(t.grouping&&ae.length){const e=ae.find((({vnode:e})=>{var s;return(null==(s=e.props)?void 0:s.message)===t.message}));if(e)return e.props.repeatNum+=1,e.props.type=t.type,e.handler}const n=ce(t,s);return ae.push(n),n.handler};se.forEach((e=>{me[e]=(s={},t)=>{const n=pe(s);return me({...n,type:e},t)}})),me.closeAll=function(e){for(const s of ae)e&&e!==s.props.type||s.handler.close()},me._context=null;const fe=g(me,"$message");export{ee as C,fe as E,X as a};
