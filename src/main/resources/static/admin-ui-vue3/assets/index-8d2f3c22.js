import{_ as e}from"./XModal.vue_vue_type_script_setup_true_lang-c47b87cf.js";import{_ as t}from"./Descriptions-8db90f03.js";import{_ as s}from"./Form-a0e23abc.js";import"./base-085523fd.js";import"./el-notification-c7d5f4ea.js";/* empty css               *//* empty css                  *//* empty css                     *//* empty css                  */import{_ as i}from"./ContentWrap.vue_vue_type_script_setup_true_lang-63555901.js";import{_ as r}from"./XTable.vue_vue_type_style_index_0_lang-9c560634.js";import{_ as o}from"./XTextButton-ab77381a.js";import{_ as a}from"./XButton-39866472.js";import{g as l,d as m,a as p,c as n,u}from"./index-b68262b6.js";import{g as d}from"./index-49b8d380.js";import{u as c}from"./useI18n-56d4bc42.js";import{r as j}from"./formRules-a3380b28.js";import{D as _}from"./dict-3e42505d.js";import{u as f}from"./useVxeCrudSchemas-8bec068b.js";import{A as v,d as b,r as y,x as g,Q as x,o as h,i as k,l as w,w as I,f as C,b as T,F as U,z as S,t as V,a as D,h as M,M as R}from"./runtime-core.esm-bundler-ccc21fcd.js";import{u as X}from"./useMessage-5e709b20.js";import{u as F}from"./useXTable-bf420a68.js";import{a as A,E as B}from"./index-168f367d.js";import"./propTypes-5cfdbdab.js";import"./index-be3181b1.js";import"./aria-8fadfbe9.js";import"./runtime-dom.esm-bundler-daa7e741.js";import"./el-descriptions-item-d373bc22.js";import"./index-c2caee16.js";import"./DictTag.vue_vue_type_script_lang-a5ff2643.js";import"./color-a8b4eb58.js";import"./index-795de047.js";import"./el-tooltip-4ed993c7.js";import"./Icon.vue_vue_type_script_setup_true_lang-4448c023.js";import"./dayjs.min-65a6b1e4.js";import"./useCache-d48cf6c5.js";import"./app-41ac77cd.js";import"./index-cf52a0ab.js";import"./el-message-7ddf9388.js";import"./is-a7957d81.js";import"./index-7a379d2e.js";import"./index-7486e100.js";import"./focus-trap-f53979c5.js";import"./index-4665dced.js";import"./index-183fdc84.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./Form.vue_vue_type_style_index_0_scoped_f983cb9f_lang-54d674bd.js";import"./el-form-item-8022b942.js";import"./cloneDeep-8298b498.js";import"./el-row-ad412a39.js";import"./el-col-613bea3c.js";import"./el-checkbox-cd7dd8c1.js";import"./el-button-6b012e5e.js";import"./isEqual-6e1d5dd6.js";import"./_flatRest-ac7abae6.js";import"./el-radio-group-d1c0e064.js";import"./el-input-number-4fe7018b.js";import"./el-tree-39cab679.js";import"./el-tree-select-6f481715.js";import"./el-switch-4b318cc1.js";/* empty css                   */import"./InputPassword-d0077663.js";import"./auth-2fa258a0.js";import"./el-image-viewer-f62c5b85.js";import"./debounce-eb6bb100.js";import"./el-progress-64245232.js";import"./strings-777507ad.js";import"./index-9d88d8a4.js";import"./isArrayLikeObject-26c677c4.js";import"./index-653de86a.js";/* empty css                        *//* empty css                                                                   *//* empty css                    */import"./el-card-d8ab0074.js";import"./download-20922b56.js";import"./XTextButton.vue_vue_type_style_index_0_scoped_0fcea4df_lang-41ab76b9.js";import"./index-a7ef0ded.js";import"./vue-router-0864a153.js";import"./index-6f87c872.js";const{t:O}=c(),P=v({name:[j],description:[j],memberUserIds:[j],status:[j]}),q=v({primaryKey:"id",primaryType:"id",primaryTitle:"编号",action:!0,searchSpan:8,columns:[{title:"组名",field:"name",isSearch:!0},{title:"成员",field:"memberUserIds",table:{slots:{default:"memberUserIds_default"}}},{title:"描述",field:"description"},{title:O("common.status"),field:"status",dictType:_.COMMON_STATUS,dictClass:"number",isSearch:!0},{title:O("common.createTime"),field:"createTime",formatter:"formatDate",isForm:!1,isSearch:!0,search:{show:!0,itemRender:{name:"XDataTimePicker"}},table:{width:180}}]}),{allSchemas:z}=f(q),E=b({__name:"index",setup(j){const{t:_}=c(),f=X(),[v,{reload:b,deleteData:O}]=F({allSchemas:z,getListApi:l,deleteApi:m}),q=y([]),E=e=>{for(const t of q.value)if(t.id===e)return t.nickname;return"未知("+e+")"},L=y(!1),K=y(""),N=y(!1),Q=y("edit"),W=y(),J=y(),Y=e=>{Q.value=_("action."+e),K.value=e,N.value=!0},Z=async()=>{var e;const t=null==(e=C(W))?void 0:e.getElFormRef();t&&t.validate((async e=>{var t;if(e){L.value=!0;try{const e=null==(t=C(W))?void 0:t.formModel;"create"===K.value?(await n(e),f.success(_("common.createSuccess"))):(await u(e),f.success(_("common.updateSuccess"))),N.value=!1}finally{L.value=!1,await b()}}}))};return g((()=>{d().then((e=>{q.value=e}))})),(l,m)=>{const n=a,u=o,d=r,c=i,j=A,f=B,b=s,y=t,g=e,X=x("hasPermi");return h(),k(U,null,[w(c,null,{default:I((()=>[w(d,{onRegister:C(v)},{toolbar_buttons:I((()=>[T(w(n,{type:"primary",preIcon:"ep:zoom-in",title:C(_)("action.add"),onClick:m[0]||(m[0]=e=>{Y("create")})},null,8,["title"]),[[X,["bpm:user-group:create"]]])])),memberUserIds_default:I((({row:e})=>[(h(!0),k(U,null,S(e.memberUserIds,(e=>(h(),k("span",{key:e},V(E(e))+"   ",1)))),128))])),actionbtns_default:I((({row:e})=>[T(w(u,{preIcon:"ep:edit",title:C(_)("action.edit"),onClick:t=>(async e=>{var t;Y("update");const s=await p(e);null==(t=C(W))||t.setValues(s)})(e.id)},null,8,["title","onClick"]),[[X,["bpm:user-group:update"]]]),T(w(u,{preIcon:"ep:view",title:C(_)("action.detail"),onClick:t=>(async e=>{Y("detail"),J.value=await p(e)})(e.id)},null,8,["title","onClick"]),[[X,["bpm:user-group:query"]]]),T(w(u,{preIcon:"ep:delete",title:C(_)("action.del"),onClick:t=>C(O)(e.id)},null,8,["title","onClick"]),[[X,["bpm:user-group:delete"]]])])),_:1},8,["onRegister"])])),_:1}),w(g,{modelValue:C(N),"onUpdate:modelValue":m[2]||(m[2]=e=>R(N)?N.value=e:null),title:C(Q),"mask-closable":!1},{footer:I((()=>[["create","update"].includes(C(K))?(h(),D(n,{key:0,type:"primary",title:C(_)("action.save"),loading:C(L),onClick:Z},null,8,["title","loading"])):M("",!0),w(n,{loading:C(L),title:C(_)("dialog.close"),onClick:m[1]||(m[1]=e=>N.value=!1)},null,8,["loading","title"])])),default:I((()=>[["create","update"].includes(C(K))?(h(),D(b,{key:0,schema:C(z).formSchema,rules:C(P),ref_key:"formRef",ref:W},{memberUserIds:I((e=>[w(f,{modelValue:e.memberUserIds,"onUpdate:modelValue":t=>e.memberUserIds=t,multiple:""},{default:I((()=>[(h(!0),k(U,null,S(C(q),(e=>(h(),D(j,{key:e.id,label:e.nickname,value:e.id},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1},8,["schema","rules"])):M("",!0),"detail"===C(K)?(h(),D(y,{key:1,schema:C(z).detailSchema,data:C(J)},{memberUserIds:I((({row:e})=>[(h(!0),k(U,null,S(e.memberUserIds,(e=>(h(),k("span",{key:e},V(E(e))+"   ",1)))),128))])),_:1},8,["schema","data"])):M("",!0)])),_:1},8,["modelValue","title"])],64)}}});export{E as default};
