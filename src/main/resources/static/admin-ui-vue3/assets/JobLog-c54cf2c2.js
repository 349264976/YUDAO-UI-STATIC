import{_ as e}from"./XModal.vue_vue_type_script_setup_true_lang-c47b87cf.js";import{_ as t}from"./Descriptions-8db90f03.js";import{_ as i}from"./ContentWrap.vue_vue_type_script_setup_true_lang-63555901.js";import{_ as o}from"./XTable.vue_vue_type_style_index_0_lang-9c560634.js";import{_ as r}from"./XTextButton-ab77381a.js";import{_ as s}from"./XButton-39866472.js";import{d as a}from"./dayjs.min-65a6b1e4.js";import{a as l}from"./index-a7ef0ded.js";import{u as m}from"./useI18n-56d4bc42.js";import{D as n}from"./dict-3e42505d.js";import{u as p}from"./useVxeCrudSchemas-8bec068b.js";import{A as u,d,r as _,Q as j,o as c,i as f,l as g,w as b,f as x,M as v,F as y,b as T,e as h,t as w}from"./runtime-core.esm-bundler-ccc21fcd.js";import{u as D}from"./useXTable-bf420a68.js";import"./base-085523fd.js";/* empty css                     */import"./propTypes-5cfdbdab.js";import"./index-be3181b1.js";import"./aria-8fadfbe9.js";import"./runtime-dom.esm-bundler-daa7e741.js";import"./el-notification-c7d5f4ea.js";import"./el-button-6b012e5e.js";import"./index-4665dced.js";import"./index-c2caee16.js";import"./is-a7957d81.js";import"./focus-trap-f53979c5.js";import"./index-7a379d2e.js";import"./el-descriptions-item-d373bc22.js";import"./DictTag.vue_vue_type_script_lang-a5ff2643.js";import"./color-a8b4eb58.js";/* empty css               */import"./index-795de047.js";import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./Icon.vue_vue_type_script_setup_true_lang-4448c023.js";import"./app-41ac77cd.js";import"./index-cf52a0ab.js";import"./el-message-7ddf9388.js";import"./useCache-d48cf6c5.js";import"./index-7486e100.js";import"./index-183fdc84.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./el-card-d8ab0074.js";import"./download-20922b56.js";import"./useMessage-5e709b20.js";import"./XTextButton.vue_vue_type_style_index_0_scoped_0fcea4df_lang-41ab76b9.js";import"./auth-2fa258a0.js";import"./vue-router-0864a153.js";import"./cloneDeep-8298b498.js";import"./_flatRest-ac7abae6.js";import"./index-6f87c872.js";const C=e=>l.get({url:"/infra/job-log/page",params:e}),I=e=>l.download({url:"/infra/job-log/export-excel",params:e}),{t:S}=m(),Y=u({primaryKey:"id",primaryType:"seq",primaryTitle:"日志编号",action:!0,columns:[{title:"任务编号",field:"jobId",isSearch:!0},{title:"处理器的名字",field:"handlerName",isSearch:!0},{title:"处理器的参数",field:"handlerParam"},{title:"第几次执行",field:"executeIndex"},{title:"开始执行时间",field:"beginTime",formatter:"formatDate",table:{slots:{default:"beginTime_default"}},search:{show:!0,itemRender:{name:"XDataPicker"}}},{title:"结束执行时间",field:"endTime",formatter:"formatDate",isTable:!1,search:{show:!0,itemRender:{name:"XDataPicker"}}},{title:"执行时长",field:"duration",table:{slots:{default:"duration_default"}}},{title:S("common.status"),field:"status",dictType:n.INFRA_JOB_LOG_STATUS,dictClass:"number",isSearch:!0}]}),{allSchemas:X}=p(Y),M=d({name:"JobLog"}),k=d({...M,setup(n){const{t:p}=m(),[u,{exportList:d}]=D({allSchemas:X,getListApi:C,exportListApi:I}),S=_(!1),Y=_(""),M=_(),k=async e=>{const t=(i=e.id,l.get({url:"/infra/job-log/get?id="+i}));var i;M.value=t,Y.value=p("action.detail"),S.value=!0};return(l,m)=>{const n=s,_=r,D=o,C=i,I=t,R=e,A=j("hasPermi");return c(),f(y,null,[g(C,null,{default:b((()=>[g(D,{onRegister:x(u)},{toolbar_buttons:b((()=>[T(g(n,{type:"warning",preIcon:"ep:download",title:x(p)("action.export"),onClick:m[0]||(m[0]=e=>x(d)("定时任务详情.xls"))},null,8,["title"]),[[A,["infra:job:export"]]])])),beginTime_default:b((({row:e})=>[h("span",null,w(x(a)(e.beginTime).format("YYYY-MM-DD HH:mm:ss")+" ~ "+x(a)(e.endTime).format("YYYY-MM-DD HH:mm:ss")),1)])),duration_default:b((({row:e})=>[h("span",null,w(e.duration+" 毫秒"),1)])),actionbtns_default:b((({row:e})=>[T(g(_,{preIcon:"ep:view",title:x(p)("action.detail"),onClick:t=>k(e)},null,8,["title","onClick"]),[[A,["infra:job:query"]]])])),_:1},8,["onRegister"])])),_:1}),g(R,{modelValue:x(S),"onUpdate:modelValue":m[2]||(m[2]=e=>v(S)?S.value=e:null),title:x(Y)},{footer:b((()=>[g(n,{title:x(p)("dialog.close"),onClick:m[1]||(m[1]=e=>S.value=!1)},null,8,["title"])])),default:b((()=>[g(I,{schema:x(X).detailSchema,data:x(M)},{retryInterval:b((({row:e})=>[h("span",null,w(e.retryInterval+"毫秒"),1)])),monitorTimeout:b((({row:e})=>[h("span",null,w(e.monitorTimeout>0?e.monitorTimeout+" 毫秒":"未开启"),1)])),_:1},8,["schema","data"])])),_:1},8,["modelValue","title"])],64)}}});export{k as default};
