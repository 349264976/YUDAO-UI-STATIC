import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-63555901.js";import{_ as t}from"./XTable.vue_vue_type_style_index_0_lang-9c560634.js";import{_ as s}from"./XTextButton-ab77381a.js";import"./base-085523fd.js";import{E as i}from"./el-button-6b012e5e.js";import{_ as r}from"./XButton-39866472.js";import{a as o}from"./el-notification-c7d5f4ea.js";import{b as a,a as m}from"./index-6ed5f261.js";import{u as n}from"./useI18n-56d4bc42.js";import{D as p}from"./dict-3e42505d.js";import{u as l}from"./useVxeCrudSchemas-8bec068b.js";import{A as u,d as c,Q as d,o as _,a as f,w as j,l as y,f as h,b,i as T,F as S,z as x,e as C,t as k,h as g}from"./runtime-core.esm-bundler-ccc21fcd.js";import{u as v}from"./vue-router-0864a153.js";import{u as w}from"./useMessage-5e709b20.js";import{u as B}from"./useXTable-bf420a68.js";import"./el-card-d8ab0074.js";import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./Icon.vue_vue_type_script_setup_true_lang-4448c023.js";import"./propTypes-5cfdbdab.js";import"./index-7486e100.js";import"./aria-8fadfbe9.js";import"./focus-trap-f53979c5.js";import"./runtime-dom.esm-bundler-daa7e741.js";import"./index-4665dced.js";import"./index-7a379d2e.js";import"./app-41ac77cd.js";import"./index-cf52a0ab.js";import"./el-message-7ddf9388.js";import"./index-c2caee16.js";import"./is-a7957d81.js";import"./useCache-d48cf6c5.js";import"./download-20922b56.js";import"./XTextButton.vue_vue_type_style_index_0_scoped_0fcea4df_lang-41ab76b9.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./index-a7ef0ded.js";import"./auth-2fa258a0.js";import"./cloneDeep-8298b498.js";import"./_flatRest-ac7abae6.js";import"./index-6f87c872.js";const{t:I}=n(),P=u({primaryKey:"id",primaryType:null,primaryTitle:"编号",action:!0,actionWidth:"200px",columns:[{title:"编号",field:"id",table:{width:320}},{title:"流程名",field:"name",isSearch:!0},{title:"所属流程",field:"processDefinitionId",isSearch:!0,isTable:!1},{title:"流程分类",field:"category",dictType:p.BPM_MODEL_CATEGORY,dictClass:"number",isSearch:!0},{title:"当前审批任务",field:"tasks",table:{width:140,slots:{default:"tasks_default"}}},{title:I("common.status"),field:"status",dictType:p.BPM_PROCESS_INSTANCE_STATUS,dictClass:"number",isSearch:!0},{title:"结果",field:"result",dictType:p.BPM_PROCESS_INSTANCE_RESULT,dictClass:"number",isSearch:!0},{title:"提交时间",field:"createTime",formatter:"formatDate",table:{width:180},isForm:!1,isSearch:!0,search:{show:!0,itemRender:{name:"XDataTimePicker"}}},{title:"结束时间",field:"endTime",formatter:"formatDate",table:{width:180},isForm:!1}]}),{allSchemas:D}=l(P),E=c({__name:"index",setup(p){const l=v(),u=w(),{t:c}=n(),[I,{reload:P}]=B({allSchemas:D,getListApi:a}),E=()=>{l.push({name:"BpmProcessInstanceCreate"})};return(a,n)=>{const p=r,v=i,w=s,B=t,D=e,R=d("hasPermi");return _(),f(D,null,{default:j((()=>[y(B,{onRegister:h(I)},{toolbar_buttons:j((()=>[b(y(p,{type:"primary",preIcon:"ep:zoom-in",title:"发起流程",onClick:E},null,512),[[R,["bpm:process-instance:query"]]])])),tasks_default:j((({row:e})=>[(_(!0),T(S,null,x(e.tasks,(e=>(_(),f(v,{key:e.id,link:""},{default:j((()=>[C("span",null,k(e.name),1)])),_:2},1024)))),128))])),actionbtns_default:j((({row:e})=>[b(y(w,{preIcon:"ep:view",title:h(c)("action.detail"),onClick:t=>(e=>{l.push({name:"BpmProcessInstanceDetail",query:{id:e.id}})})(e)},null,8,["title","onClick"]),[[R,["bpm:process-instance:cancel"]]]),1===e.result?b((_(),f(w,{key:0,preIcon:"ep:delete",title:"取消",onClick:t=>(e=>{o.prompt("请输入取消原因","取消流程",{confirmButtonText:c("common.ok"),cancelButtonText:c("common.cancel"),inputPattern:/^[\s\S]*.*\S[\s\S]*$/,inputErrorMessage:"取消原因不能为空"}).then((async({value:t})=>{await m(e.id,t),u.success("取消成功"),P()}))})(e)},null,8,["onClick"])),[[R,["bpm:process-instance:query"]]]):g("",!0)])),_:1},8,["onRegister"])])),_:1})}}});export{E as default};
