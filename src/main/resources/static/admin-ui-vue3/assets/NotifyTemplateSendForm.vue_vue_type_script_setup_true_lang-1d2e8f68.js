import{d as T,r as _,f as j,o as p,q as i,w as r,i as m,a as t,j as h,B as D,c as g,F as V,k as b,x as N,T as B,D as H,M as L,C as R,I as z,H as A,L as E,__tla as G}from"./index-0f589822.js";import{_ as J,__tla as K}from"./Dialog.vue_vue_type_style_index_0_lang-2d188c85.js";import{g as O,__tla as Q}from"./index-2e308907.js";import{g as W,s as X,__tla as Y}from"./index-3874b20d.js";import{u as Z,__tla as $}from"./useMessage-45ab706e.js";let P,ee=Promise.all([(()=>{try{return G}catch{}})(),(()=>{try{return K}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return Y}catch{}})(),(()=>{try{return $}catch{}})()]).then(async()=>{P=T({name:"SystemNotifyTemplateSendForm",__name:"NotifyTemplateSendForm",setup(ae,{expose:w}){const k=Z(),d=_(!1),n=_(!1),l=_({content:"",params:{},userId:null,templateCode:"",templateParams:new Map}),f=j({userId:[{required:!0,message:"\u7528\u6237\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],templateCode:[{required:!0,message:"\u6A21\u7248\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],templateParams:{}}),c=_(),y=_([]);w({open:async o=>{d.value=!0,x(),n.value=!0;try{const e=await W(o);l.value.content=e.content,l.value.params=e.params,l.value.templateCode=e.code,l.value.templateParams=e.params.reduce((s,u)=>(s[u]="",s),{}),f.templateParams=e.params.reduce((s,u)=>(s[u]={required:!0,message:"\u53C2\u6570 "+u+" \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},s),{})}finally{n.value=!1}y.value=await O()}});const C=async()=>{if(c&&await c.value.validate()){n.value=!0;try{const o=l.value,e=await X(o);e&&k.success("\u63D0\u4EA4\u53D1\u9001\u6210\u529F\uFF01\u53D1\u9001\u7ED3\u679C\uFF0C\u89C1\u53D1\u9001\u65E5\u5FD7\u7F16\u53F7\uFF1A"+e),d.value=!1}finally{n.value=!1}}},x=()=>{var o;l.value={content:"",params:{},mobile:"",templateCode:"",templateParams:new Map},(o=c.value)==null||o.resetFields()};return(o,e)=>{const s=B,u=H,I=L,U=R,q=z,v=A,F=J,M=E;return p(),i(F,{modelValue:t(d),"onUpdate:modelValue":e[3]||(e[3]=a=>N(d)?d.value=a:null),title:"\u6D4B\u8BD5\u53D1\u9001","max-height":500},{footer:r(()=>[m(v,{disabled:t(n),type:"primary",onClick:C},{default:r(()=>[h("\u786E \u5B9A")]),_:1},8,["disabled"]),m(v,{onClick:e[2]||(e[2]=a=>d.value=!1)},{default:r(()=>[h("\u53D6 \u6D88")]),_:1})]),default:r(()=>[D((p(),i(q,{ref_key:"formRef",ref:c,model:t(l),rules:t(f),"label-width":"140px"},{default:r(()=>[m(u,{label:"\u6A21\u677F\u5185\u5BB9",prop:"content"},{default:r(()=>[m(s,{modelValue:t(l).content,"onUpdate:modelValue":e[0]||(e[0]=a=>t(l).content=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u677F\u5185\u5BB9",readonly:"",type:"textarea"},null,8,["modelValue"])]),_:1}),m(u,{label:"\u63A5\u6536\u4EBA",prop:"userId"},{default:r(()=>[m(U,{modelValue:t(l).userId,"onUpdate:modelValue":e[1]||(e[1]=a=>t(l).userId=a),placeholder:"\u8BF7\u9009\u62E9\u63A5\u6536\u4EBA"},{default:r(()=>[(p(!0),g(V,null,b(t(y),a=>(p(),i(I,{key:a.id,label:a.nickname,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(p(!0),g(V,null,b(t(l).params,a=>(p(),i(u,{key:a,label:"\u53C2\u6570 {"+a+"}",prop:"templateParams."+a},{default:r(()=>[m(s,{modelValue:t(l).templateParams[a],"onUpdate:modelValue":S=>t(l).templateParams[a]=S,placeholder:"\u8BF7\u8F93\u5165 "+a+" \u53C2\u6570"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop"]))),128))]),_:1},8,["model","rules"])),[[M,t(n)]])]),_:1},8,["modelValue"])}}})});export{P as _,ee as __tla};
