import{d as s,c as e}from"./useI18n-56d4bc42.js";import{g as t,r}from"./auth-2fa258a0.js";import{u as i,C as a}from"./useCache-d48cf6c5.js";import{g as n,l as o}from"./index-ffcbf524.js";const{wsCache:u}=i(),h=s("admin-user",{state:()=>({permissions:[],roles:[],isSetUser:!1,user:{id:0,avatar:"",nickname:""}}),getters:{getPermissions(){return this.permissions},getRoles(){return this.roles},getIsSetUser(){return this.isSetUser},getUser(){return this.user}},actions:{async setUserInfoAction(){if(!t())return this.resetState(),null;let s=u.get(a.USER);s||(s=await n()),this.permissions=s.permissions,this.roles=s.roles,this.user=s.user,this.isSetUser=!0,u.set(a.USER,s)},async loginOut(){await o(),r(),u.clear(),this.resetState()},resetState(){this.permissions=[],this.roles=[],this.isSetUser=!1,this.user={id:0,avatar:"",nickname:""}}}}),m=()=>h(e);export{h as a,m as u};
