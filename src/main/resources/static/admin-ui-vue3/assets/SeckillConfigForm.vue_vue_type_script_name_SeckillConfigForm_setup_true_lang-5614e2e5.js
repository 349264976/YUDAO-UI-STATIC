import{f as T,d as H,l as g,r as i,o as j,q as x,w as _,i as f,a as s,j as b,B as V,x as M,ad as R,H as E,L as O,__tla as q}from"./index-0f589822.js";import{_ as A,__tla as B}from"./Dialog.vue_vue_type_style_index_0_lang-2d188c85.js";import{_ as D,__tla as I}from"./Form-89fb98fc.js";import{a as L,c as N,u as z,__tla as G}from"./seckillConfig-c37a15a6.js";import{d as J,__tla as K}from"./formatTime-58783104.js";import{r as m,__tla as Q}from"./formRules-04f2a102.js";import{D as W,__tla as X}from"./dict-f9a1a53b.js";import{u as Y,__tla as Z}from"./useCrudSchemas-9a73989a.js";import{u as $,__tla as aa}from"./useMessage-45ab706e.js";let U,d,ea=Promise.all([(()=>{try{return q}catch{}})(),(()=>{try{return B}catch{}})(),(()=>{try{return I}catch{}})(),(()=>{try{return G}catch{}})(),(()=>{try{return K}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return X}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return aa}catch{}})()]).then(async()=>{let p,h;p=T({name:[m],startTime:[m],endTime:[m],picUrl:[m],status:[m]}),h=T([{label:"\u79D2\u6740\u65F6\u6BB5\u540D\u79F0",field:"name",isSearch:!0},{label:"\u5F00\u59CB\u65F6\u95F4\u70B9",field:"startTime",isSearch:!1,search:{component:"TimePicker"},form:{component:"TimePicker",componentProps:{valueFormat:"HH:mm:ss"}}},{label:"\u7ED3\u675F\u65F6\u95F4\u70B9",field:"endTime",isSearch:!1,search:{component:"TimePicker"},form:{component:"TimePicker",componentProps:{valueFormat:"HH:mm:ss"}}},{label:"\u79D2\u6740\u8F6E\u64AD\u56FE",field:"sliderPicUrls",isSearch:!1,form:{component:"UploadImgs"},table:{width:300}},{label:"\u72B6\u6001",field:"status",dictType:W.COMMON_STATUS,dictClass:"number",isSearch:!0,form:{component:"Radio"}},{label:"\u521B\u5EFA\u65F6\u95F4",field:"createTime",isForm:!1,isSearch:!1,formatter:J},{label:"\u64CD\u4F5C",field:"action",isForm:!1}]),{allSchemas:d}=Y(h),U=H({__name:"SeckillConfigForm",emits:["success"],setup(ta,{expose:k,emit:F}){const{t:u}=g(),y=$(),r=i(!1),v=i(""),l=i(!1),P=i(""),c=i();k({open:async(o,a)=>{var t;if(r.value=!0,v.value=u("action."+o),P.value=o,a){l.value=!0;try{const e=await L(a);e.sliderPicUrls=(t=e.sliderPicUrls)==null?void 0:t.map(n=>({url:n})),c.value.setValues(e)}finally{l.value=!1}}}});const w=async()=>{if(c&&await c.value.getElFormRef().validate()){l.value=!0;try{const o=c.value.formModel,a=R(o),t=[];a.sliderPicUrls.forEach(e=>{typeof e=="object"?t.push(e.url):t.push(e)}),a.sliderPicUrls=t,P.value==="create"?(await N(a),y.success(u("common.createSuccess"))):(await z(a),y.success(u("common.updateSuccess"))),r.value=!1,F("success")}finally{l.value=!1}}};return(o,a)=>{const t=D,e=E,n=A,C=O;return j(),x(n,{modelValue:s(r),"onUpdate:modelValue":a[1]||(a[1]=S=>M(r)?r.value=S:null),title:s(v)},{footer:_(()=>[f(e,{disabled:s(l),type:"primary",onClick:w},{default:_(()=>[b("\u786E \u5B9A")]),_:1},8,["disabled"]),f(e,{onClick:a[0]||(a[0]=S=>r.value=!1)},{default:_(()=>[b("\u53D6 \u6D88")]),_:1})]),default:_(()=>[V(f(t,{ref_key:"formRef",ref:c,rules:s(p),schema:s(d).formSchema},null,8,["rules","schema"]),[[C,s(l)]])]),_:1},8,["modelValue","title"])}}})});export{U as _,ea as __tla,d as a};
