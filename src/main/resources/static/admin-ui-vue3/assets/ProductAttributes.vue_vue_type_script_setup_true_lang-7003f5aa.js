import{d as D,r as v,b as G,af as J,o as y,c as w,k as A,a as m,F as B,l as N,q as P,w as c,g as V,i as n,j as _,t as g,B as z,T as O,x as Q,P as R,a3 as E,a4 as W,H as X,m as Y,E as Z,__tla as j}from"./index-0f589822.js";import{E as aa,__tla as ea}from"./el-text-1124a1da.js";import{c as la,__tla as sa}from"./property-e9306a35.js";import{u as ta,__tla as ua}from"./useMessage-45ab706e.js";let K,ra=Promise.all([(()=>{try{return j}catch{}})(),(()=>{try{return ea}catch{}})(),(()=>{try{return sa}catch{}})(),(()=>{try{return ua}catch{}})()]).then(async()=>{K=D({name:"ProductAttributes",__name:"ProductAttributes",props:{propertyList:{type:Array,default:()=>{}}},emits:["success"],setup(L,{emit:q}){const F=L,{t:H}=N(),h=ta(),s=v(""),d=v(null),x=G(()=>a=>d.value!==null&&(d.value===a||void 0)),f=v([]),I=a=>{a!=null&&(f.value.some(r=>{var t,i;return((t=r.input)==null?void 0:t.attributes.id)===((i=a.input)==null?void 0:i.attributes.id)})||f.value.push(a))},u=v([]);J(()=>F.propertyList,a=>{a&&(u.value=a)},{deep:!0,immediate:!0});const C=async(a,r)=>{if(s.value)try{const t=await la({propertyId:r,name:s.value});u.value[a].values.push({id:t,name:s.value}),h.success(H("common.createSuccess")),q("success",u.value)}catch{h.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}d.value=null,s.value=""};return(a,r)=>{const t=aa,i=W,M=X,S=Y,T=Z;return y(!0),w(B,null,A(m(u),(p,e)=>(y(),P(T,{key:e},{default:c(()=>[V("div",null,[n(t,{class:"mx-1"},{default:c(()=>[_("\u5C5E\u6027\u540D\uFF1A")]),_:1}),n(i,{class:"mx-1",closable:"",type:"success",onClose:l=>(o=>{var b;(b=u.value)==null||b.splice(o,1)})(e)},{default:c(()=>[_(g(p.name),1)]),_:2},1032,["onClose"])]),V("div",null,[n(t,{class:"mx-1"},{default:c(()=>[_("\u5C5E\u6027\u503C\uFF1A")]),_:1}),(y(!0),w(B,null,A(p.values,(l,o)=>(y(),P(i,{key:l.id,class:"mx-1",closable:"",onClose:b=>((U,$)=>{var k;(k=u.value[U].values)==null||k.splice($,1)})(e,o)},{default:c(()=>[_(g(l.name),1)]),_:2},1032,["onClose"]))),128)),z(n(m(O),{id:`input${e}`,ref_for:!0,ref:I,modelValue:m(s),"onUpdate:modelValue":r[0]||(r[0]=l=>Q(s)?s.value=l:null),class:"!w-20",size:"small",onBlur:l=>C(e,p.id),onKeyup:R(l=>C(e,p.id),["enter"])},null,8,["id","modelValue","onBlur","onKeyup"]),[[E,m(x)(e)]]),z(n(M,{class:"button-new-tag ml-1",size:"small",onClick:l=>(async o=>{d.value=o,f.value[o].focus()})(e)},{default:c(()=>[_(" + \u6DFB\u52A0 ")]),_:2},1032,["onClick"]),[[E,!m(x)(e)]])]),n(S,{class:"my-10px"})]),_:2},1024))),128)}}})});export{K as _,ra as __tla};
