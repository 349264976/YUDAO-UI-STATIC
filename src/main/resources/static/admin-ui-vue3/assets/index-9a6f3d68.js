import{_ as e}from"./XModal.vue_vue_type_script_setup_true_lang-c47b87cf.js";import{_ as t}from"./XButton-39866472.js";import{_ as i}from"./Descriptions-8db90f03.js";import{_ as a}from"./ContentWrap.vue_vue_type_script_setup_true_lang-63555901.js";import{_ as s}from"./XTable.vue_vue_type_style_index_0_lang-9c560634.js";import{_ as l}from"./XTextButton-ab77381a.js";import{_ as o}from"./DictTag.vue_vue_type_script_lang-a5ff2643.js";import"./base-085523fd.js";import"./el-notification-c7d5f4ea.js";/* empty css               *//* empty css                  *//* empty css                     *//* empty css                  */import{D as r}from"./dict-3e42505d.js";import{u as m}from"./useVxeCrudSchemas-8bec068b.js";import{A as p,d,r as n,x as u,Q as c,o as _,i as j,l as f,w as v,f as y,a as g,F as T,z as b,e as h,t as x,k as S,h as I,b as M,M as w}from"./runtime-core.esm-bundler-ccc21fcd.js";import{a as C}from"./index-a7ef0ded.js";import{b as k}from"./index-aee95b75.js";import{u as E}from"./useI18n-56d4bc42.js";import{u as D}from"./useXTable-bf420a68.js";import{a as V,E as X}from"./index-168f367d.js";import"./propTypes-5cfdbdab.js";import"./index-be3181b1.js";import"./aria-8fadfbe9.js";import"./runtime-dom.esm-bundler-daa7e741.js";import"./el-button-6b012e5e.js";import"./index-4665dced.js";import"./index-c2caee16.js";import"./Icon.vue_vue_type_script_setup_true_lang-4448c023.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./el-descriptions-item-d373bc22.js";import"./el-tooltip-4ed993c7.js";import"./dayjs.min-65a6b1e4.js";import"./useCache-d48cf6c5.js";import"./app-41ac77cd.js";import"./index-cf52a0ab.js";import"./el-message-7ddf9388.js";import"./is-a7957d81.js";import"./index-7a379d2e.js";import"./index-7486e100.js";import"./focus-trap-f53979c5.js";import"./index-183fdc84.js";import"./el-card-d8ab0074.js";import"./download-20922b56.js";import"./useMessage-5e709b20.js";import"./XTextButton.vue_vue_type_style_index_0_scoped_0fcea4df_lang-41ab76b9.js";import"./color-a8b4eb58.js";import"./index-795de047.js";import"./index-6f87c872.js";import"./auth-2fa258a0.js";import"./vue-router-0864a153.js";import"./cloneDeep-8298b498.js";import"./_flatRest-ac7abae6.js";import"./strings-777507ad.js";import"./isEqual-6e1d5dd6.js";import"./debounce-eb6bb100.js";import"./index-9d88d8a4.js";const R=p({primaryKey:"id",primaryTitle:"编号",primaryType:"id",action:!0,actionWidth:"70",columns:[{title:"发送时间",field:"sendTime",table:{width:180},formatter:"formatDate",search:{show:!0,itemRender:{name:"XDataTimePicker"}}},{title:"接收邮箱",field:"toMail",isSearch:!0,table:{width:180,slots:{default:"toMail_default"}}},{title:"用户编号",field:"userId",isSearch:!0,isTable:!1},{title:"用户类型",field:"userType",dictType:r.USER_TYPE,dictClass:"number",isSearch:!0,isTable:!1},{title:"邮件标题",field:"templateTitle"},{title:"邮件内容",field:"templateContent",isTable:!1},{title:"邮箱参数",field:"templateParams",isTable:!1},{title:"发送状态",field:"sendStatus",dictType:r.SYSTEM_MAIL_SEND_STATUS,dictClass:"string",isSearch:!0},{title:"邮箱账号",field:"accountId",isSearch:!0,isTable:!1,search:{slots:{default:"accountId_search"}}},{title:"发送邮箱地址",field:"fromMail",table:{title:"邮箱账号"}},{title:"模板编号",field:"templateId",isSearch:!0},{title:"模板编码",field:"templateCode",isTable:!1},{title:"模版发送人名称",field:"templateNickname",isTable:!1},{title:"发送返回的消息编号",field:"sendMessageId",isTable:!1},{title:"发送异常",field:"sendException",isTable:!1},{title:"创建时间",field:"createTime",isTable:!1}]}),{allSchemas:U}=m(R),A=async e=>await C.get({url:"/system/mail-log/page",params:e}),P={key:0},B=d({name:"MailLog"}),L=d({...B,setup(m){const{t:d}=E(),R=p({accountId:null}),[B]=D({allSchemas:U,topActionSlots:!1,params:R,getListApi:A}),L=n([]),Y=n(!1),q=n("edit"),z=n(!1),N=n(""),W=n(!1),F=n(),K=async e=>{var t;t="detail",z.value=!0,q.value=d("action."+t),N.value=t,Y.value=!0;const i=await(async e=>await C.get({url:"/system/mail-log/get?id="+e}))(e);F.value=i,z.value=!1};return u((()=>{k().then((e=>{L.value=e}))})),(m,p)=>{const n=V,u=X,C=o,k=l,E=s,D=a,A=i,Q=t,Z=e,$=c("hasPermi");return _(),j(T,null,[f(D,null,{default:v((()=>[f(E,{onRegister:y(B)},{accountId_search:v((()=>[f(u,{modelValue:y(R).accountId,"onUpdate:modelValue":p[0]||(p[0]=e=>y(R).accountId=e)},{default:v((()=>[(_(),g(n,{key:void 0,label:"全部",value:void 0})),(_(!0),j(T,null,b(y(L),(e=>(_(),g(n,{key:e.id,label:e.mail,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),toMail_default:v((({row:e})=>[h("div",null,x(e.toMail),1),e.userType&&e.userId?(_(),j("div",P,[f(C,{type:y(r).USER_TYPE,value:e.userType},null,8,["type","value"]),S(x("("+e.userId+")"),1)])):I("",!0)])),actionbtns_default:v((({row:e})=>[M(f(k,{preIcon:"ep:view",title:y(d)("action.detail"),onClick:t=>K(e.id)},null,8,["title","onClick"]),[[$,["system:mail-log:query"]]])])),_:1},8,["onRegister"])])),_:1}),f(Z,{id:"mailLogModel",loading:y(z),modelValue:y(Y),"onUpdate:modelValue":p[2]||(p[2]=e=>w(Y)?Y.value=e:null),title:y(q)},{footer:v((()=>[f(Q,{loading:y(W),title:y(d)("dialog.close"),onClick:p[1]||(p[1]=e=>Y.value=!1)},null,8,["loading","title"])])),default:v((()=>["detail"===y(N)?(_(),g(A,{key:0,schema:y(U).detailSchema,data:y(F)},null,8,["schema","data"])):I("",!0)])),_:1},8,["loading","modelValue","title"])],64)}}});export{L as default};
