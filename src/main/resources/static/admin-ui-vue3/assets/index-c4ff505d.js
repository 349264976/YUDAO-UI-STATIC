import{_ as e}from"./XModal.vue_vue_type_script_setup_true_lang-c47b87cf.js";import{_ as t}from"./Descriptions-8db90f03.js";import{_ as s}from"./ContentWrap.vue_vue_type_script_setup_true_lang-63555901.js";import{_ as i}from"./XTable.vue_vue_type_style_index_0_lang-9c560634.js";import{_ as o}from"./XTextButton-ab77381a.js";import{_ as r}from"./XButton-39866472.js";import{a as l}from"./index-a7ef0ded.js";import{u as a}from"./useI18n-56d4bc42.js";import{D as p}from"./dict-3e42505d.js";import{u as m}from"./useVxeCrudSchemas-8bec068b.js";import{A as n,d as u,r as d,Q as c,o as _,i as j,l as f,w as g,f as x,b,e as v,t as y,M as T,F as h}from"./runtime-core.esm-bundler-ccc21fcd.js";import{u as w}from"./useXTable-bf420a68.js";import"./base-085523fd.js";/* empty css                     */import"./propTypes-5cfdbdab.js";import"./index-be3181b1.js";import"./aria-8fadfbe9.js";import"./runtime-dom.esm-bundler-daa7e741.js";import"./el-notification-c7d5f4ea.js";import"./el-button-6b012e5e.js";import"./index-4665dced.js";import"./index-c2caee16.js";import"./is-a7957d81.js";import"./focus-trap-f53979c5.js";import"./index-7a379d2e.js";import"./el-descriptions-item-d373bc22.js";import"./DictTag.vue_vue_type_script_lang-a5ff2643.js";import"./color-a8b4eb58.js";/* empty css               */import"./index-795de047.js";import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./Icon.vue_vue_type_script_setup_true_lang-4448c023.js";import"./dayjs.min-65a6b1e4.js";import"./useCache-d48cf6c5.js";import"./app-41ac77cd.js";import"./index-cf52a0ab.js";import"./el-message-7ddf9388.js";import"./index-7486e100.js";import"./index-183fdc84.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./el-card-d8ab0074.js";import"./download-20922b56.js";import"./useMessage-5e709b20.js";import"./XTextButton.vue_vue_type_style_index_0_scoped_0fcea4df_lang-41ab76b9.js";import"./auth-2fa258a0.js";import"./vue-router-0864a153.js";import"./cloneDeep-8298b498.js";import"./_flatRest-ac7abae6.js";import"./index-6f87c872.js";const C=e=>l.get({url:"/system/operate-log/page",params:e}),S=e=>l.download({url:"/system/operate-log/export",params:e}),{t:D}=a(),X=n({primaryKey:"id",primaryType:"seq",primaryTitle:"日志编号",action:!0,actionWidth:"80px",columns:[{title:"操作模块",field:"module",isSearch:!0},{title:"操作名",field:"name"},{title:"操作类型",field:"type",dictType:p.SYSTEM_OPERATE_TYPE,dictClass:"number",isSearch:!0},{title:"请求方法名",field:"requestMethod",isTable:!1},{title:"请求地址",field:"requestUrl",isTable:!1},{title:"操作人员",field:"userNickname",isSearch:!0},{title:"操作明细",field:"content",isTable:!1},{title:"用户 IP",field:"userIp",isTable:!1},{title:"userAgent",field:"userAgent"},{title:"操作结果",field:"resultCode",table:{slots:{default:"resultCode"}}},{title:"操作结果",field:"success",isTable:!1,isDetail:!1,search:{show:!0,itemRender:{name:"$select",props:{placeholder:D("common.selectText")},options:[{label:"成功",value:"true"},{label:"失败",value:"false"}]}}},{title:"操作日期",field:"startTime",formatter:"formatDate",isForm:!1,search:{show:!0,itemRender:{name:"XDataTimePicker"}}},{title:"执行时长",field:"duration",table:{slots:{default:"duration"}}}]}),{allSchemas:k}=m(X),A=u({name:"OperateLog"}),I=u({...A,setup(l){const{t:p}=a(),[m,{exportList:n}]=w({allSchemas:k,getListApi:C,exportListApi:S}),u=d(!1),D=d(!1),X=d();return(l,a)=>{const d=r,w=o,C=i,S=s,A=t,I=e,M=c("hasPermi");return _(),j(h,null,[f(S,null,{default:g((()=>[f(C,{onRegister:x(m)},{toolbar_buttons:g((()=>[b(f(d,{type:"warning",preIcon:"ep:download",title:x(p)("action.export"),onClick:a[0]||(a[0]=e=>x(n)("操作日志.xls"))},null,8,["title"]),[[M,["system:operate-log:export"]]])])),duration:g((({row:e})=>[v("span",null,y(e.duration+"ms"),1)])),resultCode:g((({row:e})=>[v("span",null,y(0===e.resultCode?"成功":"失败"),1)])),actionbtns_default:g((({row:e})=>[f(w,{preIcon:"ep:view",title:x(p)("action.detail"),onClick:t=>(e=>{X.value=e,u.value=!0})(e)},null,8,["title","onClick"])])),_:1},8,["onRegister"])])),_:1}),f(I,{id:"postModel",modelValue:x(u),"onUpdate:modelValue":a[2]||(a[2]=e=>T(u)?u.value=e:null),title:x(p)("action.detail")},{footer:g((()=>[f(d,{loading:x(D),title:x(p)("dialog.close"),onClick:a[1]||(a[1]=e=>u.value=!1)},null,8,["loading","title"])])),default:g((()=>[f(A,{schema:x(k).detailSchema,data:x(X)},{resultCode:g((({row:e})=>[v("span",null,y(0===e.resultCode?"成功":"失败"),1)])),duration:g((({row:e})=>[v("span",null,y(e.duration+"ms"),1)])),_:1},8,["schema","data"])])),_:1},8,["modelValue","title"])],64)}}});export{I as default};
