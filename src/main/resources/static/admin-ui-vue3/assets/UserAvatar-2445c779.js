import{ag as te,aV as da,aW as ft,aS as ci,aU as kt,d as et,ah as ee,r as Y,b as $,aX as pa,aY as di,af as ua,o as A,c as K,au as Wt,a as v,q as Lt,w as L,ay as pi,aT as ui,al as ae,V as F,aj as mi,an as ma,h as gi,ax as ga,aZ as Bt,a_ as fa,i as k,a$ as at,j as ie,b0 as va,b1 as fi,p as I,b2 as vi,b3 as bi,A as yi,b4 as wi,B as xi,a3 as Ci,g as ht,Z as ne,b5 as ba,x as Mi,t as ya,a1 as Ot,b6 as Di,b7 as ki,H as wa,__tla as Bi}from"./index-0f589822.js";import{_ as Oi,__tla as Si}from"./Dialog.vue_vue_type_style_index_0_lang-2d188c85.js";import{_ as zi,__tla as Ei}from"./XButton-ceeece05.js";import{u as _i,__tla as Ti}from"./useMessage-45ab706e.js";import{_ as xa}from"./_plugin-vue_export-helper-1b428a4d.js";import{b as Wi,__tla as Li}from"./profile-1a5a9953.js";let Ca,Ri=Promise.all([(()=>{try{return Bi}catch{}})(),(()=>{try{return Si}catch{}})(),(()=>{try{return Ei}catch{}})(),(()=>{try{return Ti}catch{}})(),(()=>{try{return Li}catch{}})()]).then(async()=>{const Ma=te({size:{type:[Number,String],values:da,default:"",validator:t=>ft(t)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:ci},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:kt(String),default:"cover"}}),Da={error:t=>t instanceof Event},ka=["src","alt","srcset"],Ba=et({name:"ElAvatar"}),Oa=ma(mi(et({...Ba,props:Ma,emits:Da,setup(t,{emit:a}){const e=t,n=ee("avatar"),i=Y(!1),r=$(()=>{const{size:o,icon:d,shape:p}=e,l=[n.b()];return pa(o)&&l.push(n.m(o)),d&&l.push(n.m("icon")),p&&l.push(n.m(p)),l}),s=$(()=>{const{size:o}=e;return ft(o)?n.cssVarBlock({size:di(o)||""}):void 0}),h=$(()=>({objectFit:e.fit}));function c(o){i.value=!0,a("error",o)}return ua(()=>e.src,()=>i.value=!1),(o,d)=>(A(),K("span",{class:F(v(r)),style:Wt(v(s))},[!o.src&&!o.srcSet||i.value?o.icon?(A(),Lt(v(ui),{key:1},{default:L(()=>[(A(),Lt(pi(o.icon)))]),_:1})):ae(o.$slots,"default",{key:2}):(A(),K("img",{key:0,src:o.src,alt:o.alt,srcset:o.srcSet,style:Wt(v(h)),onError:c},null,44,ka))],6))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/avatar/src/avatar.vue"]])),re=et({name:"ElSpaceItem",props:te({prefixCls:{type:String}}),setup(t,{slots:a}){const e=ee("space"),n=$(()=>`${t.prefixCls||e.b()}__item`);return()=>gi("div",{class:n.value},ae(a,"default"))}}),oe={small:8,default:12,large:16},Sa=et({name:"ElSpace",props:te({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:kt([String,Object,Array]),default:""},style:{type:kt([String,Array,Object]),default:""},alignment:{type:kt(String),default:"center"},prefixCls:{type:String},spacer:{type:kt([Object,String,Number,Array]),default:null,validator:t=>fa(t)||ft(t)||pa(t)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:da,validator:t=>ft(t)||Bt(t)&&t.length===2&&t.every(ft)}}),setup(t,{slots:a}){const{classes:e,containerStyle:n,itemStyle:i}=function(s){const h=ee("space"),c=$(()=>[h.b(),h.m(s.direction),s.class]),o=Y(0),d=Y(0),p=$(()=>[s.wrap||s.fill?{flexWrap:"wrap",marginBottom:`-${d.value}px`}:{},{alignItems:s.alignment},s.style]),l=$(()=>[{paddingBottom:`${d.value}px`,marginRight:`${o.value}px`},s.fill?{flexGrow:1,minWidth:`${s.fillRatio}%`}:{}]);return ga(()=>{const{size:m="small",wrap:f,direction:g,fill:x}=s;if(Bt(m)){const[b=0,D=0]=m;o.value=b,d.value=D}else{let b;b=ft(m)?m:oe[m||"small"]||oe.small,(f||x)&&g==="horizontal"?o.value=d.value=b:g==="horizontal"?(o.value=b,d.value=0):(d.value=b,o.value=0)}}),{classes:c,containerStyle:p,itemStyle:l}}(t);function r(s,h="",c=[]){const{prefixCls:o}=t;return s.forEach((d,p)=>{va(d)?Bt(d.children)&&d.children.forEach((l,m)=>{va(l)&&Bt(l.children)?r(l.children,`${h+m}-`,c):c.push(k(re,{style:i.value,prefixCls:o,key:`nested-${h+m}`},{default:()=>[l]},at.PROPS|at.STYLE,["style","prefixCls"]))}):fi(d)&&c.push(k(re,{style:i.value,prefixCls:o,key:`LoopKey${h+p}`},{default:()=>[d]},at.PROPS|at.STYLE,["style","prefixCls"]))}),c}return()=>{var s;const{spacer:h,direction:c}=t,o=ae(a,"default",{key:0},()=>[]);if(((s=o.children)!=null?s:[]).length===0)return null;if(Bt(o.children)){let d=r(o.children);if(h){const p=d.length-1;d=d.reduce((l,m,f)=>{const g=[...l,m];return f!==p&&g.push(k("span",{style:[i.value,c==="vertical"?"width: 100%":null],key:f},[fa(h)?h:ie(h,at.TEXT)],at.STYLE)),g},[])}return k("div",{class:e.value,style:n.value},d,at.STYLE|at.CLASS)}return o.children}}}),za=ma(Sa);function se(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function he(t){for(var a=1;a<arguments.length;a++){var e=arguments[a]!=null?arguments[a]:{};a%2?se(Object(e),!0).forEach(function(n){Ea(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):se(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Rt(t){return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Rt(t)}function le(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ea(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}function ce(t){return function(a){if(Array.isArray(a))return Nt(a)}(t)||function(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}(t)||function(a,e){if(a){if(typeof a=="string")return Nt(a,e);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nt(a,e)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Nt(t,a){(a==null||a>t.length)&&(a=t.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=t[e];return n}var St=typeof window<"u"&&window.document!==void 0,q=St?window:{},Ht=!(!St||!q.document.documentElement)&&"ontouchstart"in q.document.documentElement,Yt=!!St&&"PointerEvent"in q,B="cropper",At="all",de="crop",pe="move",ue="zoom",it="e",nt="w",lt="s",Q="n",vt="ne",bt="nw",yt="se",wt="sw",Xt="".concat(B,"-crop"),me="".concat(B,"-disabled"),R="".concat(B,"-hidden"),ge="".concat(B,"-hide"),_a="".concat(B,"-invisible"),zt="".concat(B,"-modal"),It="".concat(B,"-move"),xt="".concat(B,"Action"),Et="".concat(B,"Preview"),jt="crop",fe="move",ve="none",Pt="crop",Ut="cropend",$t="cropmove",qt="cropstart",be="dblclick",ye=Yt?"pointerdown":Ht?"touchstart":"mousedown",we=Yt?"pointermove":Ht?"touchmove":"mousemove",xe=Yt?"pointerup pointercancel":Ht?"touchend touchcancel":"mouseup",Ce="ready",Me="resize",De="wheel",Vt="zoom",ke="image/jpeg",Ta=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Wa=/^data:/,La=/^data:image\/jpeg;base64,/,Ra=/^img|canvas$/i,Be={viewMode:0,dragMode:jt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Na=Number.isNaN||q.isNaN;function M(t){return typeof t=="number"&&!Na(t)}var Oe=function(t){return t>0&&t<1/0};function Ft(t){return t===void 0}function rt(t){return Rt(t)==="object"&&t!==null}var Ha=Object.prototype.hasOwnProperty;function ct(t){if(!rt(t))return!1;try{var a=t.constructor,e=a.prototype;return a&&e&&Ha.call(e,"isPrototypeOf")}catch{return!1}}function N(t){return typeof t=="function"}var Ya=Array.prototype.slice;function Se(t){return Array.from?Array.from(t):Ya.call(t)}function z(t,a){return t&&N(a)&&(Array.isArray(t)||M(t.length)?Se(t).forEach(function(e,n){a.call(t,e,n,t)}):rt(t)&&Object.keys(t).forEach(function(e){a.call(t,t[e],e,t)})),t}var O=Object.assign||function(t){for(var a=arguments.length,e=new Array(a>1?a-1:0),n=1;n<a;n++)e[n-1]=arguments[n];return rt(t)&&e.length>0&&e.forEach(function(i){rt(i)&&Object.keys(i).forEach(function(r){t[r]=i[r]})}),t},Aa=/\.\d*(?:0|9){12}\d*$/;function dt(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Aa.test(t)?Math.round(t*a)/a:t}var Xa=/^width|height|left|top|marginLeft|marginTop$/;function G(t,a){var e=t.style;z(a,function(n,i){Xa.test(i)&&M(n)&&(n="".concat(n,"px")),e[i]=n})}function _(t,a){if(a)if(M(t.length))z(t,function(n){_(n,a)});else if(t.classList)t.classList.add(a);else{var e=t.className.trim();e?e.indexOf(a)<0&&(t.className="".concat(e," ").concat(a)):t.className=a}}function V(t,a){a&&(M(t.length)?z(t,function(e){V(e,a)}):t.classList?t.classList.remove(a):t.className.indexOf(a)>=0&&(t.className=t.className.replace(a,"")))}function pt(t,a,e){a&&(M(t.length)?z(t,function(n){pt(n,a,e)}):e?_(t,a):V(t,a))}var Ia=/([a-z\d])([A-Z])/g;function Zt(t){return t.replace(Ia,"$1-$2").toLowerCase()}function Kt(t,a){return rt(t[a])?t[a]:t.dataset?t.dataset[a]:t.getAttribute("data-".concat(Zt(a)))}function Ct(t,a,e){rt(e)?t[a]=e:t.dataset?t.dataset[a]=e:t.setAttribute("data-".concat(Zt(a)),e)}var ze=/\s\s*/,Ee=function(){var t=!1;if(St){var a=!1,e=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,a},set:function(i){a=i}});q.addEventListener("test",e,n),q.removeEventListener("test",e,n)}return t}();function j(t,a,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=e;a.trim().split(ze).forEach(function(r){if(!Ee){var s=t.listeners;s&&s[r]&&s[r][e]&&(i=s[r][e],delete s[r][e],Object.keys(s[r]).length===0&&delete s[r],Object.keys(s).length===0&&delete t.listeners)}t.removeEventListener(r,i,n)})}function X(t,a,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=e;a.trim().split(ze).forEach(function(r){if(n.once&&!Ee){var s=t.listeners,h=s===void 0?{}:s;i=function(){delete h[r][e],t.removeEventListener(r,i,n);for(var c=arguments.length,o=new Array(c),d=0;d<c;d++)o[d]=arguments[d];e.apply(t,o)},h[r]||(h[r]={}),h[r][e]&&t.removeEventListener(r,h[r][e],n),h[r][e]=i,t.listeners=h}t.addEventListener(r,i,n)})}function ut(t,a,e){var n;return N(Event)&&N(CustomEvent)?n=new CustomEvent(a,{detail:e,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(a,!0,!0,e),t.dispatchEvent(n)}function _e(t){var a=t.getBoundingClientRect();return{left:a.left+(window.pageXOffset-document.documentElement.clientLeft),top:a.top+(window.pageYOffset-document.documentElement.clientTop)}}var Qt=q.location,ja=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Te(t){var a=t.match(ja);return a!==null&&(a[1]!==Qt.protocol||a[2]!==Qt.hostname||a[3]!==Qt.port)}function We(t){var a="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+a}function Mt(t){var a=t.rotate,e=t.scaleX,n=t.scaleY,i=t.translateX,r=t.translateY,s=[];M(i)&&i!==0&&s.push("translateX(".concat(i,"px)")),M(r)&&r!==0&&s.push("translateY(".concat(r,"px)")),M(a)&&a!==0&&s.push("rotate(".concat(a,"deg)")),M(e)&&e!==1&&s.push("scaleX(".concat(e,")")),M(n)&&n!==1&&s.push("scaleY(".concat(n,")"));var h=s.length?s.join(" "):"none";return{WebkitTransform:h,msTransform:h,transform:h}}function _t(t,a){var e=t.pageX,n=t.pageY,i={endX:e,endY:n};return a?i:he({startX:e,startY:n},i)}function J(t){var a=t.aspectRatio,e=t.height,n=t.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",r=Oe(n),s=Oe(e);if(r&&s){var h=e*a;i==="contain"&&h>n||i==="cover"&&h<n?e=n/a:n=e*a}else r?e=n/a:s&&(n=e*a);return{width:n,height:e}}var Le=String.fromCharCode,Pa=/^data:.*,/;function Ua(t){var a,e=new DataView(t);try{var n,i,r;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var s=e.byteLength,h=2;h+1<s;){if(e.getUint8(h)===255&&e.getUint8(h+1)===225){i=h;break}h+=1}if(i){var c=i+10;if(function(f,g,x){var b="";x+=g;for(var D=g;D<x;D+=1)b+=Le(f.getUint8(D));return b}(e,i+4,4)==="Exif"){var o=e.getUint16(c);if(((n=o===18761)||o===19789)&&e.getUint16(c+2,n)===42){var d=e.getUint32(c+4,n);d>=8&&(r=c+d)}}}if(r){var p,l,m=e.getUint16(r,n);for(l=0;l<m;l+=1)if(p=r+12*l+2,e.getUint16(p,n)===274){p+=8,a=e.getUint16(p,n),e.setUint16(p,1,n);break}}}catch{a=1}return a}var $a={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,a=this.options,e=this.container,n=this.cropper,i=Number(a.minContainerWidth),r=Number(a.minContainerHeight);_(n,R),V(t,R);var s={width:Math.max(e.offsetWidth,i>=0?i:200),height:Math.max(e.offsetHeight,r>=0?r:100)};this.containerData=s,G(n,{width:s.width,height:s.height}),_(t,R),V(n,R)},initCanvas:function(){var t=this.containerData,a=this.imageData,e=this.options.viewMode,n=Math.abs(a.rotate)%180==90,i=n?a.naturalHeight:a.naturalWidth,r=n?a.naturalWidth:a.naturalHeight,s=i/r,h=t.width,c=t.height;t.height*s>t.width?e===3?h=t.height*s:c=t.width/s:e===3?c=t.width/s:h=t.height*s;var o={aspectRatio:s,naturalWidth:i,naturalHeight:r,width:h,height:c};this.canvasData=o,this.limited=e===1||e===2,this.limitCanvas(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.left=(t.width-o.width)/2,o.top=(t.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCanvasData=O({},o)},limitCanvas:function(t,a){var e=this.options,n=this.containerData,i=this.canvasData,r=this.cropBoxData,s=e.viewMode,h=i.aspectRatio,c=this.cropped&&r;if(t){var o=Number(e.minCanvasWidth)||0,d=Number(e.minCanvasHeight)||0;s>1?(o=Math.max(o,n.width),d=Math.max(d,n.height),s===3&&(d*h>o?o=d*h:d=o/h)):s>0&&(o?o=Math.max(o,c?r.width:0):d?d=Math.max(d,c?r.height:0):c&&(o=r.width,(d=r.height)*h>o?o=d*h:d=o/h));var p=J({aspectRatio:h,width:o,height:d});o=p.width,d=p.height,i.minWidth=o,i.minHeight=d,i.maxWidth=1/0,i.maxHeight=1/0}if(a)if(s>(c?0:1)){var l=n.width-i.width,m=n.height-i.height;i.minLeft=Math.min(0,l),i.minTop=Math.min(0,m),i.maxLeft=Math.max(0,l),i.maxTop=Math.max(0,m),c&&this.limited&&(i.minLeft=Math.min(r.left,r.left+(r.width-i.width)),i.minTop=Math.min(r.top,r.top+(r.height-i.height)),i.maxLeft=r.left,i.maxTop=r.top,s===2&&(i.width>=n.width&&(i.minLeft=Math.min(0,l),i.maxLeft=Math.max(0,l)),i.height>=n.height&&(i.minTop=Math.min(0,m),i.maxTop=Math.max(0,m))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=n.width,i.maxTop=n.height},renderCanvas:function(t,a){var e=this.canvasData,n=this.imageData;if(a){var i=function(o){var d=o.width,p=o.height,l=o.degree;if((l=Math.abs(l)%180)==90)return{width:p,height:d};var m=l%90*Math.PI/180,f=Math.sin(m),g=Math.cos(m),x=d*g+p*f,b=d*f+p*g;return l>90?{width:b,height:x}:{width:x,height:b}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),r=i.width,s=i.height,h=e.width*(r/e.naturalWidth),c=e.height*(s/e.naturalHeight);e.left-=(h-e.width)/2,e.top-=(c-e.height)/2,e.width=h,e.height=c,e.aspectRatio=r/s,e.naturalWidth=r,e.naturalHeight=s,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,G(this.canvas,O({width:e.width,height:e.height},Mt({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var a=this.canvasData,e=this.imageData,n=e.naturalWidth*(a.width/a.naturalWidth),i=e.naturalHeight*(a.height/a.naturalHeight);O(e,{width:n,height:i,left:(a.width-n)/2,top:(a.height-i)/2}),G(this.image,O({width:e.width,height:e.height},Mt(O({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,a=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,i={width:a.width,height:a.height};e&&(a.height*e>a.width?i.height=i.width/e:i.width=i.height*e),this.cropBoxData=i,this.limitCropBox(!0,!0),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),i.width=Math.max(i.minWidth,i.width*n),i.height=Math.max(i.minHeight,i.height*n),i.left=a.left+(a.width-i.width)/2,i.top=a.top+(a.height-i.height)/2,i.oldLeft=i.left,i.oldTop=i.top,this.initialCropBoxData=O({},i)},limitCropBox:function(t,a){var e=this.options,n=this.containerData,i=this.canvasData,r=this.cropBoxData,s=this.limited,h=e.aspectRatio;if(t){var c=Number(e.minCropBoxWidth)||0,o=Number(e.minCropBoxHeight)||0,d=s?Math.min(n.width,i.width,i.width+i.left,n.width-i.left):n.width,p=s?Math.min(n.height,i.height,i.height+i.top,n.height-i.top):n.height;c=Math.min(c,n.width),o=Math.min(o,n.height),h&&(c&&o?o*h>c?o=c/h:c=o*h:c?o=c/h:o&&(c=o*h),p*h>d?p=d/h:d=p*h),r.minWidth=Math.min(c,d),r.minHeight=Math.min(o,p),r.maxWidth=d,r.maxHeight=p}a&&(s?(r.minLeft=Math.max(0,i.left),r.minTop=Math.max(0,i.top),r.maxLeft=Math.min(n.width,i.left+i.width)-r.width,r.maxTop=Math.min(n.height,i.top+i.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=n.width-r.width,r.maxTop=n.height-r.height))},renderCropBox:function(){var t=this.options,a=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&Ct(this.face,xt,e.width>=a.width&&e.height>=a.height?pe:At),G(this.cropBox,O({width:e.width,height:e.height},Mt({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ut(this.element,Pt,this.getData())}},qa={initPreview:function(){var t=this.element,a=this.crossOrigin,e=this.options.preview,n=a?this.crossOriginUrl:this.url,i=t.alt||"The image to preview",r=document.createElement("img");if(a&&(r.crossOrigin=a),r.src=n,r.alt=i,this.viewBox.appendChild(r),this.viewBoxImage=r,e){var s=e;typeof e=="string"?s=t.ownerDocument.querySelectorAll(e):e.querySelector&&(s=[e]),this.previews=s,z(s,function(h){var c=document.createElement("img");Ct(h,Et,{width:h.offsetWidth,height:h.offsetHeight,html:h.innerHTML}),a&&(c.crossOrigin=a),c.src=n,c.alt=i,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',h.innerHTML="",h.appendChild(c)})}},resetPreview:function(){z(this.previews,function(t){var a=Kt(t,Et);G(t,{width:a.width,height:a.height}),t.innerHTML=a.html,function(e,n){if(rt(e[n]))try{delete e[n]}catch{e[n]=void 0}else if(e.dataset)try{delete e.dataset[n]}catch{e.dataset[n]=void 0}else e.removeAttribute("data-".concat(Zt(n)))}(t,Et)})},preview:function(){var t=this.imageData,a=this.canvasData,e=this.cropBoxData,n=e.width,i=e.height,r=t.width,s=t.height,h=e.left-a.left-t.left,c=e.top-a.top-t.top;this.cropped&&!this.disabled&&(G(this.viewBoxImage,O({width:r,height:s},Mt(O({translateX:-h,translateY:-c},t)))),z(this.previews,function(o){var d=Kt(o,Et),p=d.width,l=d.height,m=p,f=l,g=1;n&&(f=i*(g=p/n)),i&&f>l&&(m=n*(g=l/i),f=l),G(o,{width:m,height:f}),G(o.getElementsByTagName("img")[0],O({width:r*g,height:s*g},Mt(O({translateX:-h*g,translateY:-c*g},t))))}))}},Va={bind:function(){var t=this.element,a=this.options,e=this.cropper;N(a.cropstart)&&X(t,qt,a.cropstart),N(a.cropmove)&&X(t,$t,a.cropmove),N(a.cropend)&&X(t,Ut,a.cropend),N(a.crop)&&X(t,Pt,a.crop),N(a.zoom)&&X(t,Vt,a.zoom),X(e,ye,this.onCropStart=this.cropStart.bind(this)),a.zoomable&&a.zoomOnWheel&&X(e,De,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&X(e,be,this.onDblclick=this.dblclick.bind(this)),X(t.ownerDocument,we,this.onCropMove=this.cropMove.bind(this)),X(t.ownerDocument,xe,this.onCropEnd=this.cropEnd.bind(this)),a.responsive&&X(window,Me,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,a=this.options,e=this.cropper;N(a.cropstart)&&j(t,qt,a.cropstart),N(a.cropmove)&&j(t,$t,a.cropmove),N(a.cropend)&&j(t,Ut,a.cropend),N(a.crop)&&j(t,Pt,a.crop),N(a.zoom)&&j(t,Vt,a.zoom),j(e,ye,this.onCropStart),a.zoomable&&a.zoomOnWheel&&j(e,De,this.onWheel,{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&j(e,be,this.onDblclick),j(t.ownerDocument,we,this.onCropMove),j(t.ownerDocument,xe,this.onCropEnd),a.responsive&&j(window,Me,this.onResize)}},Fa={resize:function(){if(!this.disabled){var t,a,e=this.options,n=this.container,i=this.containerData,r=n.offsetWidth/i.width,s=n.offsetHeight/i.height,h=Math.abs(r-1)>Math.abs(s-1)?r:s;h!==1&&(e.restore&&(t=this.getCanvasData(),a=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(z(t,function(c,o){t[o]=c*h})),this.setCropBoxData(z(a,function(c,o){a[o]=c*h}))))}},dblclick:function(){var t,a;this.disabled||this.options.dragMode===ve||this.setDragMode((t=this.dragBox,a=Xt,(t.classList?t.classList.contains(a):t.className.indexOf(a)>-1)?fe:jt))},wheel:function(t){var a=this,e=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){a.wheeling=!1},50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*e,t)))},cropStart:function(t){var a=t.buttons,e=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(M(a)&&a!==1||M(e)&&e!==0||t.ctrlKey))){var n,i=this.options,r=this.pointers;t.changedTouches?z(t.changedTouches,function(s){r[s.identifier]=_t(s)}):r[t.pointerId||0]=_t(t),n=Object.keys(r).length>1&&i.zoomable&&i.zoomOnTouch?ue:Kt(t.target,xt),Ta.test(n)&&ut(this.element,qt,{originalEvent:t,action:n})!==!1&&(t.preventDefault(),this.action=n,this.cropping=!1,n===de&&(this.cropping=!0,_(this.dragBox,zt)))}},cropMove:function(t){var a=this.action;if(!this.disabled&&a){var e=this.pointers;t.preventDefault(),ut(this.element,$t,{originalEvent:t,action:a})!==!1&&(t.changedTouches?z(t.changedTouches,function(n){O(e[n.identifier]||{},_t(n,!0))}):O(e[t.pointerId||0]||{},_t(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var a=this.action,e=this.pointers;t.changedTouches?z(t.changedTouches,function(n){delete e[n.identifier]}):delete e[t.pointerId||0],a&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,pt(this.dragBox,zt,this.cropped&&this.options.modal)),ut(this.element,Ut,{originalEvent:t,action:a}))}}},Za={change:function(t){var a,e=this.options,n=this.canvasData,i=this.containerData,r=this.cropBoxData,s=this.pointers,h=this.action,c=e.aspectRatio,o=r.left,d=r.top,p=r.width,l=r.height,m=o+p,f=d+l,g=0,x=0,b=i.width,D=i.height,w=!0;!c&&t.shiftKey&&(c=p&&l?p/l:1),this.limited&&(g=r.minLeft,x=r.minTop,b=g+Math.min(i.width,n.width,n.left+n.width),D=x+Math.min(i.height,n.height,n.top+n.height));var y=s[Object.keys(s)[0]],u={x:y.endX-y.startX,y:y.endY-y.startY},C=function(E){switch(E){case it:m+u.x>b&&(u.x=b-m);break;case nt:o+u.x<g&&(u.x=g-o);break;case Q:d+u.y<x&&(u.y=x-d);break;case lt:f+u.y>D&&(u.y=D-f)}};switch(h){case At:o+=u.x,d+=u.y;break;case it:if(u.x>=0&&(m>=b||c&&(d<=x||f>=D))){w=!1;break}C(it),(p+=u.x)<0&&(h=nt,o-=p=-p),c&&(l=p/c,d+=(r.height-l)/2);break;case Q:if(u.y<=0&&(d<=x||c&&(o<=g||m>=b))){w=!1;break}C(Q),l-=u.y,d+=u.y,l<0&&(h=lt,d-=l=-l),c&&(p=l*c,o+=(r.width-p)/2);break;case nt:if(u.x<=0&&(o<=g||c&&(d<=x||f>=D))){w=!1;break}C(nt),p-=u.x,o+=u.x,p<0&&(h=it,o-=p=-p),c&&(l=p/c,d+=(r.height-l)/2);break;case lt:if(u.y>=0&&(f>=D||c&&(o<=g||m>=b))){w=!1;break}C(lt),(l+=u.y)<0&&(h=Q,d-=l=-l),c&&(p=l*c,o+=(r.width-p)/2);break;case vt:if(c){if(u.y<=0&&(d<=x||m>=b)){w=!1;break}C(Q),l-=u.y,d+=u.y,p=l*c}else C(Q),C(it),u.x>=0?m<b?p+=u.x:u.y<=0&&d<=x&&(w=!1):p+=u.x,u.y<=0?d>x&&(l-=u.y,d+=u.y):(l-=u.y,d+=u.y);p<0&&l<0?(h=wt,d-=l=-l,o-=p=-p):p<0?(h=bt,o-=p=-p):l<0&&(h=yt,d-=l=-l);break;case bt:if(c){if(u.y<=0&&(d<=x||o<=g)){w=!1;break}C(Q),l-=u.y,d+=u.y,p=l*c,o+=r.width-p}else C(Q),C(nt),u.x<=0?o>g?(p-=u.x,o+=u.x):u.y<=0&&d<=x&&(w=!1):(p-=u.x,o+=u.x),u.y<=0?d>x&&(l-=u.y,d+=u.y):(l-=u.y,d+=u.y);p<0&&l<0?(h=yt,d-=l=-l,o-=p=-p):p<0?(h=vt,o-=p=-p):l<0&&(h=wt,d-=l=-l);break;case wt:if(c){if(u.x<=0&&(o<=g||f>=D)){w=!1;break}C(nt),p-=u.x,o+=u.x,l=p/c}else C(lt),C(nt),u.x<=0?o>g?(p-=u.x,o+=u.x):u.y>=0&&f>=D&&(w=!1):(p-=u.x,o+=u.x),u.y>=0?f<D&&(l+=u.y):l+=u.y;p<0&&l<0?(h=vt,d-=l=-l,o-=p=-p):p<0?(h=yt,o-=p=-p):l<0&&(h=bt,d-=l=-l);break;case yt:if(c){if(u.x>=0&&(m>=b||f>=D)){w=!1;break}C(it),l=(p+=u.x)/c}else C(lt),C(it),u.x>=0?m<b?p+=u.x:u.y>=0&&f>=D&&(w=!1):p+=u.x,u.y>=0?f<D&&(l+=u.y):l+=u.y;p<0&&l<0?(h=bt,d-=l=-l,o-=p=-p):p<0?(h=wt,o-=p=-p):l<0&&(h=vt,d-=l=-l);break;case pe:this.move(u.x,u.y),w=!1;break;case ue:this.zoom(function(E){var W=he({},E),T=0;return z(E,function(P,tt){delete W[tt],z(W,function(S){var H=Math.abs(P.startX-S.startX),Dt=Math.abs(P.startY-S.startY),ot=Math.abs(P.endX-S.endX),mt=Math.abs(P.endY-S.endY),Z=Math.sqrt(H*H+Dt*Dt),gt=(Math.sqrt(ot*ot+mt*mt)-Z)/Z;Math.abs(gt)>Math.abs(T)&&(T=gt)})}),T}(s),t),w=!1;break;case de:if(!u.x||!u.y){w=!1;break}a=_e(this.cropper),o=y.startX-a.left,d=y.startY-a.top,p=r.minWidth,l=r.minHeight,u.x>0?h=u.y>0?yt:vt:u.x<0&&(o-=p,h=u.y>0?wt:bt),u.y<0&&(d-=l),this.cropped||(V(this.cropBox,R),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}w&&(r.width=p,r.height=l,r.left=o,r.top=d,this.action=h,this.renderCropBox()),z(s,function(E){E.startX=E.endX,E.startY=E.endY})}},Ka={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&_(this.dragBox,zt),V(this.cropBox,R),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=O({},this.initialImageData),this.canvasData=O({},this.initialCanvasData),this.cropBoxData=O({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(O(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),V(this.dragBox,zt),_(this.cropBox,R)),this},replace:function(t){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),a?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,z(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,V(this.cropper,me)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,_(this.cropper,me)),this},destroy:function(){var t=this.element;return t[B]?(t[B]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,n=e.left,i=e.top;return this.moveTo(Ft(t)?t:n+Number(t),Ft(a)?a:i+Number(a))},moveTo:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,n=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.movable&&(M(t)&&(e.left=t,n=!0),M(a)&&(e.top=a,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,a){var e=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(e.width*t/e.naturalWidth,null,a)},zoomTo:function(t,a,e){var n=this.options,i=this.canvasData,r=i.width,s=i.height,h=i.naturalWidth,c=i.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var o=h*t,d=c*t;if(ut(this.element,Vt,{ratio:t,oldRatio:r/h,originalEvent:e})===!1)return this;if(e){var p=this.pointers,l=_e(this.cropper),m=p&&Object.keys(p).length?function(f){var g=0,x=0,b=0;return z(f,function(D){var w=D.startX,y=D.startY;g+=w,x+=y,b+=1}),{pageX:g/=b,pageY:x/=b}}(p):{pageX:e.pageX,pageY:e.pageY};i.left-=(o-r)*((m.pageX-l.left-i.left)/r),i.top-=(d-s)*((m.pageY-l.top-i.top)/s)}else ct(a)&&M(a.x)&&M(a.y)?(i.left-=(o-r)*((a.x-i.left)/r),i.top-=(d-s)*((a.y-i.top)/s)):(i.left-=(o-r)/2,i.top-=(d-s)/2);i.width=o,i.height=d,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return M(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var a=this.imageData.scaleY;return this.scale(t,M(a)?a:1)},scaleY:function(t){var a=this.imageData.scaleX;return this.scale(M(a)?a:1,t)},scale:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.imageData,n=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.scalable&&(M(t)&&(e.scaleX=t,n=!0),M(a)&&(e.scaleY=a,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,a=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.options,n=this.imageData,i=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){t={x:r.left-i.left,y:r.top-i.top,width:r.width,height:r.height};var s=n.width/n.naturalWidth;if(z(t,function(o,d){t[d]=o/s}),a){var h=Math.round(t.y+t.height),c=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=c-t.x,t.height=h-t.y}}else t={x:0,y:0,width:0,height:0};return e.rotatable&&(t.rotate=n.rotate||0),e.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var a=this.options,e=this.imageData,n=this.canvasData,i={};if(this.ready&&!this.disabled&&ct(t)){var r=!1;a.rotatable&&M(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,r=!0),a.scalable&&(M(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,r=!0),M(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var s=e.width/e.naturalWidth;M(t.x)&&(i.left=t.x*s+n.left),M(t.y)&&(i.top=t.y*s+n.top),M(t.width)&&(i.width=t.width*s),M(t.height)&&(i.height=t.height*s),this.setCropBoxData(i)}return this},getContainerData:function(){return this.ready?O({},this.containerData):{}},getImageData:function(){return this.sized?O({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,a={};return this.ready&&z(["left","top","width","height","naturalWidth","naturalHeight"],function(e){a[e]=t[e]}),a},setCanvasData:function(t){var a=this.canvasData,e=a.aspectRatio;return this.ready&&!this.disabled&&ct(t)&&(M(t.left)&&(a.left=t.left),M(t.top)&&(a.top=t.top),M(t.width)?(a.width=t.width,a.height=t.width/e):M(t.height)&&(a.height=t.height,a.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,a=this.cropBoxData;return this.ready&&this.cropped&&(t={left:a.left,top:a.top,width:a.width,height:a.height}),t||{}},setCropBoxData:function(t){var a,e,n=this.cropBoxData,i=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&ct(t)&&(M(t.left)&&(n.left=t.left),M(t.top)&&(n.top=t.top),M(t.width)&&t.width!==n.width&&(a=!0,n.width=t.width),M(t.height)&&t.height!==n.height&&(e=!0,n.height=t.height),i&&(a?n.height=n.width/i:e&&(n.width=n.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var a=this.canvasData,e=function(mt,Z,gt,st){var Pe=Z.aspectRatio,Ga=Z.naturalWidth,Ja=Z.naturalHeight,Ue=Z.rotate,ti=Ue===void 0?0:Ue,$e=Z.scaleX,ei=$e===void 0?1:$e,qe=Z.scaleY,ai=qe===void 0?1:qe,Ve=gt.aspectRatio,ii=gt.naturalWidth,ni=gt.naturalHeight,Fe=st.fillColor,ri=Fe===void 0?"transparent":Fe,Ze=st.imageSmoothingEnabled,oi=Ze===void 0||Ze,Ke=st.imageSmoothingQuality,si=Ke===void 0?"low":Ke,Qe=st.maxWidth,Ge=Qe===void 0?1/0:Qe,Je=st.maxHeight,ta=Je===void 0?1/0:Je,ea=st.minWidth,aa=ea===void 0?0:ea,ia=st.minHeight,na=ia===void 0?0:ia,Tt=document.createElement("canvas"),U=Tt.getContext("2d"),ra=J({aspectRatio:Ve,width:Ge,height:ta}),oa=J({aspectRatio:Ve,width:aa,height:na},"cover"),Gt=Math.min(ra.width,Math.max(oa.width,ii)),Jt=Math.min(ra.height,Math.max(oa.height,ni)),sa=J({aspectRatio:Pe,width:Ge,height:ta}),ha=J({aspectRatio:Pe,width:aa,height:na},"cover"),la=Math.min(sa.width,Math.max(ha.width,Ga)),ca=Math.min(sa.height,Math.max(ha.height,Ja)),hi=[-la/2,-ca/2,la,ca];return Tt.width=dt(Gt),Tt.height=dt(Jt),U.fillStyle=ri,U.fillRect(0,0,Gt,Jt),U.save(),U.translate(Gt/2,Jt/2),U.rotate(ti*Math.PI/180),U.scale(ei,ai),U.imageSmoothingEnabled=oi,U.imageSmoothingQuality=si,U.drawImage.apply(U,[mt].concat(ce(hi.map(function(li){return Math.floor(dt(li))})))),U.restore(),Tt}(this.image,this.imageData,a,t);if(!this.cropped)return e;var n=this.getData(),i=n.x,r=n.y,s=n.width,h=n.height,c=e.width/Math.floor(a.naturalWidth);c!==1&&(i*=c,r*=c,s*=c,h*=c);var o=s/h,d=J({aspectRatio:o,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=J({aspectRatio:o,width:t.minWidth||0,height:t.minHeight||0},"cover"),l=J({aspectRatio:o,width:t.width||(c!==1?e.width:s),height:t.height||(c!==1?e.height:h)}),m=l.width,f=l.height;m=Math.min(d.width,Math.max(p.width,m)),f=Math.min(d.height,Math.max(p.height,f));var g=document.createElement("canvas"),x=g.getContext("2d");g.width=dt(m),g.height=dt(f),x.fillStyle=t.fillColor||"transparent",x.fillRect(0,0,m,f);var b=t.imageSmoothingEnabled,D=b===void 0||b,w=t.imageSmoothingQuality;x.imageSmoothingEnabled=D,w&&(x.imageSmoothingQuality=w);var y,u,C,E,W,T,P=e.width,tt=e.height,S=i,H=r;S<=-s||S>P?(S=0,y=0,C=0,W=0):S<=0?(C=-S,S=0,W=y=Math.min(P,s+S)):S<=P&&(C=0,W=y=Math.min(s,P-S)),y<=0||H<=-h||H>tt?(H=0,u=0,E=0,T=0):H<=0?(E=-H,H=0,T=u=Math.min(tt,h+H)):H<=tt&&(E=0,T=u=Math.min(h,tt-H));var Dt=[S,H,y,u];if(W>0&&T>0){var ot=m/s;Dt.push(C*ot,E*ot,W*ot,T*ot)}return x.drawImage.apply(x,[e].concat(ce(Dt.map(function(mt){return Math.floor(dt(mt))})))),g},setAspectRatio:function(t){var a=this.options;return this.disabled||Ft(t)||(a.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var a=this.options,e=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var i=t===jt,r=a.movable&&t===fe;t=i||r?t:ve,a.dragMode=t,Ct(e,xt,t),pt(e,Xt,i),pt(e,It,r),a.cropBoxMovable||(Ct(n,xt,t),pt(n,Xt,i),pt(n,It,r))}return this}},Qa=q.Cropper,Re=function(){function t(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(function(s,h){if(!(s instanceof h))throw new TypeError("Cannot call a class as a function")}(this,t),!i||!Ra.test(i.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=i,this.options=O({},Be,ct(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var a,e,n;return a=t,e=[{key:"init",value:function(){var i,r=this.element,s=r.tagName.toLowerCase();if(!r[B]){if(r[B]=this,s==="img"){if(this.isImg=!0,i=r.getAttribute("src")||"",this.originalUrl=i,!i)return;i=r.src}else s==="canvas"&&window.HTMLCanvasElement&&(i=r.toDataURL());this.load(i)}}},{key:"load",value:function(i){var r=this;if(i){this.url=i,this.imageData={};var s=this.element,h=this.options;if(h.rotatable||h.scalable||(h.checkOrientation=!1),h.checkOrientation&&window.ArrayBuffer)if(Wa.test(i))La.test(i)?this.read((c=i.replace(Pa,""),o=atob(c),d=new ArrayBuffer(o.length),z(p=new Uint8Array(d),function(f,g){p[g]=o.charCodeAt(g)}),d)):this.clone();else{var c,o,d,p,l=new XMLHttpRequest,m=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=m,l.onerror=m,l.ontimeout=m,l.onprogress=function(){l.getResponseHeader("content-type")!==ke&&l.abort()},l.onload=function(){r.read(l.response)},l.onloadend=function(){r.reloading=!1,r.xhr=null},h.checkCrossOrigin&&Te(i)&&s.crossOrigin&&(i=We(i)),l.open("GET",i,!0),l.responseType="arraybuffer",l.withCredentials=s.crossOrigin==="use-credentials",l.send()}else this.clone()}}},{key:"read",value:function(i){var r=this.options,s=this.imageData,h=Ua(i),c=0,o=1,d=1;if(h>1){this.url=function(l,m){for(var f=[],g=new Uint8Array(l);g.length>0;)f.push(Le.apply(null,Se(g.subarray(0,8192)))),g=g.subarray(8192);return"data:".concat(m,";base64,").concat(btoa(f.join("")))}(i,ke);var p=function(l){var m=0,f=1,g=1;switch(l){case 2:f=-1;break;case 3:m=-180;break;case 4:g=-1;break;case 5:m=90,g=-1;break;case 6:m=90;break;case 7:m=90,f=-1;break;case 8:m=-90}return{rotate:m,scaleX:f,scaleY:g}}(h);c=p.rotate,o=p.scaleX,d=p.scaleY}r.rotatable&&(s.rotate=c),r.scalable&&(s.scaleX=o,s.scaleY=d),this.clone()}},{key:"clone",value:function(){var i=this.element,r=this.url,s=i.crossOrigin,h=r;this.options.checkCrossOrigin&&Te(r)&&(s||(s="anonymous"),h=We(r)),this.crossOrigin=s,this.crossOriginUrl=h;var c=document.createElement("img");s&&(c.crossOrigin=s),c.src=h||r,c.alt=i.alt||"The image to crop",this.image=c,c.onload=this.start.bind(this),c.onerror=this.stop.bind(this),_(c,ge),i.parentNode.insertBefore(c,i.nextSibling)}},{key:"start",value:function(){var i=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var s=q.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(q.navigator.userAgent),h=function(d,p){O(i.imageData,{naturalWidth:d,naturalHeight:p,aspectRatio:d/p}),i.initialImageData=O({},i.imageData),i.sizing=!1,i.sized=!0,i.build()};if(!r.naturalWidth||s){var c=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=c,c.onload=function(){h(c.width,c.height),s||o.removeChild(c)},c.src=r.src,s||(c.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(c))}else h(r.naturalWidth,r.naturalHeight)}},{key:"stop",value:function(){var i=this.image;i.onload=null,i.onerror=null,i.parentNode.removeChild(i),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var i=this.element,r=this.options,s=this.image,h=i.parentNode,c=document.createElement("div");c.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var o=c.querySelector(".".concat(B,"-container")),d=o.querySelector(".".concat(B,"-canvas")),p=o.querySelector(".".concat(B,"-drag-box")),l=o.querySelector(".".concat(B,"-crop-box")),m=l.querySelector(".".concat(B,"-face"));this.container=h,this.cropper=o,this.canvas=d,this.dragBox=p,this.cropBox=l,this.viewBox=o.querySelector(".".concat(B,"-view-box")),this.face=m,d.appendChild(s),_(i,R),h.insertBefore(o,i.nextSibling),V(s,ge),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,_(l,R),r.guides||_(l.getElementsByClassName("".concat(B,"-dashed")),R),r.center||_(l.getElementsByClassName("".concat(B,"-center")),R),r.background&&_(o,"".concat(B,"-bg")),r.highlight||_(m,_a),r.cropBoxMovable&&(_(m,It),Ct(m,xt,At)),r.cropBoxResizable||(_(l.getElementsByClassName("".concat(B,"-line")),R),_(l.getElementsByClassName("".concat(B,"-point")),R)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),N(r.ready)&&X(i,Ce,r.ready,{once:!0}),ut(i,Ce)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var i=this.cropper.parentNode;i&&i.removeChild(this.cropper),V(this.element,R)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],n=[{key:"noConflict",value:function(){return window.Cropper=Qa,t}},{key:"setDefaults",value:function(i){O(Be,ct(i)&&i)}}],e&&le(a.prototype,e),n&&le(a,n),Object.defineProperty(a,"prototype",{writable:!1}),t}();O(Re.prototype,$a,qa,Va,Fa,Za,Ka);let Ne,He,Ye,Ae,Xe,Ie,je;Ne=["alt","crossorigin","src"],He=et({name:"Cropper",__name:"Cropper",props:{src:I.string.def(""),alt:I.string.def(""),circled:I.bool.def(!1),realTimePreview:I.bool.def(!0),height:I.string.def("360px"),crossorigin:{type:String,default:void 0},imageStyle:{type:Object,default:()=>({})},options:{type:Object,default:()=>({})}},emits:["cropend","ready","cropendError"],setup(t,{emit:a}){const e=t,n={aspectRatio:1,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,autoCrop:!0,background:!0,highlight:!0,center:!0,responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,scalable:!0,modal:!0,guides:!0,movable:!0,rotatable:!0},i=vi(),r=Y(),s=Y(),h=Y(!1),{getPrefixCls:c}=ne(),o=c("cropper-image"),d=bi(f,80),p=$(()=>({height:e.height,maxWidth:"100%",...e.imageStyle})),l=$(()=>[o,i.class,{[`${o}--circled`]:e.circled}]),m=$(()=>({height:`${e.height}`.replace(/px/,"")+"px"}));function f(){e.realTimePreview&&function(){if(!s.value)return;let g=s.value.getData();(e.circled?function(){const x=s.value.getCroppedCanvas(),b=document.createElement("canvas"),D=b.getContext("2d"),w=x.width,y=x.height;return b.width=w,b.height=y,D.imageSmoothingEnabled=!0,D.drawImage(x,0,0,w,y),D.globalCompositeOperation="destination-in",D.beginPath(),D.arc(w/2,y/2,Math.min(w,y)/2,0,2*Math.PI,!0),D.fill(),b}():s.value.getCroppedCanvas()).toBlob(x=>{if(!x)return;let b=new FileReader;b.readAsDataURL(x),b.onloadend=D=>{var w;a("cropend",{imgBase64:((w=D.target)==null?void 0:w.result)??"",imgInfo:g})},b.onerror=()=>{a("cropendError")}},"image/png")}()}return yi(async function(){const g=v(r);g&&(s.value=new Re(g,{...n,ready:()=>{h.value=!0,f(),a("ready",s.value)},crop(){d()},zoom(){d()},cropmove(){d()},...e.options}))}),wi(()=>{var g;(g=s.value)==null||g.destroy()}),(g,x)=>(A(),K("div",{class:F(v(l)),style:Wt(v(m))},[xi(ht("img",{ref_key:"imgElRef",ref:r,alt:t.alt,crossorigin:t.crossorigin,src:t.src,style:Wt(v(p))},null,12,Ne),[[Ci,v(h)]])],6))}}),Ye=["alt","src"],Ae=et({name:"CopperModal",__name:"CopperModal",props:{srcValue:I.string.def(""),circled:I.bool.def(!0)},emits:["uploadSuccess"],setup(t,{expose:a,emit:e}){const n=t,{t:i}=ba(),{getPrefixCls:r}=ne(),s=r("cropper-am"),h=Y(n.srcValue),c=Y(""),o=Y(),d=Y(!1);let p="",l=1,m=1;function f(w){const y=new FileReader;return y.readAsDataURL(w),h.value="",c.value="",y.onload=function(u){var C;h.value=((C=u.target)==null?void 0:C.result)??"",p=w.name},!1}function g({imgBase64:w}){c.value=w}function x(w){o.value=w}function b(w,y){var u,C;w==="scaleX"&&(l=y=l===-1?1:-1),w==="scaleY"&&(m=y=m===-1?1:-1),(C=(u=o==null?void 0:o.value)==null?void 0:u[w])==null||C.call(u,y)}async function D(){const w=(y=>{const u=y.split(","),C=u[0].match(/:(.*?);/)[1],E=window.atob(u[1]);let W=E.length;const T=new Uint8Array(W);for(;W--;)T[W]=E.charCodeAt(W);return new Blob([T],{type:C})})(c.value);e("uploadSuccess",{source:c.value,data:w,filename:p})}return a({openModal:function(){d.value=!0},closeModal:function(){d.value=!1}}),(w,y)=>{const u=zi,C=Di,E=ki,W=za,T=Oa,P=wa,tt=Oi;return A(),K("div",null,[k(tt,{modelValue:v(d),"onUpdate:modelValue":y[7]||(y[7]=S=>Mi(d)?d.value=S:null),canFullscreen:!1,title:v(i)("cropper.modalTitle"),maxHeight:"380px",width:"800px"},{footer:L(()=>[k(P,{type:"primary",onClick:D},{default:L(()=>[ie(ya(v(i)("cropper.okText")),1)]),_:1})]),default:L(()=>[ht("div",{class:F(v(s))},[ht("div",{class:F(`${v(s)}-left`)},[ht("div",{class:F(`${v(s)}-cropper`)},[v(h)?(A(),Lt(v(He),{key:0,circled:t.circled,src:v(h),height:"300px",onCropend:g,onReady:x},null,8,["circled","src"])):Ot("",!0)],2),ht("div",{class:F(`${v(s)}-toolbar`)},[k(E,{beforeUpload:f,fileList:[],accept:"image/*"},{default:L(()=>[k(C,{content:v(i)("cropper.selectImage"),placement:"bottom"},{default:L(()=>[k(u,{preIcon:"ant-design:upload-outlined",type:"primary"})]),_:1},8,["content"])]),_:1}),k(W,null,{default:L(()=>[k(C,{content:v(i)("cropper.btn_reset"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"ant-design:reload-outlined",size:"small",type:"primary",onClick:y[0]||(y[0]=S=>b("reset"))},null,8,["disabled"])]),_:1},8,["content"]),k(C,{content:v(i)("cropper.btn_rotate_left"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"ant-design:rotate-left-outlined",size:"small",type:"primary",onClick:y[1]||(y[1]=S=>b("rotate",-45))},null,8,["disabled"])]),_:1},8,["content"]),k(C,{content:v(i)("cropper.btn_rotate_right"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"ant-design:rotate-right-outlined",size:"small",type:"primary",onClick:y[2]||(y[2]=S=>b("rotate",45))},null,8,["disabled"])]),_:1},8,["content"]),k(C,{content:v(i)("cropper.btn_scale_x"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"vaadin:arrows-long-h",size:"small",type:"primary",onClick:y[3]||(y[3]=S=>b("scaleX"))},null,8,["disabled"])]),_:1},8,["content"]),k(C,{content:v(i)("cropper.btn_scale_y"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"vaadin:arrows-long-v",size:"small",type:"primary",onClick:y[4]||(y[4]=S=>b("scaleY"))},null,8,["disabled"])]),_:1},8,["content"]),k(C,{content:v(i)("cropper.btn_zoom_in"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"ant-design:zoom-in-outlined",size:"small",type:"primary",onClick:y[5]||(y[5]=S=>b("zoom",.1))},null,8,["disabled"])]),_:1},8,["content"]),k(C,{content:v(i)("cropper.btn_zoom_out"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"ant-design:zoom-out-outlined",size:"small",type:"primary",onClick:y[6]||(y[6]=S=>b("zoom",-.1))},null,8,["disabled"])]),_:1},8,["content"])]),_:1})],2)],2),ht("div",{class:F(`${v(s)}-right`)},[ht("div",{class:F(`${v(s)}-preview`)},[v(c)?(A(),K("img",{key:0,alt:v(i)("cropper.preview"),src:v(c)},null,8,Ye)):Ot("",!0)],2),v(c)?(A(),K("div",{key:0,class:F(`${v(s)}-group`)},[k(T,{src:v(c),size:"large"},null,8,["src"]),k(T,{size:48,src:v(c)},null,8,["src"]),k(T,{size:64,src:v(c)},null,8,["src"]),k(T,{size:80,src:v(c)},null,8,["src"])],2)):Ot("",!0)],2)],2)]),_:1},8,["modelValue","title"])])}}}),Xe=["src"],Ie=xa(et({name:"CropperAvatar",__name:"CropperAvatar",props:{width:I.string.def("200px"),value:I.string.def(""),showBtn:I.bool.def(!0),btnText:I.string.def("")},emits:["update:value","change"],setup(t,{expose:a,emit:e}){const n=t,i=Y(n.value),{getPrefixCls:r}=ne(),s=r("cropper-avatar"),h=_i(),{t:c}=ba(),o=Y();function d({source:l,data:m,filename:f}){i.value=l,e("change",{source:l,data:m,filename:f}),h.success(c("cropper.uploadSuccess"))}function p(){o.value.openModal()}return ga(()=>{i.value=n.value}),ua(()=>i.value,l=>{e("update:value",l)}),a({open:p,close:function(){o.value.closeModal()}}),(l,m)=>{const f=wa;return A(),K("div",{class:"user-info-head",onClick:m[1]||(m[1]=g=>p())},[v(i)?(A(),K("img",{key:0,src:v(i),alt:"avatar",class:"img-circle img-lg"},null,8,Xe)):Ot("",!0),t.showBtn?(A(),Lt(f,{key:1,class:F(`${v(s)}-upload-btn`),onClick:m[0]||(m[0]=g=>p())},{default:L(()=>[ie(ya(t.btnText?t.btnText:v(c)("cropper.selectImage")),1)]),_:1},8,["class"])):Ot("",!0),k(Ae,{ref_key:"cropperModelRef",ref:o,srcValue:v(i),onUploadSuccess:d},null,8,["srcValue"])])}}}),[["__scopeId","data-v-d119f72e"]]),je={class:"change-avatar"},Ca=xa(et({name:"UserAvatar",__name:"UserAvatar",props:{img:I.string.def("")},setup(t){const a=t,e=$(()=>a.img),n=Y(),i=async({data:r})=>{await Wi({avatarFile:r}),n.value.close()};return(r,s)=>{const h=Ie;return A(),K("div",je,[k(h,{ref_key:"cropperRef",ref:n,btnProps:{preIcon:"ant-design:cloud-upload-outlined"},showBtn:!1,value:v(e),width:"120px",onChange:i},null,8,["value"])])}}}),[["__scopeId","data-v-af2f071e"]])});export{Ri as __tla,Ca as default};
