import{ah as Z,bZ as O,at as D,C as _,b as C,a9 as A,d as M,M as $,a8 as F,af as q,bt as G,b_ as S,bx as j,bm as J,bg as Q,b$ as R,r as z,f as w,A as U,h as H,aj as X,__tla as Y}from"./index-0f589822.js";let B,ee=Promise.all([(()=>{try{return Y}catch{}})()]).then(async()=>{const I=M({extends:$,setup(e,n){const d=$.setup(e,n);delete d.selectOptionClick;const i=F().proxy;return A(()=>{d.select.cachedOptions.get(i.value)||d.select.onOptionCreate(i)}),d},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function V(e){return e||e===0}function E(e){return Array.isArray(e)&&e.length}function m(e){return Array.isArray(e)?e:V(e)?[e]:[]}function g(e,n,d,i,c){for(let s=0;s<e.length;s++){const h=e[s];if(n(h,s,e,c))return i?i(h,s,e,c):h;{const y=d(h);if(E(y)){const a=g(y,n,d,i,h);if(a)return a}}}}function L(e,n,d,i){for(let c=0;c<e.length;c++){const s=e[c];n(s,c,e,i);const h=d(s);E(h)&&L(h,n,d,s)}}const P=(e,{attrs:n,slots:d,emit:i},{select:c,tree:s,key:h})=>{q(()=>e.modelValue,()=>{e.showCheckbox&&A(()=>{const t=s.value;t&&!G(t.getCheckedKeys(),m(e.modelValue))&&t.setCheckedKeys(m(e.modelValue))})},{immediate:!0,deep:!0});const y=C(()=>({value:h.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),a=(t,l)=>{var r;const o=y.value[t];return J(o)?o(l,(r=s.value)==null?void 0:r.getNode(a("value",l))):l[o]},N=m(e.modelValue).map(t=>g(e.data||[],l=>a("value",l)===t,l=>a("children",l),(l,r,o,v)=>v&&a("value",v))).filter(t=>V(t)),b=C(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const t=[];return L(e.data.concat(e.cacheData),l=>{const r=a("value",l);t.push({value:r,currentLabel:a("label",l),isDisabled:a("disabled",l)})},l=>a("children",l)),t}),f=C(()=>b.value.reduce((t,l)=>({...t,[l.value]:l}),{}));return{...O(D(e),Object.keys(S.props)),...n,nodeKey:h,expandOnClickNode:C(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:C(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(N):N),renderContent:(t,{node:l,data:r,store:o})=>t(I,{value:a("value",r),label:a("label",r),disabled:a("disabled",r)},e.renderContent?()=>e.renderContent(t,{node:l,data:r,store:o}):d.default?()=>d.default({node:l,data:r,store:o}):void 0),filterNodeMethod:(t,l,r)=>{var o;return e.filterNodeMethod?e.filterNodeMethod(t,l,r):!t||((o=a("label",l))==null?void 0:o.includes(t))},onNodeClick:(t,l,r)=>{var o,v,p;if((o=n.onNodeClick)==null||o.call(n,t,l,r),!e.showCheckbox||!e.checkOnClickNode){if(e.showCheckbox||!e.checkStrictly&&!l.isLeaf)e.expandOnClickNode&&r.proxy.handleExpandIconClick();else if(!a("disabled",t)){const u=(v=c.value)==null?void 0:v.options.get(a("value",t));(p=c.value)==null||p.handleOptionSelect(u)}}},onCheck:(t,l)=>{if(!e.showCheckbox)return;const r=a("value",t),o=l.checkedKeys,v=e.multiple?m(e.modelValue).filter(u=>u in f.value&&!s.value.getNode(u)&&!o.includes(u)):[],p=o.concat(v);if(e.checkStrictly)i(j,e.multiple?p:p.includes(r)?r:void 0);else if(e.multiple)i(j,s.value.getCheckedKeys(!0));else{const u=g([t],k=>!E(a("children",k))&&!a("disabled",k),k=>a("children",k)),x=u?a("value",u):void 0,W=V(e.modelValue)&&!!g([t],k=>a("value",k)===e.modelValue,k=>a("children",k));i(j,x===e.modelValue||W?void 0:x)}A(()=>{var u;const x=m(e.modelValue);s.value.setCheckedKeys(x),(u=n.onCheck)==null||u.call(n,t,{checkedKeys:s.value.getCheckedKeys(),checkedNodes:s.value.getCheckedNodes(),halfCheckedKeys:s.value.getHalfCheckedKeys(),halfCheckedNodes:s.value.getHalfCheckedNodes()})})},cacheOptions:b}};var T=M({props:{data:{type:Array,default:()=>[]}},setup(e){const n=Q(R);return q(()=>e.data,()=>{var d;e.data.forEach(c=>{n.cachedOptions.has(c.value)||n.cachedOptions.set(c.value,c)});const i=((d=n.selectWrapper)==null?void 0:d.querySelectorAll("input"))||[];Array.from(i).includes(document.activeElement)||n.setSelected()},{flush:"post",immediate:!0}),()=>{}}}),K=X(M({name:"ElTreeSelect",inheritAttrs:!1,props:{..._.props,...S.props,cacheData:{type:Array,default:()=>[]}},setup(e,n){const{slots:d,expose:i}=n,c=z(),s=z(),h=C(()=>e.nodeKey||e.valueKey||"value"),y=((f,{attrs:t},{tree:l,key:r})=>{const o=Z("tree-select"),v={...O(D(f),Object.keys(_.props)),...t,valueKey:r,popperClass:C(()=>{const p=[o.e("popper")];return f.popperClass&&p.push(f.popperClass),p.join(" ")}),filterMethod:(p="")=>{f.filterMethod&&f.filterMethod(p),A(()=>{var u;(u=l.value)==null||u.filter(p)})},onVisibleChange:p=>{var u;(u=t.onVisibleChange)==null||u.call(t,p),f.filterable&&p&&v.filterMethod()}};return v})(e,n,{select:c,tree:s,key:h}),{cacheOptions:a,...N}=P(e,n,{select:c,tree:s,key:h}),b=w({});return i(b),U(()=>{Object.assign(b,{...O(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...O(c.value,["focus","blur"])})}),()=>H(_,w({...y,ref:f=>c.value=f}),{...d,default:()=>[H(T,{data:a.value}),H(S,w({...N,ref:f=>s.value=f}))]})}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);K.install=e=>{e.component(K.name,K)},B=K});export{B as E,ee as __tla};
