import{d as j,p as s,c9 as q,r as m,ca as M,c7 as W,c8 as A,o as r,c as f,i as d,w as B,a as o,V as F,g as t,al as V,q as N,a1 as P,b7 as D,F as G,t as _,aN as H,l as J,_ as K,__tla as L}from"./index-0f589822.js";import{E as O,__tla as Q}from"./el-image-viewer-863e3dd0.js";import{u as R,__tla as X}from"./useMessage-45ab706e.js";import{_ as Y}from"./_plugin-vue_export-helper-1b428a4d.js";let w,Z=Promise.all([(()=>{try{return L}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return X}catch{}})()]).then(async()=>{let g,h,y,v;g={class:"upload-box"},h=["src"],y={key:1,class:"upload-empty"},v={class:"el-upload__tip"},w=Y(j({name:"UploadImg",__name:"UploadImg",props:{modelValue:s.string.def(""),updateUrl:s.string.def("http://localhost:48080/admin-api/infra/file/upload"),drag:s.bool.def(!0),disabled:s.bool.def(!1),fileSize:s.number.def(5),fileType:s.array.def(["image/jpeg","image/png","image/gif"]),height:s.string.def("150px"),width:s.string.def("150px"),borderradius:s.string.def("8px")},emits:["update:modelValue"],setup(e,{emit:b}){const c=e;q(a=>({"8df8d44e":e.width,"4da02b74":e.height,"45dc076a":e.borderradius}));const{t:p}=J(),n=R(),k=m("id-"+M()),u=m(!1),z=()=>{b("update:modelValue","")},x=m({Authorization:"Bearer "+W(),"tenant-id":A()}),C=()=>{const a=document.querySelector(`#${k.value} .el-upload__input`);a&&a.dispatchEvent(new MouseEvent("click"))},U=a=>{const l=a.size/1024/1024<c.fileSize,i=c.fileType;return i.includes(a.type)||n.notifyWarning("\u4E0A\u4F20\u56FE\u7247\u4E0D\u7B26\u5408\u6240\u9700\u7684\u683C\u5F0F\uFF01"),l||n.notifyWarning(`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${c.fileSize}M\uFF01`),i.includes(a.type)&&l},E=a=>{n.success("\u4E0A\u4F20\u6210\u529F"),b("update:modelValue",a.data)},S=()=>{n.notifyError("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01")};return(a,l)=>{const i=K,$=D,I=O;return r(),f("div",g,[d($,{action:e.updateUrl,id:o(k),class:F(["upload",e.drag?"no-border":""]),multiple:!1,"show-file-list":!1,headers:o(x),"before-upload":U,"on-success":E,"on-error":S,drag:e.drag,accept:e.fileType.join(",")},{default:B(()=>[e.modelValue?(r(),f(G,{key:0},[t("img",{src:e.modelValue,class:"upload-image"},null,8,h),t("div",{class:"upload-handle",onClick:l[1]||(l[1]=H(()=>{},["stop"]))},[t("div",{class:"handle-icon",onClick:C},[d(i,{icon:"ep:edit"}),t("span",null,_(o(p)("action.edit")),1)]),t("div",{class:"handle-icon",onClick:l[0]||(l[0]=T=>u.value=!0)},[d(i,{icon:"ep:zoom-in"}),t("span",null,_(o(p)("action.detail")),1)]),t("div",{class:"handle-icon",onClick:z},[d(i,{icon:"ep:delete"}),t("span",null,_(o(p)("action.del")),1)])])],64)):(r(),f("div",y,[V(a.$slots,"empty",{},()=>[d(i,{icon:"ep:plus"})],!0)]))]),_:3},8,["action","id","class","headers","drag","accept"]),t("div",v,[V(a.$slots,"tip",{},void 0,!0)]),o(u)?(r(),N(I,{key:0,onClose:l[2]||(l[2]=T=>u.value=!1),"url-list":[e.modelValue]},null,8,["url-list"])):P("",!0)])}}}),[["__scopeId","data-v-8f0426ab"]])});export{w as _,Z as __tla};
