import"./base-085523fd.js";import{a as e,E as s}from"./el-table-column-b94ba605.js";import"./el-checkbox-cd7dd8c1.js";/* empty css               */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     */import{_ as a}from"./XTextButton-ab77381a.js";import{S as t}from"./constants-97c4dd5f.js";import{g as o}from"./profile-79f323e1.js";import{a as i}from"./index-a7ef0ded.js";import{u as r}from"./useMessage-5e709b20.js";import{d as l,r as n,x as p,o as c,a as m,w as d,l as u,e as f,t as y,i as j,k as h,F as w,f as b}from"./runtime-core.esm-bundler-ccc21fcd.js";const g=["src"],v={class:"mr-5"},k=l({__name:"UserSocial",setup(l){const k=r(),U=n([]),_=n(),x=e=>{const s=location.origin+"/user/profile?type="+e.type;((e,s)=>i.get({url:"/system/auth/social-auth-redirect?type="+e+"&redirectUri="+s}))(e.type,encodeURIComponent(s)).then((e=>{window.location.href=e.data}))},C=async e=>{var s,a;await(s=e.type,a=e.openid,i.delete({url:"/system/social-user/unbind",data:{type:s,openid:a}}))&&(e.openid=void 0),k.success("解绑成功")};return p((async()=>{await(async()=>{var e;const s=await o();_.value=s;for(const a in t){const s={...t[a]};if(U.value.push(s),null==(e=_.value)?void 0:e.socialUsers)for(const e in _.value.socialUsers)if(s.type===_.value.socialUsers[e].type){s.openid=_.value.socialUsers[e].openid;break}}})()})),(t,o)=>{const i=e,r=a,l=s;return c(),m(l,{data:b(U),"show-header":!1},{default:d((()=>[u(i,{type:"seq",title:"序号",width:"60",fixed:"left"}),u(i,{label:"社交平台",align:"left",width:"120"},{default:d((({row:e})=>[f("img",{class:"h-5 align-middle",src:e.img,alt:""},null,8,g),f("p",v,y(e.title),1)])),_:1}),u(i,{label:"操作",align:"center"},{default:d((({row:e})=>[e.openid?(c(),j(w,{key:0},[h(" 已绑定 "),u(r,{type:"primary",class:"mr-5",onClick:s=>C(e),title:"(解绑)"},null,8,["onClick"])],64)):(c(),j(w,{key:1},[h(" 未绑定 "),u(r,{type:"primary",class:"mr-5",onClick:s=>x(e),title:"(绑定)"},null,8,["onClick"])],64))])),_:1})])),_:1},8,["data"])}}});export{k as _};
