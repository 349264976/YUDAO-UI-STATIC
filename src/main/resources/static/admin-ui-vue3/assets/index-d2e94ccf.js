import{_ as e}from"./XModal.vue_vue_type_script_setup_true_lang-c47b87cf.js";import{_ as t}from"./Form-a0e23abc.js";import"./base-085523fd.js";import{E as s}from"./el-card-d8ab0074.js";import{E as o}from"./el-tree-39cab679.js";import"./el-checkbox-cd7dd8c1.js";import{E as r}from"./el-switch-4b318cc1.js";import{_ as a}from"./ContentWrap.vue_vue_type_script_setup_true_lang-63555901.js";import{_ as i}from"./XTable.vue_vue_type_style_index_0_lang-9c560634.js";import{_ as l}from"./XTextButton-ab77381a.js";import{_ as m}from"./XButton-39866472.js";import{d as p,h as n}from"./tree-150ed6f6.js";import{u}from"./useI18n-56d4bc42.js";import{r as d}from"./formRules-a3380b28.js";import{D as c}from"./dict-3e42505d.js";import{u as j}from"./useVxeCrudSchemas-8bec068b.js";import{A as _,d as f,r as v,x as y,o as g,i as h,l as x,w as k,f as b,a as C,h as w,e as I,k as T,M as S,F as V}from"./runtime-core.esm-bundler-ccc21fcd.js";import{a as P,d as R,b as E,c as M,u as X}from"./index-a0aed13e.js";import{l as D}from"./index-279b6f7b.js";import{u as F}from"./useMessage-5e709b20.js";import{u as K}from"./useXTable-bf420a68.js";import{_ as A}from"./_plugin-vue_export-helper-1b428a4d.js";/* empty css                     */import"./propTypes-5cfdbdab.js";import"./index-be3181b1.js";import"./aria-8fadfbe9.js";import"./runtime-dom.esm-bundler-daa7e741.js";import"./el-notification-c7d5f4ea.js";import"./el-button-6b012e5e.js";import"./index-4665dced.js";import"./index-c2caee16.js";import"./is-a7957d81.js";import"./focus-trap-f53979c5.js";import"./index-7a379d2e.js";import"./Form.vue_vue_type_style_index_0_scoped_f983cb9f_lang-54d674bd.js";import"./el-form-item-8022b942.js";import"./cloneDeep-8298b498.js";import"./el-row-ad412a39.js";import"./el-col-613bea3c.js";import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css               */import"./el-radio-group-d1c0e064.js";import"./el-input-number-4fe7018b.js";/* empty css                  */import"./el-tree-select-6f481715.js";import"./index-168f367d.js";import"./index-7486e100.js";import"./index-795de047.js";import"./strings-777507ad.js";import"./isEqual-6e1d5dd6.js";import"./debounce-eb6bb100.js";import"./index-9d88d8a4.js";/* empty css                   */import"./InputPassword-d0077663.js";import"./Icon.vue_vue_type_script_setup_true_lang-4448c023.js";import"./el-message-7ddf9388.js";import"./auth-2fa258a0.js";import"./useCache-d48cf6c5.js";import"./el-image-viewer-f62c5b85.js";import"./el-progress-64245232.js";import"./index-cf52a0ab.js";import"./_flatRest-ac7abae6.js";import"./dayjs.min-65a6b1e4.js";import"./isArrayLikeObject-26c677c4.js";import"./index-653de86a.js";/* empty css                        *//* empty css                                                                   *//* empty css                    */import"./index-183fdc84.js";import"./app-41ac77cd.js";import"./download-20922b56.js";import"./XTextButton.vue_vue_type_style_index_0_scoped_0fcea4df_lang-41ab76b9.js";import"./index-a7ef0ded.js";import"./vue-router-0864a153.js";import"./index-6f87c872.js";const{t:B}=u(),O=_({name:[d],id:[d],type:[d],remark:[d],status:[d],menuIds:[d]}),U=_({primaryKey:"id",primaryType:"seq",primaryTitle:"套餐编号",action:!0,columns:[{title:"套餐名称",field:"name",isSearch:!0},{title:B("common.status"),field:"status",dictType:c.COMMON_STATUS,dictClass:"number",isSearch:!0},{title:"菜单权限",field:"menuIds",isTable:!1,form:{colProps:{span:24}}},{title:B("form.remark"),field:"remark",isTable:!1,isSearch:!0,form:{component:"Input",componentProps:{type:"textarea",rows:4},colProps:{span:24}}},{title:"创建时间",field:"createTime",formatter:"formatDate",isForm:!1,search:{show:!0,itemRender:{name:"XDataTimePicker"}}}]}),{allSchemas:q}=j(U),L={class:"card-header"},N=f({name:"TenantPackage"}),W=A(f({...N,setup(d){const{t:c}=u(),j=F(),_=v([]),f=v(!1),A=v(!1),B=v(),U=v(!1),N=v(),W=v(!1),z=v(""),H=v(!1),J=v("edit");O.menuIds=[{required:!0,validator:(e,t,s)=>{B.value.getCheckedKeys().length?s():s(new Error("该项为必填项"))},trigger:"blur"}];const[Q,{reload:Y,deleteData:Z}]=K({allSchemas:q,getListApi:P,deleteApi:R}),$=e=>{J.value=c("action."+e),z.value=e,H.value=!0};return y((async()=>{await(async()=>{const e=await D();_.value=n(e)})()})),(n,u)=>{const d=m,v=l,y=i,P=a,R=r,D=o,F=s,K=t,G=e;return g(),h(V,null,[x(P,null,{default:k((()=>[x(y,{onRegister:b(Q)},{toolbar_buttons:k((()=>[x(d,{type:"primary",preIcon:"ep:zoom-in",title:b(c)("action.add"),onClick:u[0]||(u[0]=e=>{return null==(t=b(B))||t.setCheckedKeys([]),f.value=!1,A.value=!1,void $("create");var t})},null,8,["title"])])),actionbtns_default:k((({row:e})=>[x(v,{preIcon:"ep:edit",title:b(c)("action.edit"),onClick:t=>(async e=>{var t,s;$("update");const o=await E(e);null==(t=b(N))||t.setValues(o),null==(s=o.menuIds)||s.forEach((e=>{var t;null==(t=b(B))||t.setChecked(e,!0,!1)}))})(e.id)},null,8,["title","onClick"]),x(v,{preIcon:"ep:delete",title:b(c)("action.del"),onClick:t=>b(Z)(e.id)},null,8,["title","onClick"])])),_:1},8,["onRegister"])])),_:1}),x(G,{modelValue:b(H),"onUpdate:modelValue":u[5]||(u[5]=e=>S(H)?H.value=e:null),title:b(J)},{footer:k((()=>[["create","update"].includes(b(z))?(g(),C(d,{key:0,type:"primary",title:b(c)("action.save"),loading:b(W),onClick:u[3]||(u[3]=e=>(async()=>{var e;const t=null==(e=b(N))?void 0:e.getElFormRef();t&&t.validate((async e=>{var t;if(e){W.value=!0;try{const e=null==(t=b(N))?void 0:t.formModel;e.menuIds=[...B.value.getCheckedKeys(!1),...B.value.getHalfCheckedKeys()],"create"===z.value?(await M(e),j.success(c("common.createSuccess"))):(await X(e),j.success(c("common.updateSuccess"))),H.value=!1}finally{W.value=!1,await Y()}}}))})())},null,8,["title","loading"])):w("",!0),x(d,{loading:b(W),title:b(c)("dialog.close"),onClick:u[4]||(u[4]=e=>H.value=!1)},null,8,["loading","title"])])),default:k((()=>[["create","update"].includes(b(z))?(g(),C(K,{key:0,schema:b(q).formSchema,rules:b(O),ref_key:"formRef",ref:N},{menuIds:k((()=>[x(F,null,{header:k((()=>[I("div",L,[T(" 全选/全不选: "),x(R,{modelValue:b(U),"onUpdate:modelValue":u[1]||(u[1]=e=>S(U)?U.value=e:null),"inline-prompt":"","active-text":"是","inactive-text":"否",onChange:u[2]||(u[2]=e=>{B.value.setCheckedNodes(U.value?_.value:[])})},null,8,["modelValue"])])])),default:k((()=>[x(D,{ref_key:"treeRef",ref:B,"node-key":"id","show-checkbox":"",props:b(p),data:b(_),"empty-text":"加载中，请稍后"},null,8,["props","data"])])),_:1})])),_:1},8,["schema","rules"])):w("",!0)])),_:1},8,["modelValue","title"])],64)}}}),[["__scopeId","data-v-d808527e"]]);export{W as default};
