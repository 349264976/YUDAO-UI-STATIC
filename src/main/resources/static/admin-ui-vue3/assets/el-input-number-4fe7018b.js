import{w as e,a as t}from"./runtime-dom.esm-bundler-daa7e741.js";import{C as a,I as n,U as l,u as r,E as u,d as s}from"./el-notification-c7d5f4ea.js";import{b as i,i as o,u as m,x as d,E as c,_ as p,w as b}from"./base-085523fd.js";import{u as v,d as f,e as N,m as y,G as I,k as h,y as x}from"./index-c2caee16.js";import{i as V}from"./focus-trap-f53979c5.js";import{u as g}from"./el-button-6b012e5e.js";import{b7 as w,d as S,r as E,A,c as k,m as F,x as _,aC as j,o as B,i as K,b as T,f as C,n as M,l as O,w as z,a as P,h as $,b8 as D}from"./runtime-core.esm-bundler-ccc21fcd.js";const G=100,L=600,Y={beforeMount(e,t){const a=t.value,{interval:n=G,delay:l=L}=w(a)?{}:a;let r,u;const s=()=>w(a)?a():a.handler(),i=()=>{u&&(clearTimeout(u),u=void 0),r&&(clearInterval(r),r=void 0)};e.addEventListener("mousedown",(e=>{0===e.button&&(i(),s(),document.addEventListener("mouseup",(()=>i()),{once:!0}),u=setTimeout((()=>{r=setInterval((()=>{s()}),n)}),l))}))}},U=i({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:v,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>null===e||o(e)||["min","max"].includes(e),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0}}),q={[a]:(e,t)=>t!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[n]:e=>o(e)||V(e),[l]:e=>o(e)||V(e)},H=["aria-label","onKeydown"],J=["aria-label","onKeydown"],Q=S({name:"ElInputNumber"});const R=b(p(S({...Q,props:U,emits:q,setup(i,{expose:p,emit:b}){const v=i,{t:w}=r(),S=m("input-number"),G=E(),L=A({currentValue:v.modelValue,userInput:null}),{formItem:U}=g(),q=k((()=>o(v.modelValue)&&v.modelValue<=v.min)),Q=k((()=>o(v.modelValue)&&v.modelValue>=v.max)),R=k((()=>{const e=ae(v.step);return d(v.precision)?Math.max(ae(v.modelValue),e):(v.precision,v.precision)})),W=k((()=>v.controls&&"right"===v.controlsPosition)),X=f(),Z=N(),ee=k((()=>{if(null!==L.userInput)return L.userInput;let e=L.currentValue;if(V(e))return"";if(o(e)){if(Number.isNaN(e))return"";d(v.precision)||(e=e.toFixed(v.precision))}return e})),te=(e,t)=>{if(d(t)&&(t=R.value),0===t)return Math.round(e);let a=String(e);const n=a.indexOf(".");if(-1===n)return e;if(!a.replace(".","").split("")[n+t])return e;const l=a.length;return"5"===a.charAt(l-1)&&(a=`${a.slice(0,Math.max(0,l-1))}6`),Number.parseFloat(Number(a).toFixed(t))},ae=e=>{if(V(e))return 0;const t=e.toString(),a=t.indexOf(".");let n=0;return-1!==a&&(n=t.length-a-1),n},ne=(e,t=1)=>o(e)?te(e+v.step*t):L.currentValue,le=()=>{if(v.readonly||Z.value||Q.value)return;const e=Number(ee.value)||0,t=ne(e);se(t),b(n,L.currentValue)},re=()=>{if(v.readonly||Z.value||q.value)return;const e=Number(ee.value)||0,t=ne(e,-1);se(t),b(n,L.currentValue)},ue=(e,t)=>{const{max:a,min:n,step:r,precision:u,stepStrictly:s,valueOnClear:i}=v;let o=Number(e);if(V(e)||Number.isNaN(o))return null;if(""===e){if(null===i)return null;o=D(i)?{min:n,max:a}[i]:i}return s&&(o=te(Math.round(o/r)*r,u)),d(u)||(o=te(o,u)),(o>a||o<n)&&(o=o>a?a:n,t&&b(l,o)),o},se=(e,t=!0)=>{var n;const r=L.currentValue,u=ue(e);r!==u&&(t?(L.userInput=null,b(l,u),b(a,u,r),v.validateEvent&&(null==(n=null==U?void 0:U.validate)||n.call(U,"change").catch((e=>s()))),L.currentValue=u):b(l,u))},ie=e=>{L.userInput=e;const t=""===e?null:Number(e);b(n,t),se(t,!1)},oe=e=>{const t=""!==e?Number(e):"";(o(t)&&!Number.isNaN(t)||""===e)&&se(t),L.userInput=null},me=e=>{b("focus",e)},de=e=>{var t;b("blur",e),v.validateEvent&&(null==(t=null==U?void 0:U.validate)||t.call(U,"blur").catch((e=>s())))};return F((()=>v.modelValue),(e=>{const t=ue(L.userInput),a=ue(e,!0);o(t)||t&&t===a||(L.currentValue=a,L.userInput=null)}),{immediate:!0}),_((()=>{var e;const{min:t,max:a,modelValue:n}=v,r=null==(e=G.value)?void 0:e.input;if(r.setAttribute("role","spinbutton"),Number.isFinite(a)?r.setAttribute("aria-valuemax",String(a)):r.removeAttribute("aria-valuemax"),Number.isFinite(t)?r.setAttribute("aria-valuemin",String(t)):r.removeAttribute("aria-valuemin"),r.setAttribute("aria-valuenow",String(L.currentValue)),r.setAttribute("aria-disabled",String(Z.value)),!o(n)&&null!=n){let e=Number(n);Number.isNaN(e)&&(e=null),b(l,e)}})),j((()=>{var e;const t=null==(e=G.value)?void 0:e.input;null==t||t.setAttribute("aria-valuenow",`${L.currentValue}`)})),p({focus:()=>{var e,t;null==(t=null==(e=G.value)?void 0:e.focus)||t.call(e)},blur:()=>{var e,t;null==(t=null==(e=G.value)?void 0:e.blur)||t.call(e)}}),(a,n)=>(B(),K("div",{class:M([C(S).b(),C(S).m(C(X)),C(S).is("disabled",C(Z)),C(S).is("without-controls",!a.controls),C(S).is("controls-right",C(W))]),onDragstart:n[0]||(n[0]=t((()=>{}),["prevent"]))},[a.controls?T((B(),K("span",{key:0,role:"button","aria-label":C(w)("el.inputNumber.decrease"),class:M([C(S).e("decrease"),C(S).is("disabled",C(q))]),onKeydown:e(re,["enter"])},[O(C(c),null,{default:z((()=>[C(W)?(B(),P(C(y),{key:0})):(B(),P(C(I),{key:1}))])),_:1})],42,H)),[[C(Y),re]]):$("v-if",!0),a.controls?T((B(),K("span",{key:1,role:"button","aria-label":C(w)("el.inputNumber.increase"),class:M([C(S).e("increase"),C(S).is("disabled",C(Q))]),onKeydown:e(le,["enter"])},[O(C(c),null,{default:z((()=>[C(W)?(B(),P(C(h),{key:0})):(B(),P(C(x),{key:1}))])),_:1})],42,J)),[[C(Y),le]]):$("v-if",!0),O(C(u),{id:a.id,ref_key:"input",ref:G,type:"number",step:a.step,"model-value":C(ee),placeholder:a.placeholder,readonly:a.readonly,disabled:C(Z),size:C(X),max:a.max,min:a.min,name:a.name,label:a.label,"validate-event":!1,onKeydown:[e(t(le,["prevent"]),["up"]),e(t(re,["prevent"]),["down"])],onBlur:de,onFocus:me,onInput:ie,onChange:oe},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]));export{R as E,Y as v};
