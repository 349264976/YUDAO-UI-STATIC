import{u as h,B as w}from"./index-b9c40b5d.js";import{u as _,a as x}from"./useForm-8fd7b992.js";import"./index-c3c80eae.js";import{u as i}from"./useRender-7b752cf7.js";import{D as l,g as C}from"./dict-411628cd.js";import{bD as a,a as d,H as P,u as n,o as y,c as R,w as k,e as v,ag as F}from"./index-185fe65d.js";const L=[{title:"参数主键",dataIndex:"id",width:100},{title:"参数分类",dataIndex:"category",width:180},{title:"参数名称",dataIndex:"name",width:100},{title:"参数键名",dataIndex:"key",width:120},{title:"参数键值",dataIndex:"value",width:120},{title:"系统内置",dataIndex:"type",width:180,customRender:({text:e})=>i.renderDict(e,l.INFRA_CONFIG_TYPE)},{title:"是否可见",dataIndex:"visible",width:180,customRender:({text:e})=>i.renderTag(e?"是":"否")},{title:"备注",dataIndex:"remark",width:180},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>i.renderDate(e)}],V=[{label:"参数名称",field:"name",component:"Input",colProps:{span:8}},{label:"参数键名",field:"key",component:"Input",colProps:{span:8}},{label:"系统内置",field:"type",component:"Select",componentProps:{options:C(l.INFRA_CONFIG_TYPE)},colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],T=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"参数分类",field:"category",required:!0,component:"Input"},{label:"参数名称",field:"name",required:!0,component:"Input"},{label:"参数键名",field:"key",required:!0,component:"Input"},{label:"参数键值",field:"value",required:!0,component:"Input"},{label:"是否可见",field:"visible",component:"RadioGroup",defaultValue:0,componentProps:{options:[{key:!0,label:"是",value:!0},{key:!1,label:"否",value:!1}]}},{label:"备注",field:"remark",component:"InputTextArea"}];function Y(e){return a.get({url:"/infra/config/page",params:e})}function D(e){return a.get({url:"/infra/config/get?id="+e})}function M(e){return a.post({url:"/infra/config/create",data:e})}function B(e){return a.put({url:"/infra/config/update",data:e})}function H(e){return a.delete({url:"/infra/config/delete?id="+e})}function U(e){return a.download({url:"/infra/config/export",params:e},"参数.xls")}const N=d({name:"InfraConfigModal"}),$=d({...N,emits:["success","register"],setup(e,{emit:c}){const o=P(!0),[u,{setFieldsValue:p,resetFields:f,validate:m}]=_({labelWidth:120,baseColProps:{span:24},schemas:T,showActionButtonGroup:!1,actionColOptions:{span:23}}),[g,{setModalProps:r,closeModal:I}]=h(async t=>{if(f(),r({confirmLoading:!1}),o.value=!!t?.isUpdate,n(o)){const s=await D(t.record.id);p({...s})}});async function b(){try{const t=await m();r({confirmLoading:!0}),n(o)?await B(t):await M(t),I(),c("success")}finally{r({confirmLoading:!1})}}return(t,s)=>(y(),R(n(w),F(t.$attrs,{onRegister:n(g),title:o.value?"编辑":"新增",onOk:b}),{default:k(()=>[v(n(x),{onRegister:n(u)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{$ as _,L as c,H as d,U as e,Y as g,V as s};
