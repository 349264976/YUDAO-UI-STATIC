import{a as g,c as _,z as M,k as e,o as y,j as h,w,n as T,ag as v,x as B}from"./index-8b526734.js";import{u as N,_ as k}from"./useForm-f7dccb87.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{a as x,B as C}from"./index-40f1f97e.js";import{f as F,g as R,u as b,c as L}from"./template.data-17076c3c.js";const $=g({name:"NotifyTemplateModal",__name:"TemplateModal",emits:["success","register"],setup(P,{emit:r}){const{t}=_(),{createMessage:n}=B(),a=M(!0),[c,{setFieldsValue:l,resetFields:m,validate:u}]=N({labelWidth:120,baseColProps:{span:24},schemas:F,showActionButtonGroup:!1,actionColOptions:{span:23}}),[f,{setModalProps:o,closeModal:p}]=x(async s=>{if(m(),o({confirmLoading:!1}),a.value=!!s?.isUpdate,e(a)){const i=await R(s.record.id);l({...i})}});async function d(){try{const s=await u();o({confirmLoading:!0}),e(a)?await b(s):await L(s),p(),r("success"),n.success(t("common.saveSuccessText"))}finally{o({confirmLoading:!1})}}return(s,i)=>(y(),h(e(C),v(s.$attrs,{onRegister:e(f),title:a.value?e(t)("action.edit"):e(t)("action.create"),onOk:d}),{default:w(()=>[T(e(k),{onRegister:e(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{$ as _};
