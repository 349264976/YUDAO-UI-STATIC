import{H as f,bt as I,u as r,a as d,B as m,ax as S,o as g,c as y,w as p,k as h,af as x,ag as w,V as z,i as F,as as A,aw as B,J as T,cu as $,cm as k,W as N,al as j,T as D,j as O,bf as P,r as R,e as V,ay as E,aI as J,aJ as q,bA as C}from"./index-185fe65d.js";function H(t){const e=f(t),a=f(!1);let s;function c(){s&&window.clearInterval(s)}function l(){a.value=!1,c(),s=null}function o(){r(a)||s||(a.value=!0,s=setInterval(()=>{r(e)===1?(l(),e.value=t):e.value-=1},1e3))}function n(){e.value=t,l()}function i(){n(),o()}return I(()=>{n()}),{start:o,reset:n,restart:i,clear:c,stop:l,currentCount:e,isStart:a}}const L=d({name:"CountButton"}),_=d({...L,props:{value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},setup(t){const e=t,a=f(!1),{currentCount:s,isStart:c,start:l,reset:o}=H(e.count),{t:n}=F(),i=m(()=>r(c)?n("component.countdown.sendText",[r(s)]):n("component.countdown.normalText"));S(()=>{e.value===void 0&&o()});async function v(){const{beforeStartFunc:u}=e;if(u&&A(u)){a.value=!0;try{await u()&&l()}finally{a.value=!1}}else l()}return(u,b)=>(g(),y(r(z),w(u.$attrs,{disabled:r(c),onClick:v,loading:a.value}),{default:p(()=>[h(x(r(i)),1)]),_:1},16,["disabled","loading"]))}});function U(t,e="value",a="change",s){const l=B()?.emit,o=T({value:t[e]}),n=$(o),i=u=>{o.value=u};return S(()=>{o.value=t[e]}),[m({get(){return o.value},set(u){k(u,n.value)||(o.value=u,N(()=>{l?.(a,u,...j(r(s))||[])}))}}),i,n]}const W=d({name:"CountDownInput",inheritAttrs:!1}),G=d({...W,props:{value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},setup(t){const e=t,{prefixCls:a}=D("countdown-input"),[s]=U(e);return(c,l)=>{const o=O("a-input");return g(),y(o,w(c.$attrs,{class:r(a),size:t.size,value:r(s)}),P({addonAfter:p(()=>[V(_,{size:t.size,count:t.count,value:r(s),beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[R(Object.keys(c.$slots).filter(n=>n!=="addonAfter"),n=>({name:n,fn:p(i=>[E(c.$slots,n,J(q(i||{})))])}))]),1040,["class","size","value"])}}});const M=C(G);C(_);export{M as C,U as u};
