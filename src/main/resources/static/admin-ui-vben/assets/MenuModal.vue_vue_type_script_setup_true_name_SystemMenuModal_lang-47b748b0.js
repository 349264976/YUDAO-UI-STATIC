import{u as y,B as g}from"./index-b9c40b5d.js";import{u as w,a as T}from"./useForm-8fd7b992.js";import{be as _,ae as I,a as u,H as P,u as a,o as N,c as U,w as v,e as B,ag as R}from"./index-185fe65d.js";import{l as k,g as O,u as E,c as x}from"./index-17b3345e.js";import"./index-c3c80eae.js";import{u as p}from"./useRender-7b752cf7.js";import{D as s,g as i}from"./dict-411628cd.js";import{S as t}from"./systemEnum-97385b69.js";const z=[{title:"菜单名称",dataIndex:"name",width:250,align:"left"},{title:"菜单类型",dataIndex:"type",width:80,customRender:({text:e})=>p.renderDict(e,s.SYSTEM_MENU_TYPE)},{title:"图标",dataIndex:"icon",width:60,customRender:({record:e})=>_(I,{icon:e.icon})},{title:"排序",dataIndex:"sort",width:60},{title:"权限标识",dataIndex:"permission",width:140},{title:"组件路径",dataIndex:"component",width:140},{title:"状态",dataIndex:"status",width:80,customRender:({text:e})=>p.renderDict(e,s.COMMON_STATUS)}],H=[{label:"菜单名称",field:"name",component:"Input",colProps:{span:8}},{label:"状态",field:"status",component:"Select",componentProps:{options:i(s.COMMON_STATUS)},colProps:{span:8}}],C=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"上级菜单",field:"parentId",required:!0,component:"ApiTreeSelect",componentProps:{api:()=>k(),parent:"主类目",fieldNames:{label:"name",key:"id",value:"id"},handleTree:"id"}},{label:"菜单类型",field:"type",required:!0,defaultValue:"0",component:"RadioButtonGroup",componentProps:{options:i(s.SYSTEM_MENU_TYPE)},colProps:{lg:24,md:24}},{label:"菜单名称",field:"name",required:!0,component:"Input"},{label:"菜单图标",field:"icon",component:"IconPicker",ifShow:({values:e})=>e.type!==t.BUTTON},{label:"显示排序",field:"sort",required:!0,component:"Input"},{label:"路由地址",field:"path",required:!0,component:"Input",helpMessage:"访问的路由地址，如：`user`。如需外网地址时，则以 `http(s)://` 开头",ifShow:({values:e})=>e.type!==t.BUTTON},{label:"权限标识",field:"permission",component:"Input",helpMessage:'Controller 方法上的权限字符，如：@PreAuthorize(`@ss.hasPermission("system:user:list")`)',ifShow:({values:e})=>e.type!==t.DIR},{label:"组件路径",field:"component",component:"Input",helpMessage:"例如：system/user/index",ifShow:({values:e})=>e.type===t.MENU},{label:"组件名称",field:"componentName",component:"Input",helpMessage:"例如：SystemUser",ifShow:({values:e})=>e.type===t.MENU},{label:"菜单状态",field:"status",required:!0,component:"RadioButtonGroup",defaultValue:0,helpMessage:"选择停用时，路由将不会出现在侧边栏，也不能被访问",componentProps:{options:i(s.COMMON_STATUS)}},{label:"显示状态",field:"visible",component:"RadioButtonGroup",componentProps:{options:[{label:"显示",key:!0,value:!0},{label:"隐藏",key:!1,value:!1}]},helpMessage:"选择隐藏时，路由将不会出现在侧边栏，但仍然可以访问",ifShow:({values:e})=>e.type!==t.BUTTON},{label:"总是显示",field:"alwaysShow",component:"RadioButtonGroup",componentProps:{options:[{label:"显示",key:!0,value:!0},{label:"隐藏",key:!1,value:!1}]},helpMessage:"选择不是时，当该菜单只有一个子菜单时，不展示自己，直接展示子菜单",ifShow:({values:e})=>e.type!==t.BUTTON},{label:"是否缓存",field:"keepAlive",component:"RadioButtonGroup",componentProps:{options:[{label:"缓存",key:!0,value:!0},{label:"不缓存",key:!1,value:!1}]},helpMessage:"选择缓存时，则会被 `keep-alive` 缓存，必须填写「组件名称」字段",ifShow:({values:e})=>e.type===t.MENU}],A=u({name:"SystemMenuModal"}),W=u({...A,emits:["success","register"],setup(e,{emit:d}){const n=P(!0),[c,{setFieldsValue:m,resetFields:f,validate:h}]=w({labelWidth:120,baseColProps:{span:24},schemas:C,showActionButtonGroup:!1,actionColOptions:{span:23}}),[M,{setModalProps:l,closeModal:S}]=y(async o=>{if(f(),l({confirmLoading:!1}),n.value=!!o?.isUpdate,a(n)){const r=await O(o.record.id);m({...r})}});async function b(){try{const o=await h();l({confirmLoading:!0}),a(n)?await E(o):await x(o),S(),d("success")}finally{l({confirmLoading:!1})}}return(o,r)=>(N(),U(a(g),R(o.$attrs,{onRegister:a(M),title:n.value?"编辑":"新增",onOk:b}),{default:v(()=>[B(a(T),{onRegister:a(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{W as _,z as c,H as s};
