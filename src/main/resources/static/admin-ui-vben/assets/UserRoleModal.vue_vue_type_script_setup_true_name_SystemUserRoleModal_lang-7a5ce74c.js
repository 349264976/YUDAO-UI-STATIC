import{u as p,B as g}from"./index-b9c40b5d.js";import{u as _,a as R}from"./useForm-8fd7b992.js";import{a as h}from"./user.data-54241481.js";import{a as w}from"./index-385c14ff.js";import{c as I,d as M}from"./index-759b4bfb.js";import{a as r,o as y,c as B,w as F,e as C,u as e,ag as U}from"./index-185fe65d.js";const b=r({name:"SystemUserRoleModal"}),V=r({...b,emits:["success","register"],setup(k,{emit:t}){const[i,{setFieldsValue:n,resetFields:l,validate:c}]=_({labelWidth:120,baseColProps:{span:24},schemas:h,showActionButtonGroup:!1,actionColOptions:{span:23}}),[d,{setModalProps:o,closeModal:m}]=p(async s=>{l(),o({confirmLoading:!1});const a=await w(s.record.id),f=await I(s.record.id);a.roleIds=f,n({...a})});async function u(){try{const s=await c();o({confirmLoading:!0}),await M({userId:s.id,roleIds:s.roleIds}),m(),t("success")}finally{o({confirmLoading:!1})}}return(s,a)=>(y(),B(e(g),U(s.$attrs,{onRegister:e(d),title:"用户角色权限",onOk:u}),{default:F(()=>[C(e(R),{onRegister:e(i)},null,8,["onRegister"])]),_:1},16,["onRegister"]))}});export{V as _};
