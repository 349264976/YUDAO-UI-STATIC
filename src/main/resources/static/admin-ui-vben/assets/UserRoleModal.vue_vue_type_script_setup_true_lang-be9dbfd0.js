import{a as g,c as _,o as M,j as R,w as h,n as w,k as e,ag as I,x as y}from"./index-8b526734.js";import{u as B,_ as F}from"./useForm-f7dccb87.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{a as U,B as k}from"./index-40f1f97e.js";import{a as x}from"./user.data-cd3248bc.js";import{a as C}from"./index-2d30e53e.js";import{c as S,d as b}from"./index-1b3f13e5.js";const G=g({name:"SystemUserRoleModal",__name:"UserRoleModal",emits:["success","register"],setup(v,{emit:r}){const{t}=_(),{createMessage:n}=y(),[i,{setFieldsValue:c,resetFields:l,validate:m}]=B({labelWidth:120,baseColProps:{span:24},schemas:x,showActionButtonGroup:!1,actionColOptions:{span:23}}),[d,{setModalProps:o,closeModal:u}]=U(async s=>{l(),o({confirmLoading:!1});const a=await C(s.record.id),f=await S(s.record.id);a.roleIds=f,c({...a})});async function p(){try{const s=await m();o({confirmLoading:!0}),await b({userId:s.id,roleIds:s.roleIds}),u(),r("success"),n.success(t("common.saveSuccessText"))}finally{o({confirmLoading:!1})}}return(s,a)=>(M(),R(e(k),I(s.$attrs,{onRegister:e(d),title:"用户角色权限",onOk:p}),{default:h(()=>[w(e(F),{onRegister:e(i)},null,8,["onRegister"])]),_:1},16,["onRegister"]))}});export{G as _};
