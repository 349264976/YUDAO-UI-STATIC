import{a as g,c as _,z as M,k as e,o as R,j as h,w,n as v,ag as y,x as B}from"./index-8b526734.js";import{u as k,_ as x}from"./useForm-f7dccb87.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{a as C,B as F}from"./index-40f1f97e.js";import{f as S}from"./role.data-25790bb5.js";import{g as b,u as L,c as P}from"./index-74c73d6c.js";const A=g({name:"SystemRoleModal",__name:"RoleModal",emits:["success","register"],setup(I,{emit:n}){const{t:o}=_(),{createMessage:i}=B(),a=M(!0),[c,{setFieldsValue:l,resetFields:m,validate:u}]=k({labelWidth:120,baseColProps:{span:24},schemas:S,showActionButtonGroup:!1,actionColOptions:{span:23}}),[d,{setModalProps:t,closeModal:f}]=C(async s=>{if(m(),t({confirmLoading:!1}),a.value=!!s?.isUpdate,e(a)){const r=await b(s.record.id);l({...r})}});async function p(){try{const s=await u();t({confirmLoading:!0}),e(a)?await L(s):await P(s),f(),n("success"),i.success(o("common.saveSuccessText"))}finally{t({confirmLoading:!1})}}return(s,r)=>(R(),h(e(F),y(s.$attrs,{onRegister:e(d),title:a.value?e(o)("action.edit"):e(o)("action.create"),onOk:p}),{default:w(()=>[v(e(x),{onRegister:e(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{A as _};
