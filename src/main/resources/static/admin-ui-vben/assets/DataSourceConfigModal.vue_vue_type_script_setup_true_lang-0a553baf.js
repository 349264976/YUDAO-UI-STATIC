import{a as w,c as h,z as I,k as e,o as _,j as x,w as b,n as C,ag as M,x as S}from"./index-8b526734.js";import{u as R,_ as v}from"./useForm-f7dccb87.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{a as B,B as D}from"./index-40f1f97e.js";import"./index-ec19b8e7.js";import"./index-d2d20fb4.js";import"./tree-e6981725.js";import"./index-03ea37ad.js";import"./index-3e87b811.js";import"./index-c8168e27.js";import"./sortable.esm-f208c0d8.js";import{u as k}from"./useRender-f65ba3eb.js";import{a as q,u as y,c as F}from"./index-dc3024f2.js";const H=[{title:"主键编号",dataIndex:"id",width:100},{title:"数据源名称",dataIndex:"name",width:180},{title:"数据源连接",dataIndex:"url",width:100},{title:"用户名",dataIndex:"username",width:120},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:r})=>k.renderDate(r)}],L=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"数据源名称",field:"name",required:!0,component:"Input"},{label:"数据源连接",field:"url",required:!0,component:"Input"},{label:"用户名",field:"username",required:!0,component:"Input"},{label:"密码",field:"password",required:!0,component:"Input"}],J=w({__name:"DataSourceConfigModal",emits:["success","register"],setup(r,{emit:i}){const{t:s}=h(),{createMessage:c}=S(),a=I(!0),[l,{setFieldsValue:u,resetFields:d,validate:m}]=R({labelWidth:120,baseColProps:{span:24},schemas:L,showActionButtonGroup:!1,actionColOptions:{span:23}}),[p,{setModalProps:o,closeModal:f}]=B(async t=>{if(d(),o({confirmLoading:!1}),a.value=!!t?.isUpdate,e(a)){const n=await q(t.record.id);u({...n})}});async function g(){try{const t=await m();o({confirmLoading:!0}),e(a)?await y(t):await F(t),f(),i("success"),c.success(s("common.saveSuccessText"))}finally{o({confirmLoading:!1})}}return(t,n)=>(_(),x(e(D),M(t.$attrs,{onRegister:e(p),title:a.value?e(s)("action.edit"):e(s)("action.create"),onOk:g}),{default:b(()=>[C(e(v),{onRegister:e(l)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{J as _,H as c};
