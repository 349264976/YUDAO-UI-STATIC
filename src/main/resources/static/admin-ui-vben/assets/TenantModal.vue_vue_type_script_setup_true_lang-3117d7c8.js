import{cm as a,a as T,c as x,z as M,k as t,o as P,j as S,w as _,n as y,ag as k,x as C}from"./index-8b526734.js";import{u as R,_ as D}from"./useForm-f7dccb87.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{a as O,B as F}from"./index-40f1f97e.js";import{g as N}from"./index-855bdeff.js";import"./index-ec19b8e7.js";import"./index-d2d20fb4.js";import"./tree-e6981725.js";import"./index-03ea37ad.js";import"./index-3e87b811.js";import"./index-c8168e27.js";import"./sortable.esm-f208c0d8.js";import{u as s}from"./useRender-f65ba3eb.js";import{D as l,g as d}from"./dict-5cefafd8.js";const X=[{title:"租户编号",dataIndex:"id",width:100},{title:"租户名",dataIndex:"name",width:180},{title:"租户套餐",dataIndex:"packageId",width:100},{title:"联系人",dataIndex:"contactName",width:120},{title:"联系手机",dataIndex:"contactMobile",width:120},{title:"账号额度",dataIndex:"accountCount",width:120,customRender:({text:e})=>s.renderTag(e)},{title:"过期时间",dataIndex:"expireTime",width:180,customRender:({text:e})=>s.renderDate(e)},{title:"绑定域名",dataIndex:"domain",width:200},{title:"租户状态",dataIndex:"status",width:180,customRender:({text:e})=>s.renderDict(e,l.COMMON_STATUS)},{title:"备注",dataIndex:"remark",width:180},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>s.renderDate(e)}],Z=[{label:"租户名",field:"name",component:"Input",colProps:{span:8}},{label:"联系人",field:"contactName",component:"Input",colProps:{span:8}},{label:"联系手机",field:"contactMobile",component:"Input",colProps:{span:8}},{label:"状态",field:"status",component:"Select",componentProps:{options:d(l.COMMON_STATUS)},colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],v=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"租户名",field:"name",required:!0,component:"Input"},{label:"租户套餐",field:"packageId",required:!0,component:"ApiSelect",componentProps:{api:()=>N(),labelField:"name",valueField:"id"}},{label:"联系人",field:"contactName",required:!0,component:"Input"},{label:"联系手机",field:"contactMobile",component:"Input"},{label:"用户名称",field:"username",component:"Input",ifShow:({values:e})=>!e.id},{label:"用户密码",field:"password",component:"InputPassword",ifShow:({values:e})=>!e.id},{label:"账号额度",field:"accountCount",required:!0,defaultValue:0,component:"InputNumber"},{label:"过期时间",field:"expireTime",required:!0,component:"DatePicker",componentProps:{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",valueFormat:"x"}},{label:"绑定域名",field:"domain",required:!0,component:"Input"},{label:"租户状态",field:"status",component:"Select",componentProps:{options:d(l.COMMON_STATUS)}}];function ee(e){return a.get({url:"/system/tenant/page",params:e})}function q(e){return a.get({url:"/system/tenant/get?id="+e})}function A(e){return a.post({url:"/system/tenant/create",data:e})}function B(e){return a.put({url:"/system/tenant/update",data:e})}function te(e){return a.delete({url:"/system/tenant/delete?id="+e})}function ne(e){return a.download({url:"/system/tenant/export-excel",params:e},"租户.xls")}const ae=T({name:"SystemTenantModal",__name:"TenantModal",emits:["success","register"],setup(e,{emit:m}){const{t:r}=x(),{createMessage:u}=C(),o=M(!0),[p,{setFieldsValue:f,resetFields:g,validate:I}]=R({labelWidth:120,baseColProps:{span:24},schemas:v,showActionButtonGroup:!1,actionColOptions:{span:23}}),[w,{setModalProps:i,closeModal:b}]=O(async n=>{if(g(),i({confirmLoading:!1}),o.value=!!n?.isUpdate,t(o)){const c=await q(n.record.id);f({...c})}});async function h(){try{const n=await I();i({confirmLoading:!0}),t(o)?await B(n):await A(n),b(),m("success"),u.success(r("common.saveSuccessText"))}finally{i({confirmLoading:!1})}}return(n,c)=>(P(),S(t(F),k(n.$attrs,{onRegister:t(w),title:o.value?t(r)("action.edit"):t(r)("action.create"),onOk:h}),{default:_(()=>[y(t(D),{onRegister:t(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{ae as _,X as c,te as d,ne as e,ee as g,Z as s};
