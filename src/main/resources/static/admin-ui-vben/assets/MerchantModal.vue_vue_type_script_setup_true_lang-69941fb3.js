import{bb as I,x as l,a as b,c as w,z as _,k as t,o as P,j as x,w as k,n as C,ag as T}from"./index-8b526734.js";import{u as R,_ as O}from"./useForm-f7dccb87.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{a as y,B as N}from"./index-40f1f97e.js";import{c as v,a as B,u as F,b as A}from"./index-5e56383b.js";import"./index-ec19b8e7.js";import"./index-d2d20fb4.js";import"./tree-e6981725.js";import"./index-03ea37ad.js";import"./index-3e87b811.js";import"./index-c8168e27.js";import"./sortable.esm-f208c0d8.js";import{u as D}from"./useRender-f65ba3eb.js";import{g as p,D as m}from"./dict-5cefafd8.js";import{S as U}from"./index-8e6d9858.js";const ee=[{title:"商户编号",dataIndex:"id",width:100},{title:"商户号",dataIndex:"no",width:180},{title:"商户全称",dataIndex:"name",width:100},{title:"商户简称",dataIndex:"shortName",width:120},{title:"开启状态",dataIndex:"status",width:180,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),I(U,{checked:e.status===0,checkedChildren:"已启用",unCheckedChildren:"已禁用",loading:e.pendingStatus,onChange(i){e.pendingStatus=!0;const s=i?0:1,{createMessage:n}=l();v(e.id,s).then(()=>{e.status=s,n.success("已成功修改商户状态")}).catch(()=>{n.error("修改商户状态失败")}).finally(()=>{e.pendingStatus=!1})}}))},{title:"备注",dataIndex:"remark",width:180},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>D.renderDate(e)}],te=[{label:"商户号",field:"no",component:"Input",colProps:{span:8}},{label:"商户全称",field:"name",component:"Input",colProps:{span:8}},{label:"商户简称",field:"shortName",component:"Input",colProps:{span:8}},{label:"状态",field:"status",component:"Select",componentProps:{options:p(m.COMMON_STATUS)},colProps:{span:8}},{label:"备注",field:"remark",component:"Input",colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],L=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"商户全称",field:"name",required:!0,component:"Input"},{label:"商户简称",field:"shortName",required:!0,component:"Input"},{label:"开启状态",field:"status",component:"Select",componentProps:{options:p(m.COMMON_STATUS)}},{label:"备注",field:"remark",component:"InputTextArea"}],ae=b({name:"PayMerchantModal",__name:"MerchantModal",emits:["success","register"],setup(e,{emit:i}){const{t:s}=w(),{createMessage:n}=l(),o=_(!0),[d,{setFieldsValue:u,resetFields:f,validate:h}]=R({labelWidth:120,baseColProps:{span:24},schemas:L,showActionButtonGroup:!1,actionColOptions:{span:23}}),[g,{setModalProps:r,closeModal:M}]=y(async a=>{if(f(),r({confirmLoading:!1}),o.value=!!a?.isUpdate,t(o)){const c=await B(a.record.id);u({...c})}});async function S(){try{const a=await h();r({confirmLoading:!0}),t(o)?await F(a):await A(a),M(),i("success"),n.success(s("common.saveSuccessText"))}finally{r({confirmLoading:!1})}}return(a,c)=>(P(),x(t(N),T(a.$attrs,{onRegister:t(g),title:o.value?t(s)("action.edit"):t(s)("action.create"),onOk:S}),{default:k(()=>[C(t(O),{onRegister:t(d)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{ae as _,ee as c,te as s};
