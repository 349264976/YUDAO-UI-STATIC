import{a as p,B as u}from"./index-40f1f97e.js";import{D as m}from"./index-0f4dcf74.js";import{bb as i,a as f,z as g,o as b,j as h,w as T,n as I,k as s,ag as P}from"./index-8b526734.js";import"./index-ec19b8e7.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import"./index-d2d20fb4.js";import"./tree-e6981725.js";import"./index-03ea37ad.js";import"./index-3e87b811.js";import"./index-c8168e27.js";import"./sortable.esm-f208c0d8.js";import{u as r}from"./useRender-f65ba3eb.js";import{D as d,g as w}from"./dict-5cefafd8.js";import{u as D}from"./useDescription-c4a08efa.js";const Y=[{title:"日志编号",dataIndex:"id",width:100},{title:"用户编号",dataIndex:"userId",width:100},{title:"用户类型",dataIndex:"userType",width:120,customRender:({text:e})=>r.renderDict(e,d.USER_TYPE)},{title:"应用名",dataIndex:"applicationName",width:120},{title:"请求方法名",dataIndex:"requestMethod",width:120},{title:"请求地址",dataIndex:"requestUrl",width:250},{title:"请求时间",dataIndex:"beginTime",width:180,customRender:({text:e})=>r.renderDate(e)},{title:"执行时长",dataIndex:"duration",width:180,customRender:({text:e})=>r.renderText(e.toString(),"ms")},{title:"操作结果",dataIndex:"status",width:180,ellipsis:!0,customRender:({record:e})=>{const t=e.resultCode===0;return r.renderTag(t?"成功":"失败",t?"#87d068":"#f50")}}],L=[{label:"用户编号",field:"userId",component:"Input",colProps:{span:8}},{label:"用户类型",field:"userType",component:"Select",componentProps:{options:w(d.USER_TYPE)},colProps:{span:8}},{label:"应用名",field:"applicationName",component:"Input",colProps:{span:8}},{label:"请求地址",field:"requestUrl",component:"Input",colProps:{span:8}},{label:"请求时间",field:"beginTime",component:"RangePicker",colProps:{span:8}},{label:"执行时长",field:"duration",component:"Input",colProps:{span:8}},{label:"结果码",field:"resultCode",component:"Input",colProps:{span:8}}],x=[{value:"GET",color:"#108ee9"},{value:"POST",color:"#2db7f5"},{value:"PUT",color:"warning"},{value:"DELETE",color:"#f50"}],_=[{label:"日志id",field:"id"},{label:"链路id",field:"traceId",show:e=>e&&e.traceId&&e.traceId!==""},{label:"应用名称",field:"applicationName",labelMinWidth:100},{field:"userId",label:"用户id",render(e,t){const n=r.renderDict(t.userType,d.USER_TYPE),o=r.renderTag("uid: "+e);return i("span",{},[n,o])}},{field:"resultCode",label:"请求结果",render(e){return r.renderTag(e===0?"成功":"失败",e===0?"#87d068":"#f50")}},{field:"resultMsg",label:"响应信息",show(e){return e&&e.resultMsg&&e.resultMsg!==""},render(e){return i("span",{style:{color:"red",fontWeight:"bold"}},e)}},{field:"userIp",label:"请求ip"},{field:"userAgent",label:"userAgent"},{field:"beginTime",label:"请求时间",render(e){return r.renderDate(e)}},{field:"requestUrl",label:"请求路径",render(e,t){if(!t)return"";const{requestMethod:n,requestUrl:o}=t,a=x.find(c=>c.value===n.toUpperCase()),l=a?r.renderTag(n,a.color):n;return i("span",{},[l,o])}},{field:"requestParams",label:"请求参数",render(e){return r.renderJsonPreview(e)}},{field:"beginTime",label:"请求开始时间",render(e){return r.renderDate(e)}},{field:"endTime",label:"请求结束时间",render(e){return r.renderDate(e)}},{field:"duration",label:"请求耗时",render(e){return r.renderText(String(e),"ms")}}],W=f({name:"AcessLogModal",__name:"AccessLogModal",setup(e){const t=g(),[n,{closeModal:o}]=p(l=>{t.value=l}),[a]=D({column:1,schema:_,data:t});return(l,c)=>(b(),h(s(u),P(l.$attrs,{title:"访问日志详情",onRegister:s(n),onOk:s(o),width:"800px"}),{default:T(()=>[I(s(m),{onRegister:s(a)},null,8,["onRegister"])]),_:1},16,["onRegister","onOk"]))}});export{W as _,Y as c,L as s};
