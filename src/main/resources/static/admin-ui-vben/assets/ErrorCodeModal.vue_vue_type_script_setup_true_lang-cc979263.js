import{cm as r,a as E,c as w,z as x,k as t,o as C,j as P,w as R,n as b,ag as y,x as M}from"./index-8b526734.js";import{u as S,_ as T}from"./useForm-f7dccb87.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{a as D,B as O}from"./index-40f1f97e.js";import"./index-ec19b8e7.js";import"./index-d2d20fb4.js";import"./tree-e6981725.js";import"./index-03ea37ad.js";import"./index-3e87b811.js";import"./index-c8168e27.js";import"./sortable.esm-f208c0d8.js";import{u as c}from"./useRender-f65ba3eb.js";import{D as l,g as k}from"./dict-5cefafd8.js";const K=[{title:"编号",dataIndex:"id",width:100},{title:"类型",dataIndex:"type",width:80,customRender:({text:e})=>c.renderDict(e,l.SYSTEM_ERROR_CODE_TYPE)},{title:"应用名",dataIndex:"applicationName",width:200},{title:"错误码编码",dataIndex:"code",width:120},{title:"错误码提示",dataIndex:"message",width:300},{title:"备注",dataIndex:"memo",width:200},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>c.renderDate(e)}],Q=[{label:"错误码类型",field:"type",component:"Select",componentProps:{options:k(l.SYSTEM_ERROR_CODE_TYPE)},colProps:{span:8}},{label:"应用名",field:"applicationName",component:"Input",colProps:{span:8}},{label:"错误码编码",field:"code",component:"Input",colProps:{span:8}},{label:"错误码提示",field:"message",component:"Input",colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],v=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"应用名",field:"applicationName",required:!0,component:"Input"},{label:"错误码编码",field:"code",required:!0,component:"Input"},{label:"错误码提示",field:"message",required:!0,component:"Input"},{label:"备注",field:"memo",component:"InputTextArea"}];function X(e){return r.get({url:"/system/error-code/page",params:e})}function B(e){return r.get({url:"/system/error-code/get?id="+e})}function F(e){return r.post({url:"/system/error-code/create",data:e})}function Y(e){return r.put({url:"/system/error-code/update",data:e})}function Z(e){return r.delete({url:"/system/error-code/delete?id="+e})}function ee(e){return r.download({url:"/system/error-code/export-excel",params:e},"错误码.xls")}const te=E({name:"SystemErrorCodeModal",__name:"ErrorCodeModal",emits:["success","register"],setup(e,{emit:d}){const{t:s}=w(),{createMessage:p}=M(),a=x(!0),[m,{setFieldsValue:u,resetFields:f,validate:g}]=S({labelWidth:120,baseColProps:{span:24},schemas:v,showActionButtonGroup:!1,actionColOptions:{span:23}}),[_,{setModalProps:n,closeModal:I}]=D(async o=>{if(f(),n({confirmLoading:!1}),a.value=!!o?.isUpdate,t(a)){const i=await B(o.record.id);u({...i})}});async function h(){try{const o=await g();n({confirmLoading:!0}),t(a)?await Y(o):await F(o),I(),d("success"),p.success(s("common.saveSuccessText"))}finally{n({confirmLoading:!1})}}return(o,i)=>(C(),P(t(O),y(o.$attrs,{onRegister:t(_),title:a.value?t(s)("action.edit"):t(s)("action.create"),onOk:h}),{default:R(()=>[b(t(T),{onRegister:t(m)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{te as _,K as c,Z as d,ee as e,X as g,Q as s};
