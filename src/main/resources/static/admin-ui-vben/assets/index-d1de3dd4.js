import{a as f,i as w,j as N,o as d,f as x,e as i,w as a,k as u,c as R,u as n,I as k,h as C,l as E}from"./index-185fe65d.js";import{_ as M}from"./index-c3c80eae.js";import{_ as P}from"./useForm-8fd7b992.js";import{u as A}from"./useTable-e1aa62c8.js";import"./index-3ea574b4.js";import"./index-ea6c9550.js";import{g as O,u as D,a as Y}from"./message-7b6bc710.js";import{u as r}from"./useRender-7b752cf7.js";import{D as o,g as s}from"./dict-411628cd.js";import"./index-a51ee13a.js";import"./tree-1cdc2dee.js";import"./eagerComputed-625aaa6f.js";import"./index-341544d4.js";import"./index-a2353b1b.js";import"./index-a331c47c.js";import"./useSize-536e554d.js";import"./useWindowSizeFn-513fc031.js";import"./useContentViewHeight-f2cd4d02.js";import"./ArrowLeftOutlined-b0e96cce.js";import"./index-1091f5b3.js";import"./transButton-4d2a5fee.js";import"./index-726b028f.js";import"./index-55063501.js";import"./get-99b39cda.js";import"./index-b9c40b5d.js";import"./FullscreenOutlined-32991190.js";import"./index-69b45e12.js";import"./sortable.esm-261924ea.js";import"./RedoOutlined-4bac5e59.js";import"./fromPairs-e099444b.js";import"./index-ad77ec72.js";import"./index-273d53fa.js";import"./index-e80a262d.js";import"./_baseIteratee-ef666e06.js";import"./scrollTo-360190e5.js";import"./index-0e02bec4.js";import"./index-55aee596.js";import"./index-4d2a3b0b.js";import"./useRefs-d524c1a2.js";import"./index-e8479e4b.js";import"./index-109393d4.js";import"./uniqBy-074073a7.js";const F=[{title:"发送人",dataIndex:"templateNickname",width:100},{title:"发送时间",dataIndex:"createTime",width:180,customRender:({text:e})=>r.renderDate(e)},{title:"类型",dataIndex:"templateType",width:180,customRender:({text:e})=>r.renderDict(e,o.SYSTEM_NOTIFY_TEMPLATE_TYPE)},{title:"内容",dataIndex:"templateContent",width:300},{title:"是否已读",dataIndex:"readStatus",width:180,customRender:({text:e})=>r.renderDict(e,o.INFRA_BOOLEAN_STRING)}],B=[{label:"是否已读",field:"readStatus",component:"Select",componentProps:{options:s(o.INFRA_BOOLEAN_STRING)},colProps:{span:8}},{label:"发送时间",field:"createTime",component:"RangePicker",colProps:{span:8}}];s(o.SYSTEM_NOTIFY_TEMPLATE_TYPE),s(o.COMMON_STATUS);const L=f({name:"SystemMyMessage"}),Ce=f({...L,setup(e){const{t:_}=w(),{createMessage:m}=E(),[T,{getSelectRowKeys:I,reload:p}]=A({title:"我的站内信列表",api:O,columns:F,formConfig:{labelWidth:120,schemas:B},rowSelection:{type:"checkbox"},rowKey:"id",useSearchForm:!0,showTableSetting:!0,showIndexColumn:!1,actionColumn:{width:140,title:_("common.action"),dataIndex:"action",fixed:"right"}});function h(){const t=I();l(t)}async function b(t){await l([t.id])}async function l(t){await D(t),m.success("标记已读成功！"),p()}async function y(){await Y(),m.success("全部已读成功！"),p()}return(t,U)=>{const c=N("a-button");return d(),x("div",null,[i(n(M),{onRegister:n(T)},{toolbar:a(()=>[i(c,{type:"primary",onClick:h},{default:a(()=>[u(" 标记已读 ")]),_:1}),i(c,{type:"primary",onClick:y},{default:a(()=>[u(" 全部已读 ")]),_:1})]),bodyCell:a(({column:g,record:S})=>[g.key==="action"?(d(),R(n(P),{key:0,actions:[{icon:n(k).EDIT,label:"已读",onClick:b.bind(null,S)}]},null,8,["actions"])):C("",!0)]),_:1},8,["onRegister"])])}}});export{Ce as default};
