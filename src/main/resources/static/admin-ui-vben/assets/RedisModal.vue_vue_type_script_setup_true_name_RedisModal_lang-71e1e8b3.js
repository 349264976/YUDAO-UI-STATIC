import{bD as o,a as p,H as R,o as C,c as T,w as n,e as i,u as a,b as c,af as w,ag as F}from"./index-185fe65d.js";import{L as d}from"./index-0bc01b89.js";import"./index-e80a262d.js";import{u as v,B as K}from"./index-b9c40b5d.js";import{u as M,a as B}from"./useForm-8fd7b992.js";import"./index-c3c80eae.js";import{u as m}from"./useRender-7b752cf7.js";import{D as L}from"./dict-411628cd.js";const j=[{label:"Redis版本",field:"redis_version"},{label:"运行模式",field:"redis_mode",render:e=>e==="standalone"?"单机":"集群"},{label:"端口",field:"tcp_port"},{label:"客户端数",field:"connected_clients"},{label:"运行时间(天)",field:"uptime_in_days"},{label:"使用内存",field:"used_memory_human"},{label:"使用CPU",field:"tcp_port",render:e=>parseFloat(e).toFixed(2)},{label:"内存配置",field:"maxmemory_human"},{label:"AOF是否开启",field:"maxmemory_human",render:e=>e==="0"?"否":"是"},{label:"RDB是否成功",field:"rdb_last_bgsave_status"},{label:"Key数量",field:"expired_keys"},{label:"网络入口/出口",field:"instantaneous_input_kbps",render:(e,s)=>s.instantaneous_input_kbps+"kps / "+s.instantaneous_output_kbps+"kps"}],q=[{title:"Key 模板",dataIndex:"keyTemplate",width:200},{title:"Key 类型",dataIndex:"keyType",width:100},{title:"Value 类型",dataIndex:"valueType",width:300},{title:"超时类型",dataIndex:"timeoutType",width:180,customRender:({text:e})=>m.renderDict(e,L.INFRA_REDIS_TIMEOUT_TYPE)},{title:"超时时间",dataIndex:"timeout",width:100,customRender:({text:e})=>m.renderText(e===0?0:e/1e3,"秒")}],P=[{label:"缓存键名",field:"cacheForm.key",dynamicDisabled:!0,component:"Input"},{label:"缓存内容",field:"cacheForm.value",dynamicDisabled:!0,component:"InputTextArea"}];function z(){return o.get({url:"/infra/redis/get-monitor-info"})}function J(){return o.get({url:"/infra/redis/get-key-define-list"})}function f(e){return o.get({url:"/infra/redis/get-key-list",params:{keyTemplate:e}})}function S(e){return o.delete({url:"/infra/redis/delete-key?key="+e})}const V=["onClick"],A=["onClick"],E=p({name:"RedisModal"}),Q=p({...E,setup(e){const s=d.Item,_=d.Item.Meta,u=R([]),[b,{setFieldsValue:y,resetFields:h}]=M({labelWidth:120,baseColProps:{span:24},schemas:P,showActionButtonGroup:!1,actionColOptions:{span:23}}),[g,{setModalProps:k}]=v(async t=>{h(),k({confirmLoading:!1});const r=await f(t.record);u.value=r});async function I(t){const r=await f(t);y({...r})}function x(t){S(t)}return(t,r)=>(C(),T(a(K),F(t.$attrs,{onRegister:a(g),title:"缓存模块"}),{default:n(()=>[i(a(d),{"data-source":u.value},{renderItem:n(({item:l})=>[i(a(s),null,{default:n(()=>[i(a(_),null,{title:n(()=>[c("a",{onClick:D=>I(l)},w(l),9,V)]),actions:n(()=>[c("a",{onClick:D=>x(l)},"删除",8,A)]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"]),i(a(B),{onRegister:a(b)},null,8,["onRegister"])]),_:1},16,["onRegister"]))}});export{Q as _,z as a,j as b,J as g,q as t};
