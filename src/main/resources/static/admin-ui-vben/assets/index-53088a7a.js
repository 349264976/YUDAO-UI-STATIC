import{d as ie,u as R,r as X,V as He,a as Pe,f as ce,b as Ge,_ as Te,c as Ve,e as Ze,g as Ke,h as qe,m as We,i as pe,j as Xe,k as Qe,l as _e,n as Ye,o as xe,p as de,q as W,s as eo,t as oo,v as no}from"./index.vue_vue_type_style_index_0_scoped_68f72b1e_lang-85ac578a.js";import{a as A,af as Z,B,G as D,s as c,o as r,h,n as a,w as s,i as P,v as _,t as te,ag as N,f as U,q as L,aC as ne,ao as j,j as g,F as E,r as M,aI as me,aJ as fe,eE as ae,bw as T,D as Fe,E as Ae,f6 as to,k as I,x as De,e9 as Y,z as O,aB as ao,a4 as lo,l as F,bq as x,cy as ve,d2 as Ce,R as oe,b8 as V,ax as we,cA as so,cB as ro,b as uo,f7 as io,a7 as q,f8 as ke,cz as re,f9 as co,bc as po,b0 as mo}from"./index-8b526734.js";import"./index-3e87b811.js";import{R as Se}from"./index-9e517d44.js";import{C as he}from"./index-42686290.js";import{F as ee,a as Q}from"./index-03ea37ad.js";import{C as Ee,M as Me}from"./index-8629d074.js";import{u as fo,_ as vo}from"./useForm-f7dccb87.js";import{n as Co,y as Ue,z as Oe,q as ho,U as go}from"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{D as bo}from"./index-c8168e27.js";import{S as ge}from"./index-8e6d9858.js";import{C as be}from"./index-d2d20fb4.js";import{I as yo}from"./index-50e4b4b2.js";/* empty css              */import{T as $o,a as Io}from"./index-e8507731.js";const _o=A({name:"CollapseItem",components:{draggable:ie,Icon:Z},props:{list:{type:[Array],default:()=>[]},handleListPush:{type:Function,default:null}},setup(e,{emit:o}){return{state:B({}),handleStart:(n,t)=>{o("start",t[n.oldIndex].component)},handleAdd:n=>{},cloneItem:n=>e.handleListPush(n)}}}),ko=["onDragstart","onClick"];function Po(e,o,l,p,f,v){const n=c("Icon"),t=c("draggable");return r(),h("div",null,[a(t,N({tag:"ul","model-value":e.list},{group:{name:"form-draggable",pull:"clone",put:!1},sort:!1,clone:e.cloneItem,animation:180,ghostClass:"moving"},{"item-key":"type",onStart:o[0]||(o[0]=d=>e.handleStart(d,e.list)),onAdd:e.handleAdd}),{item:s(({element:d,index:u})=>[P("li",{class:"bs-box text-ellipsis",onDragstart:m=>e.$emit("add-attrs",e.list,u),onClick:m=>e.$emit("handle-list-push",d)},[a(n,{icon:d.icon},null,8,["icon"]),_(" "+te(d.label),1)],40,ko)]),_:1},16,["model-value","onAdd"])])}const ue=D(_o,[["render",Po],["__scopeId","data-v-a5440427"]]),Fo=A({name:"FormNodeOperate",components:{Icon:Z},props:{schema:{type:Object,default:()=>({})},currentItem:{type:Object,default:()=>({})}},setup(e){const{formConfig:o,formDesignMethods:l}=R();return{activeClass:U(()=>e.schema.key===e.currentItem.key?"active":"unactivated"),handleDelete:()=>{const n=t=>{t.some((d,u)=>{const{component:m,key:k}=d;if(["Grid","Tabs"].includes(m)&&d.columns?.forEach(b=>n(b.children)),k===e.currentItem.key){let b=t.length===1?{component:""}:t.length-1>u?t[u+1]:t[u-1];return l.handleSetSelectItem(b),X(t,u),!0}})};n(o.value.schemas)},handleCopy:()=>{l.handleCopy()}}}}),Ao={class:"copy-delete-box"};function Do(e,o,l,p,f,v){const n=c("Icon");return r(),h("div",Ao,[P("a",{class:L(["copy",e.activeClass]),onClick:o[0]||(o[0]=ne((...t)=>e.handleCopy&&e.handleCopy(...t),["stop"]))},[a(n,{icon:"ant-design:copy-outlined"})],2),P("a",{class:L(["delete",e.activeClass]),onClick:o[1]||(o[1]=ne((...t)=>e.handleDelete&&e.handleDelete(...t),["stop"]))},[a(n,{icon:"ant-design:delete-outlined"})],2)])}const Je=D(Fo,[["render",Do]]),wo=A({name:"FormNode",components:{VFormItem:He,FormNodeOperate:Je},props:{schema:{type:Object,required:!0}},setup(e){const{formConfig:o,formDesignMethods:l}=R(),p=B({}),f=()=>{l.handleSetSelectItem(e.schema)};return{...j(p),handleSelectItem:f,formConfig:o}}}),So={class:"form-item-box"},Eo={class:"show-key-box"};function Mo(e,o,l,p,f,v){const n=c("VFormItem"),t=c("FormNodeOperate");return r(),h("div",{class:L(["drag-move-box",{active:e.schema.key===e.formConfig.currentItem?.key}]),onClick:o[0]||(o[0]=ne((...d)=>e.handleSelectItem&&e.handleSelectItem(...d),["stop"]))},[P("div",So,[a(n,{formConfig:e.formConfig,schema:e.schema},null,8,["formConfig","schema"])]),P("div",Eo,te(e.schema.label+(e.schema.field?"/"+e.schema.field:"")),1),a(t,{schema:e.schema,currentItem:e.formConfig.currentItem},null,8,["schema","currentItem"])],2)}const Uo=D(wo,[["render",Mo]]),Oo=A({name:"LayoutItem",components:{FormNode:Uo,FormNodeOperate:Je,draggable:ie,Row:Se,Col:he},props:{schema:{type:Object,required:!0},currentItem:{type:Object,required:!0}},emits:["dragStart","handleColAdd","handle-copy","handle-delete"],setup(e){const{formDesignMethods:{handleSetSelectItem:o},formConfig:l}=R(),p=B({}),f=U(()=>{const{colProps:t={}}=e.schema;return t}),v=U(()=>e.schema.columns),n=U(()=>l.value.layout==="horizontal"?"Col":"div");return{...j(p),colPropsComputed:f,handleSetSelectItem:o,layoutTag:n,list1:v}}});function Jo(e,o,l,p,f,v){const n=c("LayoutItem",!0),t=c("draggable"),d=c("Col"),u=c("Row"),m=c("FormNodeOperate"),k=c("FormNode");return r(),g(d,me(fe(e.colPropsComputed)),{default:s(()=>[["Grid"].includes(e.schema.component)?(r(),h("div",{key:0,class:L(["grid-box",{active:e.schema.key===e.currentItem.key}]),onClick:o[2]||(o[2]=ne(b=>e.handleSetSelectItem(e.schema),["stop"]))},[a(u,N({class:"grid-row"},e.schema.componentProps),{default:s(()=>[(r(!0),h(E,null,M(e.schema.columns,(b,$)=>(r(),g(d,{class:"grid-col",key:$,span:b.span},{default:s(()=>[a(t,N({class:"list-main draggable-box","component-data":{name:"list",tag:"div",type:"transition-group"}},{group:"form-draggable",ghostClass:"moving",animation:180,handle:".drag-move"},{"item-key":"key",modelValue:b.children,"onUpdate:modelValue":i=>b.children=i,onStart:i=>e.$emit("dragStart",i,b.children),onAdd:i=>e.$emit("handleColAdd",i,b.children)}),{item:s(({element:i})=>[a(n,{class:"drag-move",schema:i,"current-item":e.currentItem,onHandleCopy:o[0]||(o[0]=w=>e.$emit("handle-copy")),onHandleDelete:o[1]||(o[1]=w=>e.$emit("handle-delete"))},null,8,["schema","current-item"])]),_:2},1040,["modelValue","onUpdate:modelValue","onStart","onAdd"])]),_:2},1032,["span"]))),128))]),_:1},16),a(m,{schema:e.schema,currentItem:e.currentItem},null,8,["schema","currentItem"])],2)):(r(),g(k,{key:e.schema.key,schema:e.schema,"current-item":e.currentItem,onHandleCopy:o[3]||(o[3]=b=>e.$emit("handle-copy")),onHandleDelete:o[4]||(o[4]=b=>e.$emit("handle-delete"))},null,8,["schema","current-item"]))]),_:1},16)}const No=D(Oo,[["render",Jo]]),Ro=A({name:"FormComponentPanel",components:{LayoutItem:No,draggable:ie,Form:ee,Empty:ae},emits:["handleSetSelectItem"],setup(e,{emit:o}){const{formConfig:l}=R(),p=({newIndex:n})=>{l.value.schemas=l.value.schemas||[];const t=l.value.schemas;t[n]=T(t[n]),o("handleSetSelectItem",t[n])},f=n=>{o("handleSetSelectItem",l.value.schemas[n.oldIndex])},v=U(()=>l.value.layout==="horizontal"?"Col":"div");return{addItem:p,handleDragStart:f,formConfig:l,layoutTag:v}}}),Bo={class:"form-panel v-form-container"},Lo={class:"draggable-box"};function jo(e,o,l,p,f,v){const n=c("Empty"),t=c("LayoutItem"),d=c("draggable"),u=c("Form");return r(),h("div",Bo,[Fe(a(n,{class:"empty-text",description:"从左侧选择控件添加"},null,512),[[Ae,e.formConfig.schemas.length===0]]),a(u,me(fe(e.formConfig)),{default:s(()=>[P("div",Lo,[a(d,{class:"list-main ant-row",group:"form-draggable","component-data":{name:"list",tag:"div",type:"transition-group"},ghostClass:"moving",animation:180,handle:".drag-move",modelValue:e.formConfig.schemas,"onUpdate:modelValue":o[0]||(o[0]=m=>e.formConfig.schemas=m),"item-key":"key",onAdd:e.addItem,onStart:e.handleDragStart},{item:s(({element:m})=>[a(t,{class:"drag-move",schema:m,data:e.formConfig,"current-item":e.formConfig.currentItem||{}},null,8,["schema","data","current-item"])]),_:1},8,["modelValue","onAdd","onStart"])])]),_:1},16)])}const zo=D(Ro,[["render",jo],["__scopeId","data-v-876039ea"]]),Ho=A({name:"PreviewCode",components:{CodeEditor:Ee},props:{fileFormat:{type:String,default:"json"},editorJson:{type:String,default:""}},setup(e){const o=B({visible:!1}),l=(d,u=`file.${e.fileFormat}`)=>{let m="data:text/csv;charset=utf-8,";m+=d;const k=encodeURI(m),b=document.createElement("a");b.setAttribute("href",k),b.setAttribute("download",u),b.click()},p=()=>{l(e.editorJson)},{clipboardRef:f,copiedRef:v}=to(),{createMessage:n}=De(),t=()=>{const d=e.editorJson;if(!d){n.warning("代码为空！");return}f.value=d,I(v)&&n.warning("复制成功！")};return{...j(o),exportData:l,handleCopyJson:t,handleExportJson:p,MODE:Me}}}),Go={class:"v-json-box"},To={class:"copy-btn-box"};function Vo(e,o,l,p,f,v){const n=c("CodeEditor"),t=c("a-button");return r(),h("div",null,[P("div",Go,[a(n,{value:e.editorJson,ref:"myEditor",mode:e.MODE.JSON},null,8,["value","mode"])]),P("div",To,[a(t,{onClick:e.handleCopyJson,type:"primary",class:"copy-btn","data-clipboard-action":"copy","data-clipboard-text":e.editorJson},{default:s(()=>[_(" 复制数据 ")]),_:1},8,["onClick","data-clipboard-text"]),a(t,{onClick:e.handleExportJson,type:"primary"},{default:s(()=>[_("导出代码")]),_:1},8,["onClick"])])])}const Ne=D(Ho,[["render",Vo],["__scopeId","data-v-8f9f8232"]]),Zo=A({name:"JsonModal",components:{PreviewCode:Ne,Modal:Y},emits:["cancel"],setup(e,{emit:o}){const l=B({visible:!1,jsonData:{}}),p=n=>{ce(n.schemas),l.jsonData=n,l.visible=!0},f=U(()=>JSON.stringify(Pe(l.jsonData),null,"	")),v=()=>{l.visible=!1,o("cancel")};return{...j(l),editorJson:f,handleCancel:v,showModal:p}}});function Ko(e,o,l,p,f,v){const n=c("PreviewCode"),t=c("Modal");return r(),g(t,{title:"JSON数据",footer:null,visible:e.visible,onCancel:e.handleCancel,destroyOnClose:!0,wrapClassName:"v-code-modal",style:{top:"20px"},width:"850px"},{default:s(()=>[a(n,{editorJson:e.editorJson},null,8,["editorJson"])]),_:1},8,["visible","onCancel"])}const ye=D(Zo,[["render",Ko]]),qo=A({name:"VFormPreview",components:{JsonModal:ye,VFormCreate:Ge,Modal:Y},setup(){const e=O(null),o=B({formModel:{},formConfig:{},visible:!1,fApi:{}}),l=t=>{ce(t.schemas),o.formConfig=t,o.visible=!0},p=()=>{o.visible=!1,o.formModel={}},f=async()=>{const t=await o.fApi.submit?.();e.value?.showModal?.(t)},v=t=>{},n=()=>{o.formModel={}};return{handleGetData:f,handleCancel:p,...j(o),showModal:l,jsonModal:e,onSubmit:v,onCancel:n}}});function Wo(e,o,l,p,f,v){const n=c("a-input"),t=c("VFormCreate"),d=c("JsonModal"),u=c("Modal");return r(),g(u,{title:"预览(支持布局)",visible:e.visible,onOk:e.handleGetData,onCancel:e.handleCancel,okText:"获取数据",cancelText:"关闭",style:{top:"20px"},destroyOnClose:!0,width:900},{default:s(()=>[a(t,{"form-config":e.formConfig,fApi:e.fApi,"onUpdate:fApi":o[0]||(o[0]=m=>e.fApi=m),formModel:e.formModel,"onUpdate:formModel":o[1]||(o[1]=m=>e.formModel=m),onSubmit:e.onSubmit},{slotName:s(({formModel:m,field:k})=>[a(n,{value:m[k],"onUpdate:value":b=>m[k]=b,placeholder:"我是插槽传递的输入框"},null,8,["value","onUpdate:value"])]),_:1},8,["form-config","fApi","formModel","onSubmit"]),a(d,{ref:"jsonModal"},null,512)]),_:1},8,["visible","onOk","onCancel"])}const Xo=D(qo,[["render",Wo]]),Qo=A({__name:"useForm",setup(e,{expose:o}){const l=O(null),p=B({formModel:{},formConfig:{},visible:!1}),f=U(()=>({...p.formConfig})),v=m=>{p.formConfig=m,p.visible=!0},[n,{validate:t}]=fo(),d=()=>{p.visible=!1},u=async()=>{let m=await t();l.value?.showModal?.(m)};return o({showModal:v}),(m,k)=>(r(),g(I(Y),{title:"预览(不支持布局)",visible:p.visible,onOk:u,onCancel:d,okText:"获取数据",cancelText:"关闭",style:{top:"20px"},destroyOnClose:!0,width:900},{default:s(()=>[a(I(vo),N(f.value,{onRegister:I(n)}),null,16,["onRegister"]),a(ye,{ref_key:"jsonModal",ref:l},null,512)]),_:1},8,["visible"]))}}),Yo=A({name:"OperatingArea",components:{Tooltip:ao,Icon:Z,Divider:bo},setup(){const e=B({toolbarsConfigs:[{title:"预览-支持布局",type:"preview",event:"handlePreview",icon:"ant-design:chrome-filled"},{title:"预览-不支持布局",type:"preview",event:"handlePreview2",icon:"ant-design:chrome-filled"},{title:"导入JSON",type:"importJson",event:"handleOpenImportJsonModal",icon:"ant-design:import-outlined"},{title:"生成JSON",type:"exportJson",event:"handleOpenJsonModal",icon:"ant-design:export-outlined"},{title:"生成代码",type:"exportCode",event:"handleOpenCodeModal",icon:"ant-design:code-filled"},{title:"清空",type:"reset",event:"handleClearFormItems",icon:"ant-design:clear-outlined"}]}),o=lo("historyReturn"),{undo:l,redo:p,canUndo:f,canRedo:v}=o;return{...j(e),undo:l,redo:p,canUndo:f,canRedo:v}}}),xo={class:"operating-area"},en={class:"left-btn-box"},on=["onClick"],nn=["disabled"],tn=["disabled"];function an(e,o,l,p,f,v){const n=c("Icon"),t=c("Tooltip"),d=c("Divider");return r(),h("div",xo,[P("div",en,[(r(!0),h(E,null,M(e.toolbarsConfigs,u=>(r(),g(t,{title:u.title,key:u.icon},{default:s(()=>[P("a",{onClick:m=>e.$emit(u.event),class:"toolbar-text"},[a(n,{icon:u.icon},null,8,["icon"])],8,on)]),_:2},1032,["title"]))),128)),a(d,{type:"vertical"}),a(t,{title:"撤销"},{default:s(()=>[P("a",{class:L({disabled:!e.canUndo}),disabled:!e.canUndo,onClick:o[0]||(o[0]=(...u)=>e.undo&&e.undo(...u))},[a(n,{icon:"ant-design:undo-outlined"})],10,nn)]),_:1}),a(t,{title:"重做"},{default:s(()=>[P("a",{class:L({disabled:!e.canRedo}),disabled:!e.canRedo,onClick:o[1]||(o[1]=(...u)=>e.redo&&e.redo(...u))},[a(n,{icon:"ant-design:redo-outlined"})],10,tn)]),_:1})])])}const ln=D(Yo,[["render",an],["__scopeId","data-v-96a6aa5d"]]),sn={class:"properties-content"},rn={key:0};function un(e,o,l,p,f,v){const n=c("RadioButton"),t=c("RadioGroup"),d=c("FormItem"),u=c("InputNumber"),m=c("Slider"),k=c("Checkbox"),b=c("Col"),$=c("Form");return r(),h("div",sn,[a($,{class:"properties-body","label-align":"left",layout:"vertical"},{default:s(()=>[a(d,{label:"表单布局"},{default:s(()=>[a(t,{"button-style":"solid",value:e.formConfig.layout,"onUpdate:value":o[0]||(o[0]=i=>e.formConfig.layout=i)},{default:s(()=>[a(n,{value:"horizontal"},{default:s(()=>[_("水平")]),_:1}),a(n,{value:"vertical",disabled:e.formConfig.labelLayout==="Grid"},{default:s(()=>[_(" 垂直 ")]),_:1},8,["disabled"]),a(n,{value:"inline",disabled:e.formConfig.labelLayout==="Grid"},{default:s(()=>[_(" 行内 ")]),_:1},8,["disabled"])]),_:1},8,["value"])]),_:1}),a(d,{label:"标签布局"},{default:s(()=>[a(t,{buttonStyle:"solid",value:e.formConfig.labelLayout,"onUpdate:value":o[1]||(o[1]=i=>e.formConfig.labelLayout=i),onChange:e.lableLayoutChange},{default:s(()=>[a(n,{value:"flex"},{default:s(()=>[_("固定")]),_:1}),a(n,{value:"Grid",disabled:e.formConfig.layout!=="horizontal"},{default:s(()=>[_(" 栅格 ")]),_:1},8,["disabled"])]),_:1},8,["value","onChange"])]),_:1}),Fe(a(d,{label:"标签宽度（px）"},{default:s(()=>[a(u,{style:{width:"100%"},value:e.formConfig.labelWidth,"onUpdate:value":o[2]||(o[2]=i=>e.formConfig.labelWidth=i),min:0,step:1},null,8,["value"])]),_:1},512),[[Ae,e.formConfig.labelLayout==="flex"]]),e.formConfig.labelLayout==="Grid"?(r(),h("div",rn,[a(d,{label:"labelCol"},{default:s(()=>[a(m,{value:e.formConfig.labelCol.span,"onUpdate:value":o[3]||(o[3]=i=>e.formConfig.labelCol.span=i),max:24},null,8,["value"])]),_:1}),a(d,{label:"wrapperCol"},{default:s(()=>[a(m,{value:e.formConfig.wrapperCol.span,"onUpdate:value":o[4]||(o[4]=i=>e.formConfig.wrapperCol.span=i),max:24},null,8,["value"])]),_:1}),a(d,{label:"标签对齐"},{default:s(()=>[a(t,{"button-style":"solid",value:e.formConfig.labelAlign,"onUpdate:value":o[5]||(o[5]=i=>e.formConfig.labelAlign=i)},{default:s(()=>[a(n,{value:"left"},{default:s(()=>[_("靠左")]),_:1}),a(n,{value:"right"},{default:s(()=>[_("靠右")]),_:1})]),_:1},8,["value"])]),_:1}),a(d,{label:"控件大小"},{default:s(()=>[a(t,{"button-style":"solid",value:e.formConfig.size,"onUpdate:value":o[6]||(o[6]=i=>e.formConfig.size=i)},{default:s(()=>[a(n,{value:"default"},{default:s(()=>[_("默认")]),_:1}),a(n,{value:"small"},{default:s(()=>[_("小")]),_:1}),a(n,{value:"large"},{default:s(()=>[_("大")]),_:1})]),_:1},8,["value"])]),_:1})])):F("",!0),a(d,{label:"表单属性"},{default:s(()=>[a(b,null,{default:s(()=>[e.formConfig.layout=="horizontal"?(r(),g(k,{key:0,checked:e.formConfig.colon,"onUpdate:checked":o[7]||(o[7]=i=>e.formConfig.colon=i)},{default:s(()=>[_("label后面显示冒号")]),_:1},8,["checked"])):F("",!0)]),_:1}),a(b,null,{default:s(()=>[a(k,{checked:e.formConfig.disabled,"onUpdate:checked":o[8]||(o[8]=i=>e.formConfig.disabled=i)},{default:s(()=>[_("禁用")]),_:1},8,["checked"])]),_:1}),a(b,null,{default:s(()=>[a(k,{checked:e.formConfig.hideRequiredMark,"onUpdate:checked":o[9]||(o[9]=i=>e.formConfig.hideRequiredMark=i)},{default:s(()=>[_("隐藏必选标记")]),_:1},8,["checked"])]),_:1})]),_:1})]),_:1})])}const dn=D(Te,[["render",un]]),cn={class:"rule-props-content"},pn=A({name:"RuleProps",__name:"RuleProps",setup(e){const{formConfig:o}=R(),l=()=>{ve(o.value.currentItem.rules)||(o.value.currentItem.rules=[]),o.value.currentItem.rules?.push({pattern:"",message:""})},p=v=>{X(o.value.currentItem.rules,v),o.value.currentItem.rules?.length===0&&delete o.value.currentItem.rules},f=O([{value:"/^(?:(?:\\+|00)86)?1[3-9]\\d{9}$/",text:"手机号码"},{value:"/^((ht|f)tps?:\\/\\/)?[\\w-]+(\\.[\\w-]+)+:\\d{1,5}\\/?$/",text:"网址带端口号"},{value:"/^(((ht|f)tps?):\\/\\/)?[\\w-]+(\\.[\\w-]+)+([\\w.,@?^=%&:/~+#-\\(\\)]*[\\w@?^=%&/~+#-\\(\\)])?$/",text:"网址带参数"},{value:"/^[0-9A-HJ-NPQRTUWXY]{2}\\d{6}[0-9A-HJ-NPQRTUWXY]{10}$/",text:"统一社会信用代码"},{value:"/^(s[hz]|S[HZ])(000[\\d]{3}|002[\\d]{3}|300[\\d]{3}|600[\\d]{3}|60[\\d]{4})$/",text:"股票代码"},{value:"/^([a-f\\d]{32}|[A-F\\d]{32})$/",text:"md5格式（32位）"},{value:"/^[a-f\\d]{4}(?:[a-f\\d]{4}-){4}[a-f\\d]{12}$/i",text:"GUID/UUID"},{value:"/^\\d+(?:\\.\\d+){2}$/",text:"版本号（x.y.z）格式"},{value:"/^https?:\\/\\/(.+\\/)+.+(\\.(swf|avi|flv|mpg|rm|mov|wav|asf|3gp|mkv|rmvb|mp4))$/i",text:"视频链接地址"},{value:"/^https?:\\/\\/(.+\\/)+.+(\\.(gif|png|jpg|jpeg|webp|svg|psd|bmp|tif))$/i",text:"图片链接地址"},{value:"/^-?\\d+(,\\d{3})*(\\.\\d{1,2})?$/",text:"数字/货币金额（支持负数、千分位分隔符）"},{value:"/(?:^[1-9]([0-9]+)?(?:\\.[0-9]{1,2})?$)|(?:^(?:0)$)|(?:^[0-9]\\.[0-9](?:[0-9])?$)/",text:"数字/货币金额"},{value:"/^[1-9]\\d{9,29}$/",text:"银行卡号"},{value:"/^(?:[一-龥·]{2,16})$/",text:"中文姓名"},{value:"/(^[a-zA-Z][a-zA-Z\\s]{0,20}[a-zA-Z]$)/",text:"英文姓名"},{value:"/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-HJ-NP-Z](?:((\\d{5}[A-HJK])|([A-HJK][A-HJ-NP-Z0-9][0-9]{4}))|[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳])$/",text:"车牌号(新能源)"},{value:"/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-HJ-NP-Z][A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]$/",text:"车牌号(非新能源)"},{value:"/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-HJ-NP-Z][A-HJ-NP-Z0-9]{4,5}[A-HJ-NP-Z0-9挂学警港澳]$/",text:"车牌号(新能源+非新能源)"},{value:'/^(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/',text:"email(邮箱)"},{value:"/^(?:(?:\\d{3}-)?\\d{8}|^(?:\\d{4}-)?\\d{7,8})(?:-\\d+)?$/",text:"座机"},{value:"/^[1-9]\\d{5}(?:18|19|20)\\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\\d|30|31)\\d{3}[\\dXx]$/",text:"身份证号"},{value:"/(^[EeKkGgDdSsPpHh]\\d{8}$)|(^(([Ee][a-fA-F])|([DdSsPp][Ee])|([Kk][Jj])|([Mm][Aa])|(1[45]))\\d{7}$)/",text:"护照"},{value:"/^(?:[㐀-䶵一-鿪﨎﨏﨑﨓﨔﨟﨡﨣﨤﨧-﨩]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0])+$/",text:"中文汉字"},{value:"/^\\d+\\.\\d+$/",text:"小数"},{value:"/^\\d{1,}$/",text:"数字"},{value:"/^[1-9][0-9]{4,10}$/",text:"qq号"},{value:"/^[A-Za-z0-9]+$/",text:"数字字母组合"},{value:"/^[a-zA-Z]+$/",text:"英文字母"},{value:"/^[a-z]+$/",text:"小写英文字母"},{value:"/^[A-Z]+$/",text:"大写英文字母"},{value:"/^[a-zA-Z0-9_-]{4,16}$/",text:"用户名校验，4到16位（字母，数字，下划线，减号）"},{value:"/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/",text:"16进制颜色"},{value:"/^[a-zA-Z][-_a-zA-Z0-9]{5,19}$/",text:"微信号"},{value:"/^(0[1-7]|1[0-356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[0-5]|8[013-6])\\d{4}$/",text:"邮政编码(中国)"},{value:"/^[^A-Za-z]*$/",text:"不能包含字母"},{value:"/^\\+?[1-9]\\d*$/",text:"正整数，不包含0"},{value:"/^-[1-9]\\d*$/",text:"负整数，不包含0"},{value:"/^-?[0-9]\\d*$/",text:"整数"},{value:"/^(-?\\d+)(\\.\\d+)?$/",text:"浮点数"},{value:"/^[A-Za-z0-9一-龥]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/",text:"email(支持中文邮箱)"}]);return(v,n)=>(r(),h("div",cn,[I(o).currentItem&&I(o).currentItem.rules?(r(),g(I(ee),{key:0},{default:s(()=>[(r(!0),h(E,null,M(I(o).currentItem.rules,(t,d)=>(r(),h("div",{key:d,class:"rule-props-item"},[a(I(Z),{icon:"ant-design:close-circle-filled",class:"rule-props-item-close",onClick:u=>p(d)},null,8,["onClick"]),a(I(Q),{label:"正则",labelCol:{span:6},wrapperCol:{span:16}},{default:s(()=>[a(I(Co),{value:t.pattern,"onUpdate:value":u=>t.pattern=u,placeholder:"请输入正则表达式",dataSource:f.value},null,8,["value","onUpdate:value","dataSource"])]),_:2},1024),a(I(Q),{label:"文案",labelCol:{span:6},wrapperCol:{span:16}},{default:s(()=>[a(I(x),{value:t.message,"onUpdate:value":u=>t.message=u,placeholder:"请输入提示文案"},null,8,["value","onUpdate:value"])]),_:2},1024)]))),128))]),_:1})):F("",!0),P("a",{onClick:l},[a(I(Z),{icon:"ant-design:file-add-outlined"}),_(" 添加正则 ")])]))}}),Re=D(pn,[["__scopeId","data-v-56ee46f4"]]),mn=A({name:"FormItemProps",components:{RuleProps:Re,Empty:ae,Input:x,Form:ee,FormItem:Q,Switch:ge,Checkbox:be,Select:Ce,Slider:Ue,Col:he,RadioGroup:Oe},setup(){const{formConfig:e}=R();oe(()=>e.value,()=>{e.value.currentItem&&(e.value.currentItem.itemProps=e.value.currentItem.itemProps||{},e.value.currentItem.itemProps.labelCol=e.value.currentItem.itemProps.labelCol||{},e.value.currentItem.itemProps.wrapperCol=e.value.currentItem.itemProps.wrapperCol||{})},{deep:!0,immediate:!0});const o=p=>p&&ve(p)?!p.includes(e.value.currentItem.component):!0,l=U(()=>Ve.filter(p=>o(p.exclude)));return{baseFormItemProps:Ze,advanceFormItemProps:Ke,advanceFormItemColProps:qe,formConfig:e,controlPropsList:l,showProps:o}}}),fn={class:"properties-content"},vn={key:0,class:"properties-body"};function Cn(e,o,l,p,f,v){const n=c("Empty"),t=c("FormItem"),d=c("Checkbox"),u=c("Col"),m=c("Switch"),k=c("Input"),b=c("RuleProps"),$=c("Form");return r(),h("div",fn,[e.formConfig.currentItem?.itemProps?(r(),h("div",vn,[e.formConfig.currentItem.key?(r(),g($,{key:1,"label-align":"left",layout:"vertical"},{default:s(()=>[(r(!0),h(E,null,M(e.baseFormItemProps,i=>(r(),h("div",{key:i.name},[e.showProps(i.exclude)?(r(),g(t,{key:0,label:i.label},{default:s(()=>[(r(),g(V(i.component),N({class:"component-props"},i.componentProps,{value:e.formConfig.currentItem[i.name],"onUpdate:value":w=>e.formConfig.currentItem[i.name]=w}),null,16,["value","onUpdate:value"]))]),_:2},1032,["label"])):F("",!0)]))),128)),(r(!0),h(E,null,M(e.advanceFormItemProps,i=>(r(),h("div",{key:i.name},[e.showProps(i.exclude)?(r(),g(t,{key:0,label:i.label},{default:s(()=>[(r(),g(V(i.component),N({class:"component-props"},i.componentProps,{value:e.formConfig.currentItem.itemProps[i.name],"onUpdate:value":w=>e.formConfig.currentItem.itemProps[i.name]=w}),null,16,["value","onUpdate:value"]))]),_:2},1032,["label"])):F("",!0)]))),128)),(r(!0),h(E,null,M(e.advanceFormItemColProps,i=>(r(),h("div",{key:i.name},[e.showProps(i.exclude)?(r(),g(t,{key:0,label:i.label},{default:s(()=>[(r(),g(V(i.component),N({class:"component-props"},i.componentProps,{value:e.formConfig.currentItem.itemProps[i.name].span,"onUpdate:value":w=>e.formConfig.currentItem.itemProps[i.name].span=w}),null,16,["value","onUpdate:value"]))]),_:2},1032,["label"])):F("",!0)]))),128)),e.controlPropsList.length?(r(),g(t,{key:0,label:"控制属性"},{default:s(()=>[(r(!0),h(E,null,M(e.controlPropsList,i=>(r(),g(u,{key:i.name},{default:s(()=>[a(d,{checked:e.formConfig.currentItem.itemProps[i.name],"onUpdate:checked":w=>e.formConfig.currentItem.itemProps[i.name]=w},{default:s(()=>[_(te(i.label),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024))),128))]),_:1})):F("",!0),["Grid"].includes(e.formConfig.currentItem.component)?F("",!0):(r(),g(t,{key:1,label:"是否必选"},{default:s(()=>[a(m,{checked:e.formConfig.currentItem.itemProps.required,"onUpdate:checked":o[0]||(o[0]=i=>e.formConfig.currentItem.itemProps.required=i)},null,8,["checked"]),e.formConfig.currentItem.itemProps.required?(r(),g(k,{key:0,value:e.formConfig.currentItem.itemProps.message,"onUpdate:value":o[1]||(o[1]=i=>e.formConfig.currentItem.itemProps.message=i),placeholder:"请输入必选提示"},null,8,["value"])):F("",!0)]),_:1})),["Grid"].includes(e.formConfig.currentItem.component)?F("",!0):(r(),g(t,{key:2,label:"校验规则",class:L({"form-rule-props":!!e.formConfig.currentItem.itemProps.rules})},{default:s(()=>[a(b)]),_:1},8,["class"]))]),_:1})):(r(),g(n,{key:0,class:"hint-box",description:"未选择控件"}))])):F("",!0)])}const hn=D(mn,[["render",Cn]]),gn=A({name:"FormOptions",components:{Input:x,Icon:Z},setup(){const e=B({}),{formConfig:o}=R(),l=o.value.currentItem?.component==="TreeSelect"?"treeData":"options",p=()=>{o.value.currentItem?.componentProps?.[l]||(o.value.currentItem.componentProps[l]=[]);const t=o.value.currentItem?.componentProps?.[l].length+1;o.value.currentItem.componentProps[l].push({label:`选项${t}`,value:""+t})},f=t=>{X(o.value.currentItem?.componentProps?.[l],t)},v=()=>{o.value.currentItem?.columns?.push({span:12,children:[]})},n=t=>{if(t===0)return We.warning("请至少保留一个栅格");X(o.value.currentItem.columns,t)};return{...j(e),formConfig:o,addOptions:p,deleteOptions:f,key:l,deleteGridOptions:n,addGridOptions:v}}}),bn={key:0},yn={class:"options-box"},$n=["onClick"],In={key:1},_n={class:"options-box"},kn=["onClick"];function Pn(e,o,l,p,f,v){const n=c("Input"),t=c("Icon");return r(),h("div",null,[["Grid"].includes(e.formConfig.currentItem.component)?(r(),h("div",bn,[(r(!0),h(E,null,M(e.formConfig.currentItem.columns,(d,u)=>(r(),h("div",{key:u},[P("div",yn,[a(n,{value:d.span,"onUpdate:value":m=>d.span=m,class:"options-value"},null,8,["value","onUpdate:value"]),P("a",{class:"options-delete",onClick:m=>e.deleteGridOptions(u)},[a(t,{icon:"ant-design:delete-outlined"})],8,$n)])]))),128)),P("a",{onClick:o[0]||(o[0]=(...d)=>e.addGridOptions&&e.addGridOptions(...d))},[a(t,{icon:"ant-design:file-add-outlined"}),_(" 添加栅格 ")])])):(r(),h("div",In,[(r(!0),h(E,null,M(e.formConfig.currentItem.componentProps[e.key],(d,u)=>(r(),h("div",{key:u},[P("div",_n,[a(n,{value:d.label,"onUpdate:value":m=>d.label=m},null,8,["value","onUpdate:value"]),a(n,{value:d.value,"onUpdate:value":m=>d.value=m,class:"options-value"},null,8,["value","onUpdate:value"]),P("a",{class:"options-delete",onClick:m=>e.deleteOptions(u)},[a(t,{icon:"ant-design:delete-outlined"})],8,kn)])]))),128)),P("a",{onClick:o[1]||(o[1]=(...d)=>e.addOptions&&e.addOptions(...d))},[a(t,{icon:"ant-design:file-add-outlined"}),_(" 添加选项 ")])]))])}const Fn=D(gn,[["render",Pn],["__scopeId","data-v-a1b6851c"]]),An=A({name:"ComponentProps",components:{FormOptions:Fn,Empty:ae,Input:x,Form:ee,FormItem:Q,Switch:ge,Checkbox:be,Select:Ce,InputNumber:yo,RadioGroup:Oe,RadioButtonGroup:ho,Col:he,Row:Se},setup(){const e=O([]),o=n=>n?n.includes(l.value.currentItem.component):!0,{formConfig:l}=R();l.value.currentItem&&(l.value.currentItem.componentProps=l.value.currentItem.componentProps||{}),oe(()=>l.value.currentItem?.field,(n,t)=>{l.value.schemas&&pe(l.value.schemas,d=>{if(d.link){const u=d.link.findIndex(m=>m===t);u!==-1&&X(d.link,u)}})}),oe(()=>l.value.currentItem&&l.value.currentItem.component,()=>{e.value=[],Xe.forEach(n=>{n.category="control",n.includes?n.includes.includes(l.value.currentItem.component)&&e.value.push(n):e.value.push(n)}),Qe.forEach(n=>{n.category="input",n.includes?n.includes.includes(l.value.currentItem.component)&&e.value.push(n):n.exclude&&n.exclude.includes(l.value.currentItem.component)||e.value.push(n)}),_e[l.value.currentItem.component]&&_e[l.value.currentItem.component].forEach(async n=>{n.component&&(["Switch","Checkbox","Radio"].includes(n.component)?(n.category="control",e.value.push(n)):(n.category="input",e.value.push(n)))})},{immediate:!0});const p=U(()=>e.value.filter(n=>n.category=="control")),f=U(()=>e.value.filter(n=>n.category=="input"));oe(()=>l.value.currentItem.componentProps,()=>{const n=Ye[l.value.currentItem.component];n&&n(l.value.currentItem.componentProps,e.value)},{immediate:!0,deep:!0});const v=U(()=>l.value.schemas&&l.value.schemas.filter(n=>n.key!==l.value.currentItem.key).map(({label:n,field:t})=>({label:n+"/"+t,value:t})));return{formConfig:l,showControlAttrs:o,linkOptions:v,controlOptions:p,inputOptions:f}}}),Dn={class:"properties-content"},wn={key:0,class:"properties-body"},Sn={key:0},En={key:0};function Mn(e,o,l,p,f,v){const n=c("Empty"),t=c("FormItem"),d=c("Checkbox"),u=c("Col"),m=c("Select"),k=c("FormOptions"),b=c("Form");return r(),h("div",Dn,[e.formConfig.currentItem?(r(),h("div",wn,[e.formConfig.currentItem.key?F("",!0):(r(),g(n,{key:0,class:"hint-box",description:"未选择组件"})),a(b,{"label-align":"left",layout:"vertical"},{default:s(()=>[e.formConfig.currentItem&&e.formConfig.currentItem.componentProps?(r(),h("div",Sn,[(r(!0),h(E,null,M(e.inputOptions,$=>(r(),g(t,{key:$.name,label:$.label},{default:s(()=>[$.children?(r(),h("div",En,[(r(!0),h(E,null,M($.children,(i,w)=>(r(),g(V(i.component),N({key:w},i.componentProps,{value:e.formConfig.currentItem.componentProps[$.name][w],"onUpdate:value":H=>e.formConfig.currentItem.componentProps[$.name][w]=H}),null,16,["value","onUpdate:value"]))),128))])):(r(),g(V($.component),N({key:1,class:"component-prop"},$.componentProps,{value:e.formConfig.currentItem.componentProps[$.name],"onUpdate:value":i=>e.formConfig.currentItem.componentProps[$.name]=i}),null,16,["value","onUpdate:value"]))]),_:2},1032,["label"]))),128)),a(t,{label:"控制属性"},{default:s(()=>[(r(!0),h(E,null,M(e.controlOptions,$=>(r(),g(u,{key:$.name},{default:s(()=>[e.showControlAttrs($.includes)?(r(),g(d,N({key:0},$.componentProps,{checked:e.formConfig.currentItem.componentProps[$.name],"onUpdate:checked":i=>e.formConfig.currentItem.componentProps[$.name]=i}),{default:s(()=>[_(te($.label),1)]),_:2},1040,["checked","onUpdate:checked"])):F("",!0)]),_:2},1024))),128))]),_:1})])):F("",!0),a(t,{label:"关联字段"},{default:s(()=>[a(m,{mode:"multiple",value:e.formConfig.currentItem.link,"onUpdate:value":o[0]||(o[0]=$=>e.formConfig.currentItem.link=$),options:e.linkOptions},null,8,["value","options"])]),_:1}),["Select","CheckboxGroup","RadioGroup","TreeSelect","Cascader","AutoComplete"].includes(e.formConfig.currentItem.component)?(r(),g(t,{key:1,label:"选项"},{default:s(()=>[a(k)]),_:1})):F("",!0),["Grid"].includes(e.formConfig.currentItem.component)?(r(),g(t,{key:2,label:"栅格"},{default:s(()=>[a(k)]),_:1})):F("",!0)]),_:1})])):F("",!0)])}const Un=D(An,[["render",Mn]]),On=A({name:"FormItemProps",components:{RuleProps:Re,Empty:ae,Input:x,Form:ee,FormItem:Q,Switch:ge,Checkbox:be,Select:Ce,Slider:Ue},setup(){const{formConfig:e}=R();return{baseItemColumnProps:xe,formConfig:e,showProps:l=>l&&ve(l)?!l.includes(e.value.currentItem.component):!0}}}),Jn={class:"properties-content"},Nn={key:0,class:"properties-body"};function Rn(e,o,l,p,f,v){const n=c("Empty"),t=c("FormItem"),d=c("Form");return r(),h("div",Jn,[e.formConfig.currentItem?(r(),h("div",Nn,[e.formConfig.currentItem.key?(r(),g(d,{key:1,"label-align":"left",layout:"vertical"},{default:s(()=>[(r(!0),h(E,null,M(e.baseItemColumnProps,u=>(r(),h("div",{key:u.name},[e.showProps(u.exclude)?(r(),g(t,{key:0,label:u.label},{default:s(()=>[e.formConfig.currentItem.colProps?(r(),g(V(u.component),N({key:0,class:"component-props"},u.componentProps,{value:e.formConfig.currentItem.colProps[u.name],"onUpdate:value":m=>e.formConfig.currentItem.colProps[u.name]=m}),null,16,["value","onUpdate:value"])):F("",!0)]),_:2},1032,["label"])):F("",!0)]))),128))]),_:1})):(r(),g(n,{key:0,class:"hint-box",description:"未选择控件"}))])):F("",!0)])}const Bn=D(On,[["render",Rn]]),Ln=A({name:"PropsPanel",components:{FormProps:dn,FormItemProps:hn,ComponentProps:Un,ComponentColumnProps:Bn,Tabs:$o,TabPane:Io},setup(){const{formConfig:e}=R(),o=U(()=>de.find(l=>l.component===e.value.currentItem?.component));return{formConfig:e,customComponents:de,slotProps:o}}});function jn(e,o,l,p,f,v){const n=c("FormProps"),t=c("TabPane"),d=c("FormItemProps"),u=c("ComponentColumnProps"),m=c("ComponentProps"),k=c("Tabs");return r(),h("div",null,[a(k,{activeKey:e.formConfig.activeKey,"onUpdate:activeKey":o[0]||(o[0]=b=>e.formConfig.activeKey=b),tabBarStyle:{margin:0}},{default:s(()=>[(r(),g(t,{key:1,tab:"表单"},{default:s(()=>[a(n)]),_:1})),(r(),g(t,{key:2,tab:"控件"},{default:s(()=>[a(d)]),_:1})),(r(),g(t,{key:3,tab:"栅格"},{default:s(()=>[a(u)]),_:1})),(r(),g(t,{key:4,tab:"组件"},{default:s(()=>[e.slotProps?we(e.$slots,e.slotProps.component+"Props",{key:0},void 0,!0):(r(),g(m,{key:1}))]),_:3}))]),_:3},8,["activeKey"])])}const zn=D(Ln,[["render",jn],["__scopeId","data-v-c71b70d5"]]),Hn=A({name:"ImportJsonModal",components:{CodeEditor:Ee,Upload:go,Modal:Y},setup(){const{createMessage:e}=De(),o=B({visible:!1,json:`{
  "schemas": [
    {
      "component": "input",
      "label": "输入框",
      "field": "input_2",
      "span": 24,
      "props": {
        "type": "text"
      }
    }
  ],
  "layout": "horizontal",
  "labelLayout": "flex",
  "labelWidth": 100,
  "labelCol": {},
  "wrapperCol": {}
}`,jsonData:{schemas:{},config:{}},handleSetSelectItem:null}),{formDesignMethods:l}=R(),p=()=>{o.visible=!1},f=()=>{o.visible=!0},v=()=>{try{const t=JSON.parse(o.json);t.schemas&&pe(t.schemas,d=>{W(d)}),l.setFormConfig({...t,activeKey:1,currentItem:{component:""}}),p(),e.success("导入成功")}catch{e.error("导入失败，数据格式不对")}};return{handleImportJson:v,beforeUpload:t=>{const d=new FileReader;return d.readAsText(t),d.onload=function(){o.json=this.result,v()},!1},handleCancel:p,showModal:f,...j(o),MODE:Me}}}),Gn=e=>(so("data-v-c6835030"),e=e(),ro(),e),Tn=Gn(()=>P("p",{class:"hint-box"},"导入格式如下:",-1)),Vn={class:"v-json-box"};function Zn(e,o,l,p,f,v){const n=c("CodeEditor"),t=c("a-button"),d=c("Upload"),u=c("Modal");return r(),g(u,{title:"JSON数据",visible:e.visible,onOk:e.handleImportJson,onCancel:e.handleCancel,cancelText:"关闭",destroyOnClose:!0,wrapClassName:"v-code-modal",style:{top:"20px"},width:850},{footer:s(()=>[a(t,{onClick:e.handleCancel},{default:s(()=>[_("取消")]),_:1},8,["onClick"]),a(d,{class:"upload-button",beforeUpload:e.beforeUpload,showUploadList:!1,accept:"application/json"},{default:s(()=>[a(t,{type:"primary"},{default:s(()=>[_("导入json文件")]),_:1})]),_:1},8,["beforeUpload"]),a(t,{type:"primary",onClick:e.handleImportJson},{default:s(()=>[_("确定")]),_:1},8,["onClick"])]),default:s(()=>[Tn,P("div",Vn,[a(n,{value:e.json,"onUpdate:value":o[0]||(o[0]=m=>e.json=m),ref:"myEditor",mode:e.MODE.JSON},null,8,["value","mode"])])]),_:1},8,["visible","onOk","onCancel"])}const Kn=D(Hn,[["render",Zn],["__scopeId","data-v-c6835030"]]),qn=`<template>
  <div>
    <v-form-create
      :formConfig="formConfig"
      :formData="formData"
      v-model="fApi"
    />
    <a-button @click="submit">提交</a-button>
  </div>
</template>
<script>

export default {
  name: 'Demo',
  data () {
    return {
      fApi:{},
      formData:{},
      formConfig: `;let Wn=`
    }
  },
  methods: {
    async submit() {
      const data = await this.fApi.submit()
      console.log(data)
     }
  }
}
<\/script>`;const Xn=A({name:"CodeModal",components:{PreviewCode:Ne,Modal:Y},setup(){const e=B({visible:!1,jsonData:{}}),o=p=>{p.schemas&&ce(p.schemas),e.visible=!0,e.jsonData=p},l=U(()=>qn+JSON.stringify(Pe(e.jsonData),null,"	")+Wn);return{...j(e),editorVueJson:l,showModal:o}}});function Qn(e,o,l,p,f,v){const n=c("PreviewCode"),t=c("Modal");return r(),g(t,{title:"代码",footer:null,visible:e.visible,onCancel:o[0]||(o[0]=d=>e.visible=!1),wrapClassName:"v-code-modal",style:{top:"20px"},width:"850px",destroyOnClose:!0},{default:s(()=>[a(n,{editorJson:e.editorVueJson,fileFormat:"vue"},null,8,["editorJson"])]),_:1},8,["visible"])}const Yn=D(Xn,[["render",Qn]]),xn=A({__name:"index",props:{title:{type:String,default:"v-form-antd表单设计器"}},setup(e){const{prefixCls:o}=uo("form-design"),l=O(null),p=O(null),f=O(null),v=O(null),n=O(null),t=O(null),d=O({}),u=O({schemas:[],layout:"horizontal",labelLayout:"flex",labelWidth:100,labelCol:{},wrapperCol:{},currentItem:{component:"",componentProps:{}},activeKey:1}),m=y=>{y.schemas=y.schemas||[],y.schemas.forEach(C=>{C.colProps=C.colProps||{span:24},C.componentProps=C.componentProps||{},C.itemProps=C.itemProps||{}}),u.value=y},k=io(u,{deep:!0,capacity:20,parse:y=>{const C=T(y),{currentItem:S,schemas:J}=C,z=J&&J.find(G=>G.key===S?.key);return z&&(C.currentItem=z),C}}),b=y=>{u.value.currentItem=y,Le(y.key?u.value.activeKey===1?2:u.value.activeKey:1)},$=y=>{y.colProps=y.colProps||{},y.colProps.span=no.span},i=(y,C)=>{},w=y=>{const C=T(y);return $(C),W(C),C},H=y=>{const C=T(y);if($(C),W(C),!u.value.currentItem?.key){b(C),u.value.schemas&&u.value.schemas.push(C);return}$e(C,!1)},Be=y=>{const C=T(y);return C.component==="Grid"&&pe([y],S=>{W(S)}),C},$e=(y=u.value.currentItem,C=!0)=>{const S=u.value.currentItem?.key,J=z=>{z.some((G,le)=>{if(G.key===S){C?z.splice(le,0,Be(G)):z.splice(le+1,0,y);const se={newIndex:le+1};return Ie(se,z,C),!0}["Grid","Tabs"].includes(G.component)&&G.columns?.forEach(se=>{J(se.children)})})};u.value.schemas&&J(u.value.schemas)},Ie=({newIndex:y},C,S=!1)=>{const J=C[y];S&&W(J),b(J)},K=y=>{const C=T(u.value);y?.showModal(C)},Le=y=>{u.value.activeKey=y},je=()=>{u.value.schemas=[],b({component:""})},ze=(y,C)=>d.value[y]=C;return q("formModel",d),q("setFormModelMethod",ze),q("formConfig",u),q("historyReturn",k),q("formDesignMethods",{handleBeforeColAdd:Ie,handleCopy:$e,handleListPush:H,handleSetSelectItem:b,handleAddAttrs:i,setFormConfig:m}),(y,C)=>(r(),h(E,null,[a(I(mo),null,{default:s(()=>[a(I(ke),{class:L(`left ${I(o)}-sider`),collapsible:"",collapsedWidth:"0",width:"270",zeroWidthTriggerStyle:{"margin-top":"-70px","background-color":"gray"},breakpoint:"md"},{default:s(()=>[a(I(re),{title:"基础控件"},{default:s(()=>[a(ue,{list:I(eo),handleListPush:w,onAddAttrs:i,onHandleListPush:H},null,8,["list"])]),_:1}),a(I(re),{title:"自定义控件"},{default:s(()=>[a(ue,{list:I(de),onAddAttrs:i,handleListPush:w,onHandleListPush:H},null,8,["list"])]),_:1}),a(I(re),{title:"布局控件"},{default:s(()=>[a(ue,{list:I(oo),handleListPush:w,onAddAttrs:i,onHandleListPush:H},null,8,["list"])]),_:1})]),_:1},8,["class"]),a(I(co),null,{default:s(()=>[a(ln,{onHandleOpenJsonModal:C[0]||(C[0]=S=>K(p.value)),onHandleOpenImportJsonModal:C[1]||(C[1]=S=>K(f.value)),onHandlePreview:C[2]||(C[2]=S=>K(v.value)),onHandlePreview2:C[3]||(C[3]=S=>K(n.value)),onHandleOpenCodeModal:C[4]||(C[4]=S=>K(t.value)),onHandleClearFormItems:je}),a(zo,{"current-item":u.value.currentItem,data:u.value,onHandleSetSelectItem:b},null,8,["current-item","data"])]),_:1}),a(I(ke),{class:L(`right ${I(o)}-sider`),collapsible:"",reverseArrow:!0,collapsedWidth:"0",width:"270",zeroWidthTriggerStyle:{"margin-top":"-70px","background-color":"gray"},breakpoint:"lg"},{default:s(()=>[a(zn,{ref_key:"propsPanel",ref:l,activeKey:u.value.activeKey},po({_:2},[M(u.value.schemas,S=>({name:`${S.component}Props`,fn:s(J=>[we(y.$slots,`${S.component}Props`,me(fe({formItem:J,props:J.componentProps})),void 0,!0)])}))]),1032,["activeKey"])]),_:3},8,["class"])]),_:3}),a(ye,{ref_key:"jsonModal",ref:p},null,512),a(Yn,{ref_key:"codeModal",ref:t},null,512),a(Kn,{ref_key:"importJsonModal",ref:f},null,512),a(Xo,{ref_key:"eFormPreview",ref:v,formConfig:u.value},null,8,["formConfig"]),a(Qo,{ref_key:"eFormPreview2",ref:n,formConfig:u.value},null,8,["formConfig"])],64))}}),vt=D(xn,[["__scopeId","data-v-68f72b1e"]]);export{vt as V};
