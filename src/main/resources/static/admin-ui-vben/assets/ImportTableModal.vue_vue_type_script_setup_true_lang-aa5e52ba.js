import{a as f,B as b}from"./index-40f1f97e.js";import{u as g,_ as I}from"./useTable-33ec4cfa.js";import"./index-ec19b8e7.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{a as h,o as w,j as S,w as C,n as T,k as a,ag as _}from"./index-8b526734.js";import"./index-7aea77c8.js";import"./index-8629d074.js";import{g as x}from"./index-dc3024f2.js";import"./index-d2d20fb4.js";import"./tree-e6981725.js";import"./index-03ea37ad.js";import"./index-3e87b811.js";import"./index-c8168e27.js";import"./sortable.esm-f208c0d8.js";import{u as s}from"./useRender-f65ba3eb.js";import{g as P,D as R}from"./dict-5cefafd8.js";import{a as M,c as N}from"./index-9608a02d.js";const n=await x(),G=[{title:"数据源",dataIndex:"dataSourceConfigId",width:100,customRender:({text:e})=>{for(const t of n)if(e===t.id)return t.name;return"未知【"+e+"】"}},{title:"表名称",dataIndex:"tableName",width:200},{title:"表描述",dataIndex:"tableComment",width:120},{title:"实体",dataIndex:"className",width:200},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>s.renderDate(e)},{title:"更新时间",dataIndex:"updateTime",width:180,customRender:({text:e})=>s.renderDate(e)}],H=[{label:"表名称",field:"tableName",component:"Input",colProps:{span:8}},{label:"表描述",field:"tableComment",component:"Input",colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}];P(R.COMMON_STATUS);const k=[{title:"表名称",dataIndex:"name",width:200},{title:"表描述",dataIndex:"comment",width:120}],D=[{label:"数据源",field:"dataSourceConfigId",component:"Select",required:!0,defaultValue:n[0].id,componentProps:{options:n,fieldNames:{label:"name",value:"id"}},colProps:{span:8}},{label:"表名称",field:"name",component:"Input",colProps:{span:8}},{label:"表描述",field:"comment",component:"Input",colProps:{span:8}}],J=h({name:"InfraImportTableModal",__name:"ImportTableModal",emits:["success","register"],setup(e,{emit:t}){const[i,{getSelectRowKeys:l,getForm:m}]=g({api:M,columns:k,formConfig:{labelWidth:80,schemas:D},rowSelection:{type:"checkbox"},rowKey:"name",useSearchForm:!0,pagination:!1,showTableSetting:!1,showIndexColumn:!1,immediate:!1}),[c,{setModalProps:d,closeModal:p}]=f(async()=>{d({confirmLoading:!1})});async function u(){const o=await l(),r=await m();await N({dataSourceConfigId:r.getFieldsValue().dataSourceConfigId,tableNames:o}),p(),t("success")}return(o,r)=>(w(),S(a(b),_(o.$attrs,{width:800,onRegister:a(c),title:"导入",onOk:u}),{default:C(()=>[T(a(I),{onRegister:a(i)},null,8,["onRegister"])]),_:1},16,["onRegister"]))}});export{J as _,G as c,H as s};
