import{a as w,c as M,z as b,k as e,o as _,j as S,w as A,n as P,ag as R,x}from"./index-8b526734.js";import{u as T,_ as B}from"./useForm-f7dccb87.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{a as N,B as q}from"./index-40f1f97e.js";import"./index-ec19b8e7.js";import"./index-d2d20fb4.js";import"./tree-e6981725.js";import"./index-03ea37ad.js";import"./index-3e87b811.js";import"./index-c8168e27.js";import"./sortable.esm-f208c0d8.js";import{u as i}from"./useRender-f65ba3eb.js";import{D as l,g as F}from"./dict-5cefafd8.js";import{g as L,u as O,c as v}from"./account-c60d2e9a.js";const K=[{title:"编号",dataIndex:"id",width:100},{title:"邮箱",dataIndex:"mail",width:180},{title:"用户名",dataIndex:"username",width:100},{title:"SMTP 服务器域名",dataIndex:"host",width:120},{title:"SMTP 服务器端口",dataIndex:"port",width:120},{title:"是否开启 SSL",dataIndex:"sslEnable",width:180,customRender:({text:a})=>i.renderDict(a,l.INFRA_BOOLEAN_STRING)},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:a})=>i.renderDate(a)}],Q=[{label:"邮箱",field:"mail",component:"Input",colProps:{span:8}},{label:"用户名",field:"username",component:"Input",colProps:{span:8}}],y=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"邮箱",field:"mail",required:!0,component:"Input",helpMessage:"填写发件邮箱地址",rules:[{required:!0,message:"请输入正确的邮箱地址",pattern:/^\w{3,}(\.\w+)*@[A-z0-9]+(\.[A-z]{2,5}){1,2}$/,trigger:"blur"}]},{label:"用户名",field:"username",required:!0,component:"Input"},{label:"密码/授权码",field:"password",required:!0,component:"InputPassword",helpMessage:"填写邮件密码, 部分邮件商需要填写授权码"},{label:"SMTP 服务器域名",field:"host",required:!0,component:"Input"},{label:"SMTP 服务器端口",field:"port",required:!0,component:"InputNumber"},{label:"是否开启 SSL",field:"sslEnable",required:!0,defaultValue:!1,component:"RadioButtonGroup",componentProps:{options:F(l.INFRA_BOOLEAN_STRING,"boolean")}}],X=w({name:"SystemMailAccountModal",__name:"AccountModal",emits:["success","register"],setup(a,{emit:c}){const{t:o}=M(),{createMessage:d}=x(),s=b(!0),[u,{setFieldsValue:m,resetFields:p,validate:f}]=T({labelWidth:120,baseColProps:{span:24},schemas:y,showActionButtonGroup:!1,actionColOptions:{span:23}}),[g,{setModalProps:r,closeModal:I}]=N(async t=>{if(p(),r({confirmLoading:!1}),s.value=!!t?.isUpdate,e(s)){const n=await L(t.record.id);m({...n})}});async function h(){try{const t=await f();r({confirmLoading:!0}),e(s)?await O(t):await v(t),I(),c("success"),d.success(o("common.saveSuccessText"))}finally{r({confirmLoading:!1})}}return(t,n)=>(_(),S(e(q),R(t.$attrs,{onRegister:e(g),title:s.value?e(o)("action.edit"):e(o)("action.create"),onOk:h}),{default:A(()=>[P(e(B),{onRegister:e(u)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{X as _,K as c,Q as s};
