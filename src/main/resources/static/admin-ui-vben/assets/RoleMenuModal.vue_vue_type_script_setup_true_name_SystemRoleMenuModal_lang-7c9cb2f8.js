import{u as R,B as v}from"./index-b9c40b5d.js";import{u as w,a as y}from"./useForm-8fd7b992.js";import{m as k}from"./role.data-cf9350b5.js";import{g as S}from"./index-eb41aacc.js";import{_ as b}from"./index-9a79925f.js";import{l as B}from"./index-17b3345e.js";import{h as F}from"./tree-1cdc2dee.js";import{l as C,a as D}from"./index-759b4bfb.js";import{a as c,H as I,u as a,o as L,c as P,w as i,e as l,ag as $}from"./index-185fe65d.js";const x=c({name:"SystemRoleMenuModal"}),q=c({...x,emits:["success","register"],setup(N,{emit:m}){const o=I([]),[u,{setFieldsValue:d,resetFields:f,validate:p}]=w({labelWidth:120,baseColProps:{span:24},schemas:k,showActionButtonGroup:!1,actionColOptions:{span:23}}),[_,{setModalProps:r,closeModal:g}]=R(async e=>{if(f(),r({confirmLoading:!1}),a(o).length===0){const t=await B();o.value=F(t,"id")}const n=await S(e.record.id),s=await C(e.record.id);n.menuIds=s,d({...n})});async function h(){try{const e=await p();r({confirmLoading:!0}),await D(e),g(),m("success")}finally{r({confirmLoading:!1})}}return(e,n)=>(L(),P(a(v),$(e.$attrs,{onRegister:a(_),title:"修改角色菜单权限",onOk:h}),{default:i(()=>[l(a(y),{onRegister:a(u)},{menuIds:i(({model:s,field:t})=>[l(a(b),{value:s[t],"onUpdate:value":M=>s[t]=M,treeData:o.value,fieldNames:{title:"name",key:"id"},checkStrictly:!0,checkable:"",toolbar:"",title:"菜单分配"},null,8,["value","onUpdate:value","treeData"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister"]))}});export{q as _};
