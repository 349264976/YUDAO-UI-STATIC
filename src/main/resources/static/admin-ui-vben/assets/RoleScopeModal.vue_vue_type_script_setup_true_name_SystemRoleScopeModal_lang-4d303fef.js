import{u as v,B as w}from"./index-b9c40b5d.js";import{u as y,a as R}from"./useForm-8fd7b992.js";import{_ as b}from"./index-9a79925f.js";import{d as k}from"./role.data-cf9350b5.js";import{g as D}from"./index-eb41aacc.js";import{l as M}from"./index-1fa4f246.js";import{h as B}from"./tree-1cdc2dee.js";import{b as F}from"./index-759b4bfb.js";import{a as c,H as C,u as e,o as L,c as P,w as n,e as l,ag as $}from"./index-185fe65d.js";const x=c({name:"SystemRoleScopeModal"}),j=c({...x,emits:["success","register"],setup(I,{emit:m}){const s=C([]),[p,{setFieldsValue:d,resetFields:f,validate:u}]=y({labelWidth:120,baseColProps:{span:24},schemas:k,showActionButtonGroup:!1,actionColOptions:{span:23}}),[_,{setModalProps:o,closeModal:g}]=v(async a=>{if(f(),o({confirmLoading:!1}),e(s).length===0){const t=await M();s.value=B(t,"id")}const r=await D(a.record.id);d({...r})});async function h(){try{const a=await u();o({confirmLoading:!0}),await F(a),g(),m("success")}finally{o({confirmLoading:!1})}}return(a,r)=>(L(),P(e(w),$(a.$attrs,{onRegister:e(_),title:"编辑角色数据权限",onOk:h}),{default:n(()=>[l(e(R),{onRegister:e(p)},{dataScopeDeptIds:n(({model:t,field:i})=>[l(e(b),{value:t[i],"onUpdate:value":S=>t[i]=S,treeData:s.value,fieldNames:{title:"name",key:"id"},checkStrictly:!1,checkable:"",toolbar:"",title:"部门分配"},null,8,["value","onUpdate:value","treeData"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister"]))}});export{j as _};
