import{a as C,a9 as E,H as T,ap as w,T as A,aX as I,Q as $,ax as D,j as N,o as i,f as v,e as S,w as k,u,c as b,ae as V,h as L,af as y,k as O,ad as X,i as j,bT as z,ar as G,aT as H,an as Q,eX as q}from"./index-185fe65d.js";import{B as F}from"./index-a2353b1b.js";const J={key:1},K=C({name:"LayoutBreadcrumb"}),Y=C({...K,props:{theme:E.oneOf(["dark","light"])},setup(B){const m=T([]),{currentRoute:c}=w(),{prefixCls:f}=A("layout-breadcrumb"),{getShowBreadCrumbIcon:M}=I(),h=$(),{t:d}=j();D(async()=>{if(c.value.name===G)return;const a=await H(),t=c.value.matched,n=t?.[t.length-1];let e=c.value.path;n&&n?.meta?.currentActiveMenu&&(e=n.meta.currentActiveMenu);const r=Q(a,e),o=a.filter(g=>g.path===r[0]),s=p(o,r);if(!s||s.length===0)return;const l=x(s);c.value.meta?.currentActiveMenu&&l.push({...c.value,name:c.value.meta?.title||c.value.name}),m.value=l});function p(a,t){const n=[];return a.forEach(e=>{t.includes(e.path)&&n.push({...e,name:e.meta?.title||e.name}),e.children?.length&&n.push(...p(e.children,t))}),n}function x(a){return q(a,t=>{const{meta:n,name:e}=t;if(!n)return!!e;const{title:r,hideBreadcrumb:o,hideMenu:s}=n;return!(!r||o||s)}).filter(t=>!t.meta?.hideBreadcrumb)}function P(a,t,n){n?.preventDefault();const{children:e,redirect:r,meta:o}=a;if(e?.length&&!r){n?.stopPropagation();return}if(!o?.carryParam)if(r&&z(r))h(r);else{let s="";t.length===1?s=t[0]:s=`${t.slice(1).pop()||""}`,s=/^\//.test(s)?s:`/${s}`,h(s)}}function R(a,t){return a.indexOf(t)!==a.length-1}function _(a){return a.icon||a.meta?.icon}return(a,t)=>{const n=N("router-link");return i(),v("div",{class:X([u(f),`${u(f)}--${B.theme}`])},[S(u(F),{routes:m.value},{itemRender:k(({route:e,routes:r,paths:o})=>[u(M)&&_(e)?(i(),b(u(V),{key:0,icon:_(e)},null,8,["icon"])):L("",!0),R(r,e)?(i(),b(n,{key:2,to:"",onClick:s=>P(e,o,s)},{default:k(()=>[O(y(u(d)(e.name||e.meta.title)),1)]),_:2},1032,["onClick"])):(i(),v("span",J,y(u(d)(e.name||e.meta.title)),1))]),_:1},8,["routes"])],2)}}});export{Y as default};
