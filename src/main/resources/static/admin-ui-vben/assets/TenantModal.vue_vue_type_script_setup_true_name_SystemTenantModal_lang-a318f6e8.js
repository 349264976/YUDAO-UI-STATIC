import{u as h,B as T}from"./index-b9c40b5d.js";import{u as x,a as P}from"./useForm-8fd7b992.js";import{g as _}from"./index-6d03b957.js";import"./index-c3c80eae.js";import{u as r}from"./useRender-7b752cf7.js";import{D as i,g as d}from"./dict-411628cd.js";import{bD as a,a as c,H as M,u as n,o as S,c as y,w as C,e as R,ag as k}from"./index-185fe65d.js";const $=[{title:"租户编号",dataIndex:"id",width:100},{title:"租户名",dataIndex:"name",width:180},{title:"租户套餐",dataIndex:"packageId",width:100},{title:"联系人",dataIndex:"contactName",width:120},{title:"联系手机",dataIndex:"contactMobile",width:120},{title:"账号额度",dataIndex:"accountCount",width:120,customRender:({text:e})=>r.renderTag(e)},{title:"过期时间",dataIndex:"expireTime",width:180,customRender:({text:e})=>r.renderDate(e)},{title:"绑定域名",dataIndex:"domain",width:200},{title:"租户状态",dataIndex:"status",width:180,customRender:({text:e})=>r.renderDict(e,i.COMMON_STATUS)},{title:"备注",dataIndex:"remark",width:180},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>r.renderDate(e)}],E=[{label:"租户名",field:"name",component:"Input",colProps:{span:8}},{label:"联系人",field:"contactName",component:"Input",colProps:{span:8}},{label:"联系手机",field:"contactMobile",component:"Input",colProps:{span:8}},{label:"状态",field:"status",component:"Select",componentProps:{options:d(i.COMMON_STATUS)},colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],O=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"租户名",field:"name",required:!0,component:"Input"},{label:"租户套餐",field:"packageId",required:!0,component:"ApiSelect",componentProps:{api:()=>_(),labelField:"name",valueField:"id"}},{label:"联系人",field:"contactName",required:!0,component:"Input"},{label:"联系手机",field:"contactMobile",component:"Input"},{label:"用户名称",field:"username",component:"Input",ifShow:({values:e})=>!e.id},{label:"用户密码",field:"password",component:"InputPassword",ifShow:({values:e})=>!e.id},{label:"账号额度",field:"accountCount",required:!0,component:"InputNumber"},{label:"过期时间",field:"expireTime",required:!0,component:"DatePicker",componentProps:{showTime:!0}},{label:"绑定域名",field:"domain",required:!0,component:"Input"},{label:"租户状态",field:"status",component:"Select",defaultValue:0,componentProps:{options:d(i.COMMON_STATUS)}}];function G(e){return a.get({url:"/system/tenant/page",params:e})}function D(e){return a.get({url:"/system/tenant/get?id="+e})}function N(e){return a.post({url:"/system/tenant/create",data:e})}function F(e){return a.put({url:"/system/tenant/update",data:e})}function W(e){return a.delete({url:"/system/tenant/delete?id="+e})}function Y(e){return a.download({url:"/system/tenant/export-excel",params:e},"租户.xls")}const q=c({name:"SystemTenantModal"}),j=c({...q,emits:["success","register"],setup(e,{emit:u}){const o=M(!0),[p,{setFieldsValue:m,resetFields:f,validate:g}]=x({labelWidth:120,baseColProps:{span:24},schemas:O,showActionButtonGroup:!1,actionColOptions:{span:23}}),[I,{setModalProps:s,closeModal:b}]=h(async t=>{if(f(),s({confirmLoading:!1}),o.value=!!t?.isUpdate,n(o)){const l=await D(t.record.id);m({...l})}});async function w(){try{const t=await g();s({confirmLoading:!0}),n(o)?await F(t):await N(t),b(),u("success")}finally{s({confirmLoading:!1})}}return(t,l)=>(S(),y(n(T),k(t.$attrs,{onRegister:n(I),title:o.value?"编辑":"新增",onOk:w}),{default:C(()=>[R(n(P),{onRegister:n(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{j as _,$ as c,W as d,Y as e,G as g,E as s};
