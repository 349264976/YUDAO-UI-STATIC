import{P as b}from"./index-341544d4.js";import{bD as L,a as z,cQ as k,T as $,H as w,J as B,K as N,o as t,c as i,w as a,k as q,b as d,ad as n,u as e,e as c,f as _,F as f,r as g,af as D,dt as F,l as M,N as V}from"./index-185fe65d.js";import{C as H}from"./index-bb610c0a.js";import"./index-ed8d3e4e.js";import"./index-e80a262d.js";import{L as v}from"./index-0bc01b89.js";import{I as O}from"./index-3ea574b4.js";import{f as T}from"./index-48618be6.js";import"./index-a2353b1b.js";import"./index-a331c47c.js";import"./useSize-536e554d.js";import"./eagerComputed-625aaa6f.js";import"./useWindowSizeFn-513fc031.js";import"./useContentViewHeight-f2cd4d02.js";import"./ArrowLeftOutlined-b0e96cce.js";import"./index-1091f5b3.js";import"./transButton-4d2a5fee.js";import"./index-109393d4.js";import"./useRefs-d524c1a2.js";function A(x){return L.get({url:"/mp/free-publish/page",params:x})}const E=z({__name:"index",setup(x){const y=v.Item,C=k.Option,{prefixCls:r}=$("list-card"),{createMessage:P}=M(),p=w([]),u=w(),s=B({accountId:null,total:0,currentPage:1,queryParamsSize:20});async function S(){const o=await T();u.value=o,u.value.length>0&&(s.accountId=u.value[0].id),await m()}async function m(){if(!s.accountId)return P.error("未选中公众号，无法查询已发表图文!"),!1;const o=await A(s);p.value=o.list,s.total=o.total}return N(async()=>{await S()}),(o,J)=>(t(),i(e(b),{class:n(e(r)),title:"公众号图文"},{headerContent:a(()=>[q(" 请选择公众号 "),d("div",{class:n(`${e(r)}__link`)},[c(e(k),{value:s.accountId,style:{width:"200px"},onChange:m},{default:a(()=>[(t(!0),_(f,null,g(u.value,l=>(t(),i(e(C),{label:l.name,value:parseInt(l.id),key:parseInt(l.id)},null,8,["label","value"]))),128))]),_:1},8,["value"])],2)]),default:a(()=>[d("div",{class:n(`${e(r)}__content`)},[c(e(v),{grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:6,xxl:3,xxxl:2},"data-source":p.value},{default:a(()=>[(t(!0),_(f,null,g(p.value,l=>(t(),i(e(y),{key:l.title},{default:a(()=>[c(e(H),{hoverable:!0,class:n(`${e(r)}__card`)},{default:a(()=>[c(e(v),null,{default:a(()=>[(t(!0),_(f,null,g(l.content.newsItem,(I,h)=>(t(),i(e(y),{key:h},{default:a(()=>[(t(),i(e(O),{src:I.picUrl,key:h},null,8,["src"])),d("div",{class:n(`${e(r)}__card-title`)},D(I.title),3),d("div",{class:n(`${e(r)}__card-detail`)},null,2)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1},8,["data-source"]),c(e(F),{showLessItems:"",size:"small",pageSize:s.queryParamsSize,total:s.total,onChange:m},null,8,["pageSize","total"])],2)]),_:1},8,["class"]))}});const ce=V(E,[["__scopeId","data-v-d0867358"]]);export{ce as default};
