import{n as t,aa as L,a as Z,bq as S,c as K,b as ee,bl as te,aR as ae,u as ne,z as g,B as se,f as le,k as e,s as re,o as N,h as oe,D as $,E,w as s,j as ie,l as ce,v as i,t as p,N as f,i as T,q as j,bu as ue,F as de,x as fe,bv as me}from"./index-8b526734.js";import{C as pe}from"./index-d2d20fb4.js";import{F as B}from"./index-03ea37ad.js";import"./index-3e87b811.js";import{D}from"./index-c8168e27.js";import{_ as ge}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-671f13b1.js";import{u as ye,a as ve,b as be,L as y}from"./useLogin-ae32d63a.js";import{V as he}from"./index-9bbd8b07.js";import{g as xe}from"./login-80d7827e.js";import{R}from"./index-9e517d44.js";import{C as v}from"./index-42686290.js";import{G as we}from"./GithubFilled-4468bf92.js";var _e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M308.6 545.7c-19.8 2-57.1 10.7-77.4 28.6-61 53-24.5 150 99 150 71.8 0 143.5-45.7 199.8-119-80.2-38.9-148.1-66.8-221.4-59.6zm460.5 67c100.1 33.4 154.7 43 166.7 44.8A445.9 445.9 0 00960 512c0-247.4-200.6-448-448-448S64 264.6 64 512s200.6 448 448 448c155.9 0 293.2-79.7 373.5-200.5-75.6-29.8-213.6-85-286.8-120.1-69.9 85.7-160.1 137.8-253.7 137.8-158.4 0-212.1-138.1-137.2-229 16.3-19.8 44.2-38.7 87.3-49.4 67.5-16.5 175 10.3 275.7 43.4 18.1-33.3 33.4-69.9 44.7-108.9H305.1V402h160v-56.2H271.3v-31.3h193.8v-80.1s0-13.5 13.7-13.5H557v93.6h191.7v31.3H557.1V402h156.4c-15 61.1-37.7 117.4-66.2 166.8 47.5 17.1 90.1 33.3 121.8 43.9z"}}]},name:"alipay-circle",theme:"filled"};const Se=_e;function V(o){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},n=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),n.forEach(function(c){Ce(o,c,l[c])})}return o}function Ce(o,a,l){return a in o?Object.defineProperty(o,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[a]=l,o}var C=function(a,l){var n=V({},a,l.attrs);return t(L,V({},n,{icon:Se}),null)};C.displayName="AlipayCircleFilled";C.inheritAttrs=!1;const Fe=C;var ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M690.1 377.4c5.9 0 11.8.2 17.6.5-24.4-128.7-158.3-227.1-319.9-227.1C209 150.8 64 271.4 64 420.2c0 81.1 43.6 154.2 111.9 203.6a21.5 21.5 0 019.1 17.6c0 2.4-.5 4.6-1.1 6.9-5.5 20.3-14.2 52.8-14.6 54.3-.7 2.6-1.7 5.2-1.7 7.9 0 5.9 4.8 10.8 10.8 10.8 2.3 0 4.2-.9 6.2-2l70.9-40.9c5.3-3.1 11-5 17.2-5 3.2 0 6.4.5 9.5 1.4 33.1 9.5 68.8 14.8 105.7 14.8 6 0 11.9-.1 17.8-.4-7.1-21-10.9-43.1-10.9-66 0-135.8 132.2-245.8 295.3-245.8zm-194.3-86.5c23.8 0 43.2 19.3 43.2 43.1s-19.3 43.1-43.2 43.1c-23.8 0-43.2-19.3-43.2-43.1s19.4-43.1 43.2-43.1zm-215.9 86.2c-23.8 0-43.2-19.3-43.2-43.1s19.3-43.1 43.2-43.1 43.2 19.3 43.2 43.1-19.4 43.1-43.2 43.1zm586.8 415.6c56.9-41.2 93.2-102 93.2-169.7 0-124-120.8-224.5-269.9-224.5-149 0-269.9 100.5-269.9 224.5S540.9 847.5 690 847.5c30.8 0 60.6-4.4 88.1-12.3 2.6-.8 5.2-1.2 7.9-1.2 5.2 0 9.9 1.6 14.3 4.1l59.1 34c1.7 1 3.3 1.7 5.2 1.7a9 9 0 006.4-2.6 9 9 0 002.6-6.4c0-2.2-.9-4.4-1.4-6.6-.3-1.2-7.6-28.3-12.2-45.3-.5-1.9-.9-3.8-.9-5.7.1-5.9 3.1-11.2 7.6-14.5zM600.2 587.2c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c0 19.8-16.2 35.9-36 35.9zm179.9 0c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9a36.08 36.08 0 01-36 35.9z"}}]},name:"wechat",theme:"filled"};const Oe=ke;function A(o){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},n=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),n.forEach(function(c){ze(o,c,l[c])})}return o}function ze(o,a,l){return a in o?Object.defineProperty(o,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[a]=l,o}var F=function(a,l){var n=A({},a,l.attrs);return t(L,A({},n,{icon:Oe}),null)};F.displayName="WechatFilled";F.inheritAttrs=!1;const Ie=F,Me=Z({__name:"LoginForm",setup(o){const a=B.Item,l=S.Password,{t:n}=K(),{notification:c,createErrorModal:M}=fe(),{prefixCls:x}=ee("login"),W=te(),G=ae(),{tenantEnable:k,captchaEnable:U}=ne(),{setLoginState:b,getLoginState:q}=ye(),{getFormRules:H}=ve(),O=g(),w=g(!1),z=g(!1),I=g(),Q=g("blockPuzzle"),d=se({tenantName:"ËäãÈÅìÊ∫êÁ†Å",username:"admin",password:"admin123",captchaVerification:""}),{validForm:J}=be(O),P=le(()=>e(q)===y.LOGIN);async function X(){U==="false"?await _({}):I.value.show()}async function Y(){if(k==="true"){const h=await xe(d.tenantName);me(h)}}async function _(h){await Y();const r=await J();if(r)try{w.value=!0;const m=await W.login({password:r.password,username:r.username,captchaVerification:h.captchaVerification,mode:"none"});m&&(await G.changePermissionCode(m.permissions),c.success({message:n("sys.login.loginSuccessTitle"),description:`${n("sys.login.loginSuccessDesc")}: ${m.user.nickname}`,duration:3}))}catch(m){M({title:n("sys.api.errorTip"),content:m.message||n("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${x}`)||document.body})}finally{w.value=!1}}return(h,r)=>{const m=re("a-button");return N(),oe(de,null,[$(t(ge,{class:"enter-x"},null,512),[[E,P.value]]),$(t(e(B),{class:"p-4 enter-x",model:d,rules:e(H),ref_key:"formRef",ref:O,onKeypress:ue(_,["enter"])},{default:s(()=>[t(e(a),{name:"tenantName",class:"enter-x"},{default:s(()=>[e(k)==="true"?(N(),ie(e(S),{key:0,size:"large",value:d.tenantName,"onUpdate:value":r[0]||(r[0]=u=>d.tenantName=u),placeholder:e(n)("sys.login.tenantName"),class:"fix-auto-fill"},null,8,["value","placeholder"])):ce("",!0)]),_:1}),t(e(a),{name:"username",class:"enter-x"},{default:s(()=>[t(e(S),{size:"large",value:d.username,"onUpdate:value":r[1]||(r[1]=u=>d.username=u),placeholder:e(n)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),t(e(a),{name:"password",class:"enter-x"},{default:s(()=>[t(e(l),{size:"large",visibilityToggle:"",value:d.password,"onUpdate:value":r[2]||(r[2]=u=>d.password=u),placeholder:e(n)("sys.login.password"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),t(e(R),{class:"enter-x"},{default:s(()=>[t(e(v),{span:12},{default:s(()=>[t(e(a),null,{default:s(()=>[t(e(pe),{checked:z.value,"onUpdate:checked":r[3]||(r[3]=u=>z.value=u),size:"small"},{default:s(()=>[i(p(e(n)("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),t(e(v),{span:12},{default:s(()=>[t(e(a),{style:{"text-align":"right"}},{default:s(()=>[t(e(f),{type:"link",size:"small",onClick:r[4]||(r[4]=u=>e(b)(e(y).RESET_PASSWORD))},{default:s(()=>[i(p(e(n)("sys.login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(e(a),{class:"enter-x"},{default:s(()=>[t(e(f),{type:"primary",size:"large",block:"",onClick:X,loading:w.value},{default:s(()=>[i(p(e(n)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1}),t(e(R),{class:"enter-x"},{default:s(()=>[t(e(v),{md:8,xs:24},{default:s(()=>[t(e(f),{block:"",onClick:r[5]||(r[5]=u=>e(b)(e(y).MOBILE))},{default:s(()=>[i(p(e(n)("sys.login.mobileSignInFormTitle")),1)]),_:1})]),_:1}),t(e(v),{md:8,xs:24,class:"!my-2 !md:my-0 xs:mx-0 md:mx-2"},{default:s(()=>[t(e(f),{block:"",onClick:r[6]||(r[6]=u=>e(b)(e(y).QR_CODE))},{default:s(()=>[i(p(e(n)("sys.login.qrSignInFormTitle")),1)]),_:1})]),_:1}),t(e(v),{md:6,xs:24},{default:s(()=>[t(m,{block:"",onClick:r[7]||(r[7]=u=>e(b)(e(y).REGISTER))},{default:s(()=>[i(p(e(n)("sys.login.registerButton")),1)]),_:1})]),_:1})]),_:1}),t(e(D),{class:"enter-x"},{default:s(()=>[i(p(e(n)("sys.login.otherSignIn")),1)]),_:1}),T("div",{class:j(["flex justify-evenly enter-x",`${e(x)}-sign-in-way`])},[t(e(we)),t(e(Ie)),t(e(Fe))],2),t(e(D),{class:"enter-x"},{default:s(()=>[i("ËêåÊñ∞ÂøÖËØª")]),_:1}),T("div",{class:j(["flex justify-evenly enter-x",`${e(x)}-sign-in-way`])},[t(e(f),{href:"https://doc.iocoder.cn/",target:"_blank"},{default:s(()=>[i("üìöÂºÄÂèëÊåáÂçó")]),_:1}),t(e(f),{href:"https://doc.iocoder.cn/video/",target:"_blank",style:{"padding-left":"10px"}},{default:s(()=>[i("üî•ËßÜÈ¢ëÊïôÁ®ã")]),_:1}),t(e(f),{href:"https://www.iocoder.cn/Interview/good-collection/",target:"_blank",style:{"padding-left":"10px"}},{default:s(()=>[i("‚ö°Èù¢ËØïÊâãÂÜå")]),_:1}),t(e(f),{href:"http://static.yudao.iocoder.cn/mp/xinyu370.jpeg",target:"_blank",style:{"padding-left":"10px"}},{default:s(()=>[i("ü§ùÂ§ñÂåÖÂí®ËØ¢")]),_:1})],2)]),_:1},8,["model","rules","onKeypress"]),[[E,P.value]]),t(e(he),{ref_key:"verify",ref:I,mode:"pop",captchaType:Q.value,imgSize:{width:"400px",height:"200px"},onSuccess:_},null,8,["captchaType"])],64)}}});export{Me as _};
