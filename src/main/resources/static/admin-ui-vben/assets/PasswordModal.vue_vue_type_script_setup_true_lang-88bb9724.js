import{a as u,c as f,z as g,o as w,j as _,w as M,n as P,k as e,ag as h,x as B}from"./index-8b526734.js";import{u as b,_ as k}from"./useForm-f7dccb87.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{a as v,B as x}from"./index-40f1f97e.js";import{p as C}from"./data-6fa81be6.js";import{b as R}from"./profile-414790be.js";const j=u({name:"PasswordModal",__name:"PasswordModal",emits:["success","register"],setup(y,{emit:o}){const{t}=f(),{createMessage:r}=B(),n=g("修改密码"),[i,{resetFields:c,validate:l}]=b({labelWidth:120,baseColProps:{span:24},schemas:C,showActionButtonGroup:!1,actionColOptions:{span:23}}),[m,{setModalProps:a,closeModal:d}]=v(()=>{c(),a({confirmLoading:!1})});async function p(){try{const s=await l();await R(s.oldPassword,s.newPassword),a({confirmLoading:!0}),d(),o("success"),r.success(t("common.saveSuccessText"))}finally{a({confirmLoading:!1})}}return(s,F)=>(w(),_(e(x),h(s.$attrs,{onRegister:e(m),title:n.value,onOk:p}),{default:M(()=>[P(e(k),{onRegister:e(i)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{j as _};
