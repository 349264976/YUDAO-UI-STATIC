import{a as g,c as _,z as M,k as e,o as h,j as w,w as U,n as v,ag as y,x as B}from"./index-8b526734.js";import{u as b,_ as k}from"./useForm-f7dccb87.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{a as x,B as C}from"./index-40f1f97e.js";import{f as F}from"./user.data-cd3248bc.js";import{a as R,b as S,c as L}from"./index-2d30e53e.js";const A=g({name:"SystemUserModal",__name:"UserModal",emits:["success","register"],setup(P,{emit:n}){const{t}=_(),{createMessage:i}=B(),a=M(!0),[c,{setFieldsValue:l,resetFields:m,validate:u}]=b({labelWidth:120,baseColProps:{span:24},schemas:F,showActionButtonGroup:!1,actionColOptions:{span:23}}),[d,{setModalProps:o,closeModal:f}]=x(async s=>{if(m(),o({confirmLoading:!1}),a.value=!!s?.isUpdate,e(a)){const r=await R(s.record.id);l({...r})}});async function p(){try{const s=await u();o({confirmLoading:!0}),e(a)?await S(s):await L(s),f(),n("success"),i.success(t("common.saveSuccessText"))}finally{o({confirmLoading:!1})}}return(s,r)=>(h(),w(e(C),y(s.$attrs,{onRegister:e(d),title:a.value?e(t)("action.edit"):e(t)("action.create"),onOk:p}),{default:U(()=>[v(e(k),{onRegister:e(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{A as _};
