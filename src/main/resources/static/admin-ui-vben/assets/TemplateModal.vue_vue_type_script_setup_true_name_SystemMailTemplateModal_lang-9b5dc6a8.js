import{u as T,B as _}from"./index-b9c40b5d.js";import{u as w,a as P}from"./useForm-8fd7b992.js";import{b as c}from"./account-c14cdd1f.js";import"./index-c3c80eae.js";import{u as r}from"./useRender-7b752cf7.js";import{D as i,g as d}from"./dict-411628cd.js";import{bD as n,a as m,H as S,u as a,o as y,c as x,w as k,e as A,ag as O}from"./index-185fe65d.js";const $=[{title:"模板编码",dataIndex:"code",width:100},{title:"模板名称",dataIndex:"name",width:180},{title:"模板标题",dataIndex:"title",width:100},{title:"模板内容",dataIndex:"content",width:300},{title:"邮箱账号",dataIndex:"accountId",width:120},{title:"发送人名称",dataIndex:"nickname",width:100},{title:"开启状态",dataIndex:"status",width:180,customRender:({text:e})=>r.renderDict(e,i.COMMON_STATUS)},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>r.renderDate(e)}],E=[{label:"模板名称",field:"name",component:"Input",colProps:{span:8}},{label:"模板编码",field:"code",component:"Input",colProps:{span:8}},{label:"邮箱账号",field:"accountId",component:"ApiSelect",componentProps:{api:()=>c(),fieldNames:{label:"mail",key:"id",value:"id"}},colProps:{span:8}},{label:"开启状态",field:"status",component:"Select",componentProps:{options:d(i.COMMON_STATUS)},colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],C=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"模板名称",field:"name",required:!0,component:"Input"},{label:"模板编码",field:"code",required:!0,component:"Input"},{label:"邮箱账号",field:"accountId",required:!0,component:"ApiSelect",componentProps:{api:()=>c(),fieldNames:{label:"mail",key:"id",value:"id"}}},{label:"发送人名称",field:"nickname",required:!0,component:"Input"},{label:"模板标题",field:"title",required:!0,component:"Input"},{label:"模板内容",field:"content",component:"InputTextArea"},{label:"开启状态",field:"status",component:"Select",defaultValue:0,componentProps:{options:d(i.COMMON_STATUS)}},{label:"备注",field:"remark",component:"InputTextArea"}];function R(e){return n.post({url:"/system/mail-template/create",data:e})}function v(e){return n.put({url:"/system/mail-template/update",data:e})}function G(e){return n.delete({url:"/system/mail-template/delete?id="+e})}function D(e){return n.get({url:"/system/mail-template/get?id="+e})}function W(e){return n.get({url:"/system/mail-template/page",params:e})}function Y(e){return n.post({url:"/system/mail-template/send-mail",data:e})}const N=m({name:"SystemMailTemplateModal"}),j=m({...N,emits:["success","register"],setup(e,{emit:p}){const l=S(!0),[u,{setFieldsValue:f,resetFields:g,validate:I}]=w({labelWidth:120,baseColProps:{span:24},schemas:C,showActionButtonGroup:!1,actionColOptions:{span:23}}),[b,{setModalProps:o,closeModal:M}]=T(async t=>{if(g(),o({confirmLoading:!1}),l.value=!!t?.isUpdate,a(l)){const s=await D(t.record.id);f({...s})}});async function h(){try{const t=await I();o({confirmLoading:!0}),a(l)?await v(t):await R(t),M(),p("success")}finally{o({confirmLoading:!1})}}return(t,s)=>(y(),x(a(_),O(t.$attrs,{onRegister:a(b),title:l.value?"编辑":"新增",onOk:h}),{default:k(()=>[A(a(P),{onRegister:a(u)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{j as _,Y as a,$ as c,G as d,W as g,E as s};
