import{cm as a,a as w,c as x,z as _,k as t,o as C,j as P,w as y,n as k,ag as R,x as v}from"./index-8b526734.js";import{u as F,_ as M}from"./useForm-f7dccb87.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{a as T,B}from"./index-40f1f97e.js";import"./index-ec19b8e7.js";import"./index-d2d20fb4.js";import"./tree-e6981725.js";import"./index-03ea37ad.js";import"./index-3e87b811.js";import"./index-c8168e27.js";import"./sortable.esm-f208c0d8.js";import{u as s}from"./useRender-f65ba3eb.js";import{D as c,g as D}from"./dict-5cefafd8.js";const K=[{title:"参数主键",dataIndex:"id",width:100},{title:"参数分类",dataIndex:"category",width:180},{title:"参数名称",dataIndex:"name",width:100},{title:"参数键名",dataIndex:"key",width:120},{title:"参数键值",dataIndex:"value",width:120},{title:"系统内置",dataIndex:"type",width:180,customRender:({text:e})=>s.renderDict(e,c.INFRA_CONFIG_TYPE)},{title:"是否可见",dataIndex:"visible",width:180,customRender:({text:e})=>s.renderTag(e?"是":"否")},{title:"备注",dataIndex:"remark",width:180},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>s.renderDate(e)}],Q=[{label:"参数名称",field:"name",component:"Input",colProps:{span:8}},{label:"参数键名",field:"key",component:"Input",colProps:{span:8}},{label:"系统内置",field:"type",component:"Select",componentProps:{options:D(c.INFRA_CONFIG_TYPE)},colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],N=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"参数分类",field:"category",required:!0,component:"Input"},{label:"参数名称",field:"name",required:!0,component:"Input"},{label:"参数键名",field:"key",required:!0,component:"Input"},{label:"参数键值",field:"value",required:!0,component:"Input"},{label:"是否可见",field:"visible",component:"RadioGroup",componentProps:{options:[{key:!0,label:"是",value:!0},{key:!1,label:"否",value:!1}]}},{label:"备注",field:"remark",component:"InputTextArea"}];function X(e){return a.get({url:"/infra/config/page",params:e})}function O(e){return a.get({url:"/infra/config/get?id="+e})}function S(e){return a.post({url:"/infra/config/create",data:e})}function q(e){return a.put({url:"/infra/config/update",data:e})}function Z(e){return a.delete({url:"/infra/config/delete?id="+e})}function ee(e){return a.download({url:"/infra/config/export",params:e},"参数.xls")}const te=w({name:"InfraConfigModal",__name:"ConfigModal",emits:["success","register"],setup(e,{emit:d}){const{t:r}=x(),{createMessage:u}=v(),o=_(!0),[p,{setFieldsValue:f,resetFields:m,validate:g}]=F({labelWidth:120,baseColProps:{span:24},schemas:N,showActionButtonGroup:!1,actionColOptions:{span:23}}),[I,{setModalProps:i,closeModal:h}]=T(async n=>{if(m(),i({confirmLoading:!1}),o.value=!!n?.isUpdate,t(o)){const l=await O(n.record.id);f({...l})}});async function b(){try{const n=await g();i({confirmLoading:!0}),t(o)?await q(n):await S(n),h(),d("success"),u.success(r("common.saveSuccessText"))}finally{i({confirmLoading:!1})}}return(n,l)=>(C(),P(t(B),R(n.$attrs,{onRegister:t(I),title:o.value?t(r)("action.edit"):t(r)("action.create"),onOk:b}),{default:y(()=>[k(t(M),{onRegister:t(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{te as _,K as c,Z as d,ee as e,X as g,Q as s};
