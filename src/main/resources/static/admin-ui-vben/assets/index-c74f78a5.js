import{a as C,i as A,j as B,bc as N,o as m,f as L,e as l,w as p,L as h,c,u as e,I as i,k as y,af as b,h as O,l as P}from"./index-185fe65d.js";import{a as u}from"./index-b9c40b5d.js";import{_ as U}from"./RoleModal.vue_vue_type_script_setup_true_name_SystemRoleModal_lang-1c8ed28c.js";import{_ as j}from"./RoleMenuModal.vue_vue_type_script_setup_true_name_SystemRoleMenuModal_lang-7c9cb2f8.js";import{_ as W}from"./RoleScopeModal.vue_vue_type_script_setup_true_name_SystemRoleScopeModal_lang-4d303fef.js";import{_ as X}from"./index-c3c80eae.js";import{_ as q}from"./useForm-8fd7b992.js";import{u as z}from"./useTable-e1aa62c8.js";import"./index-3ea574b4.js";import"./index-ea6c9550.js";import{a as G,e as H,d as J}from"./index-eb41aacc.js";import{c as K,s as Q}from"./role.data-cf9350b5.js";import"./useWindowSizeFn-513fc031.js";import"./FullscreenOutlined-32991190.js";import"./index-9a79925f.js";import"./fromPairs-e099444b.js";import"./tree-1cdc2dee.js";import"./eagerComputed-625aaa6f.js";import"./index-69b45e12.js";import"./get-99b39cda.js";import"./index-17b3345e.js";import"./index-759b4bfb.js";import"./index-1fa4f246.js";import"./index-a51ee13a.js";import"./index-341544d4.js";import"./index-a2353b1b.js";import"./index-a331c47c.js";import"./useSize-536e554d.js";import"./useContentViewHeight-f2cd4d02.js";import"./ArrowLeftOutlined-b0e96cce.js";import"./index-1091f5b3.js";import"./transButton-4d2a5fee.js";import"./index-726b028f.js";import"./index-55063501.js";import"./sortable.esm-261924ea.js";import"./RedoOutlined-4bac5e59.js";import"./index-ad77ec72.js";import"./index-273d53fa.js";import"./index-e80a262d.js";import"./_baseIteratee-ef666e06.js";import"./scrollTo-360190e5.js";import"./index-0e02bec4.js";import"./index-55aee596.js";import"./dict-411628cd.js";import"./index-4d2a3b0b.js";import"./useRefs-d524c1a2.js";import"./index-e8479e4b.js";import"./index-109393d4.js";import"./uniqBy-074073a7.js";import"./useRender-7b752cf7.js";import"./systemEnum-97385b69.js";const Y=C({name:"SystemRole"}),Qe=C({...Y,setup(Z){const{t:o}=A(),{createConfirm:M,createMessage:d}=P(),[x,{openModal:f}]=u(),[D,{openModal:R}]=u(),[S,{openModal:T}]=u(),[k,{getForm:w,reload:r}]=z({title:"角色列表",api:G,columns:K,formConfig:{labelWidth:120,schemas:Q},useSearchForm:!0,showTableSetting:!0,showIndexColumn:!1,actionColumn:{width:140,title:o("common.action"),dataIndex:"action",fixed:"right"}});function I(){f(!0,{isUpdate:!1})}function E(t){f(!0,{record:t,isUpdate:!0})}function v(t){R(!0,{record:t})}function $(t){T(!0,{record:t})}async function F(){M({title:o("common.exportTitle"),iconType:"warning",content:o("common.exportMessage"),async onOk(){await H(w().getFieldsValue()),d.success(o("common.exportSuccessText"))}})}async function V(t){await J(t.id),d.success(o("common.delSuccessText")),r()}return(t,n)=>{const g=B("a-button"),_=N("auth");return m(),L("div",null,[l(e(X),{onRegister:e(k)},{toolbar:p(()=>[h((m(),c(g,{type:"primary",preIcon:e(i).ADD,onClick:I},{default:p(()=>[y(b(e(o)("action.create")),1)]),_:1},8,["preIcon"])),[[_,["system:role:create"]]]),h((m(),c(g,{type:"warning",preIcon:e(i).EXPORT,onClick:F},{default:p(()=>[y(b(e(o)("action.export")),1)]),_:1},8,["preIcon"])),[[_,["system:role:create"]]])]),bodyCell:p(({column:s,record:a})=>[s.key==="action"?(m(),c(e(q),{key:0,actions:[{icon:e(i).EDIT,label:e(o)("action.edit"),auth:"system:role:update",onClick:E.bind(null,a)}],dropDownActions:[{icon:e(i).EDIT,label:"菜单权限",auth:"system:permission:assign-role-menu",onClick:v.bind(null,a)},{icon:e(i).EDIT,label:"数据权限",auth:"system:permission:assign-role-data-scope",onClick:$.bind(null,a)},{icon:e(i).DELETE,color:"error",label:e(o)("action.delete"),auth:"system:role:delete",popConfirm:{title:e(o)("common.delMessage"),placement:"left",confirm:V.bind(null,a)}}]},null,8,["actions","dropDownActions"])):O("",!0)]),_:1},8,["onRegister"]),l(U,{onRegister:e(x),onSuccess:n[0]||(n[0]=s=>e(r)())},null,8,["onRegister"]),l(j,{onRegister:e(D),onSuccess:n[1]||(n[1]=s=>e(r)())},null,8,["onRegister"]),l(W,{onRegister:e(S),onSuccess:n[2]||(n[2]=s=>e(r)())},null,8,["onRegister"])])}}});export{Qe as default};
