import{u as T,_ as g}from"./useTable-33ec4cfa.js";import"./index-ec19b8e7.js";import"./BasicForm.vue_vue_type_style_index_0_lang-42e5fba8.js";import{cm as m,a as f,c as h,s as x,H as E,o as s,h as I,n as b,w as i,D as w,j as P,k as n,I as D,v as M,t as C,x as R}from"./index-8b526734.js";import"./index-7aea77c8.js";import"./index-8629d074.js";import{b as y}from"./index-aa18a34f.js";import"./index-d2d20fb4.js";import"./tree-e6981725.js";import"./index-03ea37ad.js";import"./index-3e87b811.js";import"./index-c8168e27.js";import"./index-40f1f97e.js";import"./sortable.esm-f208c0d8.js";import{u as o}from"./useRender-f65ba3eb.js";import{D as r,g as a}from"./dict-5cefafd8.js";import"./useForm-f7dccb87.js";import"./_stringToArray-c38191b3.js";import"./index-42686290.js";import"./get-11175361.js";import"./uniqBy-f83999c6.js";import"./_baseIteratee-625e56a9.js";import"./index-9e517d44.js";import"./useWindowSizeFn-38cd0f6d.js";import"./onMountedOrActivated-13e9417a.js";import"./RedoOutlined-fa24e892.js";import"./FullscreenOutlined-8b988545.js";import"./index-50e4b4b2.js";import"./index-8e6d9858.js";import"./eagerComputed-6290a54f.js";import"./index-081b541d.js";import"./fromPairs-e099444b.js";import"./scrollTo-67205127.js";import"./index-fb15648b.js";import"./index-47ca6c32.js";import"./useRefs-872c0ad6.js";import"./index-c8286d7f.js";import"./useSize-5af631ed.js";function v(e){return m.get({url:"/system/sms-log/page",params:e})}function k(e){return m.download({url:"/system/sms-log/export",params:e},"短信日志.xls")}const Y=[{title:"日志编号",dataIndex:"id",width:100},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>o.renderDate(e)},{title:"手机号",dataIndex:"mobile",width:180,customRender:({text:e,record:t})=>t.userType&&t.userId?o.renderDict(t.userType,r.USER_TYPE)+"record.userId":e},{title:"短信内容",dataIndex:"templateContent",width:300},{title:"发送状态",dataIndex:"sendStatus",width:180,customRender:({text:e})=>o.renderDict(e,r.SYSTEM_SMS_SEND_STATUS)},{title:"接收状态",dataIndex:"receiveStatus",width:180,customRender:({text:e})=>o.renderDict(e,r.SYSTEM_SMS_RECEIVE_STATUS)},{title:"短信渠道",dataIndex:"channelCode",width:180,customRender:({text:e,record:t})=>o.renderText(t.channelId,"")||""+o.renderDict(e,r.SYSTEM_SMS_CHANNEL_CODE)||""},{title:"模板编号",dataIndex:"templateId",width:120},{title:"短信类型",dataIndex:"templateType",width:180,customRender:({text:e})=>o.renderDict(e,r.SYSTEM_SMS_TEMPLATE_TYPE)}],A=[{label:"手机号",field:"mobile",component:"Input",colProps:{span:8}},{label:"短信渠道",field:"channelId",component:"ApiSelect",componentProps:{api:y,fieldNames:{label:"signature",key:"id",value:"id"}},colProps:{span:8}},{label:"模板编号",field:"templateId",component:"Input",colProps:{span:8}},{label:"发送状态",field:"sendStatus",component:"Select",componentProps:{options:a(r.SYSTEM_SMS_SEND_STATUS)},colProps:{span:8}},{label:"发送时间",field:"sendTime",component:"RangePicker",colProps:{span:8}},{label:"接收状态",field:"receiveStatus",component:"Select",componentProps:{options:a(r.SYSTEM_SMS_RECEIVE_STATUS)},colProps:{span:8}},{label:"接收时间",field:"receiveTime",component:"RangePicker",colProps:{span:8}}],Ee=f({name:"SystemSmsLog",__name:"index",setup(e){const{t}=h(),{createConfirm:p,createMessage:c}=R(),[l,{getForm:d}]=T({title:"短信日志列表",api:v,columns:Y,formConfig:{labelWidth:120,schemas:A},useSearchForm:!0,showTableSetting:!0,showIndexColumn:!1});async function u(){p({title:t("common.exportTitle"),iconType:"warning",content:t("common.exportMessage"),async onOk(){await k(d().getFieldsValue()),c.success(t("common.exportSuccessText"))}})}return(N,L)=>{const S=x("a-button"),_=E("auth");return s(),I("div",null,[b(n(g),{onRegister:n(l)},{toolbar:i(()=>[w((s(),P(S,{type:"warning",preIcon:n(D).EXPORT,onClick:u},{default:i(()=>[M(C(n(t)("action.export")),1)]),_:1},8,["preIcon"])),[[_,["system:sms-log:export"]]])]),_:1},8,["onRegister"])])}}});export{Ee as default};
